/*!
 * v0.19.11 (c) 2018
 *
 * Includes:
 * - http://npm.im/bowser
 * - http://npm.im/camelcase
 * - http://npm.im/classlist
 * - http://npm.im/delay
 * - http://npm.im/es6-error
 * - http://npm.im/event-target-shim
 * - http://npm.im/iab-vast-loader
 * - http://npm.im/json-stringify-safe
 * - http://npm.im/p-defer
 * - http://npm.im/p-finally
 * - http://npm.im/promise-queue
 * - http://npm.im/protochain
 * - http://npm.im/querystring
 * - http://npm.im/raf
 * - http://npm.im/rx.disposables
 * - http://npm.im/serialize-error
 * - http://npm.im/upper-case-first
 */
!function(){function t(t,e){return t(e={exports:{}},e.exports),e.exports}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1;r.configurable=!0;"value"in r&&(r.writable=!0);Object.defineProperty(t,r.key,r)}}function n(t,n,r){n&&e(t.prototype,n);r&&e(t,r);return t}function r(t,e){t.prototype=Object.create(e.prototype);t.prototype.constructor=t;t.__proto__=e}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function o(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t;n=r});this.resolve=N(e);this.reject=N(n)}function s(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function u(t){return null==t?null:Object.getPrototypeOf(Object(t))}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}Function.prototype.$asyncbind=function t(e,n){"use strict";function r(){return i.apply(e,arguments)}Function.prototype.$asyncbind||Object.defineProperty(Function.prototype,"$asyncbind",{value:t,enumerable:!1,configurable:!0,writable:!0});t.trampoline||(t.trampoline=function(t,e,n,r,i){return function o(s){for(;s;){if(s.then){s=s.then(o,r);return i?void 0:s}try{if(s.pop){if(s.length)return s.pop()?e.call(t):s;s=n}else s=s.call(t)}catch(t){return r(t)}}}});if(!t.LazyThenable){t.LazyThenable=function(){function t(t){return t&&t instanceof Object&&"function"==typeof t.then}function e(n,r,i){try{var o=i?i(r):r;if(n===o)return n.reject(new TypeError("Promise resolution loop"));t(o)?o.then(function(t){e(n,t)},function(t){n.reject(t)}):n.resolve(o)}catch(t){n.reject(t)}}function n(t){}function r(){}function i(n,i){var o=new r;try{this._resolver(function(r){return t(r)?r.then(n,i):e(o,r,n)},function(t){e(o,t,i)})}catch(t){e(o,t,i)}return o}function o(t){this._resolver=t;this.then=i}r.prototype={resolve:n,reject:n,then:function(t,e){this.resolve=t;this.reject=e}};o.resolve=function(t){return o.isThenable(t)?t:{then:function(e){return e(t)}}};o.isThenable=t;return o}();t.EagerThenable=t.Thenable=(t.EagerThenableFactory=function(t){function e(t){if(t){var e=this;t(function(t){e.resolve(t)},function(t){e.reject(t)})}}function n(t,e){if("function"==typeof t.y)try{var n=t.y.call(void 0,e);t.p.resolve(n)}catch(e){t.p.reject(e)}else t.p.resolve(e)}function r(t,e){if("function"==typeof t.n)try{var n=t.n.call(void 0,e);t.p.resolve(n)}catch(e){t.p.reject(e)}else t.p.reject(e)}t=t||"object"==typeof we&&we.nextTick||"function"==typeof setImmediate&&setImmediate||function(t){setTimeout(t,0)};var i=function(){function e(){for(;n.length-r;){try{n[r]()}catch(t){}n[r++]=void 0;if(r===i){n.splice(0,i);r=0}}}var n=[],r=0,i=1024;return function(i){n.push(i);n.length-r==1&&t(e)}}();e.prototype={resolve:function(t){if(void 0===this.state){if(t===this)return this.reject(new TypeError("Attempt to resolve promise with self"));var e=this;if(t&&("function"==typeof t||"object"==typeof t))try{var r=0,o=t.then;if("function"==typeof o){o.call(t,function(t){r++||e.resolve(t)},function(t){r++||e.reject(t)});return}}catch(t){r||this.reject(t);return}this.state=n;this.v=t;e.c&&i(function(){for(var r=0,i=e.c.length;r<i;r++)n(e.c[r],t)})}},reject:function(t){if(void 0===this.state){this.state=r;this.v=t;var e=this.c;e&&i(function(){for(var n=0,i=e.length;n<i;n++)r(e[n],t)})}},then:function(t,n){var r=new e,o={y:t,n:n,p:r};if(void 0===this.state)this.c?this.c.push(o):this.c=[o];else{var s=this.state,u=this.v;i(function(){s(o,u)})}return r}};e.resolve=function(t){if(t&&t instanceof e)return t;var n=new e;n.resolve(t);return n};e.reject=function(t){if(t&&t instanceof e)return t;var n=new e;n.reject(t);return n};e.version="2.3.3-nodent";return e})()}var i=this;switch(n){case!0:return new t.Thenable(r);case 0:return new t.LazyThenable(r);case void 0:r.then=r;return r;default:return function(){try{return i.apply(e,arguments)}catch(t){return n(t)}}}};var c="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},l=t(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),f=t(function(t){var e=t.exports={version:"2.5.7"};"number"==typeof __e&&(__e=e)}),d=(f.version,function(t){return"object"==typeof t?null!==t:"function"==typeof t}),h=function(t){if(!d(t))throw TypeError(t+" is not an object!");return t},p=function(t){try{return!!t()}catch(t){return!0}},m=!p(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),v=l.document,g=d(v)&&d(v.createElement),y=function(t){return g?v.createElement(t):{}},b=!m&&!p(function(){return 7!=Object.defineProperty(y("div"),"a",{get:function(){return 7}}).a}),_=function(t,e){if(!d(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!d(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!d(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!d(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},w=Object.defineProperty,S={f:m?Object.defineProperty:function(t,e,n){h(t);e=_(e,!0);h(n);if(b)try{return w(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");"value"in n&&(t[e]=n.value);return t}},A=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},E=m?function(t,e,n){return S.f(t,e,A(1,n))}:function(t,e,n){t[e]=n;return t},I={}.hasOwnProperty,k=function(t,e){return I.call(t,e)},P=0,O=Math.random(),C=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++P+O).toString(36))},T=t(function(t){var e=C("src"),n=Function.toString,r=(""+n).split("toString");f.inspectSource=function(t){return n.call(t)};(t.exports=function(t,n,i,o){var s="function"==typeof i;s&&(k(i,"name")||E(i,"name",n));if(t[n]!==i){s&&(k(i,e)||E(i,e,t[n]?""+t[n]:r.join(String(n))));if(t===l)t[n]=i;else if(o)t[n]?t[n]=i:E(t,n,i);else{delete t[n];E(t,n,i)}}})(Function.prototype,"toString",function(){return"function"==typeof this&&this[e]||n.call(this)})}),N=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},D=function(t,e,n){N(t);if(void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}},j=function(t,e,n){var r,i,o,s,u=t&j.F,a=t&j.G,c=t&j.S,d=t&j.P,h=t&j.B,p=a?l:c?l[e]||(l[e]={}):(l[e]||{}).prototype,m=a?f:f[e]||(f[e]={}),v=m.prototype||(m.prototype={});a&&(n=e);for(r in n){o=((i=!u&&p&&void 0!==p[r])?p:n)[r];s=h&&i?D(o,l):d&&"function"==typeof o?D(Function.call,o):o;p&&T(p,r,o,t&j.U);m[r]!=o&&E(m,r,s);d&&v[r]!=o&&(v[r]=o)}};l.core=f;j.F=1;j.G=2;j.S=4;j.P=8;j.B=16;j.W=32;j.U=64;j.R=128;var M=j,x={}.toString,R=function(t){return x.call(t).slice(8,-1)},L=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==R(t)?t.split(""):Object(t)},V=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},F=function(t){return L(V(t))},U=Math.ceil,G=Math.floor,W=function(t){return isNaN(t=+t)?0:(t>0?G:U)(t)},B=Math.min,z=function(t){return t>0?B(W(t),9007199254740991):0},H=Math.max,q=Math.min,Q=t(function(t){var e=l["__core-js_shared__"]||(l["__core-js_shared__"]={});(t.exports=function(t,n){return e[t]||(e[t]=void 0!==n?n:{})})("versions",[]).push({version:f.version,mode:"global",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})}),K=Q("keys"),J=function(t){return K[t]||(K[t]=C(t))},X=function(t,e,n){for(var r=F(t),i=z(r.length),o=function(t,e){return(t=W(t))<0?H(t+e,0):q(t,e)}(n,i);i>o;o++)if(o in r&&r[o]===e)return o||0;return-1},Y=J("IE_PROTO"),Z=function(t,e){var n,r=F(t),i=0,o=[];for(n in r)n!=Y&&k(r,n)&&o.push(n);for(;e.length>i;)k(r,n=e[i++])&&(~X(o,n)||o.push(n));return o},$="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),tt=Object.keys||function(t){return Z(t,$)},et={f:Object.getOwnPropertySymbols},nt={f:{}.propertyIsEnumerable},rt=function(t){return Object(V(t))},it=Object.assign,ot=!it||p(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";t[n]=7;r.split("").forEach(function(t){e[t]=t});return 7!=it({},t)[n]||Object.keys(it({},e)).join("")!=r})?function(t,e){for(var n=rt(t),r=arguments.length,i=1,o=et.f,s=nt.f;r>i;)for(var u,a=L(arguments[i++]),c=o?tt(a).concat(o(a)):tt(a),l=c.length,f=0;l>f;)s.call(a,u=c[f++])&&(n[u]=a[u]);return n}:it;M(M.S+M.F,"Object",{assign:ot});var st=t(function(t){var e=C("meta"),n=S.f,r=0,i=Object.isExtensible||function(){return!0},o=!p(function(){return i(Object.preventExtensions({}))}),s=function(t){n(t,e,{value:{i:"O"+ ++r,w:{}}})},u=t.exports={KEY:e,NEED:!1,fastKey:function(t,n){if(!d(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!k(t,e)){if(!i(t))return"F";if(!n)return"E";s(t)}return t[e].i},getWeak:function(t,n){if(!k(t,e)){if(!i(t))return!0;if(!n)return!1;s(t)}return t[e].w},onFreeze:function(t){o&&u.NEED&&i(t)&&!k(t,e)&&s(t);return t}}}),ut=(st.KEY,st.NEED,st.fastKey,st.getWeak,st.onFreeze,t(function(t){var e=Q("wks"),n=l.Symbol,r="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=r&&n[t]||(r?n:C)("Symbol."+t))}).store=e})),at=S.f,ct=ut("toStringTag"),lt=function(t,e,n){t&&!k(t=n?t:t.prototype,ct)&&at(t,ct,{configurable:!0,value:e})},ft={f:ut},dt=S.f,ht=function(t){var e=f.Symbol||(f.Symbol=l.Symbol||{});"_"==t.charAt(0)||t in e||dt(e,t,{value:ft.f(t)})},pt=Array.isArray||function(t){return"Array"==R(t)},mt=m?Object.defineProperties:function(t,e){h(t);for(var n,r=tt(e),i=r.length,o=0;i>o;)S.f(t,n=r[o++],e[n]);return t},vt=l.document,gt=vt&&vt.documentElement,yt=J("IE_PROTO"),bt=function(){},_t=function(){var t,e=y("iframe"),n=$.length;e.style.display="none";gt.appendChild(e);e.src="javascript:";(t=e.contentWindow.document).open();t.write("<script>document.F=Object<\/script>");t.close();_t=t.F;for(;n--;)delete _t.prototype[$[n]];return _t()},wt=Object.create||function(t,e){var n;if(null!==t){bt.prototype=h(t);n=new bt;bt.prototype=null;n[yt]=t}else n=_t();return void 0===e?n:mt(n,e)},St=$.concat("length","prototype"),At={f:Object.getOwnPropertyNames||function(t){return Z(t,St)}},Et=At.f,It={}.toString,kt="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Pt={f:function(t){return kt&&"[object Window]"==It.call(t)?function(t){try{return Et(t)}catch(t){return kt.slice()}}(t):Et(F(t))}},Ot=Object.getOwnPropertyDescriptor,Ct={f:m?Ot:function(t,e){t=F(t);e=_(e,!0);if(b)try{return Ot(t,e)}catch(t){}if(k(t,e))return A(!nt.f.call(t,e),t[e])}},Tt=st.KEY,Nt=Ct.f,Dt=S.f,jt=Pt.f,Mt=l.Symbol,xt=l.JSON,Rt=xt&&xt.stringify,Lt=ut("_hidden"),Vt=ut("toPrimitive"),Ft={}.propertyIsEnumerable,Ut=Q("symbol-registry"),Gt=Q("symbols"),Wt=Q("op-symbols"),Bt=Object.prototype,zt="function"==typeof Mt,Ht=l.QObject,qt=!Ht||!Ht.prototype||!Ht.prototype.findChild,Qt=m&&p(function(){return 7!=wt(Dt({},"a",{get:function(){return Dt(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=Nt(Bt,e);r&&delete Bt[e];Dt(t,e,n);r&&t!==Bt&&Dt(Bt,e,r)}:Dt,Kt=function(t){var e=Gt[t]=wt(Mt.prototype);e._k=t;return e},Jt=zt&&"symbol"==typeof Mt.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof Mt},Xt=function(t,e,n){t===Bt&&Xt(Wt,e,n);h(t);e=_(e,!0);h(n);if(k(Gt,e)){if(n.enumerable){k(t,Lt)&&t[Lt][e]&&(t[Lt][e]=!1);n=wt(n,{enumerable:A(0,!1)})}else{k(t,Lt)||Dt(t,Lt,A(1,{}));t[Lt][e]=!0}return Qt(t,e,n)}return Dt(t,e,n)},Yt=function(t,e){h(t);for(var n,r=function(t){var e=tt(t),n=et.f;if(n)for(var r,i=n(t),o=nt.f,s=0;i.length>s;)o.call(t,r=i[s++])&&e.push(r);return e}(e=F(e)),i=0,o=r.length;o>i;)Xt(t,n=r[i++],e[n]);return t},Zt=function(t){var e=Ft.call(this,t=_(t,!0));return!(this===Bt&&k(Gt,t)&&!k(Wt,t))&&(!(e||!k(this,t)||!k(Gt,t)||k(this,Lt)&&this[Lt][t])||e)},$t=function(t,e){t=F(t);e=_(e,!0);if(t!==Bt||!k(Gt,e)||k(Wt,e)){var n=Nt(t,e);!n||!k(Gt,e)||k(t,Lt)&&t[Lt][e]||(n.enumerable=!0);return n}},te=function(t){for(var e,n=jt(F(t)),r=[],i=0;n.length>i;)k(Gt,e=n[i++])||e==Lt||e==Tt||r.push(e);return r},ee=function(t){for(var e,n=t===Bt,r=jt(n?Wt:F(t)),i=[],o=0;r.length>o;)!k(Gt,e=r[o++])||n&&!k(Bt,e)||i.push(Gt[e]);return i};if(!zt){T((Mt=function(){if(this instanceof Mt)throw TypeError("Symbol is not a constructor!");var t=C(arguments.length>0?arguments[0]:void 0),e=function(n){this===Bt&&e.call(Wt,n);k(this,Lt)&&k(this[Lt],t)&&(this[Lt][t]=!1);Qt(this,t,A(1,n))};m&&qt&&Qt(Bt,t,{configurable:!0,set:e});return Kt(t)}).prototype,"toString",function(){return this._k});Ct.f=$t;S.f=Xt;At.f=Pt.f=te;nt.f=Zt;et.f=ee;m&&T(Bt,"propertyIsEnumerable",Zt,!0);ft.f=function(t){return Kt(ut(t))}}M(M.G+M.W+M.F*!zt,{Symbol:Mt});for(var ne="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),re=0;ne.length>re;)ut(ne[re++]);for(var ie=tt(ut.store),oe=0;ie.length>oe;)ht(ie[oe++]);M(M.S+M.F*!zt,"Symbol",{for:function(t){return k(Ut,t+="")?Ut[t]:Ut[t]=Mt(t)},keyFor:function(t){if(!Jt(t))throw TypeError(t+" is not a symbol!");for(var e in Ut)if(Ut[e]===t)return e},useSetter:function(){qt=!0},useSimple:function(){qt=!1}});M(M.S+M.F*!zt,"Object",{create:function(t,e){return void 0===e?wt(t):Yt(wt(t),e)},defineProperty:Xt,defineProperties:Yt,getOwnPropertyDescriptor:$t,getOwnPropertyNames:te,getOwnPropertySymbols:ee});xt&&M(M.S+M.F*(!zt||p(function(){var t=Mt();return"[null]"!=Rt([t])||"{}"!=Rt({a:t})||"{}"!=Rt(Object(t))})),"JSON",{stringify:function(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);n=e=r[1];if((d(e)||void 0!==t)&&!Jt(t)){pt(e)||(e=function(t,e){"function"==typeof n&&(e=n.call(this,t,e));if(!Jt(e))return e});r[1]=e;return Rt.apply(xt,r)}}});Mt.prototype[Vt]||E(Mt.prototype,Vt,Mt.prototype.valueOf);lt(Mt,"Symbol");lt(Math,"Math",!0);lt(l.JSON,"JSON",!0);var se,ue,ae,ce=ut("toStringTag"),le="Arguments"==R(function(){return arguments}()),fe=function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),ce))?n:le?R(e):"Object"==(r=R(e))&&"function"==typeof e.callee?"Arguments":r},de=function(t,e,n,r){try{return r?e(h(n)[0],n[1]):e(n)}catch(e){var i=t.return;void 0!==i&&h(i.call(t));throw e}},he={},pe=ut("iterator"),me=Array.prototype,ve=function(t){return void 0!==t&&(he.Array===t||me[pe]===t)},ge=ut("iterator"),ye=f.getIteratorMethod=function(t){if(null!=t)return t[ge]||t["@@iterator"]||he[fe(t)]},be=t(function(t){var e={},n={},r=t.exports=function(t,r,i,o,s){var u,a,c,l,f=s?function(){return t}:ye(t),d=D(i,o,r?2:1),p=0;if("function"!=typeof f)throw TypeError(t+" is not iterable!");if(ve(f)){for(u=z(t.length);u>p;p++)if((l=r?d(h(a=t[p])[0],a[1]):d(t[p]))===e||l===n)return l}else for(c=f.call(t);!(a=c.next()).done;)if((l=de(c,d,a.value,r))===e||l===n)return l};r.BREAK=e;r.RETURN=n}),_e=ut("species"),we=l.process,Se=l.setImmediate,Ae=l.clearImmediate,Ee=l.MessageChannel,Ie=l.Dispatch,ke=0,Pe={},Oe=function(){var t=+this;if(Pe.hasOwnProperty(t)){var e=Pe[t];delete Pe[t];e()}},Ce=function(t){Oe.call(t.data)};if(!Se||!Ae){Se=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);Pe[++ke]=function(){!function(t,e,n){switch(e.length){case 0:return t();case 1:return t(e[0]);case 2:return t(e[0],e[1]);case 3:return t(e[0],e[1],e[2]);case 4:return t(e[0],e[1],e[2],e[3])}t.apply(void 0,e)}("function"==typeof t?t:Function(t),e)};se(ke);return ke};Ae=function(t){delete Pe[t]};if("process"==R(we))se=function(t){we.nextTick(D(Oe,t,1))};else if(Ie&&Ie.now)se=function(t){Ie.now(D(Oe,t,1))};else if(Ee){ae=(ue=new Ee).port2;ue.port1.onmessage=Ce;se=D(ae.postMessage,ae,1)}else if(l.addEventListener&&"function"==typeof postMessage&&!l.importScripts){se=function(t){l.postMessage(t+"","*")};l.addEventListener("message",Ce,!1)}else se="onreadystatechange"in y("script")?function(t){gt.appendChild(y("script")).onreadystatechange=function(){gt.removeChild(this);Oe.call(t)}}:function(t){setTimeout(D(Oe,t,1),0)}}var Te={set:Se,clear:Ae},Ne=Te.set,De=l.MutationObserver||l.WebKitMutationObserver,je=l.process,Me=l.Promise,xe="process"==R(je),Re={f:function(t){return new o(t)}},Le=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}},Ve=l.navigator,Fe=Ve&&Ve.userAgent||"",Ue=ut("species"),Ge=function(t){var e=l[t];m&&e&&!e[Ue]&&S.f(e,Ue,{configurable:!0,get:function(){return this}})},We=ut("iterator"),Be=!1;try{[7][We]().return=function(){Be=!0}}catch(t){}var ze,He,qe,Qe,Ke=function(t,e){if(!e&&!Be)return!1;var n=!1;try{var r=[7],i=r[We]();i.next=function(){return{done:n=!0}};r[We]=function(){return i};t(r)}catch(t){}return n},Je=Te.set,Xe=function(){var t,e,n,r=function(){var r,i;xe&&(r=je.domain)&&r.exit();for(;t;){i=t.fn;t=t.next;try{i()}catch(r){t?n():e=void 0;throw r}}e=void 0;r&&r.enter()};if(xe)n=function(){je.nextTick(r)};else if(!De||l.navigator&&l.navigator.standalone)if(Me&&Me.resolve){var i=Me.resolve(void 0);n=function(){i.then(r)}}else n=function(){Ne.call(l,r)};else{var o=!0,s=document.createTextNode("");new De(r).observe(s,{characterData:!0});n=function(){s.data=o=!o}}return function(r){var i={fn:r,next:void 0};e&&(e.next=i);if(!t){t=i;n()}e=i}}(),Ye=l.TypeError,Ze=l.process,$e=Ze&&Ze.versions,tn=$e&&$e.v8||"",en=l.Promise,nn="process"==fe(Ze),rn=function(){},on=He=Re.f,sn=!!function(){try{var t=en.resolve(1),e=(t.constructor={})[ut("species")]=function(t){t(rn,rn)};return(nn||"function"==typeof PromiseRejectionEvent)&&t.then(rn)instanceof e&&0!==tn.indexOf("6.6")&&-1===Fe.indexOf("Chrome/66")}catch(t){}}(),un=function(t){var e;return!(!d(t)||"function"!=typeof(e=t.then))&&e},an=function(t,e){if(!t._n){t._n=!0;var n=t._c;Xe(function(){for(var r=t._v,i=1==t._s,o=0,s=function(e){var n,o,s,u=i?e.ok:e.fail,a=e.resolve,c=e.reject,l=e.domain;try{if(u){if(!i){2==t._h&&fn(t);t._h=1}if(!0===u)n=r;else{l&&l.enter();n=u(r);if(l){l.exit();s=!0}}n===e.promise?c(Ye("Promise-chain cycle")):(o=un(n))?o.call(n,a,c):a(n)}else c(r)}catch(t){l&&!s&&l.exit();c(t)}};n.length>o;)s(n[o++]);t._c=[];t._n=!1;e&&!t._h&&cn(t)})}},cn=function(t){Je.call(l,function(){var e,n,r,i=t._v,o=ln(t);if(o){e=Le(function(){nn?Ze.emit("unhandledRejection",i,t):(n=l.onunhandledrejection)?n({promise:t,reason:i}):(r=l.console)&&r.error&&r.error("Unhandled promise rejection",i)});t._h=nn||ln(t)?2:1}t._a=void 0;if(o&&e.e)throw e.v})},ln=function(t){return 1!==t._h&&0===(t._a||t._c).length},fn=function(t){Je.call(l,function(){var e;nn?Ze.emit("rejectionHandled",t):(e=l.onrejectionhandled)&&e({promise:t,reason:t._v})})},dn=function(t){var e=this;if(!e._d){e._d=!0;(e=e._w||e)._v=t;e._s=2;e._a||(e._a=e._c.slice());an(e,!0)}},hn=function(t){var e,n=this;if(!n._d){n._d=!0;n=n._w||n;try{if(n===t)throw Ye("Promise can't be resolved itself");if(e=un(t))Xe(function(){var r={_w:n,_d:!1};try{e.call(t,D(hn,r,1),D(dn,r,1))}catch(t){dn.call(r,t)}});else{n._v=t;n._s=1;an(n,!1)}}catch(t){dn.call({_w:n,_d:!1},t)}}};if(!sn){en=function(t){!function(t,e,n,r){if(!(t instanceof en)||"_h"in t)throw TypeError("Promise: incorrect invocation!")}(this);N(t);ze.call(this);try{t(D(hn,this,1),D(dn,this,1))}catch(t){dn.call(this,t)}};(ze=function(t){this._c=[];this._a=void 0;this._s=0;this._d=!1;this._v=void 0;this._h=0;this._n=!1}).prototype=function(t,e,n){for(var r in e)T(t,r,e[r],void 0);return t}(en.prototype,{then:function(t,e){var n,r,i,o=on((n=en,void 0===(i=h(this).constructor)||null==(r=h(i)[_e])?n:N(r)));o.ok="function"!=typeof t||t;o.fail="function"==typeof e&&e;o.domain=nn?Ze.domain:void 0;this._c.push(o);this._a&&this._a.push(o);this._s&&an(this,!1);return o.promise},catch:function(t){return this.then(void 0,t)}});qe=function(){var t=new ze;this.promise=t;this.resolve=D(hn,t,1);this.reject=D(dn,t,1)};Re.f=on=function(t){return t===en||t===Qe?new qe(t):He(t)}}M(M.G+M.W+M.F*!sn,{Promise:en});lt(en,"Promise");Ge("Promise");Qe=f.Promise;M(M.S+M.F*!sn,"Promise",{reject:function(t){var e=on(this);(0,e.reject)(t);return e.promise}});M(M.S+M.F*!sn,"Promise",{resolve:function(t){return function(t,e){h(t);if(d(e)&&e.constructor===t)return e;var n=Re.f(t);(0,n.resolve)(e);return n.promise}(this,t)}});M(M.S+M.F*!(sn&&Ke(function(t){en.all(t).catch(rn)})),"Promise",{all:function(t){var e=this,n=on(e),r=n.resolve,i=n.reject,o=Le(function(){var n=[],o=0,s=1;be(t,!1,function(t){var u=o++,a=!1;n.push(void 0);s++;e.resolve(t).then(function(t){if(!a){a=!0;n[u]=t;--s||r(n)}},i)});--s||r(n)});o.e&&i(o.v);return n.promise},race:function(t){var e=this,n=on(e),r=n.reject,i=Le(function(){be(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});i.e&&r(i.v);return n.promise}});var pn=ut("unscopables"),mn=Array.prototype;null==mn[pn]&&E(mn,pn,{});var vn=function(t){mn[pn][t]=!0},gn=function(t,e){return{value:e,done:!!t}},yn={};E(yn,ut("iterator"),function(){return this});var bn=function(t,e,n){t.prototype=wt(yn,{next:A(1,n)});lt(t,e+" Iterator")},_n=J("IE_PROTO"),wn=Object.prototype,Sn=Object.getPrototypeOf||function(t){t=rt(t);return k(t,_n)?t[_n]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?wn:null},An=ut("iterator"),En=!([].keys&&"next"in[].keys()),In=function(){return this},kn=function(t,e,n,r,i,o,s){bn(n,e,r);var u,a,c,l=function(t){if(!En&&t in p)return p[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},f=e+" Iterator",d="values"==i,h=!1,p=t.prototype,m=p[An]||p["@@iterator"]||i&&p[i],v=m||l(i),g=i?d?l("entries"):v:void 0,y="Array"==e&&p.entries||m;if(y&&(c=Sn(y.call(new t)))!==Object.prototype&&c.next){lt(c,f,!0);"function"!=typeof c[An]&&E(c,An,In)}if(d&&m&&"values"!==m.name){h=!0;v=function(){return m.call(this)}}(En||h||!p[An])&&E(p,An,v);he[e]=v;he[f]=In;if(i){u={values:d?v:l("values"),keys:o?v:l("keys"),entries:g};if(s)for(a in u)a in p||T(p,a,u[a]);else M(M.P+M.F*(En||h),e,u)}return u},Pn=kn(Array,"Array",function(t,e){this._t=F(t);this._i=0;this._k=e},function(){var t=this._t,e=this._k,n=this._i++;if(!t||n>=t.length){this._t=void 0;return gn(1)}return gn(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values");he.Arguments=he.Array;vn("keys");vn("values");vn("entries");for(var On=ut("iterator"),Cn=ut("toStringTag"),Tn=he.Array,Nn={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},Dn=tt(Nn),jn=0;jn<Dn.length;jn++){var Mn,xn=Dn[jn],Rn=Nn[xn],Ln=l[xn],Vn=Ln&&Ln.prototype;if(Vn){Vn[On]||E(Vn,On,Tn);Vn[Cn]||E(Vn,Cn,xn);he[xn]=Tn;if(Rn)for(Mn in Pn)Vn[Mn]||T(Vn,Mn,Pn[Mn],!0)}}kn(String,"String",function(t){this._t=String(t);this._i=0},function(){var t,e,n,r,i,o,s,u=this._t,a=this._i;if(a>=u.length)return{value:void 0,done:!0};t=(e=a,i=String(V(u)),o=W(e),s=i.length,o<0||o>=s?"":(n=i.charCodeAt(o))<55296||n>56319||o+1===s||(r=i.charCodeAt(o+1))<56320||r>57343?i.charAt(o):i.slice(o,o+2));this._i+=t.length;return{value:t,done:!1}});var Fn,Un=function(){var t={};t.promise=new Promise(function(e,n){t.resolve=e;t.reject=n});return t},Gn=function(t,e){var n=Un(),r=function r(){t.removeEventListener(e,r);n.resolve()};t.addEventListener(e,r);n.promise.cancel=function(){t.removeEventListener(e,r);n.reject(new Error("Canceled"))};return n.promise},Wn=function(){},Bn=function(t){return new Promise(function(e,n){var r,i,o,s,u=function(t){return function(e){try{r.cancel();i.cancel();return t&&t.call(this,e)}catch(t){return n(t)}}.bind(this)}.bind(this);void 0===t&&(t=document);if(null!=t.body)return e();r=(o=t,s="body",function(t,e){var n=Un(),r=setInterval(function(){null!=o[s]&&n.resolve()},20);n.promise.cancel=function(){clearInterval(r);n.reject(new Error("Canceled"))};return n.promise}());i=Gn(t,"DOMContentLoaded");r.catch(Wn);i.catch(Wn);var a=function(){try{return e()}catch(t){return n(t)}},c=function(t){try{throw t}catch(t){return u(n)(t)}};try{return Promise.resolve(Promise.race([r,i])).then(function(t){try{return u(a)()}catch(t){return c(t)}},c)}catch(t){c(t)}})},zn=-2,Hn={AdLoaded:"AdLoaded",AdStarted:"AdStarted",AdStopped:"AdStopped",AdSkipped:"AdSkipped",AdSkippableStateChange:"AdSkippableStateChange",AdSizeChange:"AdSizeChange",AdLinearChange:"AdLinearChange",AdDurationChange:"AdDurationChange",AdExpandedChange:"AdExpandedChange",AdRemainingTimeChange:"AdRemainingTimeChange",AdVolumeChange:"AdVolumeChange",AdImpression:"AdImpression",AdVideoStart:"AdVideoStart",AdVideoFirstQuartile:"AdVideoFirstQuartile",AdVideoMidpoint:"AdVideoMidpoint",AdVideoThirdQuartile:"AdVideoThirdQuartile",AdVideoComplete:"AdVideoComplete",AdClickThru:"AdClickThru",AdInteraction:"AdInteraction",AdUserAcceptInvitation:"AdUserAcceptInvitation",AdUserMinimize:"AdUserMinimize",AdUserClose:"AdUserClose",AdPaused:"AdPaused",AdPlaying:"AdPlaying",AdLog:"AdLog",AdError:"AdError"},qn={adLinear:{defaultValue:!0},adWidth:{defaultValue:zn},adHeight:{defaultValue:zn},adExpanded:{defaultValue:!1},adSkippableState:{defaultValue:!1},adRemainingTime:{defaultValue:zn},adDuration:{defaultValue:zn},adVolume:{writable:!0,defaultValue:zn},adCompanions:{defaultValue:""},adIcons:{defaultValue:!1}},Qn={initAd:"initAd",resizeAd:"resizeAd",startAd:"startAd",stopAd:"stopAd",pauseAd:"pauseAd",resumeAd:"resumeAd",expandAd:"expandAd",collapseAd:"collapseAd",skipAd:"skipAd"};(Fn={})[Qn.initAd]=[Hn.AdLoaded],Fn[Qn.resizeAd]=[Hn.AdSizeChange],Fn[Qn.startAd]=[Hn.AdStarted],Fn[Qn.stopAd]=[Hn.AdStopped],Fn[Qn.pauseAd]=[Hn.AdPaused],Fn[Qn.resumeAd]=[Hn.AdPlaying],Fn[Qn.expandAd]=[Hn.AdExpandedChange],Fn[Qn.collapseAd]=[Hn.AdExpandedChange],Fn[Qn.skipAd]=[Hn.AdSkipped,Hn.AdStopped];var Kn,Jn=[Hn.AdLoaded,Hn.AdStarted,Hn.AdStopped,Hn.AdSkipped,Hn.AdImpression,Hn.AdVideoStart,Hn.AdVideoFirstQuartile,Hn.AdVideoMidpoint,Hn.AdVideoThirdQuartile,Hn.AdVideoComplete,Hn.AdError],Xn=[Qn.initAd,Qn.startAd,Qn.stopAd,Qn.skipAd],Yn=[Hn.AdVideoStart,Hn.AdVideoFirstQuartile,Hn.AdVideoMidpoint,Hn.AdVideoThirdQuartile,Hn.AdVideoComplete];(Kn={})[Hn.AdSkipped]=["skip"],Kn[Hn.AdStarted]=["creativeView"],Kn[Hn.AdImpression]=["impression"],Kn[Hn.AdVideoStart]=["start"],Kn[Hn.AdVideoFirstQuartile]=["firstQuartile"],Kn[Hn.AdVideoMidpoint]=["midpoint"],Kn[Hn.AdVideoThirdQuartile]=["thirdQuartile"],Kn[Hn.AdVideoComplete]=["complete"],Kn[Hn.AdUserAcceptInvitation]=["acceptInvitation"],Kn[Hn.AdUserMinimize]=["collapse","playerCollapse"],Kn[Hn.AdUserClose]=["close","closeLinear"],Kn[Hn.AdPaused]=["pause"],Kn[Hn.AdPlaying]=["resume"],Kn[Hn.AdExpandedChange]=["expand","playerExpand"],Kn[Hn.AdError]=["error"];var Zn=[Hn.AdStopped,Hn.AdError],$n=function(t,e,n){void 0===e&&(e=null);void 0===n&&(n=document);return new Promise(function(r,i){var o=n.createElement("script");o.addEventListener("load",function(){return r(o)});o.addEventListener("error",function(){return i(new Error("Failed to insert "+t))});o.src=t;o.crossOrigin=e;n.getElementsByTagName("head")[0].appendChild(o)})},tr=S.f,er=Function.prototype,nr=/^\s*function ([^ (]*)/;"name"in er||m&&tr(er,"name",{configurable:!0,get:function(){try{return(""+this).match(nr)[1]}catch(t){return""}}});var rr=function(){var t=h(this),e="";t.global&&(e+="g");t.ignoreCase&&(e+="i");t.multiline&&(e+="m");t.unicode&&(e+="u");t.sticky&&(e+="y");return e};m&&"g"!=/./g.flags&&S.f(RegExp.prototype,"flags",{configurable:!0,get:rr});var ir=/./.toString,or=function(t){T(RegExp.prototype,"toString",t,!0)};p(function(){return"/a/b"!=ir.call({source:"a",flags:"b"})})?or(function(){var t=h(this);return"/".concat(t.source,"/","flags"in t?t.flags:!m&&t instanceof RegExp?rr.call(t):void 0)}):"toString"!=ir.name&&or(function(){return ir.call(this)});var sr=function(){return""+(1e9+Math.floor(9e9*Math.random()))},ur=function(){return""+(new Date).getTime().toString(36)+sr().toString(16).substring(1)},ar=Symbol("name"),cr=Symbol("view"),lr="cb_",fr=function(){function t(t,e){void 0===e&&(e=null);var n,r;switch(typeof t){case"object":n=t.name;r=t.callback;break;case"string":n=t;break;case"function":r=t}null==n&&(n=lr+ur());this[ar]=n;null!=e&&null!=e.defaultView&&(e=e.defaultView);this[cr]=null!=e?e:window;null!=r&&(this.callback=r)}var e=t.prototype;e.remove=function(){this.exists&&delete this[cr][this.name]};e.invoke=function(){this.exists&&this.callback.apply(this,arguments)};n(t,[{key:"name",get:function(){return this[ar]}},{key:"exists",get:function(){return null!=this.callback}},{key:"callback",get:function(){return null!=this[cr]&&"function"==typeof this[cr][this.name]?this[cr][this.name]:null},set:function(t){null!=this[cr]&&(this[cr][this.name]=t)}}]);return t}(),dr=function(t){return null!=t&&"function"==typeof t.then},hr=function(t){var e=0,n=null;return function(){if(0===e)try{for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];n=t.apply(this,i);e=1}catch(t){n=t;e=2}if(2===e)throw n;return n}},pr=function(t,e){e=e||function(){};return t.then(function(t){return new Promise(function(t){t(e())}).then(function(){return t})},function(t){return new Promise(function(t){t(e())}).then(function(){throw t})})},mr=function(t){return function(){var e=(new Date).getTime(),n=pr(t.apply(void 0,arguments),function(){var t=(new Date).getTime();n.time=t-e});return n}},vr=function(){var t=new Error("Delay aborted");t.name="AbortError";return t},gr=function(t){return function(e,n){var r,i,o,s=void 0===n?{}:n,u=s.value,a=s.signal;if(a&&a.aborted)return Promise.reject(vr());var c=function(){clearTimeout(r);o(vr())},l=function(){a&&a.removeEventListener("abort",c)},f=new Promise(function(n,s){i=function(){l();t?n(u):s(u)};o=s;r=setTimeout(i,e)});a&&a.addEventListener("abort",c,{once:!0});f.clear=function(){clearTimeout(r);r=null;l();i()};return f}},yr=gr(!0);yr.reject=gr(!1);var br=yr,_r=yr;br.default=_r;var wr=function(t,e,n){void 0===n&&(n="Timed out");var r=br.reject(e,{value:new Error(n)});r.catch(Wn);return pr(Promise.race([t,r]),function(){r.clear()})},Sr=function(t,e,n){var r=ut(t),i=n(V,r,""[t]),o=i[0],s=i[1];if(p(function(){var e={};e[r]=function(){return 7};return 7!=""[t](e)})){T(String.prototype,t,o);E(RegExp.prototype,r,2==e?function(t,e){return s.call(t,this,e)}:function(t){return s.call(t,this)})}},Ar=ut("match"),Er=function(t){var e;return d(t)&&(void 0!==(e=t[Ar])?!!e:"RegExp"==R(t))};Sr("split",2,function(t,e,n){var r=Er,i=n,o=[].push;if("c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length){var s=void 0===/()??/.exec("")[1];n=function(t,e){var n=String(this);if(void 0===t&&0===e)return[];if(!r(t))return i.call(n,t,e);var u,a,c,l,f,d=[],h=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),p=0,m=void 0===e?4294967295:e>>>0,v=new RegExp(t.source,h+"g");s||(u=new RegExp("^"+v.source+"$(?!\\s)",h));for(;a=v.exec(n);){if((c=a.index+a[0].length)>p){d.push(n.slice(p,a.index));!s&&a.length>1&&a[0].replace(u,function(){for(f=1;f<arguments.length-2;f++)void 0===arguments[f]&&(a[f]=void 0)});a.length>1&&a.index<n.length&&o.apply(d,a.slice(1));l=a[0].length;p=c;if(d.length>=m)break}v.lastIndex===a.index&&v.lastIndex++}p===n.length?!l&&v.test("")||d.push(""):d.push(n.slice(p));return d.length>m?d.slice(0,m):d}}else"0".split(void 0,0).length&&(n=function(t,e){return void 0===t&&0===e?[]:i.call(this,t,e)});return[function(r,i){var o=t(this),s=null==r?void 0:r[e];return void 0!==s?s.call(r,o,i):n.call(String(o),r,i)},n]});Sr("replace",2,function(t,e,n){return[function(r,i){var o=t(this),s=null==r?void 0:r[e];return void 0!==s?s.call(r,o,i):n.call(String(o),r,i)},n]});Sr("match",1,function(t,e,n){return[function(n){var r=t(this),i=null==n?void 0:n[e];return void 0!==i?i.call(n,r):new RegExp(n)[e](String(r))},n]});var Ir,kr=t(function(t){e=c,n=function(){function t(t){function e(e){var n=t.match(e);return n&&n.length>1&&n[1]||""}function n(e){var n=t.match(e);return n&&n.length>1&&n[2]||""}var i,s=e(/(ipod|iphone|ipad)/i).toLowerCase(),u=!/like android/i.test(t)&&/android/i.test(t),a=/nexus\s*[0-6]\s*/i.test(t),c=!a&&/nexus\s*[0-9]+/i.test(t),l=/CrOS/.test(t),f=/silk/i.test(t),d=/sailfish/i.test(t),h=/tizen/i.test(t),p=/(web|hpw)(o|0)s/i.test(t),m=/windows phone/i.test(t),v=(/SamsungBrowser/i.test(t),!m&&/windows/i.test(t)),g=!s&&!f&&/macintosh/i.test(t),y=!u&&!d&&!h&&!p&&/linux/i.test(t),b=n(/edg([ea]|ios)\/(\d+(\.\d+)?)/i),_=e(/version\/(\d+(\.\d+)?)/i),w=/tablet/i.test(t)&&!/tablet pc/i.test(t),S=!w&&/[^-]mobi/i.test(t),A=/xbox/i.test(t);if(/opera/i.test(t))i={name:"Opera",opera:o,version:_||e(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)};else if(/opr\/|opios/i.test(t))i={name:"Opera",opera:o,version:e(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||_};else if(/SamsungBrowser/i.test(t))i={name:"Samsung Internet for Android",samsungBrowser:o,version:_||e(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)};else if(/Whale/i.test(t))i={name:"NAVER Whale browser",whale:o,version:e(/(?:whale)[\s\/](\d+(?:\.\d+)+)/i)};else if(/MZBrowser/i.test(t))i={name:"MZ Browser",mzbrowser:o,version:e(/(?:MZBrowser)[\s\/](\d+(?:\.\d+)+)/i)};else if(/coast/i.test(t))i={name:"Opera Coast",coast:o,version:_||e(/(?:coast)[\s\/](\d+(\.\d+)?)/i)};else if(/focus/i.test(t))i={name:"Focus",focus:o,version:e(/(?:focus)[\s\/](\d+(?:\.\d+)+)/i)};else if(/yabrowser/i.test(t))i={name:"Yandex Browser",yandexbrowser:o,version:_||e(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)};else if(/ucbrowser/i.test(t))i={name:"UC Browser",ucbrowser:o,version:e(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)};else if(/mxios/i.test(t))i={name:"Maxthon",maxthon:o,version:e(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)};else if(/epiphany/i.test(t))i={name:"Epiphany",epiphany:o,version:e(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)};else if(/puffin/i.test(t))i={name:"Puffin",puffin:o,version:e(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)};else if(/sleipnir/i.test(t))i={name:"Sleipnir",sleipnir:o,version:e(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)};else if(/k-meleon/i.test(t))i={name:"K-Meleon",kMeleon:o,version:e(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)};else if(m){i={name:"Windows Phone",osname:"Windows Phone",windowsphone:o};if(b){i.msedge=o;i.version=b}else{i.msie=o;i.version=e(/iemobile\/(\d+(\.\d+)?)/i)}}else if(/msie|trident/i.test(t))i={name:"Internet Explorer",msie:o,version:e(/(?:msie |rv:)(\d+(\.\d+)?)/i)};else if(l)i={name:"Chrome",osname:"Chrome OS",chromeos:o,chromeBook:o,chrome:o,version:e(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)};else if(/edg([ea]|ios)/i.test(t))i={name:"Microsoft Edge",msedge:o,version:b};else if(/vivaldi/i.test(t))i={name:"Vivaldi",vivaldi:o,version:e(/vivaldi\/(\d+(\.\d+)?)/i)||_};else if(d)i={name:"Sailfish",osname:"Sailfish OS",sailfish:o,version:e(/sailfish\s?browser\/(\d+(\.\d+)?)/i)};else if(/seamonkey\//i.test(t))i={name:"SeaMonkey",seamonkey:o,version:e(/seamonkey\/(\d+(\.\d+)?)/i)};else if(/firefox|iceweasel|fxios/i.test(t)){i={name:"Firefox",firefox:o,version:e(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)};if(/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(t)){i.firefoxos=o;i.osname="Firefox OS"}}else if(f)i={name:"Amazon Silk",silk:o,version:e(/silk\/(\d+(\.\d+)?)/i)};else if(/phantom/i.test(t))i={name:"PhantomJS",phantom:o,version:e(/phantomjs\/(\d+(\.\d+)?)/i)};else if(/slimerjs/i.test(t))i={name:"SlimerJS",slimer:o,version:e(/slimerjs\/(\d+(\.\d+)?)/i)};else if(/blackberry|\bbb\d+/i.test(t)||/rim\stablet/i.test(t))i={name:"BlackBerry",osname:"BlackBerry OS",blackberry:o,version:_||e(/blackberry[\d]+\/(\d+(\.\d+)?)/i)};else if(p){i={name:"WebOS",osname:"WebOS",webos:o,version:_||e(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)};/touchpad\//i.test(t)&&(i.touchpad=o)}else if(/bada/i.test(t))i={name:"Bada",osname:"Bada",bada:o,version:e(/dolfin\/(\d+(\.\d+)?)/i)};else if(h)i={name:"Tizen",osname:"Tizen",tizen:o,version:e(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||_};else if(/qupzilla/i.test(t))i={name:"QupZilla",qupzilla:o,version:e(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||_};else if(/chromium/i.test(t))i={name:"Chromium",chromium:o,version:e(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||_};else if(/chrome|crios|crmo/i.test(t))i={name:"Chrome",chrome:o,version:e(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)};else if(u)i={name:"Android",version:_};else if(/safari|applewebkit/i.test(t)){i={name:"Safari",safari:o};_&&(i.version=_)}else if(s){i={name:"iphone"==s?"iPhone":"ipad"==s?"iPad":"iPod"};_&&(i.version=_)}else i=/googlebot/i.test(t)?{name:"Googlebot",googlebot:o,version:e(/googlebot\/(\d+(\.\d+))/i)||_}:{name:e(/^(.*)\/(.*) /),version:n(/^(.*)\/(.*) /)};if(!i.msedge&&/(apple)?webkit/i.test(t)){if(/(apple)?webkit\/537\.36/i.test(t)){i.name=i.name||"Blink";i.blink=o}else{i.name=i.name||"Webkit";i.webkit=o}!i.version&&_&&(i.version=_)}else if(!i.opera&&/gecko\//i.test(t)){i.name=i.name||"Gecko";i.gecko=o;i.version=i.version||e(/gecko\/(\d+(\.\d+)?)/i)}if(i.windowsphone||!u&&!i.silk){if(!i.windowsphone&&s){i[s]=o;i.ios=o;i.osname="iOS"}else if(g){i.mac=o;i.osname="macOS"}else if(A){i.xbox=o;i.osname="Xbox"}else if(v){i.windows=o;i.osname="Windows"}else if(y){i.linux=o;i.osname="Linux"}}else{i.android=o;i.osname="Android"}var E="";i.windows?E=function(t){switch(e(/Windows ((NT|XP)( \d\d?.\d)?)/i)){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}():i.windowsphone?E=e(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):i.mac?E=(E=e(/Mac OS X (\d+([_\.\s]\d+)*)/i)).replace(/[_\s]/g,"."):s?E=(E=e(/os (\d+([_\s]\d+)*) like mac os x/i)).replace(/[_\s]/g,"."):u?E=e(/android[ \/-](\d+(\.\d+)*)/i):i.webos?E=e(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):i.blackberry?E=e(/rim\stablet\sos\s(\d+(\.\d+)*)/i):i.bada?E=e(/bada\/(\d+(\.\d+)*)/i):i.tizen&&(E=e(/tizen[\/\s](\d+(\.\d+)*)/i));E&&(i.osversion=E);var I=!i.windows&&E.split(".")[0];w||c||"ipad"==s||u&&(3==I||I>=4&&!S)||i.silk?i.tablet=o:(S||"iphone"==s||"ipod"==s||u||a||i.blackberry||i.webos||i.bada)&&(i.mobile=o);i.msedge||i.msie&&i.version>=10||i.yandexbrowser&&i.version>=15||i.vivaldi&&i.version>=1||i.chrome&&i.version>=20||i.samsungBrowser&&i.version>=4||i.whale&&1===r([i.version,"1.0"])||i.mzbrowser&&1===r([i.version,"6.0"])||i.focus&&1===r([i.version,"1.0"])||i.firefox&&i.version>=20||i.safari&&i.version>=6||i.opera&&i.version>=10||i.ios&&i.osversion&&i.osversion.split(".")[0]>=6||i.blackberry&&i.version>=10.1||i.chromium&&i.version>=20?i.a=o:i.msie&&i.version<10||i.chrome&&i.version<20||i.firefox&&i.version<20||i.safari&&i.version<6||i.opera&&i.version<10||i.ios&&i.osversion&&i.osversion.split(".")[0]<6||i.chromium&&i.version<20?i.c=o:i.x=o;return i}function e(t){return t.split(".").length}function n(t,e){var n,r=[];if(Array.prototype.map)return Array.prototype.map.call(t,e);for(n=0;n<t.length;n++)r.push(e(t[n]));return r}function r(t){for(var r=Math.max(e(t[0]),e(t[1])),i=n(t,function(t){var i=r-e(t);return n((t+=new Array(i+1).join(".0")).split("."),function(t){return new Array(20-t.length).join("0")+t}).reverse()});--r>=0;){if(i[0][r]>i[1][r])return 1;if(i[0][r]!==i[1][r])return-1;if(0===r)return 0}}function i(e,n,i){var o=s;if("string"==typeof n){i=n;n=void 0}void 0===n&&(n=!1);i&&(o=t(i));var u=""+o.version;for(var a in e)if(e.hasOwnProperty(a)&&o[a]){if("string"!=typeof e[a])throw new Error("Browser version in the minVersion map should be a string: "+a+": "+String(e));return r([u,e[a]])<0}return n}var o=!0,s=t("undefined"!=typeof navigator&&navigator.userAgent||"");s.test=function(t){for(var e=0;e<t.length;++e){var n=t[e];if("string"==typeof n&&n in s)return!0}return!1};s.isUnsupportedBrowser=i;s.compareVersions=r;s.check=function(t,e,n){return!i(t,e,n)};s._detect=t;s.detect=t;return s},t.exports?t.exports=n():e.bowser=n();var e,n}),Pr=["dns-prefetch","preconnect","prefetch","preload"],Or={},Cr=Pr.reverse();(Ir=document.createElement("link")).relList&&Ir.relList.supports?Pr.forEach(function(t){Or[t]=Ir.relList.supports(t)}):Object.assign(Or,{"dns-prefetch":kr.check({msie:"10",msedge:"12"},!0),prefetch:kr.check({msie:"11",msedge:"12"},!0),preload:kr.check({msedge:"17"},!0)});var Tr,Nr,Dr=function(t){return!!Or[t]},jr=function(t,e,n){void 0===e&&(e=document);void 0===n&&(n=null);if(null!=t&&null!=t.href&&null!=t.rel){t.rel=function(t,e){void 0===e&&(e=null);if(null==e){var n=Cr.indexOf(t);n>=0&&(e=Cr.slice(n+1))}if(null!=e)for(var r=0;r<e.length&&!Dr(t);)t=e[r++];return Dr(t)?t:null}(t.rel,n);if(null!=t.rel){if("dns-prefetch"===t.rel||"preconnect"===t.rel){t.href=function(t){var e=t.indexOf("//");if(e<0)return null;var n=t.indexOf("/",e+2);return n<0?t:t.substr(0,n)}(t.href);delete t.as;delete t.type}else"prefetch"!==t.rel&&"preload"!==t.rel||(t.href=(i=(r=t.href).indexOf("#"))<0?r:r.substr(0,i));var r,i,o=e.createElement("link");Object.assign(o,t);e.head.appendChild(o)}}},Mr={tr:{regexp:/[\u0069]/g,map:{i:"İ"}},az:{regexp:/[\u0069]/g,map:{i:"İ"}},lt:{regexp:/[\u0069\u006A\u012F]\u0307|\u0069\u0307[\u0300\u0301\u0303]/g,map:{"i̇":"I","j̇":"J","į̇":"Į","i̇̀":"Ì","i̇́":"Í","i̇̃":"Ĩ"}}},xr=function(t,e){return null==t?"":function(t,e){var n=Mr[e];t=null==t?"":String(t);n&&(t=t.replace(n.regexp,function(t){return n.map[t]}));return t.toUpperCase()}((t=String(t)).charAt(0),e)+t.substr(1)},Rr=function(){function t(t,e,n){this.options=n=n||{};this.pendingPromises=0;this.maxPendingPromises=void 0!==t?t:1/0;this.maxQueuedPromises=void 0!==e?e:1/0;this.queue=[]}var e="undefined"!=typeof Promise?Promise:function(){return{then:function(){throw new Error("Queue.configure() before use Queue")}}},n=function(){};t.configure=function(t){e=t};t.prototype.add=function(t){var r=this;return new e(function(e,i,o){if(r.queue.length>=r.maxQueuedPromises)i(new Error("Queue limit reached"));else{r.queue.push({promiseGenerator:t,resolve:e,reject:i,notify:o||n});r._dequeue()}})};t.prototype.getPendingLength=function(){return this.pendingPromises};t.prototype.getQueueLength=function(){return this.queue.length};t.prototype._dequeue=function(){var t=this;if(this.pendingPromises>=this.maxPendingPromises)return!1;var n,r=this.queue.shift();if(!r){this.options.onEmpty&&this.options.onEmpty();return!1}try{this.pendingPromises++;(n=r.promiseGenerator(),n&&"function"==typeof n.then?n:new e(function(t){t(n)})).then(function(e){t.pendingPromises--;r.resolve(e);t._dequeue()},function(e){t.pendingPromises--;r.reject(e);t._dequeue()},function(t){r.notify(t)})}catch(e){t.pendingPromises--;r.reject(e);t._dequeue()}return!0};return t}(),Lr=Symbol("plugins"),Vr=Symbol("queue"),Fr=function(){function t(){this[Lr]=[];this[Vr]=new Rr(1);this.dispose=hr(this.dispose)}var e=t.prototype;e.addPlugin=function(t){this[Lr].push(t)};e.dispose=function(){return Promise.all(this._runStageHooks("dispose",[]))};e.runPhase=function(t,e,n,r){return new Promise(function(i,o){var s=this;void 0===r&&(r=!1);return i(this[Vr].add(function(){return new Promise(function(i,o){return i(s._runPhase0(t,e,n,r))})}))}.bind(this))};e.runPhaseSync=function(t,e,n,r,i){void 0===i&&(i=!1);var o=xr(t);this._runStageHooks("before"+o+"Sync",e);var s=n.apply(void 0,e);this._runStage("after"+o,e.concat([s])).catch(r);return i?null:s};e._runPhase0=function(t,e,n,r){return new Promise(function(i,o){var s,u;s=xr(t);return Promise.resolve(this._runStage("before"+s,e)).then(function(t){try{u=n.apply(void 0,e);return Promise.resolve(this._runStage("after"+s,e.concat([u]))).then(function(t){try{return i(r?null:u)}catch(t){return o(t)}},o)}catch(t){return o(t)}}.bind(this),o)}.bind(this))};e._runStage=function(t,e){return new Promise(function(n,r){return n(Promise.all(this._runStageHooks(t,e)))}.bind(this))};e._runStageHooks=function(t,e){return this[Lr].filter(function(e){return null!=e[t]}).map(function(n){return n[t].apply(n,e)}).filter(dr)};n(t,[{key:"plugins",get:function(){return this[Lr].slice()}}]);return t}(),Ur=Symbol("subscribers"),Gr=Symbol("published"),Wr=function(){function t(){this[Ur]={};this[Gr]=[]}var e=t.prototype;e.subscribe=function(t,e,n){void 0===n&&(n=null);null==this[Ur][e]&&(this[Ur][e]=[]);this[Ur][e].push({fn:t,ctx:n})};e.unsubscribe=function(t,e){var n=this[Ur][e];if(null!=n)for(var r=n.length-1;r>=0;--r)n[r].fn===t&&n.splice(r,1)};e.publish=function(t,e){void 0===e&&(e=[]);if(!(Jn.indexOf(t)>=0&&this.didPublish(t))){e=this._normalizeEventArgs(t,e);this[Gr].push({name:t,args:e});if(null!=this[Ur][t])for(var n=this[Ur][t].slice(),r=0;r<n.length;++r){var i=n[r],o=i.fn,s=i.ctx;o.apply(s,e)}}};e.didPublish=function(t){return this[Gr].some(function(e){var n=e.name;return t===n})};e._normalizeEventArgs=function(t,e){switch(t){case Hn.AdClickThru:var n=e[0],r=e[1],i=e[2];return["string"==typeof n?n:void 0,null!=r?r:"",null==i||!!i];default:return e}};n(t,[{key:"published",get:function(){return this[Gr]}}]);return t}();Tr=(f.Object||{}).keys||Object.keys,Nr={keys:function(t){return tt(rt(t))}},M(M.S+M.F*p(function(){Tr(1)}),"Object",Nr);var Br,zr=Symbol("data"),Hr=function(){function t(t){this[zr]=Object.create(null)}var e=t.prototype;e._get=function(t){return this[zr][t]};e._put=function(t,e){this[zr][t]=e};e._putAll=function(t){for(var e=Object.keys(t),n=0;n<e.length;++n){var r=e[n],i=t[r];this._put(r,i)}};return t}(),qr=(Object.keys(Hn).map(function(t){return Hn[t]}),[].sort),Qr=[1,2,3];M(M.P+M.F*(p(function(){Qr.sort(void 0)})||!p(function(){Qr.sort(null)})||!(Br=qr,Br&&p(function(){Br.call(null)}))),"Array",{sort:function(t){return void 0===t?qr.call(rt(this)):qr.call(rt(this),N(t))}});var Kr,Jr,Xr=/^(?:application|text)\/xml\+vast$/i,Yr=/^(?:application|text)\/(?:x-)?javascript$/i,Zr=/^video\//i,$r=function(t){return null==t||""===t},ti=function(t){var e=t.type;return"VPAID"===t.apiFramework&&Yr.test(e)},ei=[{eval:function(t){var e=t.type,n=t.apiFramework;return $r(n)&&Xr.test(e)},result:"vast"},{eval:ti,result:"vpaid"},{eval:function(t){var e=t.type,n=t.apiFramework;return $r(n)&&Zr.test(e)},result:"video"}],ni=function(t){return ei.reduce(function(e,n){return n.eval(t)?n.result:e},null)},ri=/^[^:]+:\/\/tpc\.googlesyndication\.com\/pagead\/js\/loader/,ii=/^[^:]+:\/\/imasdk\.googleapis\.com\/js\/sdkloader\/vpaid_adapter\.js\b/,oi={probably:0,maybe:1},si=((Kr={}).vpaid=1,Kr.video=2,Kr.vast=3,Kr),ui=function(t){return t.width*t.height},ai=function(t){return t.reduce(function(t,e){return ui(e)<ui(t)?e:t})},ci=function(t){return t.reduce(function(t,e){return ui(e)<ui(t)?t:e})},li=function(t,e,n,r){var i,o,s,u,a=null!=n?(o=(i=n).maxWidth,s=i.maxHeight,u=i.maxBitrate,function(t){var e=t.width,n=t.height,r=t.bitrate;return e<=o&&n<=s&&!(r>u)}):function(){return!0},c=t.filter(a);if(c.length>0)return r(c);var l=e.filter(a);return l.length>0?r(l):null},fi=function(t){return t>0?t:1/0},di=function(t,e,n,r,i){var o=function(t,e){return t.reduce(function(t,n){var r=e.canPlayType(n.type),i=oi[r];null!=i&&t[i].push(n);return t},[[],[]])}(t,i),s=o[0],u=o[1];if(s.length+u.length===0)return null;var a={maxWidth:fi(e),maxHeight:fi(n),maxBitrate:fi(r)};return li(s,u,a,ci)||li(s,u,null,ai)},hi=function(t,e){return si[t]-si[e]},pi=((Jr={}).vast=function(t){return t[0]},Jr.vpaid=function(t){return function(t){var e=t.filter(ti);return e.length>0?ci(e):null}(t)},Jr.video=function(t,e,n,r,i){var o;null!=i&&"function"==typeof i.canPlayType&&(o=di(t,e,n,r,i));null==o&&(o=di(t,e,n,r,document.createElement("video")));return o},Jr),mi=Object.keys(pi),vi=function(){return(new Date).getTime()},gi=function(t,e,n){t.setAttribute(e,n)},yi=function(t,e,n){t[e]=function(t,e){e=Object.assign({pascalCase:!1},e);var n=function(t){return e.pascalCase?t.charAt(0).toUpperCase()+t.slice(1):t};if(0===(t=Array.isArray(t)?t.map(function(t){return t.trim()}).filter(function(t){return t.length}).join("-"):t.trim()).length)return"";if(1===t.length)return e.pascalCase?t.toUpperCase():t.toLowerCase();if(/^[a-z\d]+$/.test(t))return n(t);t!==t.toLowerCase()&&(t=function(t){for(var e=!1,n=!1,r=!1,i=0;i<t.length;i++){var o=t[i];if(e&&/[a-zA-Z]/.test(o)&&o.toUpperCase()===o){t=t.slice(0,i)+"-"+t.slice(i);e=!1;r=n;n=!0;i++}else if(n&&r&&/[a-zA-Z]/.test(o)&&o.toLowerCase()===o){t=t.slice(0,i-1)+"-"+t.slice(i-1);r=n;n=!1;e=!0}else{e=o.toLowerCase()===o;r=n;n=o.toUpperCase()===o}}return t}(t));return n(t=t.replace(/^[_.\- ]+/,"").toLowerCase().replace(/[_.\- ]+(\w|$)/g,function(t,e){return e.toUpperCase()}))}(n)},bi=function(t,e,n){void 0===n&&(n=!1);if(null!=t&&null!=t.style){var r=n?"important":"";Object.keys(e).forEach(function(n){t.style.setProperty(n,e[n],r)})}},_i=function(t,e,n,r,i){void 0===i&&(i=!1);return function(t,e,n,r,i,o){void 0===o&&(o=!1);var s=t.createElementNS("http://www.w3.org/2000/svg",n);null!=r&&function(t,e){var n="function"==typeof t.setAttribute?gi:yi;Object.keys(e).forEach(function(r){n(t,r,e[r])})}(s,r);null!=i&&bi(s,i,o);return s}(t,0,e,n,r,i)},wi=Symbol("runtime"),Si=Symbol("init"),Ai=Symbol("setGuest"),Ei=Symbol("ensureContainer"),Ii=Symbol("slot"),ki=Symbol("videoSlot"),Pi=Symbol("phaser"),Oi=Symbol("pubSub"),Ci=Symbol("clickThroughUrl"),Ti=Symbol("config"),Ni=Symbol("logger"),Di=Si,ji=wi,Mi=function(){function t(){this[Ti]=null;this.dispose=hr(this.dispose)}n(t,null,[{key:"id",get:function(){throw new Error("Method is abstract")}},{key:"defaultConfig",get:function(){return null}}]);var e=t.prototype;e.init=function(){};e.dispose=function(){};e.publish=function(t,e){void 0===e&&(e=[]);return this[ji].publish(t,e)};e.track=function(){var t;(t=this[ji]).track.apply(t,arguments)};e.trackPixel=function(t,e){this[ji].trackPixel(t,e)};e.trackError=function(){var t;(t=this[ji]).trackError.apply(t,arguments)};e[Di]=function(t,e){if(null!=this[Ti])throw new Error("Already configured");this[ji]=t;this[Ti]=Object.assign({},this.constructor.defaultConfig,e);this.init()};n(t,[{key:"runtime",get:function(){return this[ji]}},{key:"config",get:function(){return this[Ti]}},{key:"host",get:function(){return this[ji].host}},{key:"guest",get:function(){return this[ji].guest}},{key:"logger",get:function(){return this[Ni]}}]);return t}(),xi=Si,Ri=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);return e}(Mi),Li=Object.create(null),Vi=new(function(){function t(){this._contents=Object.create(null)}var e=t.prototype;e.register=function(t){var e=t.id;if(null!=this._contents[e]&&this._contents[e]!==t)throw new Error('Plugin "'+e+'" already registered');this._provisionParent(e);this._contents[e]=t};e.create=function(t,e,n){if(null==this._contents[t])throw new Error('Plugin "'+t+'" not registered');var r=new(0,this._contents[t]);r[xi](n,e);return r};e._provisionParent=function(t){var e=t.indexOf(".");if(!(e<0)){var i=t.substr(0,e);null==this._contents[i]&&(this._contents[i]=function(t){null==Li[t]&&(Li[t]=function(e){function i(){return e.apply(this,arguments)||this}r(i,e);n(i,null,[{key:"id",get:function(){return t}}]);return i}(Ri));return Li[t]}(i))}};return t}()),Fi=Symbol("plugin"),Ui=Symbol("disposed"),Gi=Ii,Wi=ki,Bi=function(){function t(t){if(null==t)throw new Error("Must specify the plugin");this[Fi]=t;this[Ui]=!1}var e=t.prototype;e.dispose=function(){this[Ui]=!0};e.getAdVolume=function(){var t=this;return this._genericCall("getAdVolume",function(){return t[Fi].host.getAdVolume()},-1)};e.getAdDuration=function(){var t=this;return this._genericCall("getAdDuration",function(){return t[Fi].host.getAdDuration()},-1)};e.subscribe=function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this._genericCall("subscribe",function(){var e;return(e=t[Fi].host).subscribe.apply(e,n)})};e.unsubscribe=function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this._genericCall("unsubscribe",function(){var e;return(e=t[Fi].host).unsubscribe.apply(e,n)})};e.getPlayer=function(){var t=this;return this._genericCall("getPlayer",function(){return t[Fi][Wi]})};e.getSlot=function(){var t=this;return this._genericCall("getSlot",function(){return t[Fi][Gi]})};e.getPreviousEvents=function(){var t=this;return this._genericCall("getPreviousEvents",function(){return t[Fi].runtime.hostInfo.publishedEvents.map(function(t){return t.name})},[])};e._genericCall=function(t,e,n){void 0===n&&(n=void 0);if(this[Ui]);else try{return e()}catch(t){}return n};return t}(),zi=1,Hi=2,qi=Symbol("name"),Qi=Symbol("states"),Ki=Symbol("infos"),Ji=Symbol("state"),Xi=Symbol("initialState"),Yi=Symbol("timings"),Zi=0,$i=function(){function t(t,e,n){void 0===e&&(e=Zi);void 0===n&&(n=void 0);this[qi]=t;this[Qi]=[];this[Ki]=[];this[Yi]=[];this[Xi]=e;this.set(e,n)}var e=t.prototype;e.getInfo=function(t){if(t<=this.state)return this[Ki][t]};e.set=function(t,e){void 0===e&&(e=void 0);var n=this[Ji];if(t<n)throw new Error("Invalid "+this[qi]+" state change: "+n+" → "+t);if(t!==n){this._ensureStates(t);for(var r=n+1;r<t;++r)this[Qi][r].resolve();this[Qi][t].resolve(e);this[Ki][t]=e;this[Yi][t]=vi();this[Ji]=t;this[Xi]}};e.maybeSet=function(t,e){void 0===e&&(e=void 0);if(this.reached(t))return!1;this.set(t,e);return!0};e.reach=function(t){return new Promise(function(e,n){this._ensureStates(t);return e(this[Qi][t].promise)}.bind(this))};e.reached=function(t){return t<=this.state};e.time=function(t){return this[Yi][t]};e.timeBetween=function(t,e){if(t>e)throw new Error("toState ("+e+") must be greater than or equal to fromState ("+t+")");return this.time(e)-this.time(t)};e._ensureStates=function(t){for(var e=this[Qi].length;e<=t;++e){this[Qi].push(Un());this[Ki].push(void 0);this[Yi].push(void 0)}};n(t,[{key:"name",get:function(){return this[qi]}},{key:"state",get:function(){return this[Ji]}}]);return t}(),to=function(t,e,n,r){e=e||"&";n=n||"=";var i={};if("string"!=typeof t||0===t.length)return i;var o=/\+/g;t=t.split(e);var u=1e3;r&&"number"==typeof r.maxKeys&&(u=r.maxKeys);var a=t.length;u>0&&a>u&&(a=u);for(var c=0;c<a;++c){var l,f,d,h,p=t[c].replace(o,"%20"),m=p.indexOf(n);if(m>=0){l=p.substr(0,m);f=p.substr(m+1)}else{l=p;f=""}d=decodeURIComponent(l);h=decodeURIComponent(f);s(i,d)?Array.isArray(i[d])?i[d].push(h):i[d]=[i[d],h]:i[d]=h}return i},eo=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}},no=function(t,e,n,r){e=e||"&";n=n||"=";null===t&&(t=void 0);return"object"==typeof t?Object.keys(t).map(function(r){var i=encodeURIComponent(eo(r))+n;return Array.isArray(t[r])?t[r].map(function(t){return i+encodeURIComponent(eo(t))}).join(e):i+encodeURIComponent(eo(t[r]))}).join(e):r?encodeURIComponent(eo(r))+n+encodeURIComponent(eo(t)):""},ro=t(function(t,e){e.decode=e.parse=to;e.encode=e.stringify=no}),io=(ro.decode,ro.parse,ro.encode,ro.stringify),oo="cdn.doubleverify.com",so="rtb0.doubleverify.com",uo="tps.doubleverify.com",ao="https://"+oo+"/dvtp_src.js",co="https://"+oo+"/dvbs_src.js",lo={tagtype:"video",dvtagver:"6.1.src",tagformat:"2",adsrv:"166"},fo=Symbol("facade"),ho=Symbol("proxyCb"),po=function(){function t(t){this[fo]=t;jr({href:"//"+oo,rel:"preconnect",pr:"1.0"})}var e=t.prototype;e.start=function(){return new Promise(function(t,e){var n=this;this[ho]=new fr(function(){return n.facade.proxy});this.facade.config.adid=this[ho].name;return t()}.bind(this))};e.decide=function(){return new Promise(function(t,e){return t(3)})};e.decideNow=function(){return new Promise(function(t,e){return t(this.decide())}.bind(this))};e.dispose=function(){return new Promise(function(t,e){if(null!=this[ho]){this[ho].remove();this[ho]=null}return t()}.bind(this))};e._insertScript=function(t){return new Promise(function(e,n){var r;r=t+"?"+io(this.facade.config);return Promise.resolve($n(r)).then(function(t){try{return e()}catch(t){return n(t)}},n)}.bind(this))};n(t,[{key:"facade",get:function(){return this[fo]}},{key:"logger",get:function(){return this.facade.logger}}]);return t}(),mo=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);e.prototype.start=function(){return new Promise(function(e,n){return Promise.resolve(t.prototype.start.call(this)).then(function(t){try{return Promise.resolve(this.facade.creative.reach(1)).then(function(t){try{return Promise.resolve(this._insertScript(ao)).then(function(t){try{return e()}catch(t){return n(t)}},n)}catch(t){return n(t)}}.bind(this),n)}catch(t){return n(t)}}.bind(this),n)}.bind(this))};return e}(po),vo=2,go=Symbol("state"),yo=Symbol("recommendationFromDvCb"),bo=Symbol("ackConfirmationFromDvCb"),_o=Symbol("timedOut"),wo=Symbol("shouldAcknowledge"),So=function(t){function e(e){var n;(n=t.call(this,e)||this)[go]=new $i("blocking-state");n[yo]=null;n[bo]=null;n[_o]=!1;n[wo]=!1;n._scheduleAndProcessRecommendationTimeout=hr(n._scheduleAndProcessRecommendationTimeout);jr({href:"//"+so,rel:"preconnect",pr:"1.0"});jr({href:"//"+uo,rel:"preconnect",pr:"1.0"});return n}r(e,t);var n=e.prototype;n.start=function(){return new Promise(function(e,n){return Promise.resolve(t.prototype.start.call(this)).then(function(t){try{this[yo]=new fr(this._processRecommendationFromDv.bind(this));this.facade.config.DVP_DCB=this[yo].name;this[go].set(1);return Promise.resolve(this._insertScript(co)).then(function(t){try{return e()}catch(t){return n(t)}},n)}catch(t){return n(t)}}.bind(this),n)}.bind(this))};n.decide=function(){return new Promise(function(t,e){return t(this[go].reach(vo))}.bind(this))};n.decideNow=function(){return new Promise(function(t,e){this._scheduleAndProcessRecommendationTimeout();return t(this.decide())}.bind(this))};n.dispose=function(){return new Promise(function(e,n){function r(){if(null!=this[yo]){this[yo].remove();this[yo]=null}if(null!=this[bo]){this[bo].remove();this[bo]=null}return Promise.resolve(t.prototype.dispose.call(this)).then(function(t){try{return e()}catch(t){return n(t)}},n)}return this[go].reached(1)?Promise.resolve(this.decideNow()).then(function(t){try{if(this[wo]&&!this[go].reached(3))return Promise.resolve(this[go].reach(3)).then(function(t){try{return e.call(this)}catch(t){return n(t)}}.bind(this),n);function e(){return r.call(this)}return e.call(this)}catch(t){return n(t)}}.bind(this),n):r.call(this)}.bind(this))};n._getBlockingTimeout=function(){var t=this.facade.config.blkto,e=null!=t?parseInt(t,10):500;return isNaN(e)?500:Math.min(Math.max(e,100),900)};n._scheduleAndProcessRecommendationTimeout=function(){return new Promise(function(t,e){var n,r,i;return Promise.resolve(this[go].reach(1)).then(function(o){try{n=this[go].time(1);r=this._getBlockingTimeout();if((i=n+r-vi())>0)return Promise.resolve(br(i)).then(function(t){try{return s.call(this)}catch(t){return e(t)}}.bind(this),e);function s(){this[_o]=this[go].maybeSet(vo,"block"===this.facade.config.blktoa?zi:Hi);this[_o]&&(this.facade.timedOut=this[_o]);return t()}return s.call(this)}catch(t){return e(t)}}.bind(this),e)}.bind(this))};n._processRecommendationFromDv=function(t,e){this[wo]=!0;this[go].maybeSet(vo,t);this._sendRecommendationAckToDv(e,vi())};n._sendRecommendationAckToDv=function(t,e){return new Promise(function(n,r){var i,o,s,u,a,c,l,f,d;i=this;return Promise.resolve(new Promise(function(t,e){return this.facade.creative.reached(3)?t([!1,!1]):Promise.resolve(Promise.race([this.facade.decide().then(function(t){return!!t&&i.facade.creative.reach(1).then(function(){return!0})}),this.facade.creative.reach(3).then(function(){return!1})])).then(function(n){try{return t([n,!this[_o]])}catch(t){return e(t)}}.bind(this),e)}.bind(this))).then(function(i){try{s=(o=i)[0],u=o[1];a=this.facade.creative.time(1)||-1;c=this.facade.creative.time(2)||-1;l=Un();this[bo]=new fr(function(){l.resolve()});f=[s,u,a,c,e,this[bo].name];var h=function(){try{this[go].set(3);return n()}catch(t){return r(t)}}.bind(this),p=function(t){try{return h()}catch(t){return r(t)}};try{(d=new fr(t)).invoke.apply(d,f);return Promise.resolve(Promise.race([l.promise,br(500)])).then(function(t){try{return h()}catch(t){return p()}},p)}catch(t){p()}}catch(t){return r(t)}}.bind(this),r)}.bind(this))};return e}(po),Ao=function(t){return new(t.blockingEnabled?So:mo)(t)},Eo=Symbol("logger"),Io=Symbol("config"),ko=Symbol("proxy"),Po=Symbol("mode"),Oo=Symbol("decision"),Co=Symbol("selectMode"),To=Symbol("timedOut"),No=Symbol("creativeState"),Do=function(){function t(t){void 0===t&&(t=Ao);this[No]=new $i("dvf-creative");this[Oo]=Un();this[Co]=t;this[Po]=null;this[To]=!1;this.start=hr(this.start);this._determineDecision=hr(this._determineDecision);this.dispose=hr(this.dispose)}var e=t.prototype;e.start=function(t,e){return new Promise(function(n,r){this[ko]=e;this[Io]=Object.assign({},t,lo);var i=function(){try{return n()}catch(t){return r(t)}},o=function(t){try{this[Oo].reject(t);return i()}catch(t){return r(t)}}.bind(this);try{this[Po]=new this[Co](this);return Promise.resolve(this[Po].start()).then(function(t){try{return i()}catch(t){return o(t)}},o)}catch(t){o(t)}}.bind(this))};e.decide=function(){return new Promise(function(t,e){if(null==this[Po])return e(new Error("Not started yet"));this._determineDecision();return t(this[Oo].promise)}.bind(this))};e.decideNow=function(){return new Promise(function(t,e){if(null==this[Po])return e(new Error("Not started yet"));this[Po].decideNow();return t(this.decide())}.bind(this))};e.onStartCreativeLoad=function(){this.creative.maybeSet(1)};e.onEndCreativeLoad=function(){this.creative.maybeSet(2)};e.dispose=function(){return new Promise(function(t,e){function n(){return t()}this.creative.maybeSet(3);return null!=this[Po]?Promise.resolve(this[Po].dispose()).then(function(t){try{this[Po]=null;return n.call(this)}catch(t){return e(t)}}.bind(this),e):n.call(this)}.bind(this))};e._determineDecision=function(){return new Promise(function(t,e){var n;return Promise.resolve(this[Po].decide()).then(function(r){try{n=r!==zi||this.dryRun;this[Oo].resolve(n);return t()}catch(t){return e(t)}}.bind(this),e)}.bind(this))};n(t,[{key:"logger",get:function(){return this[Eo]}},{key:"blockingEnabled",get:function(){return"1"===this[Io].blk}},{key:"dryRun",get:function(){return"1"===this[Io].dry}},{key:"timedOut",get:function(){return this[To]},set:function(t){this[To]=t}},{key:"creative",get:function(){return this[No]}},{key:"config",get:function(){return this[Io]}},{key:"proxy",get:function(){return this[ko]}}]);return t}(),jo=Symbol("dvFacade"),Mo=Ii,xo=ki,Ro=function(t){function e(){var e;(e=t.call(this)||this)[jo]=new Do;return e}r(e,t);n(e,null,[{key:"id",get:function(){return"dv"}}]);var i=e.prototype;i.init=function(){this[jo].start(this.config,new Bi(this))};i.dispose=function(){return this[jo].dispose()};i.beforeInitAd=function(t,e,n,r,i,o){return new Promise(function(t,e){this[Mo]=o.slot;this[xo]=o.videoSlot;this[jo].onStartCreativeLoad();this._publishErrorOnBlocked();return t()}.bind(this))};i.beforeAdLoaded=function(){return new Promise(function(t,e){this[jo].onEndCreativeLoad();return Promise.resolve(this[jo].decideNow()).then(function(n){try{return t()}catch(t){return e(t)}},e)}.bind(this))};i._publishErrorOnBlocked=function(){return new Promise(function(t,e){return Promise.resolve(this[jo].decide()).then(function(n){try{if(!n){this.trackBlockingResult(!0,this[jo].timedOut?"timeout":null);this.publish(Hn.AdError,["Ad blocked"])}return t()}catch(t){return e(t)}}.bind(this),e)}.bind(this))};i.trackBlockingResult=function(t,e){void 0===e&&(e=null);var n=t?"dv-res-block":"dv-res-allow",r=null!=e?{197:e}:null;this.track(n,r,null,!0)};return e}(Mi);Vi.register(Ro);var Lo=function(){return"__forensiqcb__"+ur()},Vo=Symbol("cbName"),Fo=function(t){function e(){var e;(e=t.call(this)||this)[Vo]=Lo();return e}r(e,t);var i=e.prototype;i.beforeInitAd=function(t,e,n,r,i,o){return new Promise(function(t,e){var n,r,i,o,s,u=function(){try{this._trackResult(n,i,r);this._handleResult(n,r);return t()}catch(t){return e(t)}}.bind(this),a=function(t){try{s=t&&"Timed out"===t.message?[204,null]:[0,t];n=s[0];r=s[1];return u()}catch(t){return e(t)}};try{o=this._getForensiqStatus();return Promise.resolve(o).then(function(t){try{n=t;i=o.time;return u()}catch(t){return a(t)}},a)}catch(t){a(t)}}.bind(this))};i.dispose=function(){delete window[this[Vo]]};i._getForensiqStatus=function(){var t,e,n=this,r=(t=this[Vo],e=function(e,n){return{callback:t,org:n.org,sk:n.sk,s:n.s,p:n.p,a:n.a,cmp:n.cmp,url:window.location.href,ua:navigator.userAgent}}(0,this.config),"https://s.fqtag.com/a/?"+io(e)),i=new Promise(function(t){window[n[Vo]]=function(e){t(e);delete window[n[Vo]]}});return mr(function(){return new Promise(function(t,e){return Promise.resolve($n(r)).then(function(n){try{return t(wr(i,1500,"Timed out"))}catch(t){return e(t)}},e)})})()};i._handleResult=function(t,e){if(200===t);else if(500===t)throw new Error("Ad blocked")};i._trackResult=function(t,e,n){var r={190:e};null!=n?this.trackError("fq-res-"+t,n,null,r,!0):this.track("fq-res-"+t,null,r,!0)};n(e,null,[{key:"id",get:function(){return"fq"}}]);return e}(Mi);Vi.register(Fo);var Uo=function(t,e){h(t);if(!d(e)&&null!==e)throw TypeError(e+": can't set as prototype!")},Go={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{(n=D(Function.call,Ct.f(Object.prototype,"__proto__").set,2))(t,[]);e=!(t instanceof Array)}catch(t){e=!0}return function(t,r){Uo(t,r);e?t.__proto__=r:n(t,r);return t}}({},!1):void 0),check:Uo},Wo=Go.set,Bo=function(t,e,n){var r,i=e.constructor;i!==n&&"function"==typeof i&&(r=i.prototype)!==n.prototype&&d(r)&&Wo&&Wo(t,r);return t},zo="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff",Ho="["+zo+"]",qo=RegExp("^"+Ho+Ho+"*"),Qo=RegExp(Ho+Ho+"*$"),Ko=function(t,e,n){var r={},i=p(function(){return!!zo[t]()||"​"!="​"[t]()}),o=r[t]=i?e(Jo):zo[t];n&&(r[n]=o);M(M.P+M.F*i,"String",r)},Jo=Ko.trim=function(t,e){t=String(V(t));1&e&&(t=t.replace(qo,""));2&e&&(t=t.replace(Qo,""));return t},Xo=Ko,Yo=At.f,Zo=Ct.f,$o=S.f,ts=Xo.trim,es=l.Number,ns=es,rs=es.prototype,is="Number"==R(wt(rs)),os="trim"in String.prototype,ss=function(t){var e=_(t,!1);if("string"==typeof e&&e.length>2){var n,r,i,o=(e=os?e.trim():ts(e,3)).charCodeAt(0);if(43===o||45===o){if(88===(n=e.charCodeAt(2))||120===n)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:r=2;i=49;break;case 79:case 111:r=8;i=55;break;default:return+e}for(var s,u=e.slice(2),a=0,c=u.length;a<c;a++)if((s=u.charCodeAt(a))<48||s>i)return NaN;return parseInt(u,r)}}return+e};if(!es(" 0o1")||!es("0b1")||es("+0x1")){es=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof es&&(is?p(function(){rs.valueOf.call(n)}):"Number"!=R(n))?Bo(new ns(ss(e)),n,es):ss(e)};for(var us,as=m?Yo(ns):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),cs=0;as.length>cs;cs++)k(ns,us=as[cs])&&!k(es,us)&&$o(es,us,Zo(ns,us));es.prototype=rs;rs.constructor=es;T(l,"Number",es)}for(var ls=function(t){var e,n,r,i,o=(n=function(){var t=function(t){return void 0!==t},e=function(){var e="u";try{t(window.opera)&&t(window.opera.buildNumber)?e="o":t(window.mozInnerScreenY)?e="g":t(window.chrome)&&t(window.chrome.csi)?e="c":t(window.msWriteProfilerMark)&&t(window.crypto)?e="e":t(window.attachEvent)||t(window.msCrypto)?e="i":t(window.WebKitPoint)&&(e="w")}catch(t){}return e}(),n=function(){var e,n=function(){var e={g:"",q:""};try{e.q=window.parent.parent.parent.parent.parent.parent.parent.parent.parent.parent.location.href}catch(o){var n,r=(r=o.message).substring(r.lastIndexOf("<")+1,r.lastIndexOf(">"));if((n=t(r))&&(n=!1,t(window.navigator)&&t(window.navigator.userAgent))){var i=window.navigator.userAgent.match(/Firefox\/([\.0-9]+)/);null!==i&&2==i.length&&(i=i[1].split("."),3==parseInt(i[0],10)&&6>=parseInt(i[1],10)&&(3==i.length?13>=parseInt(i[2],10)&&(n=!0):n=!0))}n&&(e.g=r)}return e},r={};try{r.a=encodeURIComponent(top.location.href)}catch(t){}try{r.b=encodeURIComponent(parent.location.href)}catch(t){}if(window!=top){try{r.c=encodeURIComponent(parent.document.referrer)}catch(t){}try{r.e=encodeURIComponent(window.document.referrer)}catch(t){}}try{r.d=encodeURIComponent(window.location.href)}catch(t){}try{var i=n();r.g=encodeURIComponent(i.g);r.q=encodeURIComponent(i.q)}catch(t){}r=function(e){var n,r,i={};for(r in e)e.hasOwnProperty(r)&&(n=e[r],t(i[n])?i[n]+=r:i[n]=r);e={};for(r in i)i.hasOwnProperty(r)&&(e[n=i[r]]=r);return e}(r=function(e){for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];""!==r&&"null"!==r&&"undefined"!==r&&null!==r&&t(r)||delete e[n]}return e}(r)),n=[];for(e in r)r.hasOwnProperty(e)&&n.push({key:e,val:r[e]});n.sort(function(t,e){return t.val.length>e.val.length?1:t.val.length<e.val.length?-1:0});return n}();return{br:e,urls:n}},r=function(t,e,n){var r=["//"+y.getFwServerDomain(),"/db2/video/",e+"/",n+"/","skeleton.js?videoId=",l.getVideoId()].join("");e=function(t){r=[r,"&adsafe_url=",t.val,"&adsafe_type=",t.key].join("")};try{t.urls.forEach(e),r=[r,"&adsafe_jsinfo=br:",t.br].join("")}catch(t){a.report(p.DIAGNOSTIC.BUILD_VIDEOAPI_URL,t)}return r},i=function(){if(this.readyState==p.XHR.READY_STATE.DONE)if(this.status==p.HTTP.STATUS_CODE.OK)try{e("failed"===JSON.parse(this.responseText).action?p.BLOCKING_RESPONSE.BLOCK:p.BLOCKING_RESPONSE.SAFE)}catch(t){a.report(p.DIAGNOSTIC.BLOCK_AD,t)}else a.report(p.DIAGNOSTIC.BLOCKING_URL_REQUEST_ERR,{message:this.status})},{init:function(t,o,s){var u=n();t=r(u,t,o);e=s;y.sendUrlRequest(t,i)}}),s=function(){var t=window;return{getWin:function(){return t},setWin:function(e){(e=e&&e.ownerDocument)&&e.defaultView?t=e.defaultView:e&&e.parentWindow?t=e.parentWindow:a.report(p.DIAGNOSTIC.SET_CONTEXT,{message:""})},getDoc:function(){return t.document}}}(),u=function(){var t,e=[],n=!1,r=function n(r){if(l.isEstablished()){var i;try{(i=y.stringify(r))&&("AdImpression"===r.messageType?y.getWindow()[t](i):y.getWindow().postMessage(i,"*"))}catch(t){a.report(p.DIAGNOSTIC.DISPATCH_MESSAGE,t)}}else if(l.canNeverBeEstablished()){i=y.getFwServerDomain();var o=u.config;try{"AdImpression"===r.messageType&&(u.isCmTag?y.sendUrlRequest(["//"+i,"/mon?",function(t){var e="";Object.keys(t).forEach(function(n){-1===["advEntityId","pubEntityId","partner","debug"].indexOf(n)&&(e+="&"+n+"="+t[n])});return e}(o)].join("")):u.isFwTag&&y.sendUrlRequest(["//"+i,"/rfw/st/",o.advEntityId+"/"+o.pubEntityId,"/skeleton.js"].join("")))}catch(n){a.report(p.DIAGNOSTIC.DISPATCH_MESSAGE,n)}}else try{e.push(r)}catch(t){a.report(p.DIAGNOSTIC.CACHE_MESSAGE,t)}},i=function(t,e){y.sendMonitoringDebugPixel(p.MONITORING.AD_STOPPED,u.monitoringQS());o(t,e)},o=function(t,e){try{r({messageType:t,id:l.getVideoId(),time:y.now(),partner:c.getPartnerCode(),eventData:e})}catch(t){a.report(p.DIAGNOSTIC.SEND_EVENT,t)}},s={AdImpression:function(t,e){var r=g.getInjector();n||(e&&(e.ext_passthrough=u.passThroughObj),n=!0,y.sendMonitoringDebugPixel(p.MONITORING.AD_IMPRESSION,u.monitoringQS()),r.onInjectionResolution(function(){o(t,e)}),r.resolveInjection())},AdStopped:i,AdVideoComplete:i,AdError:function(t,e){y.sendMonitoringDebugPixel(p.MONITORING.AD_ERROR,u.monitoringQS());o(t,e)}};return{sendEvent:function(t,e){var n=s[t]||o;g.vans.hasBegun()&&n(t,e)},setImpressionCallback:function(e){t=e},flushUnsentEvents:function(){try{e.forEach(r)}catch(t){a.report(p.DIAGNOSTIC.FLUSH_UNSENT_EVENTS,t)}},passThroughObj:{},monitoringQS:function(){},clearSessionState:function(){n=!1;e.length=0}}}(),a=function(){var t={};return{report:function(e,n,r){if(!t[e])try{t[e]=!0;var i="//"+y.getFwServerDomain()+"/jsdiagnostic?code:vans-js_"+encodeURIComponent(c.getPartnerCode())+"_"+e+"&err:"+encodeURIComponent(n.message);r&&(i+="&config:"+encodeURIComponent(JSON.stringify(r)));y.sendUrlRequest(i)}catch(t){}}}}(),c={initCM:function(t,e){m.initCM(t,e)},initFW:function(t,e,n){m.initFW(t,e,n)},getPartnerCode:function(){return g.get().partnerCode},getPassThroughObj:function(){return g.get().passThroughObj},getAltMonDomain:function(){return g.get().monDomain},hasDebugEnabled:function(){return g.get().debugEnabled}},l=function(){var t,e=!1,n=!1,r=function(t,n){t==i()&&(e=!0,u.setImpressionCallback(n),y.sendMonitoringDebugPixel(p.MONITORING.HANDSHAKE_SUCCESS,u.monitoringQS()),u.flushUnsentEvents());return e?p.VIDEO_CHANNEL:null},i=function(){t||(t=y.generateUID());return t};return{getVideoId:i,setNodeInterface:function(t){var e,n,o,s=i();try{e="IASid"+s,n="blockAd"+s,o="getIasVidBridgeVersion"+s,t.className+=" integral-vid-"+s,t[n]=y.noop,t[e]=r,t[o]=function(){return"2"},t.getVersion=function(){return p.INTERNAL_VERSION}}catch(t){a.report(p.DIAGNOSTIC.SET_NODE_INTERFACE,t)}},isEstablished:function(){return e},canNeverBeEstablished:function(){return n},giveUpOnHandshaking:function(){n=!0;u.flushUnsentEvents()},resetHandshake:function(){n=e=!1}}}(),f=function(){var t=function(){var t=[];return{addCallback:function(e,n){var r=0;n=n||Number.MAX_VALUE;t.push(function(){r<n&&(r++,e.apply({},arguments))})},executeCallbacks:function(){var e=arguments;t.forEach(function(t){t.apply({},e)})}}}();return{addCallback:function(e){t.addCallback(e,1)},executeCallbacks:t.executeCallbacks}},d=function(t){var e=!1,n=!1,r=new f,i=!1,o=function(o){var s,u=function(){!e&&t.parentNode?(t.parentNode.appendChild(o),clearInterval(s),n=e=!0,y.sendMonitoringDebugPixel(p.MONITORING.FWJS_INJECTED,v.buildMonitoringQS())):i&&(n=!0,clearInterval(s),l.giveUpOnHandshaking());n&&r.executeCallbacks()};u();e||(s=setInterval(u,200))},s=function(){var e=t&&t.ownerDocument,n=e&&e.parentWindow;return!!(e&&e.defaultView||n)};return{injectTagScript:function(t,e){var r,i=y.getDocument();if(s())try{(r=i.createElement("script")).src=function(t,e){var n,r=y.getFwServerDomain();try{n=["//",r,t,"?videoId=",l.getVideoId(),function(t){var e="";Object.keys(t).forEach(function(n){"advEntityId"!=n&&"pubEntityId"!=n&&"partner"!=n&&(e+="&"+n+"="+t[n])});return e}(e)].join("")}catch(t){a.report(p.DIAGNOSTIC.BUILD_SRC_URL,t)}return n}(t,e),r.addEventListener("load",function(t){y.sendMonitoringDebugPixel(p.MONITORING.FWJS_LOAD_SUCCESS,v.buildMonitoringQS())}),r.addEventListener("error",function(t){l.giveUpOnHandshaking();y.sendMonitoringDebugPixel(p.MONITORING.FWJS_LOAD_ERROR,v.buildMonitoringQS())}),o(r)}catch(t){l.giveUpOnHandshaking(),y.sendMonitoringPixel(p.MONITORING.INJECTION_ERR)}else n=!0,l.giveUpOnHandshaking()},sendInjectionDiagnostics:function(){var e=t&&t.ownerDocument,n=t&&t.parentNode,r=e&&(e.defaultView||e.parentWindow),i=p.MONITORING.AD_NODE_TYPE+"_"+(t?t.constructor.name||t.nodeName||typeof t:"null");t||y.sendMonitoringDebugPixel(p.MONITORING.AD_NODE_NULL,v.buildMonitoringQS());t&&!n&&y.sendMonitoringDebugPixel(p.MONITORING.AD_NODE_DETACHED,v.buildMonitoringQS());t&&!e&&y.sendMonitoringDebugPixel(p.MONITORING.AD_NODE_NO_DOC,v.buildMonitoringQS());e&&!r&&y.sendMonitoringDebugPixel(p.MONITORING.AD_NODE_NO_WINDOW,v.buildMonitoringQS());y.sendMonitoringDebugPixel(i,v.buildMonitoringQS())},onInjectionResolution:function(t){r.addCallback(t);n&&r.executeCallbacks()},resolveInjection:function(){i=!0}}},h=function(){var t,e=!1,n=function e(n){var r,i=!1;try{i="unloadComplete"===(r=JSON.parse(n.data)).msg&&r.id==l.getVideoId()}catch(t){}i&&(t(),y.getWindow().removeEventListener("message",e))};return{registerMeasurementCompleteHandler:function(r){t=r;e||(y.getWindow().addEventListener("message",n),e=!0)}}},p={INTERNAL_VERSION:"3.6.0",VIDEO_CHANNEL:"jv3",PROD_DOMAIN:"pixel.adsafeprotected.com",DIAGNOSTIC_MONITORING_DOMAIN:"spixel.adsafeprotected.com",S4_ITERATIONS:8,EVENTS:{AD_IMPRESSION:"AdImpression"},PSUEDO_IMPRESSION_ID_PREFIX:"vidId_",DIAGNOSTIC:{INIT_FW:"ifw",INIT_CM:"icm",FLUSH_UNSENT_EVENTS:"fue",CACHE_MESSAGE:"cm",SEND_EVENT:"se",BLOCK_AD:"ba",SEND_MONITORING_PIXEL:"smp",SET_NODE_INTERFACE:"sni",BUILD_SRC_URL:"bsurl",BUILD_VIDEOAPI_URL:"bvu",BLOCKING_URL_REQUEST_ERR:"blk_url_req_err",DISPATCH_MESSAGE:"dm",SET_CONTEXT:"sc",STRINGIFY_EVENT_ERROR:"ser"},MONITORING:{INJECTION_ERR:"inj_err",VANS_INITIALIZED:"init",HANDSHAKE_SUCCESS:"hs",AD_IMPRESSION:"ai",DEFERRED_INTERFACE:"vans_defer",AD_STOPPED:"adstop",AD_ERROR:"aderr",AD_NODE_NULL:"adnode_null",AD_NODE_DETACHED:"adnode_detached",AD_NODE_NO_DOC:"adnode_nodoc",AD_NODE_NO_WINDOW:"adnode_nowin",AD_NODE_TYPE:"adnode_type",FWJS_INJECTED:"fwjsinj",FWJS_LOAD_SUCCESS:"fwjsload",FWJS_LOAD_ERROR:"fwjsload_err",IMPRESSION_DOMAIN_BLOCKING:"impblock"},HTTP:{VERBS:{GET:"GET"},STATUS_CODE:{OK:200}},BLOCKING_RESPONSE:{BLOCK:"block",SAFE:"safe"},XHR:{READY_STATE:{DONE:4}}},m=function(){var t=function(t,e,n,r){l.setNodeInterface(n);"function"==typeof e.onMeasurementComplete&&(new h).registerMeasurementCompleteHandler(e.onMeasurementComplete);var i={};Object.getOwnPropertyNames(e).forEach(function(t){"debug"!==t&&"onMeasurementComplete"!==t&&(i[t]=e[t])});r.injectTagScript(t,i)};return{initCM:function(e,n){var r;if(!g.vans.hasBegun()){if(!e||!e.partner)throw Error("Missing partner code");s.setWin(n);g.setPreErrorConfig(e,"cm");try{if(!e.anId)throw Error("Missing anId");g.vans.begin();r=new d(n);g.setInjector(r);g.setConfig(e);y.sendMonitoringDebugPixel(p.MONITORING.VANS_INITIALIZED,v.buildMonitoringQS());y.sendMonitoringDebugPixel(p.MONITORING.IMPRESSION_DOMAIN_BLOCKING,v.buildMonitoringQS(),y.getFwServerDomain());r.sendInjectionDiagnostics();t("/jsvid",e,n,r)}catch(t){a.report(p.DIAGNOSTIC.INIT_CM,t)}}},initFW:function(e,n,r){var i,u;if(!g.vans.hasBegun()){if(!e||!e.partner)throw Error("Missing partner code");s.setWin(n);g.setPreErrorConfig(e,"fw");try{if(!e.advEntityId||!e.pubEntityId)throw Error("Missing client id: advEntityId: "+e.advEntityId+" ,pubEntityId: "+e.pubEntityId);g.vans.begin();u=new d(n);g.setInjector(u);g.setConfig(e);y.sendMonitoringDebugPixel(p.MONITORING.VANS_INITIALIZED,v.buildMonitoringQS());y.sendMonitoringDebugPixel(p.MONITORING.IMPRESSION_DOMAIN_BLOCKING,v.buildMonitoringQS(),y.getFwServerDomain());u.sendInjectionDiagnostics();r&&o.init(e.advEntityId,e.pubEntityId,r);i="/fwjsvid/st/"+e.advEntityId+"/"+e.pubEntityId+"/skeleton.js";t(i,e,n,u)}catch(t){a.report(p.DIAGNOSTIC.INIT_FW,t)}}}}}(),v={buildMonitoringQS:function(){var t=p.PSUEDO_IMPRESSION_ID_PREFIX+l.getVideoId(),e=g.getInfoParams();return["&chanId="+e.anId,"planId="+e.advEntityId,"placementId="+e.pubEntityId,"advId="+e.campId,"pubOrder="+e.placementId,"pubCreative="+e.creativeId,"impId="+(e.impId||t),"ts="+Date.now(),"custom="+p.INTERNAL_VERSION,"custom2=jv3&custom3="+g.get().tagType,"adsafe_par"].join("&")}},g=function(){var t,e={},n=!1,r={};return{vans:{hasBegun:function(){return n},begin:function(){n=!0}},setInjector:function(e){t=e},getInjector:function(){return t},setPreErrorConfig:function(t,n){e.tagType=n;var r;r="string"==typeof(r=t.partner)?r.replace(/[^\w-.]/g,""):r;e.partnerCode=r;e.debugEnabled=t.debug&&t.debug.enabled;e.debugEnabled&&(e.monDomain=t.debug.monDomain)},setConfig:function(t){!function(t){"impId creativeId campId placementId advEntityId pubEntityId anId".split(" ").forEach(function(e){r[e]=t[e]});r.monDomain=e.monDomain}(t);e.passThroughObj={vv:p.INTERNAL_VERSION,vanstag:e.tagType,xcamp:r.campId,xplac:r.placementId,xcreat:r.creativeId,ximp:r.impId,xpc:e.partnerCode};e.config=t;!function(t){u.monitoringQS=v.buildMonitoringQS;u.passThroughObj=e.passThroughObj;Object.keys(t).forEach(function(e){u[e]=t[e]})}({isFwTag:"fw"===e.tagType,isCmTag:"cm"===e.tagType,config:t})},getInfoParams:function(){return r},get:function(){return e}}}(),y={now:function(){return(new Date).getTime()},sendMonitoringPixel:function(t){try{this.sendUrlRequest(["//"+y.getFwServerDomain(),"/mon?anId=10173&campId=",encodeURIComponent(c.getPartnerCode()),"&pubId=",encodeURIComponent("vans-js_"+t)].join(""))}catch(t){a.report(p.DIAGNOSTIC.SEND_MONITORING_PIXEL,t)}},sendMonitoringDebugPixel:function(){var t=[p.MONITORING.AD_STOPPED],e={};return function(n,r,i){var o=c.hasDebugEnabled(),s=-1<t.indexOf(n)&&e[n];if(o&&!s)try{var u,l=p.DIAGNOSTIC_MONITORING_DOMAIN,f=c.getAltMonDomain(),d=(f=(i=i||f||l)===f?"925116":"10173",y.addProtocolToDomain(i)),h=encodeURIComponent(n),m=encodeURIComponent(c.getPartnerCode());u=r.replace(/=undefined&/g,"=&");y.sendUrlRequest(d+"/mon?anId="+f+"&campId="+m+"&pubId="+h+u);e[n]=!0}catch(t){a.report(p.DIAGNOSTIC.SEND_MONITORING_PIXEL,t)}}}(),sendUrlRequest:function(t,e){var n,r;if(t){n=this.getWindow();try{r=new n.XMLHttpRequest,e&&(r.onreadystatechange=e),r.open(p.HTTP.VERBS.GET,t),r.send()}catch(t){}}},stringify:function(t){if("AdImpression"!==t.messageType)return JSON.stringify(t);var e={};e.passthroughObj=c.getPassThroughObj();var n="";try{n=JSON.stringify(t)}catch(t){a.report(p.DIAGNOSTIC.STRINGIFY_EVENT_ERROR,t,e);return}return n},addProtocolToDomain:function(t){return t.match(/^[a-zA-Z]+:\/\//)?t:"https://"+t},getWindow:function(){return s.getWin()},getDocument:function(){return s.getDoc()},generateUID:function(){var t,e="";try{for(t=0;t<p.S4_ITERATIONS;t++)e=[e,Math.floor(65536*(1+Math.random())).toString(16).substring(1)].join("")}catch(t){}return e},getFwServerDomain:function(){return t||p.PROD_DOMAIN},noop:function(){}};return{initFW:c.initFW,initCM:c.initCM,sendEvent:u.sendEvent}},fs={ad_duration:"getAdDuration",width:"getAdWidth",height:"getAdHeight",volume:"getAdVolume"},ds=[Hn.AdLoaded,Hn.AdImpression,"resizeAd"],hs=["planId","uId","impId","bidPr","bidurl"],ps=Symbol("integral"),ms=Symbol("viewMode"),vs=Symbol("adNode"),gs=Symbol("measurementCompleted"),ys=hr(function(){jr({href:"//pixel.adsafeprotected.com",rel:"preconnect",pr:"1.0"});jr({href:"//dt.adsafeprotected.com",rel:"preconnect",pr:"1.0"});jr({href:"//sc.iasds01.com",rel:"preconnect",pr:"1.0"})}),bs=function(t){function e(){var e;(e=t.call(this)||this)[gs]=Un();ys();return e}r(e,t);var i=e.prototype;i.beforeInitAd=function(t,e,n,r,i,o){return new Promise(function(t,e){this[ps]=new ls(this.config.fwServerDomain);this[ms]=n;this[vs]=o?o.slot:null;return t()}.bind(this))};i.beforeResizeAd=function(t,e,n){return new Promise(function(t,e){this[ms]=n;return t()}.bind(this))};i.beforeAdSkipped=function(){return new Promise(function(t,e){return Promise.resolve(this._completeMeasurement()).then(function(n){try{return t()}catch(t){return e(t)}},e)}.bind(this))};i.beforeAdStopped=function(){return new Promise(function(t,e){return Promise.resolve(this._completeMeasurement()).then(function(n){try{return t()}catch(t){return e(t)}},e)}.bind(this))};i.beforeAdError=function(){return new Promise(function(t,e){return Promise.resolve(this._completeMeasurement()).then(function(n){try{return t()}catch(t){return e(t)}},e)}.bind(this))};i._completeMeasurement=function(){return new Promise(function(t,e){return Promise.resolve(Promise.race([this[gs].promise,br(250)])).then(function(n){try{return t()}catch(t){return e(t)}},e)}.bind(this))};i._sendEvent=function(t,e){if(null!=this[ps]){"AdSizeChange"===t&&(t="resizeAd");var n=this._buildEventContext(t,e);this[ps].sendEvent(t,n)}};i._buildEventContext=function(t,e){for(var n=this.host,r={},i=Object.keys(fs),o=0;o<i.length;++o){var s=i[o],u=fs[s],a=void 0;try{a=n[u]()}catch(t){}"number"!=typeof a&&(a=zn);r[s]=a}ds.indexOf(t)>=0&&(r.viewMode=this[ms]);return r};n(e,[{key:"normalizedConfig",get:function(){var t=this,e=this.config,n=Object.assign({},e);delete n.debug;delete n.monDomain;delete n.fwServerDomain;delete n.monitoring;if(!0===e.debug){n.debug=n.debug||{};n.debug.enabled=!0}if(null!=e.monDomain){n.debug=n.debug||{};n.debug.monDomain=e.monDomain}hs.some(function(t){return!(e=n[t],null==e||""===e||Array.isArray(e)&&null==e.length);var e})&&(n.adsafe_par="");null==n.partner&&(n.partner="iasz");n.onMeasurementComplete=function(){t[gs].resolve()};return n}},{key:"_integral",get:function(){return this[ps]}},{key:"_adNode",get:function(){return this[vs]}}]);return e}(Mi),_s=bs.prototype,ws=Object.keys(Hn).map(function(t){return Hn[t]}),Ss=function(t){var e=ws[t],n="before"+e,r=_s[n];_s[n]=function(){var t=arguments;return new Promise(function(n,i){function o(){return n()}var s,u,a;for(s=t.length,u=new Array(s),a=0;a<s;a++)u[a]=t[a];this._sendEvent(e,u);return null!=r?Promise.resolve(r.apply(this,u)).then(function(t){try{return o.call(this)}catch(t){return i(t)}}.bind(this),i):o.call(this)}.bind(this))}},As=0;As<ws.length;++As)Ss(As);var Es=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);e.prototype.beforeInitAd=function(e,n,r,i,o,s){return new Promise(function(u,a){return Promise.resolve(t.prototype.beforeInitAd.call(this,e,n,r,i,o,s)).then(function(t){try{this._integral.initCM(this.normalizedConfig,this._adNode);return u()}catch(t){return a(t)}}.bind(this),a)}.bind(this))};n(e,null,[{key:"id",get:function(){return"ias.cm"}}]);return e}(bs),Is=Symbol("deciding"),ks=Symbol("didBlock"),Ps=["safe","block","monitor"],Os=mr(function(){return wr(function(t,e,n,r){return new Promise(function(i,o){try{if(!0===r){t.initFW(e,n);i("monitor")}else t.initFW(e,n,i)}catch(t){o(t)}})}.apply(void 0,arguments),1500,"Timed out")}),Cs=hr(function(){jr({href:"//static.adsafeprotected.com",rel:"preconnect",pr:"1.0"})}),Ts=function(t){function e(){var e;e=t.call(this)||this;Cs();return e}r(e,t);var i=e.prototype;i.beforeInitAd=function(e,n,r,i,o,s){return new Promise(function(u,a){return Promise.resolve(t.prototype.beforeInitAd.call(this,e,n,r,i,o,s)).then(function(t){try{this[ks]=!1;this[Is]=Os(this._integral,this.normalizedConfig,this._adNode,this.config.monitoring);return u()}catch(t){return a(t)}}.bind(this),a)}.bind(this))};i.beforeAdLoaded=function(){return new Promise(function(e,n){var r,i,o=function(){try{this._trackFwResult(r,this[Is].time,i);if("block"===r){console.warn("IAS FW: Ad blocked");this[ks]=!0;this._sendEvent(Hn.AdImpression);return n(new Error("Ad blocked"))}return Promise.resolve(t.prototype.beforeAdLoaded.call(this)).then(function(t){try{return e()}catch(t){return n(t)}},n)}catch(t){return n(t)}}.bind(this),s=function(t){try{if("Timed out"===(t&&t.message)){console.warn("IAS FW: Timed out");r="timeout"}else{console.warn("IAS FW: Error: "+i.message);r="error";i=t}return o()}catch(t){return n(t)}};try{return Promise.resolve(this[Is]).then(function(t){try{if(!function(t){return Ps.indexOf(t)>=0}(r=t)){console.warn('IAS FW: Invalid decision "'+r+'"');r="invalid"}return o()}catch(t){return s(t)}},s)}catch(t){s(t)}}.bind(this))};i._buildEventContext=function(e,n){var r=t.prototype._buildEventContext.call(this,e,n);if(e===Hn.AdImpression){var i=null!=this[Is]?this[Is].time:0;Object.assign(r,{integral_didBlock:this[ks],integral_timeToDecision:i})}return r};i._trackFwResult=function(t,e,n){var r={190:e};null!=n?this.trackError("ias-fw-res-"+t,n,null,r,!0):this.track("ias-fw-res-"+t,null,r,!0)};n(e,null,[{key:"id",get:function(){return"ias.fw"}}]);return e}(bs),Ns="Advertisement. Your video will begin in [T] seconds.",Ds=Symbol("message"),js=Symbol("positionX"),Ms=Symbol("positionX"),xs=Symbol("counter"),Rs=Symbol("interval"),Ls=function(t){function e(){var e;(e=t.call(this)||this)[Ds]=Ns;e[js]="center";e[Ms]="bottom";e[xs]=null;e[Rs]=null;return e}r(e,t);var i=e.prototype;i._loadConfig=function(){var t,e=this,n=this.config.flags;if(null!=n){var r=function(t,n){return function(){e[js]=n;e[Ms]=t}},i=((t={frtimer:function(){e[Ds]="Publicité: Votre vidéo commence dans [T] secondes."},gertimer:function(){e[Ds]="Nur ein Werbespot. Das Video beginnt in [T] Sekunden."}}).topleftcount=r("top","left"),t.topmiddlecount=r("top","center"),t.toprightcount=r("top","right"),t.bottomleftcount=r("bottom","left"),t.bottomrightcount=r("bottom","right"),t);n.split("|").map(function(t){return i[t]}).forEach(function(t){return t&&t()})}};i._createCountdown=function(t){var e,n=(t.ownerDocument||document).createElement("div");bi(n,((e={"background-color":"rgba(0, 0, 0, 0.7)"})[this[Ms]]="bottom"===this[Ms]?"10px":"0px",e.right="0px",e.width="100%",e.position="absolute",e.color="white",e["font-size"]="12px",e["font-weight"]="200",e["font-family"]="Arial, Helvetica, sans-serif",e["text-align"]=this[js],e["z-index"]="10000001",e),!0);this[xs]=n;this._updateCountdown();t.appendChild(n)};i._updateCountdown=function(){var t=Math.round(this.host.getAdRemainingTime());t<0&&(t=Math.max(this.host.getAdDuration(),0));var e=this[Ds].replace("[T]",t);this[xs].innerHTML!==e&&(this[xs].innerHTML=e)};i.beforeInitAd=function(t,e,n,r,i,o){return new Promise(function(t,e){this._loadConfig();this._createCountdown(o.slot);return t()}.bind(this))};i.afterAdStarted=function(){return new Promise(function(t,e){var n=this;if(null!==this[xs]){this._updateCountdown();this[Rs]=setInterval(function(){return n._updateCountdown()},250)}return t()}.bind(this))};i.beforeAdStopped=function(){return new Promise(function(t,e){if(null!==this[Rs]){clearInterval(this[Rs]);this[Rs]=null}return t()}.bind(this))};n(e,null,[{key:"id",get:function(){return"ias.countdown"}}]);return e}(Mi),Vs=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);e.prototype.afterAdLoaded=function(){return new Promise(function(t,e){this.host.startAd();return t()}.bind(this))};n(e,null,[{key:"id",get:function(){return"force.start"}}]);return e}(Mi),Fs=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);e.prototype.afterAdClickThru=function(){return new Promise(function(t,e){this.host.resumeAd();return t()}.bind(this))};n(e,null,[{key:"id",get:function(){return"force.click.continue"}}]);return e}(Mi);Vi.register(Es);Vi.register(Ts);Vi.register(Ls);Vi.register(Vs);Vi.register(Fs);var Us=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);e.prototype.beforeInitAd=function(t,e,n,r,i,o){return new Promise(function(t,e){function n(){!function(t,e,n,r){var i,o,s=document.createElement("script"),u={events:[],addEvent:function(t){a.sendEvent?(u.events&&(a.sendEvent(u.events),u.events=!1),a.sendEvent(t)):u.events.push(t)}},a={adData:{ids:n,vpaid:t,duration:t.getAdDuration(),build:"cc07a80-clean"},dispatchEvent:u.addEvent};n="_moatApi"+Math.floor(1e8*Math.random());t&&t.subscribe;try{o=(i=e.ownerDocument).defaultView||i.parentWindow}catch(t){i=document,o=window}o[n]=a;s.type="text/javascript";e&&e.insertBefore(s,e.childNodes[0]||null);s.src="https://z.moatads.com/"+r+"/moatvideo.js#"+n}(this.guest,r,this.config,this.config.pcode);return t()}var r;if(null!=o&&null!=o.slot){r=o.slot;return n.call(this)}return Promise.resolve(Bn(document)).then(function(t){try{r=document.createElement("div");document.body.appendChild(r);return n.call(this)}catch(t){return e(t)}}.bind(this),e)}.bind(this))};n(e,null,[{key:"id",get:function(){return"moat"}}]);return e}(Mi);Vi.register(Us);for(var Gs=function(t){function e(){var e;(e=t.call(this)||this)._installVpaidHistory();return e}r(e,t);var i=e.prototype;i.beforeInitAd=function(t,e,n,r,i,o){return new Promise(function(t,e){var n,r,i;r=(n=o||{}).slot,i=n.videoSlot;this._ownerDocument=i&&i.ownerDocument||r&&r.ownerDocument||document;return Promise.resolve(this._installWhiteOpsScript()).then(function(n){try{return t()}catch(t){return e(t)}},e)}.bind(this))};i._installWhiteOpsScript=function(){return new Promise(function(t,e){var n,r=function(){try{return t()}catch(t){return e(t)}},i=function(t){try{return r()}catch(t){return e(t)}};try{n=this._getWhiteOpsScriptUri();return Promise.resolve($n(n)).then(function(t){try{this._maybeTriggerHistoryUpdate();return r()}catch(t){return i()}}.bind(this),i)}catch(t){i()}}.bind(this))};i._getWhiteOpsParams=function(){var t=Object.assign({},this.config,{oz_vp:2,oz_vid:this._adVideoSlot&&this._adVideoSlot.id,oz_flash_id:this._bridgeId});delete t.ci;delete t.script;return t};i._getWhiteOpsScriptUri=function(){return t=this.config.ci,e=this._getWhiteOpsParams(),"https://s.tpcserve.com/2/"+t+"/pagespeed.js?"+io(e);var t,e};i._installVpaidHistory=function(){if(null==this._bridgeId){this._bridgeId="bridge"+(new Date).getTime();this._history=[];this._callback=null;this._historyDirty=!1;if(window){null==window.__ozoki_vpaid&&(window.__ozoki_vpaid=[]);this._history=window.__ozoki_vpaid}else this._history=[]}};i._pushHistory=function(t,e){void 0===e&&(e=null);var n=[this._bridgeId,(new Date).getTime(),t,e];this._history.push(n);this._triggerHistoryUpdate()};i._triggerHistoryUpdate=function(){null==this._callback&&null!=window&&null!=window.__ozoki_call&&(this._callback=window.__ozoki_call);this._historyDirty=!0;if(null!=this._callback)try{this._callback.call(window);this._historyDirty=!1}catch(t){}};i._maybeTriggerHistoryUpdate=function(){this._historyDirty&&this._triggerHistoryUpdate()};i.beforeSubscribeSync=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._pushHistory("subscribe",e)};i.beforeUnsubscribeSync=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._pushHistory("unsubscribe",e)};n(e,null,[{key:"id",get:function(){return"wo"}}]);return e}(Mi),Ws=function(t,e){var n=""+t+xr(e),r=Gs.prototype[n];Gs.prototype[n]=function(){var t=arguments;return new Promise(function(n,i){function o(){return n()}var s,u,a;for(s=t.length,u=new Array(s),a=0;a<s;a++)u[a]=t[a];this._pushHistory(e,u);return null!=r?Promise.resolve(r.apply(this,u)).then(function(t){try{return o.call(this)}catch(t){return i(t)}}.bind(this),i):o.call(this)}.bind(this))}},Bs=function(t,e){var n=""+t+xr(e),r=Gs.prototype[n];Gs.prototype[n]=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];this._pushHistory(e,n);null!=r&&r.apply(this,n)}},zs=Object.keys(Hn).map(function(t){return Hn[t]}),Hs=0;Hs<zs.length;++Hs)Ws("before",zs[Hs]);for(var qs=Object.keys(Qn).map(function(t){return Qn[t]}),Qs=0;Qs<qs.length;++Qs)Ws("before",qs[Qs]);Ws("before","setAdVolume");Bs("after","handshakeVersion");for(var Ks=Object.keys(qn),Js=0;Js<Ks.length;++Js)Bs("after","get"+xr(Ks[Js]));Vi.register(Gs);var Xs=Object.keys(qn),Ys=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);n(e,null,[{key:"id",get:function(){return"debug"}}]);return e}(Mi),Zs=function(t){var e,n=xr(t),r="before"+n,i="after"+n;Object.assign(Ys.prototype,((e={})[r]=function(){var t=arguments;return new Promise(function(e,n){for(var i,o=t.length,s=new Array(o),u=0;u<o;u++)s[u]=t[u];(i=console).log.apply(i,["[debug] "+r].concat(s));return e()})},e[i]=function(){var t=arguments;return new Promise(function(e,n){for(var r,o=t.length,s=new Array(o),u=0;u<o;u++)s[u]=t[u];s.pop();(r=console).log.apply(r,["[debug] "+i].concat(s));return e()})},e))},$s=function(t){for(var e=0;e<t.length;++e)Zs(t[e])};$s(Object.keys(Qn).map(function(t){return Qn[t]}));$s(Object.keys(Hn).map(function(t){return Hn[t]}));$s(Xs.map(function(t){return"set"+xr(t)}));for(var tu=function(t){var e=Xs[t],n="afterGet"+xr(e),r=void 0;Ys.prototype[n]=function(){var t,n=(t=arguments.length-1)<0||arguments.length<=t?void 0:arguments[t];if(r!==n){console.log("[debug] "+e+":",r,"→",n);r=n}}},eu=0;eu<Xs.length;++eu)tu(eu);Vi.register(Ys);var nu=S.f,ru=At.f,iu=l.RegExp,ou=iu,su=iu.prototype,uu=/a/g,au=/a/g,cu=new iu(uu)!==uu;if(m&&(!cu||p(function(){au[ut("match")]=!1;return iu(uu)!=uu||iu(au)==au||"/a/i"!=iu(uu,"i")}))){iu=function(t,e){var n=this instanceof iu,r=Er(t),i=void 0===e;return!n&&r&&t.constructor===iu&&i?t:Bo(cu?new ou(r&&!i?t.source:t,e):ou((r=t instanceof iu)?t.source:t,r&&i?rr.call(t):e),n?this:su,iu)};for(var lu=function(t){t in iu||nu(iu,t,{configurable:!0,get:function(){return ou[t]},set:function(e){ou[t]=e}})},fu=ru(ou),du=0;fu.length>du;)lu(fu[du++]);su.constructor=iu;iu.prototype=su;T(l,"RegExp",iu)}Ge("RegExp");var hu=Symbol("play"),pu=function(t){function e(){var e;(e=t.call(this)||this)[hu]=null;return e}r(e,t);var i=e.prototype;i._createPlay=function(t){var e=this,n=t.ownerDocument||document,r=_i(n,"svg",{width:"100%",height:"100%",viewBox:"0 0 100 100"},{display:"none",position:"absolute","z-index":"10000001","background-color":"rgba(0, 0, 0, 0.3)",cursor:"pointer"},!0),i=_i(n,"circle",{cx:"50%",cy:"50%",r:"25%",fill:"none",stroke:"white","stroke-width":"2px"},!0);r.appendChild(i);var o=_i(n,"polygon",{points:"45,40,45,60,60,50",fill:"white"},!0);r.appendChild(o);this[hu]=r;t.appendChild(r);r.addEventListener("click",function(){e.host.resumeAd()})};i._isEnabled=function(){var t=this.config.acceptMedia,e=this.runtime.guestInfo.mediaFile.type,n=!0;if("string"==typeof t&&"string"==typeof e)try{n=new RegExp(t).test(e)}catch(t){}return n};i.beforeInitAd=function(t,e,n,r,i,o){return new Promise(function(t,e){this._isEnabled()&&this._createPlay(o.slot);return t()}.bind(this))};i.afterAdPaused=function(){return new Promise(function(t,e){null!==this[hu]&&bi(this[hu],{display:"block"},!0);return t()}.bind(this))};i.beforeAdPlaying=function(){return new Promise(function(t,e){null!==this[hu]&&bi(this[hu],{display:"none"},!0);return t()}.bind(this))};n(e,null,[{key:"id",get:function(){return"play"}}]);return e}(Mi),mu=Symbol("skip"),vu=Symbol("interval"),gu={position:"absolute",bottom:"10%",right:"0px",padding:"12px","z-index":"10000001","background-color":"rgba(0, 0, 0, 0.7)",color:"white","font-size":"12px","font-weight":"200","font-family":"Arial, Helvetica, sans-serif","border-color":"rgba(255, 255, 255, 0.5)","border-width":"0px","border-style":"solid",cursor:"default","user-select":"none"},yu=Object.assign({},gu,{"font-size":"18px","border-width":"1px 0px 1px 1px",cursor:"pointer"}),bu=function(t){function e(){var e;(e=t.call(this)||this)[mu]=null;e[vu]=null;return e}r(e,t);var i=e.prototype;i._createSkip=function(t){var e=this,n=(t.ownerDocument||document).createElement("div");n.addEventListener("click",function(){return e._maybeSkip()});this[mu]=n;this._updateSkip();t.appendChild(n)};i._updateSkip=function(){var t=this._getSkipTimeRemaining(),e=!isNaN(t)||this.host.getAdSkippableState();bi(this[mu],{display:e?"block":"none"},!0);var n=t>0,r="Skip ad";n&&(r="You can skip to video in [T]".replace("[T]",Math.round(t)));this[mu].innerHTML!==r&&(this[mu].innerHTML=r);bi(this[mu],n?gu:yu,!0)};i._getSkipTimeRemaining=function(){var t=this.runtime.config.skipOffset;if("number"!=typeof t)return NaN;var e=this.host.getAdDuration(),n=this.host.getAdRemainingTime();return e<0||n<0?NaN:t-Math.max(e-n,0)};i._maybeSkip=function(){return new Promise(function(t,e){function n(){return t()}if(this._getSkipTimeRemaining()>0)return t();if(!0===this.guest.getAdSkippableState()){this.host.skipAd();return n.call(this)}return Promise.resolve(this.publish("AdSkipped")).then(function(t){try{this.host.stopAd();return n.call(this)}catch(t){return e(t)}}.bind(this),e)}.bind(this))};i._isEnabled=function(){var t=this.config.acceptMedia;return null==t||"string"==typeof t&&null!=this.runtime.guestInfo.mediaFile.type.match(new RegExp(t))};i.beforeInitAd=function(t,e,n,r,i,o){return new Promise(function(t,e){var n=this;if(this._isEnabled()){this._createSkip(o.slot);this[vu]=setInterval(function(){return n._updateSkip()},250)}return t()}.bind(this))};i.afterAdSkippableStateChange=function(){return new Promise(function(t,e){this._isEnabled()&&this._updateSkip();return t()}.bind(this))};i.beforeAdStopped=function(){return new Promise(function(t,e){if(null!==this[vu]){clearInterval(this[vu]);this[vu]=null}return t()}.bind(this))};n(e,null,[{key:"id",get:function(){return"skip"}}]);return e}(Mi);Vi.register(pu);Vi.register(bu);var _u,wu,Su="event",Au=function(t){function e(e){var n;(n=t.call(this,e)||this).setHitType(Su);return n}r(e,t);var n=e.prototype;n.setEventCategory=function(t){return this.set("ec",t)};n.setEventAction=function(t){return this.set("ea",t)};n.setEventLabel=function(t){return this.set("el",t)};n.setEventValue=function(t){return this.set("ev",t)};return e}(function(){function t(t){this._options=Object.assign({},t);this._params={};this.setProtocolVersion(1)}var e=t.prototype;e.build=function(){return this._baseUrl+"?"+this.buildQueryString()};e.buildQueryString=function(){return ro.stringify(this._params)+"&z="+this.buildCacheBuster()};e.buildCacheBuster=function(){if(this._params.hasOwnProperty("z")){var t=this._params.z;delete this._params.z;return encodeURIComponent(t)}if(this._options.vast)return"[CACHEBUSTING]";var e=1e6+Math.floor(9e6*Math.random());return""+(new Date).getTime()+e};e.setBaseUrl=function(t){this._baseUrl=t;return this};e.set=function(t,e){null!=e&&(this._params[t]=e);return this};e.setProtocolVersion=function(t){return this.set("v",t)};e.setTrackingId=function(t){return this.set("tid",t)};e.setClientId=function(t){return this.set("cid",t)};e.setHitType=function(t){return this.set("t",t)};e.setDocumentReferrer=function(t){return this.set("dr",t)};e.setCampaignName=function(t){return this.set("cn",t)};e.setCampaignSource=function(t){return this.set("cs",t)};e.setCampaignMedium=function(t){return this.set("cm",t)};e.setCampaignKeyword=function(t){return this.set("ck",t)};e.setCampaignContent=function(t){return this.set("cc",t)};e.setCampaignId=function(t){return this.set("ci",t)};e.setCustomDimension=function(t,e){return this.set("cd"+t,e)};e.setCustomMetric=function(t,e){return this.set("cm"+t,e)};n(t,[{key:"options",get:function(){return this._options}}]);return t}()),Eu=10,Iu={timeout:2e3,postAllowed:!1,styles:{position:"absolute",top:0,left:0,width:0,height:0,border:0,pointerEvents:"none",visibility:"hidden"}},ku=function(){},Pu=function(){function t(t,e){void 0===e&&(e={});this._url=t;this._options=Object.assign({},Iu,e);var n=window,r=0;try{for(;r<Eu&&n.parent!==n&&null!=n.parent.document.createElement("img");){n=n.parent;++r}}catch(t){}this._window=n}var e=t.prototype;e.load=function(){if(null!=this._deferred)return Promise.reject(new Error("Already loading"));this._deferred=Un();this._deferred.promise.catch(ku);(this._options.postAllowed&&"function"==typeof navigator.sendBeacon?this._sendBeacon:this._loadPixel).call(this);return this._deferred.promise};e.dispose=function(){this._rejectWith("Disposed")};e._sendBeacon=function(){navigator.sendBeacon(this._url,"")?this._deferred.resolve():this._deferred.reject(new Error("Failed"))};e._loadPixel=function(){this._image=this._window.document.createElement("img");this._image.src=this._url;Object.assign(this._image.style,this._options.styles);this._image.onload=this._onImageLoad.bind(this);this._image.onerror=this._onImageError.bind(this);this._window.document.body.appendChild(this._image);setTimeout(this._onImageTimeout.bind(this),this._options.timeout)};e._onImageLoad=function(){this._deferred.resolve();this._remove()};e._onImageError=function(){this._rejectWith("Unknown error")};e._onImageTimeout=function(){this._rejectWith("Timed out")};e._rejectWith=function(t){this._deferred.reject(new Error(t));this._remove()};e._remove=function(){if(null!=this._image){null!=this._image.parentNode&&this._image.parentNode.removeChild(this._image);this._image=null}};n(t,[{key:"promise",get:function(){return null!=this._deferred?this._deferred.promise:null}}]);return t}(),Ou=Symbol("tracking"),Cu=function(){},Tu=[],Nu=function(){function t(){this[Ou]=[]}var e=t.prototype;e.complete=function(){return new Promise(function(t,e){function n(){if(this[Ou].length>0){i=this[Ou];this[Ou]=[];return Promise.resolve(Promise.all(i)).then(function(t){try{return n}catch(t){return e(t)}},e)}return[1]}function r(){return t()}var i,o;return(o=function(t){for(;t;){if(t.then)return void t.then(o,e);try{if(t.pop){if(t.length)return t.pop()?r.call(this):t;t=n}else t=t.call(this)}catch(t){return e(t)}}}.bind(this))(n)}.bind(this))};e.track=function(t,e){void 0===e&&(e={});var n=new Pu(t,e),r=n.load().catch(Cu);this[Ou].push(r);Tu.push(r);return n};return t}(),Du=function(t){t.setBaseUrl("https://pxsrv.net/")},ju=/^(?:(\w+):)?\/\/(.*)/,Mu=/[_%]/g,xu=function(t){return"_"===t?"_5F":"_"},Ru=function(t){function e(e){var n;n=t.call(this,e)||this;Du(i(i(n)));return n}r(e,t);var n=e.prototype;n.setRedirectUrl=function(t){this._redirectUrl=t;return this};n.build=function(){if(null==this._redirectUrl)return t.prototype.build.call(this);var e=ju.exec(this._redirectUrl);if(null==e)throw new Error("Invalid redirect URL: "+this._redirectUrl);return this._baseUrl+"t/"+this._buildEmbeddedQueryString()+"/"+(e[1]||"https")+"/"+e[2]};n._buildEmbeddedQueryString=function(){return this.buildQueryString().replace(Mu,xu)};return e}(Au),Lu={placement:"ZA-",embed:"ZO-",wrapper:"ZW-"},Vu=Object.keys(Lu),Fu=(_u=function(t){function e(e){var n;void 0===e&&(e=null);n=t.call(this)||this;null!=e&&(n.config=e);return n}r(e,t);e.prototype.trackEvent=function(t,e,n,r){if(null==this._trackingId)throw new Error("Invalid pxsrv configuration");var i;i=null!=n&&"object"!=typeof n?Object.assign({},r,{label:n}):Object.assign({},n);var o=(new Ru).setTrackingId(this._trackingId).setClientId(this._clientId).setEventCategory(t).setEventAction(e);null!=i.label&&o.setEventLabel(i.label);null!=i.value&&o.setEventValue(i.value);Object.keys(i.customDimensions||{}).forEach(function(t){o.setCustomDimension(t,i.customDimensions[t])});Object.keys(i.customMetrics||{}).forEach(function(t){o.setCustomMetric(t,i.customMetrics[t])});null!=i.redirectUrl&&o.setRedirectUrl(i.redirectUrl);if(null!=this._baseUrl){var s="function"==typeof this._baseUrl?this._baseUrl(t,e,i):this._baseUrl;o.setBaseUrl(s)}var u=o.build();return this.track(u,{postAllowed:!0})};n(e,[{key:"config",set:function(t){this._trackingId=function(t){null!=t.placement&&null!=t.campaign&&(t={placement:t.campaign+"-"+t.placement});for(var e=0;e<Vu.length&&null==t[Vu[e]];)++e;if(e===Vu.length)throw new Error("Invalid pxsrv configuration");var n=Vu[e];return Lu[n]+t[n]}(t);this._baseUrl=t.baseUrl;this._clientId=t.client||function(t,e){for(e=t="";t++<36;e+=51*t&52?(15^t?8^(new Date/1e9%1+Math.random())%1*(20^t?16:4):4).toString(16):"-");return e}()}}]);return e}(Nu),wu=null,function(){null===wu&&(wu=new _u);return wu}),Uu=["GuestNotAvailableError","MethodNotAvailableError"],Gu=["initAd","startAd","stopAd","skipAd"],Wu=wi,Bu=function(t,e,n){null==t[e]&&(t[e]=function(){var t=null;try{for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];t=this._phasedGuestCallSync(e,i)}catch(e){if(!(null!=e&&Uu.indexOf(e.name)>=0))throw e;t=n}return t})},zu=function(t,e){null==t[e]&&(t[e]=function(){var t=this;Gu.indexOf(e)>=0&&this[Wu].track(e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];this._phasedGuestCall(e,r).catch(function(n){t._onError(n,e)})})},Hu=function(t,e,n){e in t?S.f(t,e,A(0,n)):t[e]=n};M(M.S+M.F*!Ke(function(t){}),"Array",{from:function(t){var e,n,r,i,o=rt(t),s="function"==typeof this?this:Array,u=arguments.length,a=u>1?arguments[1]:void 0,c=void 0!==a,l=0,f=ye(o);c&&(a=D(a,u>2?arguments[2]:void 0,2));if(null==f||s==Array&&ve(f))for(n=new s(e=z(o.length));e>l;l++)Hu(n,l,c?a(o[l],l):o[l]);else for(i=f.call(o),n=new s;!(r=i.next()).done;l++)Hu(n,l,c?de(i,a,[r.value,l],!0):r.value);n.length=l;return n}});var qu=t(function(t,e){function n(t,e){var n=[],r=[];null==e&&(e=function(t,e){return n[0]===e?"[Circular ~]":"[Circular ~."+r.slice(0,n.indexOf(e)).join(".")+"]"});return function(i,o){if(n.length>0){var s=n.indexOf(this);~s?n.splice(s+1):n.push(this);~s?r.splice(s,1/0,i):r.push(i);~n.indexOf(o)&&(o=e.call(this,i,o))}else n.push(o);return null==t?o:t.call(this,i,o)}}(t.exports=function(t,e,r,i){return JSON.stringify(t,n(e,i),r)}).getSerialize=n}),Qu=(qu.getSerialize,function t(e,n){switch(typeof e){case"object":if(null==e)return e;if(null!=e.nodeType)return"[DOM "+function(t){if(null==t)return"null";if(1!==t.nodeType)return"node";try{var e=(t.nodeName||"unknown").toLowerCase();null!=t.id&&(e+="#"+t.id);t.classList&&t.classList.length>0&&(e+="."+Array.from(t.classList).join("."));return e}catch(t){return"err"}}(e)+"]";if(n.indexOf(e)>=0)return"[Circular]";n.push(e);var r=Array.isArray(e)?[]:{},i=function(t){for(var e=[],n=u(t);n;){e.push(n);n=u(n)}return e}(e).filter(function(t){return t!==Object.prototype});return function t(e){if(null==e)return e;var n=Object.keys(e);if(1!==n.length||"message"!==n[0])return e;var r=e.message;Array.isArray(r)&&1===r.length&&(r=r[0]);return t(r)}([e].concat(i).map(function(t){return Object.getOwnPropertyNames(t)}).reduce(function(r,i){i.forEach(function(i){try{e instanceof Error&&"stack"===i||(r[i]=t(e[i],n))}catch(t){r[i]="[Error: "+(t.message||t)+"]"}});return r},r));case"function":if(n.length>0)return;return"[Function "+(e.name||"anonymous")+"]";default:return e}}),Ku=function(t){try{var e=Qu(t,[])||t;switch(typeof e){case"string":return e;case"number":return""+e;default:return qu(e)}}catch(t){return"[Error]"}},Ju=function(t){if(null!=t){var e=t.error;return null!=e?e:{message:t.message,filename:t.filename,lineno:t.lineno,colno:t.colno}}return"[Unknown error]"},Xu=function(){var t=window.navigator&&window.navigator.connection&&window.navigator.connection.downlink;return null!=t?1024*t:1/0},Yu=Symbol("timings"),Zu=Symbol("eventCount"),$u=Symbol("lastEventTime"),ta=Symbol("handlers"),ea=Symbol("configured"),na=Symbol("configuring"),ra=wi,ia=function(){return(new Date).getTime()},oa=["start","load","initAd","AdLoaded","startAd","AdStarted"],sa=ia(),ua=180,aa=Math.random()<.1,ca=document,la=function(){var t=window,e=0;try{for(;e<10&&t.parent!==t&&null!=t.parent.location&&null!=t.parent.location.hostname;){t=t.parent;++e}}catch(t){}return t}().location.hostname,fa=function(){function t(t){var e=this;this[Yu]={start:sa};this[Zu]=0;this[$u]=sa;this[ta]=[];this[ea]=!1;this[na]=Un();var n=function(e){var n=t[ra].guestInfo.mediaFile;return null!=n?n[e]:void 0};this.addDimension(100,function(){return t[ra].hostInfo.viewMode});this.addDimension(101,function(){return n("type")});this.addDimension(103,function(){return n("uri")});this.addDimension(105,function(){return"vpaid-transformer@0.19.11+js"});this.addDimension(107,function(){return ca.readyState});this.addDimension(171,function(){return la});this.addMetric(100,function(){return t.getAdWidth()});this.addMetric(101,function(){return t.getAdHeight()});this.addMetric(104,function(){return t.getAdVolume()});this.addMetric(105,function(){return n("width")});this.addMetric(106,function(){return n("height")});this.addMetric(107,function(){return n("bitrate")});this.addMetric(108,function(){return t[ra].hostInfo.desiredBitrate});this.addMetric(109,function(){var t=Xu();return isFinite(t)?t:-1});this.addMetric(110,function(){return ia()-sa});this.addMetric(111,function(){var t=ia(),n=t-e[$u];e[$u]=t;return n});this.addMetric(112,function(){return t[ra].hostInfo.width});this.addMetric(113,function(){return t[ra].hostInfo.height});this.addMetric(167,function(){return t.getAdDuration()});for(var r=function(t){var n=ua+t,r=oa[t],i=oa[t+1];e.addMetric(n,function(){return e._getTimingInfo(r,i)})},i=0;i<oa.length-1;i++)r(i);window.addEventListener("unload",function(){return e.track("global-unload")});window.addEventListener("error",function(t){return e.trackError("global-error",Ju(t))});var o=function(n){return t.subscribe(function(){return e.track(n)},n)};o(Hn.AdLoaded);o(Hn.AdStarted);o(Hn.AdImpression);o(Hn.AdStopped);t.subscribe(function(t){return e.trackError(Hn.AdError,t)},Hn.AdError);this.track("load")}var e=t.prototype;e.configure=function(t){var e=this,n=t.wrapperId,r=t.customDimensions,i=t.customMetrics,o=t.trackingHost,s=t.adServingId;if(!this[ea]&&null!=n){var u={wrapper:n};null!=o&&(u.baseUrl="https://"+o);null!=s&&(u.client=s);Fu().config=u;null!=r&&Object.keys(r).forEach(function(t){e.addDimension(t,function(){return r[t]})});null!=i&&Object.keys(i).forEach(function(t){e.addMetric(t,function(){return i[t]})});this[ea]=!0;this[na].resolve()}};e.track=function(t,e,n,r){void 0===e&&(e=null);void 0===n&&(n=null);void 0===r&&(r=!1);try{this._addTiming(t);if(!r&&(!aa||this[Zu]>=100))return;this[Zu]++;var i=t+(r?"":"/10"),o=this._getPixelInfo(e,n);this._pxsrvTrack("vpaid",i,o)}catch(t){}};e.trackError=function(t,e,n,r,i){void 0===n&&(n=null);void 0===r&&(r=null);void 0===i&&(i=!1);var o=Ku(e=e||"[Unknown error]"),s=Object.assign({},n,{110:o.substring(0,1e3)});this.track(t,s,r,i)};e.addDimension=function(t,e){this._addField("customDimensions",t,e)};e.addMetric=function(t,e){this._addField("customMetrics",t,e)};e._addField=function(t,e,n){this[ta].push(function(r){r[t][""+e]=n()})};e._addTiming=function(t){null==this[Yu][t]&&(this[Yu][t]=ia())};e._pxsrvTrack=function(t,e,n){var r=this;this[ea]?Fu().trackEvent(t,e,n):this[na].promise.then(function(){n=r._mergeOptions(r._getPixelInfo(null,null),n);Fu().trackEvent(t,e,n)})};e._mergeOptions=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return{customDimensions:Object.assign.apply(Object,[{}].concat(e.map(function(t){return t.customDimensions}))),customMetrics:Object.assign.apply(Object,[{}].concat(e.map(function(t){return t.customMetrics})))}};e._getPixelInfo=function(t,e){var n={customDimensions:{},customMetrics:{}};this[ta].forEach(function(t){try{t(n)}catch(t){}});Object.assign(n.customDimensions,t);Object.assign(n.customMetrics,e);return n};e._getTimingInfo=function(t,e){var n=this[Yu][t],r=this[Yu][e];return null!=n&&n>0&&null!=r&&r>0?r-n:void 0};n(t,[{key:"configured",get:function(){return this[ea]}}]);return t}(),da={width:"100%",height:"100%",pointerEvents:"auto",position:"absolute",top:0,left:0},ha=Symbol("host"),pa=Symbol("guest"),ma=Symbol("config"),va=Symbol("tracking"),ga=Symbol("hostInfo"),ya=Symbol("guestInfo"),ba=Symbol("container"),_a=Symbol("containerSelector"),wa=Oi,Sa=Pi,Aa=Si,Ea=Ai,Ia=Ei,ka={wrapperId:null,duration:null,skipOffset:null,mediaFiles:[],adParameters:null,plugins:[],flags:0},Pa={timestamp:function(){return+new Date},cachebusting:sr,errorcode:function(t){var e=t.errorcode;return null!=e?e:900}},Oa=new RegExp("\\[("+Object.keys(Pa).join("|")+")\\]","ig"),Ca=function(t,e){var n=(t.ownerDocument||document).createElement("div");n.id=e;Object.assign(n.style,da);t.appendChild(n);return n},Ta=function(t){function e(e){var n;(n=t.call(this)||this)[ha]=e;return n}r(e,t);n(e,[{key:"publishedEvents",get:function(){return this[ha][wa].published}},{key:"width",get:function(){return this._get("width")}},{key:"height",get:function(){return this._get("height")}},{key:"viewMode",get:function(){return this._get("viewMode")}},{key:"desiredBitrate",get:function(){return this._get("desiredBitrate")}},{key:"environmentVariables",get:function(){return this._get("environmentVariables")}},{key:"slot",get:function(){return this._get("slot")}},{key:"videoSlot",get:function(){return this._get("videoSlot")}},{key:"vastChain",get:function(){return this._get("vastChain")}}]);return e}(Hr),Na=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);n(e,[{key:"mediaFile",get:function(){return this._get("mediaFile")}}]);return e}(Hr),Da=function(){function t(t){this[ha]=t;this[pa]=null;this[ga]=new Ta(t);this[ya]=new Na;this[ma]=Object.assign({},ka);this[va]=new fa(t);this[ba]=null;this[_a]=null;this[Ia]=hr(this[Ia])}var e=t.prototype;e.publish=function(t,e){void 0===e&&(e=[]);return this[ha]._publish(t,e)};e.track=function(){var t;(t=this[va]).track.apply(t,arguments)};e.trackPixel=function(t,e){t=function(t,e){return t.replace(Oa,function(t,n){return Pa[n.toLowerCase()](e)})}(t,e);return new Pu(t).load()};e.trackError=function(){var t;(t=this[va]).trackError.apply(t,arguments)};e.isFlagEnabled=function(t){return 0!=(this[ma].flags&t)};e[Aa]=function(t){this[ma]=Object.assign({},ka,t);this[va].configure(t)};e[Ea]=function(t){this[pa]=t};e[Ia]=function(){var t=this[ga].slot,e=t.ownerDocument||document,n="vpaid-container-"+sr(),r=n+"-0",i=e.createElement("style");i.textContent="#"+r+", #"+r+" :not(html) { \n  margin: 0;\n  padding: 0;\n  border: 0;\n  font-size: 100%;\n  font: inherit;\n  vertical-align: baseline;\n  background: none;\n  opacity: 1;\n  border: none;\n  outline: none;\n  top: auto;\n  bottom: auto;\n  left: auto;\n  right: auto;\n }";t.appendChild(i);for(var o=Ca(t,r),s=o,u="#"+o.id,a=1;a<5;++a)u+=" #"+(s=Ca(s,n+"-"+a)).id;this[ba]=s;this[_a]=u};n(t,[{key:"host",get:function(){return this[ha]}},{key:"guest",get:function(){return this[pa]}},{key:"hostInfo",get:function(){return this[ga]}},{key:"guestInfo",get:function(){return this[ya]}},{key:"config",get:function(){return this[ma]}},{key:"plugins",get:function(){return this[ha][Sa].plugins}},{key:"tracking",get:function(){return this[va]}},{key:"container",get:function(){return this[ba]}},{key:"containerSelector",get:function(){return this[_a]}}]);return t}();M(M.S,"Object",{setPrototypeOf:Go.set});var ja=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));Object.defineProperty(n,"message",{configurable:!0,enumerable:!1,value:t,writable:!0});Object.defineProperty(n,"name",{configurable:!0,enumerable:!1,value:n.constructor.name,writable:!0});if(Error.hasOwnProperty("captureStackTrace")){Error.captureStackTrace(n,n.constructor);return a(n)}Object.defineProperty(n,"stack",{configurable:!0,enumerable:!1,value:new Error(t).stack,writable:!0});return n}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,function(t){function e(){t.apply(this,arguments)}e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;return e}(Error));return e}(),Ma=function(t){function e(){var e;(e=t.call(this,"Guest VPAID not available")||this).name="GuestNotAvailableError";return e}r(e,t);return e}(ja),xa=function(t){function e(e){var n;(n=t.call(this,'Method "'+e+'" not available')||this)._methodName=e;n.name="MethodNotAvailableError";return n}r(e,t);n(e,[{key:"methodName",get:function(){return this._methodName}}]);return e}(ja),Ra=Symbol("guest"),La=Symbol("guestVpaidVersion"),Va=Symbol("guestIframe"),Fa=Symbol("guestSubscriptions"),Ua=Symbol("managingSlotSize"),Ga=Symbol("hadError"),Wa=Pi,Ba=Oi,za=wi,Ha=Ci,qa=function(){function t(){this[Wa]=new Fr;this[Ba]=new Wr;this[Ra]=null;this[Va]=null;this[Fa]=[];this[Ua]=!1;this[Ga]=!1;this[za]=new Da(this)}var e=t.prototype;e.subscribe=function(t,e,n){var r=this;void 0===n&&(n=null);this[Wa].runPhaseSync("subscribe",[t,e,n],function(){return r[Ba].subscribe(t,e,n)},function(t){return r._onError(t,"subscribe")},!0)};e.unsubscribe=function(t,e){var n=this;this[Wa].runPhaseSync("unsubscribe",[t,e],function(){return n[Ba].unsubscribe(t,e)},function(t){return n._onError(t,"unsubscribe")},!0)};e.handshakeVersion=function(t){this[La]=t;return"2.0"};e.initAd=function(t,e,n,r,i,o){this[za].track("initAd");this._initAdAsync(t,e,n,r,i,o)};e.resizeAd=function(t,e,n){var r=this,i=this[za].hostInfo;try{i._putAll({width:t,height:e,viewMode:n});this._phasedGuestCall("resizeAd",[t,e,n]).catch(function(t){r._onError(t,"resizeAd")})}catch(t){this._onError(t,"resizeAd")}};e._createGuest=function(t){return new Promise(function(t,e){return e(new Error("Method is abstract"))})};e._initAdAsync=function(t,e,n,r,i,o){return new Promise(function(s,u){var a,c,l,f,d,h,p,m,v;c=(a=this[za]).hostInfo;var g=function(){try{return s()}catch(t){return u(t)}},y=function(t){try{this._onError(t,"initAd");return g()}catch(t){return u(t)}}.bind(this);try{c._putAll({width:t,height:e,viewMode:n,desiredBitrate:r,environmentVariables:o});if(null==o)a.track("no-envvars");else{l=o.slot,f=o.videoSlot;c._putAll({slot:l,videoSlot:f});if(null==l)a.track("no-slot");else{this[Ua]=null!=l.style&&(0===l.clientWidth||0===l.clientHeight);this._maybeResizeSlot(t,e)}null==f&&a.track("no-video-slot")}return Promise.resolve(this._createGuest({width:t,height:e,viewMode:n,desiredBitrate:r,creativeData:i,envVars:o})).then(function(i){try{h=(d=i).iframe,p=d.vpaid,m=d.adParameters;this[Ra]=p;this[Va]=h;this._guestSubscribeAll();return Promise.resolve(this._phasedGuestCall("handshakeVersion",[this[La]],!0)).then(function(i){try{v={AdParameters:m};return Promise.resolve(this._phasedGuestCall("initAd",[t,e,n,r,v,o])).then(function(t){try{return g()}catch(t){return y(t)}},y)}catch(t){return y(t)}}.bind(this),y)}catch(t){return y(t)}}.bind(this),y)}catch(t){y(t)}}.bind(this))};e._maybeResizeSlot=function(t,e){if(this[Ua]){var n=this[za].hostInfo.slot;Object.assign(n.style,{width:t+"px",height:e+"px"})}};e._publish=function(t,e,n){void 0===e&&(e=[]);void 0===n&&(n=null);switch(t){case Hn.AdError:if(!this._shouldPublishError(e[0],n))return Promise.resolve();"guest"!==n&&(e[0]=Ku(e[0]));break;case Hn.AdClickThru:"string"!=typeof e[0]&&(e[0]=this[Ha])}return this._phasedGuestEvent(t,e)};e._guestSubscribeAll=function(){for(var t=this,e=Object.keys(Hn).map(function(t){return Hn[t]}),n=function(n){var r=e[n],i=[function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];t._onGuestEvent(r,n)},r];t._guestCall("subscribe",i);t[Fa].push(i)},r=0;r<e.length;++r)n(r)};e._guestUnsubscribeAll=function(){if(null!=this[Ra])for(var t=this[Fa].splice(0),e=0;e<t.length;++e)try{this._guestCall("unsubscribe",t[e])}catch(t){}};e._onGuestEvent=function(t,e){this._publish(t,e,"guest")};e._guestCall=function(t,e){if(null==this[Ra])throw new Ma;"resizeAd"===t&&this._maybeResizeSlot.apply(this,e);var n=this[Ra][t];if("function"!=typeof n)throw new xa(t);return n.apply(this[Ra],e)};e._phasedGuestCallSync=function(t,e){var n=this;return this[Wa].runPhaseSync(t,e,function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n._guestCall(t,r)},function(e){return n._onError(e,t)})};e._phasedGuestCall=function(t,e,n){return new Promise(function(r,i){var o;o=this;void 0===n&&(n=!1);return Promise.resolve(this._runPhase(t,e,function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return o._guestCall(t,n)},!n)).then(function(t){try{return r()}catch(t){return i(t)}},i)}.bind(this))};e._phasedGuestEvent=function(t,e){return new Promise(function(n,r){var i;i=this;return Promise.resolve(this._runPhase(t,e,function(){var e=arguments;return new Promise(function(n,r){function o(){for(s=e.length,u=new Array(s),a=0;a<s;a++)u[a]=e[a];i[Ba].publish(t,u);return n()}var s,u,a;if(Zn.indexOf(t)>=0){var c=function(){try{var t=function(){try{return o.call(this)}catch(t){return r(t)}}.bind(this),e=function(e){try{return t()}catch(t){return r(t)}};try{return Promise.resolve(new Promise(function(t,e){function n(){if(Tu.length>0){i=Tu;Tu=[];return Promise.resolve(Promise.all(i)).then(function(t){try{return n}catch(t){return e(t)}},e)}return[1]}function r(){return t()}var i,o;return(o=function(t){for(;t;){if(t.then)return void t.then(o,e);try{if(t.pop){if(t.length)return t.pop()?r.call(this):t;t=n}else t=t.call(this)}catch(t){return e(t)}}}.bind(this))(n)})).then(function(n){try{return t()}catch(t){return e()}},e)}catch(t){e()}}catch(t){return r(t)}}.bind(this),l=function(t){try{return c()}catch(t){return r(t)}};try{return Promise.resolve(i[Wa].dispose()).then(function(t){try{return c()}catch(t){return l()}},l)}catch(t){l()}}return o.call(this)})},!0)).then(function(t){try{return n()}catch(t){return r(t)}},r)}.bind(this))};e._runPhase=function(t,e,n,r){return new Promise(function(i,o){void 0===r&&(r=!1);var s=function(){try{if(t===Hn.AdStopped&&null!=this[Va]){try{this[Va].parentNode.removeChild(this[Va])}catch(t){}this[Va]=null}return i()}catch(t){return o(t)}}.bind(this),u=function(e){try{this._onError(e,t);return s()}catch(t){return o(t)}}.bind(this);try{return Promise.resolve(this[Wa].runPhase(t,e,n,r)).then(function(t){try{return s()}catch(t){return u(t)}},u)}catch(t){u(t)}}.bind(this))};e._addPlugin=function(t){this[Wa].addPlugin(t)};e._shouldPublishError=function(t,e){if(null!=t&&"GuestNotAvailableError"===t.name)return!1;if(this[Ga])return!1;this[Ga]=!0;this._guestUnsubscribeAll();return!0};e._onError=function(t,e){this._shouldPublishError(t,e)&&this._phasedGuestEvent(Hn.AdError,[t.message])};return t}();!function(t){!function(t){for(var e=Object.keys(qn),n=0;n<e.length;n++){var r=e[n],i=qn[r],o=i.defaultValue,s=i.writable,u=xr(r);Bu(t,"get"+u,o);s&&zu(t,"set"+u)}}(t);!function(t){for(var e=Object.keys(Qn).map(function(t){return Qn[t]}),n=0;n<e.length;++n){var r=e[n];zu(t,r)}}(t)}(qa.prototype);var Qa,Ka,Ja,Xa=/\/js\/vpaid-transformer\/[^\/]+\/[a-z0-9-]+\.js#/,Ya=document.currentScript||function(){for(var t=document.querySelectorAll("script"),e=t.length-1;e>=0;--e){var n=t[e],r=n.src;if(null!=r&&Xa.test(r))return n}return null}(),Za=wi,$a=Si,tc=Ai,ec=Symbol("loaders"),nc=function(t){function e(e){var n;(n=t.call(this)||this)[ec]=e;n._preprocessHashConfig();return n}r(e,t);var n=e.prototype;n.getAdDuration=function(){return this._getPropertyValueWithConfigFallback("adDuration",this[Za].config.duration)};n.getAdWidth=function(){return this._getPropertyValueWithConfigFallback("adWidth",this[Za].hostInfo.width)};n.getAdHeight=function(){return this._getPropertyValueWithConfigFallback("adHeight",this[Za].hostInfo.height)};n._getPropertyValueWithConfigFallback=function(e,n){var r=t.prototype["get"+xr(e)].call(this);return r===qn[e].defaultValue&&null!=n?n:r};n._createGuest=function(t){return new Promise(function(e,n){var r,i,o,s,u;r=function(e){var n=function(t){return null==t||"string"==typeof t?t:t.AdParameters}(t.creativeData);try{return JSON.parse(n)}catch(t){throw new Error('Failed to parse AdParameters "'+n+'"')}}();this._loadConfig(r);return this[Za].tracking.configured?Promise.resolve(this._loadMediaFile(r.mediaFiles,r.adParameters,t)).then(function(t){try{o=(i=t).iframe,s=i.vpaid,u=i.adParameters;this[Za][tc](s);return e({iframe:o,vpaid:s,adParameters:u})}catch(t){return n(t)}}.bind(this),n):n(new Error("Invalid configuration"))}.bind(this))};n._loadMediaFile=function(t,e,n){var r=function(t,e,n,r,i,o,s){void 0===o&&(o=mi);void 0===s&&(s={});var u=function(t,e){for(var n={},r=0;r<t.length;++r){var i=t[r],o=ni(i);if(e.indexOf(o)>=0){null==n[o]&&(n[o]=[]);n[o].push(i)}}return n}(t,o);s.noImaVpaid&&function(t){if((function(){var t=null;try{t=window.parent.google.ima.VERSION}catch(t){}return"string"==typeof t}()||ri.test(window.location.href))&&null!=t.vpaid){var e=t.vpaid.filter(function(t){return e=t.uri,!ii.test(e);var e});e.length>0?t.vpaid=e:Object.keys(t).length>1&&delete t.vpaid}}(u);for(var a=Object.keys(u).sort(hi),c=null,l=0;null==c&&l<a.length;){var f=a[l],d=u[f];c=(0,pi[f])(d,e,n,r,i);++l}return c}(t,n.width,n.height,n.desiredBitrate,n.envVars.videoSlot,Object.keys(this[ec]),{noImaVpaid:this[Za].isFlagEnabled(2)});if(null==r)throw new Error("No valid media files");this[Za].guestInfo._put("mediaFile",r);var i=ni(r),o=this[ec][i];if(null==o)throw new Error("Unsupported media file");return o(this,r,e,n)};n._preprocessHashConfig=function(){var t=function(){if(null!=Ya&&null!=Ya.src){var t=Ya.src,e=t.indexOf("#");if(!(e<0))return t.substr(e+1)}}();this._loadConfig(decodeURIComponent(t))};n._loadConfig=function(t){if(null!=t){this[Za][$a](t);this._addPlugins(t.plugins)}};n._addPlugins=function(t){if(!(null==t||this[Za].plugins.length>0)&&0!==t.length)for(var e={},n=0;n<t.length;++n){var r=t[n],i=r.id,o=r.config,s=void 0,u=i.indexOf(".");if(u<0)s=e[i]=o||{};else{var a=i.substr(0,u);s=Object.assign({},e[a],o)}try{this._createAndAddPlugin(i,s)}catch(t){console.warn('Error creating plugin "'+i+'": '+t)}}};n._createAndAddPlugin=function(t,e){var n=Vi.create(t,e,this[Za]);this._addPlugin(n);return n};return e}(qa),rc={visibility:"hidden",position:"absolute",left:0,top:0,width:0,height:0,margin:0,padding:0,border:0},ic=/^https?:\/\//,oc=function(t){var e=null;try{e=t.document.baseURI}catch(t){}return null!=e&&ic.test(e)?e:null},sc=wi,uc=Symbol("url"),ac=Symbol("options"),cc=Symbol("pubSub"),lc=Symbol("skippable"),fc=Symbol("slot"),dc=Symbol("videoSlot"),hc=Symbol("clickSlot"),pc=Symbol("width"),mc=Symbol("height"),vc=Symbol("viewMode"),gc=Symbol("volumeImpaired"),yc=Symbol("volume"),bc=Symbol("paused"),_c=Symbol("loaded"),wc=Symbol("clicked"),Sc=Symbol("requested"),Ac=Symbol("domListeners"),Ec=Symbol("tickInterval"),Ic=Symbol("quartile"),kc=Symbol("monitors"),Pc={noMutedAutoplayFallback:!1,skipOffset:null},Oc={position:"absolute",left:"0",top:"0",border:"0",margin:"0",padding:"0"},Cc=Object.assign({},Oc,{cursor:"pointer"}),Tc=((Qa={}).duration=[["getAdDuration"],"AdDurationChange"],Qa.remainingTime=[["getAdRemainingTime"],"AdRemainingTimeChange"],Qa.volume=[["getAdVolume"],"AdVolumeChange"],Qa.skippableState=[["getAdSkippableState"],"AdSkippableStateChange"],Qa.size=[["getAdWidth","getAdHeight"],"AdSizeChange"],Qa),Nc=function(){function t(t,e){this[uc]=t;this[ac]=Object.assign({},Pc,e);this[cc]=new Wr;this[lc]=null==this[ac].skipOffset;this[pc]=zn;this[mc]=zn;this[gc]=!1;this[yc]=zn;this[fc]=null;this[dc]=null;this[bc]=!0;this[_c]=!1;this[wc]=!1;this[Ac]=null;this[Sc]={};this[Ec]=null;this[Ic]=-1;this[kc]=this._buildMonitors();this._onTick=this._onTick.bind(this);for(var n=0;n<Xn.length;++n){var r=Xn[n];this[r]=hr(this[r]).bind(this)}jr({rel:"preconnect",href:t,pr:"1.0"})}var e=t.prototype;e.getAdLinear=function(){return!0};e.getAdWidth=function(){return this[pc]};e.getAdHeight=function(){return this[mc]};e.getAdExpanded=function(){return!1};e.getAdSkippableState=function(){return this[lc]};e.getAdRemainingTime=function(){if(this[_c]&&null!=this[dc]){var t=this[dc],e=t.currentTime,n=t.duration;if(isFinite(e)&&isFinite(n))return n-e}return zn};e.getAdDuration=function(){if(this[_c]&&null!=this[dc]){var t=this[dc].duration;if(isFinite(t)&&t>0)return t}return zn};e.getAdVolume=function(){if(this[_c]&&null!=this[dc]){var t=this[dc],e=t.volume,n=t.muted;if("boolean"==typeof n&&n)return 0;if(isFinite(e))return e}return this[yc]};e.setAdVolume=function(t){this[yc]=t;if(null!=this[dc]){this._setVolume(t);this[gc]&&this._notifyMonitor("volume")}};e.getAdCompanions=function(){return""};e.getAdIcons=function(){return!1};e.handshakeVersion=function(){return"2.0"};e.initAd=function(t,e,n,r,i,o){var s=this,u=o||{},a=u.videoSlot,c=u.slot,l=null==c||null==c.ownerDocument;if(l){c=document.createElement("div");bi(c,Oc)}if(null==a){a=c.ownerDocument.createElement("video");bi(a,Oc);c.appendChild(a)}this[fc]=c;this[dc]=a;this[hc]=c.ownerDocument.createElement("div");bi(this[hc],Cc,!0);c.appendChild(this[hc]);this[gc]=!("volume"in a&&"muted"in a);this._setDimensions(t,e,n);this._preloadSrc(this[uc]);var f=function(){s._publish(Hn.AdLoaded)};l?Bn(document).then(function(){document.body.appendChild(c);f()}):f()};e.resizeAd=function(t,e,n){this._setDimensions(t,e,n);this._notifyMonitor("size")};e.startAd=function(){this._request(Hn.AdImpression);this._addDomListeners();this[dc].pause();if(this[yc]>=0){this._setVolume(this[yc]);this._notifyMonitor("volume")}this._setSrc(this[uc]);this[_c]=!0;this._publish(Hn.AdStarted);this[bc]=!1;this._play()};e.stopAd=function(){this._stop()};e.skipAd=function(){this._request(Hn.AdSkipped);this._stop()};e.pauseAd=function(){this._pause()};e.resumeAd=function(){this._resume()};e.expandAd=function(){};e.collapseAd=function(){};e.subscribe=function(t,e,n){void 0===n&&(n=null);this[cc].subscribe(t,e,n)};e.unsubscribe=function(t,e){this[cc].unsubscribe(t,e)};e._publish=function(t,e){void 0===e&&(e=[]);this[cc].publish(t,e)};e._addDomListeners=function(){if(null==this[Ac]){this[Ac]=[];this._addDomListener(this[hc],"click",this._onClickSlotClick);this._addVideoSlotListener("durationchange",this._onVideoDurationchange);this._addVideoSlotListener("volumechange",this._onVideoVolumechange);this._addVideoSlotListener("playing",this._onVideoSlotPlaying);this._addVideoSlotListener("pause",this._onVideoSlotPause);this._addVideoSlotListener("seeked",this._onVideoSeeked);this._addVideoSlotListener("ended",this._onVideoEnded);this._addVideoSlotListener("error",this._onVideoSlotError)}};e._addSlotListener=function(t,e){this._addDomListener(this[fc],t,e)};e._addVideoSlotListener=function(t,e){this._addDomListener(this[dc],t,e)};e._addDomListener=function(t,e,n){var r=n.bind(this);t.addEventListener(e,r);this[Ac].push({target:t,type:e,listener:r})};e._removeDomListeners=function(){if(null!=this[Ac]){for(var t=0;t<this[Ac].length;++t){var e=this[Ac][t],n=e.target,r=e.type,i=e.listener;n.removeEventListener(r,i)}this[Ac]=null}};e._onClickSlotClick=function(){if(this[wc]&&this[bc]){if(this[bc]){this[wc]=!1;this._resume()}}else{this[bc]||this._pause();this[wc]=!0;this._publish(Hn.AdClickThru,[null,null,!0])}};e._onVideoDurationchange=function(){this._notifyMonitor("duration");this._notifyMonitor("remainingTime")};e._onVideoVolumechange=function(){this._notifyMonitor("volume")};e._onVideoSlotPlaying=function(){this._satisfy(Hn.AdImpression);this._satisfy(Hn.AdPlaying);this._startTicking()};e._onVideoSlotPause=function(){this._stopTicking();this._satisfy(Hn.AdPaused);this._satisfyStopRequest()};e._onVideoSeeked=function(){this._notifyMonitor("remainingTime")};e._onVideoEnded=function(){this._onTick();this._stop()};e._onVideoSlotError=function(){var t=null!=this[dc].error?this[dc].error:new Error("Video error");this._onError(t)};e._onError=function(t){this._publish(Hn.AdError,[t.message]);this._stop()};e._preloadSrc=function(t){var e=this[dc],n=e.src,r=e.currentSrc;null!=n&&""!==n||null!=r&&""!==r||this._setSrc(t)};e._setSrc=function(t){this[dc].src=t};e._setDimensions=function(t,e,n){this[pc]=t;this[mc]=e;this[vc]=n;var r={width:t+"px",height:e+"px"};bi(this[dc],r);bi(this[fc],r);bi(this[hc],r,!0)};e._setVolume=function(t){this[dc].volume!==t&&(this[dc].volume=t);var e=0===t;this[dc].muted!==e&&(this[dc].muted=e)};e._play=function(){var t=this,e=this[ac].noMutedAutoplayFallback,n=this[dc].muted,r=this[dc].play();null!=r&&"function"==typeof r.catch?r.catch(function(r){if(n)throw r;t._publish(Hn.AdLog,["Error trying to play unmuted: "+r]);if(t[bc])t._publish(Hn.AdLog,["Ad paused, not falling back to muted autoplay"]);else{if(!e){t._publish(Hn.AdLog,["Attempting to perform muted autoplay"]);t[dc].muted=!0;return t[dc].play()}t._publish(Hn.AdLog,["Muted autoplay fallback disabled"])}}).catch(function(e){t._publish(Hn.AdLog,["Muted playback failed: "+e])}):this._publish(Hn.AdLog,["Video slot does not support muted autoplay"])};e._pause=function(){this[bc]=!0;if(null==this[dc]||this[dc].paused)this._publish(Hn.AdPaused);else{this._request(Hn.AdPaused);this[dc].pause()}};e._resume=function(){this[bc]=!1;if(null!=this[dc]&&this[dc].paused){this._request(Hn.AdPlaying);this._play()}else this._publish(Hn.AdPlaying)};e._stop=function(){this._stopTicking();this[bc]=!0;this._request(Hn.AdStopped);null==this[dc]||this[dc].paused||this[dc].ended?this._satisfyStopRequest():this[dc].pause()};e._satisfyStopRequest=function(){if(this._requested(Hn.AdStopped)){this._removeDomListeners();null!=this[dc]&&this._resetMediaSrc();this._satisfy(Hn.AdSkipped);this._satisfy(Hn.AdStopped)}};e._resetMediaSrc=function(){var t=this[dc];if("function"==typeof t.removeAttribute){t.removeAttribute("src");t.load()}else t.src="";this[_c]=!1};e._startTicking=function(){if(null==this[Ec]){this[Ec]=setInterval(this._onTick,250);this._onTick()}};e._stopTicking=function(){if(null!=this[Ec]){this._onTick();clearInterval(this[Ec]);this[Ec]=null}};e._onTick=function(){if(this[_c]){var t=this[dc];if(!(null==t||t.readyState<1||null!=t.error)){this._notifyMonitor("duration");this._notifyMonitor("remainingTime");this._handleSkippableState();this._handleQuartiles()}}};e._handleSkippableState=function(){var t=this[ac].skipOffset,e=this[dc].currentTime;if(!this[lc]&&"number"==typeof t&&e>=t){this[lc]=!0;this._notifyMonitor("skippableState")}};e._handleQuartiles=function(){var t,e=this[dc],n=e.currentTime,r=e.duration,i=e.ended,o=e.played,s=null!=o?(t=o,Array.apply(null,t).reduce(function(e,n,r){return e+t.end(r)-t.start(r)},0)):n;if(!(!isFinite(s)||s<0||!isFinite(r)||r<=0)){var u=this[Ic],a=i?.1:0;this[Ic]=Math.min(Math.max(u,Math.floor((s+a)/r*4)),4);for(var c=u+1;c<=this[Ic];++c)this._publish(Yn[c])}};e._request=function(t){this[Sc][t]=!0};e._requested=function(t){return!!this[Sc][t]};e._satisfy=function(t){if(this._requested(t)){this[Sc][t]=!1;this._publish(t)}};e._buildMonitors=function(){for(var t={},e=Object.keys(Tc),n=0;n<e.length;++n){var r=e[n],i=Tc[r],o=i[0],s=i[1];t[r]=this._buildMonitor(o,s)}return t};e._buildMonitor=function(t,e){var n=this,r=function(){return t.map(function(t){return n[t]()}).join("\0")},i=r();return function(){var t=r();if(t!==i){i=t;n._publish(e)}}};e._notifyMonitor=function(t){this[kc][t]()};return t}(),Dc=wi,jc=Ci,Mc=((Ka={}).vpaid=function(t,e,n,r){return new Promise(function(i,o){var s,u,a,c;s=t[sc].isFlagEnabled(4)?"inline":null;return Promise.resolve(function(t,e,n){return new Promise(function(r,i){void 0===n&&(n={});return r(("inline"===n.mode?function(t,e){return new Promise(function(n,r){var i,o,s,u;i=e.ownerDocument;o=i.defaultView;s=o.getVPAIDAd;delete o.getVPAIDAd;return Promise.resolve($n(t,null,i)).then(function(t){try{try{u=o.getVPAIDAd()}finally{o.getVPAIDAd=s}return n({vpaid:u})}catch(t){return r(t)}},r)})}:function(t,e){return new Promise(function(n,r){var i,o,s,u,a;return Promise.resolve(function(t,e,n,r){return new Promise(function(i,o){void 0===n&&(n=!1);void 0===r&&(r="about:blank");return Promise.resolve(Bn(t.ownerDocument)).then(function(s){try{return i(function(t,e,n,r){return new Promise(function(i,o){var s,u;s=t.ownerDocument.createElement("iframe");u=Gn(s,"load");s.frameBorder="0";s.scrolling="no";bi(s,e,n);s.src=r;t.appendChild(s);return Promise.resolve(Promise.race([u,function(t){return new Promise(function(e,n){function r(){return null==t.contentWindow||null==t.contentWindow.document?Promise.resolve(br(100)).then(function(t){try{return r}catch(t){return n(t)}},n):[1]}function i(){return e()}var o;return(o=function(t){for(;t;){if(t.then)return void t.then(o,n);try{if(t.pop){if(t.length)return t.pop()?i.call(this):t;t=r}else t=t.call(this)}catch(t){return n(t)}}}.bind(this))(r)})}(s)])).then(function(t){try{return i(s)}catch(t){return o(t)}},o)})}(t,e,n,r))}catch(t){return o(t)}},o)})}(e,rc,!0)).then(function(e){try{o=(i=e).contentWindow;s=o.document;u=function(t){return function(t,e,n){for(var r=0,i=e(t);null==i&&t!==t.parent&&r<10;){i=e(t=t.parent);++r}return i}(t,oc)}(o);s.write("<html><head>"+(null!=u?'<base href="'+function(t){var e=document.createElement("span");e.textContent=t;return e.innerHTML}(u)+'">':"")+"</head><body></body></html>");s.close();return Promise.resolve($n(t,null,s)).then(function(t){try{a=o.getVPAIDAd();return n({iframe:i,vpaid:a})}catch(t){return r(t)}},r)}catch(t){return r(t)}},r)})})(t,e))})}(e.uri,r.envVars.slot,{mode:s})).then(function(t){try{a=(u=t).iframe,c=u.vpaid;return i({iframe:a,vpaid:c,adParameters:n})}catch(t){return o(t)}},o)})},Ka.video=function(t,e,n,r){return new Promise(function(r,i){var o=t[Dc].config,s=o.clickThroughUrl,u=o.skipOffset;null==t[jc]&&(t[jc]=s);var a,c=t[Dc].isFlagEnabled(1);return r({vpaid:(a=e.uri,new Nc(a,{skipOffset:u,noMutedAutoplayFallback:c})),adParameters:n})})},Ka);Ja=new nc(Mc),window.getVPAIDAd=function(){return Ja}}();
