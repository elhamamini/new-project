!function(){"use strict";function t(n){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function n(t,n,i){return n in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t}function i(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var i=[],e=!0,r=!1,o=void 0;try{for(var u,s=t[Symbol.iterator]();!(e=(u=s.next()).done)&&(i.push(u.value),!n||i.length!==n);e=!0);}catch(t){r=!0,o=t}finally{try{e||null==s.return||s.return()}finally{if(r)throw o}}return i}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function e(t){return function(t){if(Array.isArray(t)){for(var n=0,i=new Array(t.length);n<t.length;n++)i[n]=t[n];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var r=setTimeout;function o(){}function u(t){if(!(this instanceof u))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this.t=0,this.n=!1,this.i=void 0,this.e=[],h(t,this)}function s(t,n){for(;3===t.t;)t=t.i;0!==t.t?(t.n=!0,u.o(function(){var i=1===t.t?n.onFulfilled:n.onRejected;if(null!==i){var e;try{e=i(t.i)}catch(t){return void c(n.promise,t)}a(n.promise,e)}else(1===t.t?a:c)(n.promise,t.i)})):t.e.push(n)}function a(n,i){try{if(i===n)throw new TypeError("A promise cannot be resolved with itself.");if(i&&("object"===t(i)||"function"==typeof i)){var e=i.then;if(i instanceof u)return n.t=3,n.i=i,void d(n);if("function"==typeof e)return void h((r=e,o=i,function(){r.apply(o,arguments)}),n)}n.t=1,n.i=i,d(n)}catch(t){c(n,t)}var r,o}function c(t,n){t.t=2,t.i=n,d(t)}function d(t){2===t.t&&0===t.e.length&&u.o(function(){t.n||u.u(t.i)});for(var n=0,i=t.e.length;n<i;n++)s(t,t.e[n]);t.e=null}function f(t,n,i){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof n?n:null,this.promise=i}function h(t,n){var i=!1;try{t(function(t){i||(i=!0,a(n,t))},function(t){i||(i=!0,c(n,t))})}catch(t){if(i)return;i=!0,c(n,t)}}u.prototype.catch=function(t){return this.then(null,t)},u.prototype.then=function(t,n){var i=new this.constructor(o);return s(this,new f(t,n,i)),i},u.prototype.finally=function(t){var n=this.constructor;return this.then(function(i){return n.resolve(t()).then(function(){return i})},function(i){return n.resolve(t()).then(function(){return n.reject(i)})})},u.all=function(n){return new u(function(i,e){if(!n||void 0===n.length)throw new TypeError("Promise.all accepts an array");var r=Array.prototype.slice.call(n);if(0===r.length)return i([]);var o=r.length;function u(n,s){try{if(s&&("object"===t(s)||"function"==typeof s)){var a=s.then;if("function"==typeof a)return void a.call(s,function(t){u(n,t)},e)}r[n]=s,0==--o&&i(r)}catch(t){e(t)}}for(var s=0;s<r.length;s++)u(s,r[s])})},u.resolve=function(n){return n&&"object"===t(n)&&n.constructor===u?n:new u(function(t){t(n)})},u.reject=function(t){return new u(function(n,i){i(t)})},u.race=function(t){return new u(function(n,i){for(var e=0,r=t.length;e<r;e++)t[e].then(n,i)})},u.o="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){r(t,0)},u.u=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var l=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();function v(){}function p(t){return null===t}function m(t){return void 0!==t}function A(t){return void 0===t}function g(n){return"object"===t(n)}function b(t){return"function"==typeof t}function w(t){return"number"==typeof t}function E(t){return"string"==typeof t}function y(t){return E(t)&&0!==t.length}function S(t,n){return Object.prototype.hasOwnProperty.call(t,n)}function _(t){return"[object Array]"===Object.prototype.toString.call(t)}function T(t){return _(t)?t:[t]}function I(t){return Array.prototype.slice.call(t)}function k(t){return t.charAt(0).toLowerCase()+t.slice(1)}function R(){return Math.round(1e8*Math.random()).toString()}function C(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=16*Math.random()|0;return("x"===t?n:3&n|8).toString(16)})}function M(t,n,i){if(t)if(_(t))t.forEach(n,i);else for(var e in t)S(t,e)&&n.call(i,t[e],e,t);return t}function P(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),e=1;e<n;e++)i[e-1]=arguments[e];return i.forEach(function(n){for(var i in n)S(n,i)&&(!g(t[i])||p(t[i])||_(t[i])||_(n[i])||!g(n[i])?t[i]=n[i]:t[i]=P({},t[i],n[i]))}),t}function x(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),e=1;e<n;e++)i[e-1]=arguments[e];return i.forEach(function(n){Object.keys(Object(n)).forEach(function(i){t[i]=n[i]})}),t}function O(t,n){return-1!==t.indexOf(n)}function D(t,n){t=_(t)?t:[],n=b(n)?n:v;for(var i=0,e=t.length;i<e;i++){var r=t[i];if(n(r,i,t))return r}return null}function q(t,n,i){return O(String(t),n)?q(String(t).replace(n,i),n,i):t}function N(t){return function(){if(b(t)){var n=t;t=null,n.apply(this,arguments)}}}function V(t){var n={},i=function(i){var e=String(i);return S(n,e)||(n[e]=t.apply(this,arguments)),n[e]};return i.clear=function(){return n={}},i}function U(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];if(0===n.length)return function(t){return t};if(1===n.length)return n[0];var e=n.length-1;return function(){for(var t=e,i=n[e].apply(this,arguments);t--;)i=n[t].call(this,i);return i}}function L(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return function(){for(var t=this,i=arguments.length,e=new Array(i),r=0;r<i;r++)e[r]=arguments[r];var o=b(e[e.length-1])?N(e.pop()):v,u=0;!function i(e){if(u===n.length)return o.apply(t,[null].concat(e));var r=N(function(n){for(var e=arguments.length,r=new Array(e>1?e-1:0),u=1;u<e;u++)r[u-1]=arguments[u];return n?o.apply(t,[n].concat(r)):i(r)});e.push(r),n[u++].apply(t,e)}(e)}}l.Promise||(l.Promise=u);var F="3.13.3";function B(t){var n=window.getComputedStyle(t);return!n||"none"===n.display}function j(t){t.style.display="",B(t)&&(t.style.display=t.a||"initial"),t.a=void 0}function W(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function H(t,n){if(y(n)){if(t.classList)return t.classList.contains(n);var i=E(t.getAttribute("class"))?t.getAttribute("class").split(/\s+/):[];n=n||"";for(var e=0,r=i.length;e<r;e++)if(i[e]===n)return!0}return!1}function z(t,n){if(y(n)){if(t.classList)return t.classList.add(n);var i=E(t.getAttribute("class"))?t.getAttribute("class").split(/\s+/):[];E(n)&&y(n.replace(/\s+/,""))&&(i.push(n),t.setAttribute("class",i.join(" ")))}}function G(t,n){if(y(n)){if(t.classList)return t.classList.remove(n);var i=E(t.getAttribute("class"))?t.getAttribute("class").split(/\s+/):[],e=[];if(E(n)&&y(n.replace(/\s+/,""))){for(var r=0,o=i.length;r<o;r++)n!==i[r]&&e.push(i[r]);t.setAttribute("class",e.join(" "))}}}function Y(t,n,i){_(t)?M(t,function(t){return Y(t,n,i)}):_(n)?M(n,function(n){return Y(t,n,i)}):t.addEventListener&&t.addEventListener(n,i,!1)}function Q(t,n,i){_(t)?M(t,function(t){return Q(t,n,i)}):_(n)?M(n,function(n){return Q(t,n,i)}):t.removeEventListener&&t.removeEventListener(n,i,!1)}function X(t,n,i){Y(t,n,function e(){i.apply(null,arguments),Q(t,n,e)})}function K(t){return t instanceof HTMLElement}function $(t,n,i,e){return i?r(i,e):new Promise(r);function r(i,e){var r=document.createElement("script");r.type="text/javascript",r.async=!0,r.onload=i,r.onerror=e,r.src=t,n.appendChild(r)}}var J={UA:navigator.userAgent,connection:navigator.connection||navigator.mozConnection||navigator.webkitConnection};function Z(){return J.connection?J.connection.type:""}var tt=V(function(){return/Mobi|iP(hone|ad|od)|Android|Windows Phone/.test(J.UA)}),nt=(V(function(){return/Android/.test(J.UA)}),V(function(){return/iP(hone|ad|od)/.test(J.UA)}),V(function(){var t=J.UA.match(/Chrom(e|ium)\/([0-9]+)\./);return t?Number(t[2]):-1}),V(function(){var t=J.UA.match(/Firefox\/([0-9]+)\./);return t?Number(t[1]):-1}),V(function(){var t=J.UA.match(/Version\/([0-9]+)\..*Safari/);return t?Number(t[1]):-1}),V(function(){var t=D([{s:"Android",r:/Android/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"Linux",r:/(Linux|X11)/},{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"UNIX",r:/UNIX/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}],function(t){return t.r.test(J.UA)});return t?t.s:"unknown"})),it={create:ot},et=ot().token,rt=function(t){return function(n){try{n(t)}catch(t){setTimeout(function(){throw t})}}};function ot(){for(var t={reason:null,listeners:[]},n=N(function(n){t.reason=n||new Error("Operation Canceled"),t.reason.canceled=!0,t.listeners.forEach(rt(t.reason))}),i=arguments.length,e=new Array(i),r=0;r<i;r++)e[r]=arguments[r];return e.map(function(t){return t.subscribe(n)}),{token:{isCanceled:function(){return Boolean(t.reason)},throwIfCanceled:function(){if(t.reason)throw t.reason},subscribe:function(n){return t.reason?(rt(t.reason)(n),{unsubscribe:function(){}}):(t.listeners.push(n),{unsubscribe:function(){t.listeners=t.listeners.filter(function(t){return t!==n})}})}},cancel:n}}var ut=Object.freeze({EVENTS:["AdLoaded","AdStarted","AdStopped","AdSkipped","AdSkippableStateChange","AdSizeChange","AdLinearChange","AdDurationChange","AdExpandedChange","AdRemainingTimeChange","AdVolumeChange","AdImpression","AdVideoStart","AdVideoFirstQuartile","AdVideoMidpoint","AdVideoThirdQuartile","AdVideoComplete","AdClickThru","AdInteraction","AdUserAcceptInvitation","AdUserMinimize","AdUserClose","AdPaused","AdPlaying","AdLog","AdError"],METHODS:["handshakeVersion","initAd","startAd","stopAd","skipAd","resizeAd","pauseAd","resumeAd","expandAd","collapseAd","subscribe","unsubscribe"],GETTERS:["getAdLinear","getAdWidth","getAdHeight","getAdExpanded","getAdSkippableState","getAdRemainingTime","getAdDuration","getAdVolume","getAdCompanions","getAdIcons"],SETTERS:["setAdVolume"]}),st=Object.freeze({NORMAL:"normal",FULLSCREEN:"fullscreen",THUMBNAIL:"thumbnail"}),at=document.createElement("a");function ct(t){return document.documentMode&&(at.setAttribute("href",t),t=at.href),at.setAttribute("href",t),{href:at.href,protocol:at.protocol?at.protocol.replace(/:$/,""):"",host:at.host,search:at.search?at.search.replace(/^\?/,""):"",hash:at.hash?at.hash.replace(/^#/,""):"",hostname:at.hostname,port:y(at.port)?at.port:"80",pathname:"/"===at.pathname.charAt(0)?at.pathname:"/"+at.pathname}}function dt(t){var n=String(t).trim().replace(/.*?\?/,"").split("&"),e={};return M(n,function(t){if(""!==t){var n=i(t.split("="),2),r=n[0],o=n[1];e[r]=decodeURIComponent(o)}}),e}function ft(t){var n=[];return M(t,function(t,i){m(t)&&n.push(i+"="+encodeURIComponent(t))}),n.join("&")}function ht(t,n){var i=-1!==String(t).indexOf("?")?"&":"?",e=ft(n);return e?t+i+e:t}function lt(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n.CACHEBUSTING=n.CACHEBUSTING||R(),M(n,function(n,i){m(n)&&(n=b(n)?n():n,t=q(t,"["+i+"]",n),t=q(t,"${"+i+"}",n),t=q(t,i,n))}),String(t)}function vt(t,n,i){t=T(t),i=N(i);var e=t.filter(function(t){return Boolean(t)}).map(function(t){return lt(t,n)}),r=e.length;return e.map(function(t){var n=new Image(1,1),e=function(){n.onload=n.onerror=null,0==--r&&i()};return n.onload=e,n.onerror=e,n.src=t,n})}var pt=[{domain:"doubleclick.net",param:"url"},{domain:"disqusads.com",param:"sourceUrl"}],mt=function(t){try{return function(t){try{return{window:t.top,location:ct(t.top.location)}}catch(e){var n=t.location.ancestorOrigins,i=function t(n){var i=ct(n.location);var e=ct(n.document.referrer);var r=e.hostname!==i.hostname||e.protocol!==i.protocol;if(n===n.parent)return{window:n,location:i};if(r)return{window:n,location:e};return t(n.parent)}(t);return n&&n.length&&!gt(n[n.length-1])&&(i.location=ct(n[n.length-1])),At(i)}}(t)}catch(n){return At({window:t,location:ct(t.location)})}}(window);function At(t){var n=t.window,i=t.location,e=gt(i.hostname);if(e){var r=dt(i.search)[e.param];if(y(r))return{window:n,location:ct(r)}}return{window:n,location:i}}function gt(t){return D(pt,function(n){return O(t,n.domain)})}function bt(t){if(y(t)){var n=decodeURIComponent(t);return ct((function(t){return/^(?:[a-z]+:)?\/\//.test(t)}(n)?"":"//")+n)}return mt.location}var wt,Et="2.0",yt=8e3,St=5,_t=6e4,Tt=500,It=6e4,kt=500,Rt=0;function Ct(){}function Mt(){var t=Object.create(this.prototype);return this.apply(t,arguments),t}Ct.create=Mt,Ct.extend=function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var i=n.statics||{};var e=n.decorators||[];var r=n.autoBind;var o=n.init||this.prototype.init||function(){};var u=function t(){if(r)for(var n in t.prototype)b(t.prototype[n])&&"constructor"!==n&&(this[n]=t.prototype[n].bind(this));o.apply(this,arguments)};delete n.statics;delete n.decorators;delete n.autoBind;u.prototype=Object.create(this.prototype);u.prototype.constructor=u;u.extend=t.bind(u);u.create=Mt.bind(u);x(u.prototype,n);x(u,i);e.forEach(function(t){return t(u.prototype)});return u};var Pt={OFF:0,ERROR:1,WARN:2,INFO:3,DEBUG:4,ALL:5},xt=(n(wt={DEFAULT:"black"},Pt.ERROR,"red"),n(wt,Pt.WARN,"orange"),n(wt,Pt.INFO,"blue"),n(wt,Pt.DEBUG,"black"),wt),Ot=Ct.extend({console:window.console,ping:vt,init:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.endpoint=t.endpoint||"",this.payload=t.payload||{},this.events=[],this.output=null,this.setLogLevel(t.level),this.setReportLevel(t.report)},clear:function(){this.events=[]},setLogLevel:function(t){this.level=w(t)?t:Pt[t]||Pt.OFF},setReportLevel:function(t){this.report=w(t)?t:Pt[t]||Pt.OFF},setOutput:function(t){this.output=K(t)?t:y(t)&&document.getElementById(t)},error:function(t){this.push(t,Pt.ERROR)},warn:function(t){this.push(t,Pt.WARN)},info:function(t){this.push(t,Pt.INFO)},log:function(t){this.push(t,Pt.DEBUG)},push:function(t,n){E(t)&&(t={type:t}),t.level=w(n)?n:Pt.DEBUG,t.time=Date.now(),this.events.push(t),t.level<=this.level&&(function(t,n){var i=n.console,e=xt[t.level]||xt.DEFAULT;try{i.groupCollapsed("%c"+t.type,"color:"+e)}catch(t){}i.log(t);try{i.groupEnd()}catch(t){}}(t,this),K(this.output)&&function(t,n){var i=n.events,e=n.output,r=i[0].time,o=(t.time-r)/1e3;e.innerHTML+="<strong>".concat(t.type,"</strong> -- ").concat(o," seconds<br />")}(t,this)),this.endpoint&&t.level<=this.report&&function(t,n){(0,n.ping)(ht(n.endpoint,x({},n.payload,{event:t.type,metadata:JSON.stringify(t),timestamp:Date.now()})))}(t,this)}}).create({endpoint:"//metrics.beachfront.com/metrics/video/log",report:Math.random()<.05?Pt.ERROR:Pt.OFF,payload:{product:"neptune",version:F,sessionId:C(),domain:mt.location.href}});function Dt(t,n){return new Promise(function(i){setTimeout(function(){return i(n)},t)})}function qt(t){return new Promise(function(n){n(t())})}var Nt="inner_"+Math.random(),Vt=function(){return x(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{on:function(t,n,i){var e=this;return _(t)?(t.forEach(function(t){return e.on(t,n,i)}),this):(void 0===this.c&&(this.c={}),void 0===this.c[t]&&(this.c[t]=[]),-1===Ut(this.c[t],n)&&this.c[t].push({listener:n,context:i}),this)},off:function(t,n){var i=this;if(void 0===this.c)return this;if(_(t))return t.forEach(function(t){return i.off(t,n)}),this;if(0===arguments.length)return this.c=void 0,this;if(1===arguments.length)return this.c[t]=[],this;var e=this.c[t];if(void 0!==e){var r=Ut(e,n);-1!==r&&e.splice(r,1)}return this},once:function(t,n,i){var e=this,r=function i(){e.off(t,i),n.apply(this,arguments)};return r[Nt]=n,this.on(t,r,i),this},nextEvent:function(t){var n=this;return new Promise(function(i){n.once(t,i)})},hasListener:function(t,n){if(void 0===this.c)return!1;var i=this.c[t];return void 0!==i&&-1!==Ut(i,n)},dispatch:function(t,n){if(void 0!==this.c&&(E(t)&&(t={type:t}),"*"!==t.type)){var i=this.c["*"]||[],e=this.c[t.type]||[],r=i.concat(e);t.target=n||this,r.forEach(function(n){var i=n.listener,e=n.context;i.call(e,t)})}}})};function Ut(t,n){for(var i=0,e=t.length;i<e;i++){var r=t[i].listener;if(r===n||r[Nt]===n)return i}return-1}var Lt=Ct.extend.call(Error,{name:"Error",defaultMessage:"",defaultCode:0,init:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.message,i=t.code;this.message=n||this.defaultMessage,this.code=i||this.defaultCode,this.stack=Error().stack||""},toString:function(){return"".concat(this.name," ").concat(this.code,": ").concat(this.message)}}),Ft=Lt.extend({name:"VASTError",defaultMessage:"Undefined error",defaultCode:900,statics:{XML_PARSING_ERROR:{message:"Error parsing xml",code:100},BOTH_INLINE_AND_WRAPPER:{message:"Both InLine and Wrapper found on the same Ad",code:101},NO_INLINE_OR_WRAPPER:{message:"No InLine or Wrapper found on the Ad",code:101},NO_CREATIVE:{message:"No creative in InLine",code:101},NO_AD_TAG_URI:{message:"No VASTAdTagURI in wrapper",code:101},UNSUPPORTED_VAST_VERSION:{message:"VAST version not supported",code:102},UNSUPPORTED_VPAID_VERSION:{message:"VPAID version not supported",code:901},INVALID_VPAID_CREATIVE:{message:"Creative is not fully complaint with the VPAID spec",code:901},VPAID_ERROR:{message:"Error occurred in the VPAID ad unit",code:901},VPAID_TIMEOUT:{message:"Timeout while waiting for VPAID event",code:304},IFRAME_LOAD_ERROR:{message:"Player is unable to load iframe",code:901},UNSUPPORTED_AD_TYPE:{message:"Received an Ad type that is not supported",code:200},MEDIA_FILE_TIMEOUT:{message:"Timeout while loading the MediaFile",code:402},UNSUPPORTED_MEDIA_FILE:{message:"Could not find MediaFile supported by this player",code:403},MEDIA_FILE_ERROR:{message:"Player is unable to load the MediaFile",code:405},EXPECTED_INLINE:{message:"Expected InLine instead of Wrapper",code:300},UNAVAILABLE_AD_TAG:{message:"Error requesting VAST XML with an ad tag URL",code:301},WRAPPER_LIMIT:{message:"Wrapper limit reached",code:302},NO_AD:{message:"No Ad in VAST tree",code:303}}}),Bt=Ct.extend({decorators:[Vt],version:"2.0",timeout:6e4,init:function(){this.impressionPromise=this.nextEvent("AdImpression"),this.videoStartPromise=this.nextEvent("AdVideoStart")},handshakeVersion:function(){return this.version},initAd:function(){},startAd:function(){},stopAd:function(){},pauseAd:function(){},resumeAd:function(){},expandAd:function(){},collapseAd:function(){},skipAd:function(){},resizeAd:function(){},setAdVolume:function(){},getAdVolume:function(){return-2},getAdWidth:function(){return 0},getAdHeight:function(){return 0},getAdRemainingTime:function(){return-2},getAdDuration:function(){return-2},getAdSkippableState:function(){return!1},getAdExpanded:function(){return!1},getAdIcons:function(){return!1},getAdCompanions:function(){return""},getAdLinear:function(){return!0},subscribe:function(t,n,i){var e=function(t){return function(n){if("AdClickThru"===n.type){var i=n.data||{},e=i.url,r=void 0===e?"":e,o=i.id,u=void 0===o?"":o,s=i.playerHandles,a=void 0!==s&&s;t.call(this,r,u,a)}else if("AdError"===n.type){var c=n.data||{},d=c.message;t.call(this,d)}else t.call(this)}}(t);e[Nt]=t,this.on(n,e,i)},unsubscribe:function(t,n){this.off(n,t)},waitForEvent:function(t){return Promise.race([Dt(this.timeout).then(function(){var n='Timeout while waiting for event "'.concat(t,'"'),i=Ft.VPAID_TIMEOUT.code;throw Ft.create({message:n,code:i})}),this.nextEvent("AdError").then(function(t){var n=(t.data||{}).message,i=void 0===n?Ft.VPAID_ERROR.message:n,e=Ft.VPAID_ERROR.code;throw Ft.create({message:i,code:e})}),this.nextEvent(t)])}});var jt=Lt.extend({name:"AdError",defaultMessage:"Undefined error",defaultCode:900,statics:{AD_DISCARDED:{message:"Ad discarded during mediation",code:990033},AD_TIMEOUT:{message:"Ad timeout reached",code:990034},INVENTORY_TIMEOUT:{message:"Inventory timeout reached",code:990035},EXTERNAL_TIMEOUT:{message:"External timeout reached",code:990036},VAST_TIMEOUT:{message:"VAST timeout reached",code:99001},VAST_OPT_OUT:{message:"VAST opt-out occurred",code:99002},VPAID_OPT_OUT:{message:"VPAID opt-out occurred",code:990031},TECH_ERROR:{message:"Tech error",code:990032}}}),Wt=Ct.extend({decorators:[Vt],init:function(t){var n=this;this.options=function(t,n){var i={},e=[],r=Object.getPrototypeOf(t);for(;r&&r!==Ct.prototype;)g(r.options)&&e.push(r.options),r=Object.getPrototypeOf(r);return e.reverse().forEach(function(t){return P(i,t)}),P(i,n)}(this,t),this.d=function(t){var n=t.el||document.createElement(t.tagName||"div");t.id&&(n.id=t.id);t.className&&(n.className=t.className);t.innerHTML&&(n.innerHTML=t.innerHTML);t.textContent&&(n.textContent=t.textContent);t.hide&&(n.style.display="none");return M(t.tagAttributes,function(t,i){return n.setAttribute(i,t)}),n}(this.options),this.f=[],M(this.options.children,function(t,i){n[i]=n.addChild(i,t)}),this.el().addEventListener("click",function(){return n.dispatch("click")})},addChild:function(t,n){var i=t;if(E(t)){var e=(g(n)?n.componentClass:n)||Wt;(n=g(n)?n:{}).name=t,i=e.create(n)}return b(i.el)&&K(i.el())&&(this.d.appendChild(i.el()),this.f.push(i)),i},removeChild:function(t){E(t)&&(t=this.getChild(t)),t&&(this.f=this.f.filter(function(n){return n!==t}),t.el().parentNode===this.d&&this.d.removeChild(t.el()))},getChild:function(t){return D(this.f,function(n){return n.options.name===t})},getChildren:function(){return this.f},addClass:function(t){z(this.d,t)},removeClass:function(t){G(this.d,t)},hasClass:function(t){return H(this.d,t)},toggleClass:function(t){return this.hasClass(t)?this.removeClass(t):this.addClass(t)},getDimension:function(){return function(t){if(t.getBoundingClientRect){var n=t.getBoundingClientRect();return{width:n.width,height:n.height}}return{width:t.offsetWidth,height:t.offsetHeight}}(this.d)},el:function(){return this.d},hide:function(){var t,n;t=this.d,n="none"===t.style.display?"":t.style.display,t.a=t.a||n,t.style.display="none"},show:function(){j(this.d)},isHidden:function(){return B(this.d)},remove:function(){W(this.d)},update:function(t){M(this.f,function(n){return n.update(t)})},dispose:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dispatch("dispose"),M(this.f,function(t){return t.dispose(!1)}),t&&W(this.d),this.off()}});var Ht={create:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).interval,n=void 0===t?250:t,i=0,e=null,r=null,o=!1,u=[],s=function(){return u.forEach(qt)};return{currentTime:function(){return e?i+(Date.now()-e):i},start:function(){e||o||(e=Date.now(),r=setInterval(s,n),s())},stop:function(){e&&(i+=Date.now()-e,e=null,clearInterval(r))},subscribe:function(t){return u.push(t),{unsubscribe:function(){u=u.filter(function(n){return n!==t})}}},dispose:function(){this.stop(),u=[],o=!0}}}};var zt="source.adLoad",Gt="source.adStart",Yt="source.adError",Qt=new DOMParser,Xt=new XMLSerializer,Kt=/^\s*$/,$t=/^(?:true|false)$/i,Jt="http://www.w3.org/1999/xhtml",Zt=function(){try{return Qt.parseFromString("INVALID","text/xml").getElementsByTagName("parsererror")[0].namespaceURI}catch(t){return Jt}}(),tn=function(t){return"@"+k(t)},nn=Ct.extend({init:function(t){if(t.documentElement&&(t=t.documentElement),Object.defineProperty(this,"domNode",{value:t,enumerable:!1}),t.hasChildNodes()){for(var n="",i=0;i<t.childNodes.length;i++){var e=t.childNodes.item(i);if(3===e.nodeType||4===e.nodeType)n+=3===e.nodeType?e.nodeValue.trim():e.nodeValue;else if(1===e.nodeType&&!e.prefix){var r=k(e.nodeName),o=nn.create(e);S(this,r)?(this[r].constructor!==Array&&(this[r]=[this[r]]),this[r].push(o)):this[r]=o}}n&&(this.keyValue=en(n))}if(t.hasAttributes())for(var u=0;u<t.attributes.length;u++){var s=t.attributes.item(u),a=s.name,c=s.value;this[tn(a)]=en(c.trim())}},toXmlString:function(){return Xt.serializeToString(this.domNode)},nodeName:function(){return this.domNode.nodeName},attr:function(t){return this[tn(t)]}});function en(t){return Kt.test(t)?null:$t.test(t)?"true"===t.toLowerCase():isFinite(t)?parseFloat(t):t.trim()}function rn(t){return t?t.keyValue:void 0}function on(t,n){return t?t[tn(n)]:void 0}function un(t){if(E(t))return t.replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&")}var sn=U(nn.create,function(t){try{var n=Qt.parseFromString(t,"application/xml");if(i=n,(Zt===Jt?i.getElementsByTagName("parsererror").length>0:i.getElementsByTagNameNS(Zt,"parsererror").length>0)||!t)throw new Error;return n}catch(t){throw new Error("XML Parsing Error")}var i}),an={get:function(t,n){return dn("GET",t,n)},post:function(t,n){return dn("POST",t,n)},send:dn},cn={headers:{},data:{},withCredentials:!1,retryWithoutCredentials:!1,timeout:6e4,timeoutId:-1,cancelToken:null};function dn(t,n,i){n=E(n)?{url:n}:n,(n=x({},cn,n)).method=t,n.callback=N(i),n.cancelToken=n.cancelToken||et;var e=n.xhr=b(n.createXhr)?n.createXhr():function(){var t=new XMLHttpRequest;return"withCredentials"in t?t:new XDomainRequest}(),r="GET"===t?ht(n.url,n.data):n.url,o="POST"===t&&n.data?function(t){var n=new FormData;return Object.keys(Object(t)).forEach(function(i){n.append(i,t[i])}),n}(n.data):null,u=function(t){return function(n){var i=t.xhr,e=t.timeoutId,r=t.callback,o=n||new Error("Http Request Canceled");i.onload=null,i.onerror=null,i.abort(),clearTimeout(e),r(o,null,null)}}(n);if(!r)throw new Error("Http Request Error: Invalid URL");if(n.cancelToken.isCanceled())return n.cancelToken.subscribe(u);e.open(t,ct(r).href,!0),e.withCredentials=Boolean(n.withCredentials),function(t,n){M(n,function(n,i){m(n)&&t.setRequestHeader(i,n)})}(e,n.headers),n.timeout&&(n.timeoutId=setTimeout(u,n.timeout)),e.onload=function(t){return function(){var n=t.xhr,i=t.timeoutId,e=t.callback;clearTimeout(i),n.onload=null,n.onerror=null,n.getAllResponseHeaders||(n.getAllResponseHeaders=function(){return null}),n.status||(n.status=200);var r,o=(r=n.status)>=200&&r<300?null:new Error(n.statusText||"Http Request Error"),u="response"in n?n.response:n.responseText;e(o,u,n.getAllResponseHeaders())}}(n),e.onerror=function(t){return function(){var n=t.xhr,i=t.timeoutId,e=t.method,r=t.cancelToken,o=t.callback;if(n.onload=null,n.onerror=null,t.withCredentials&&t.retryWithoutCredentials){var u=x({},t,{withCredentials:!1,retryWithoutCredentials:!1,cancelToken:r});dn(e,u,o)}else{var s=new Error("Http Request Error");clearTimeout(i),o(s,null,null)}}}(n),e.send(o),n.cancelToken.subscribe(u)}function fn(t){var n=parseInt(t,10),i=-1===String(t).indexOf("%")?"px":"%";return isNaN(n)?"":n+i}function hn(t){return String(t).replace(/[A-Z]/g,function(t,n){return(n?"_":"")+t.toLowerCase()})}function ln(t,n){var i=String(t);if(n=w(n)?n:0,t=w(t)?t:parseInt(t,10),w(t)&&!isNaN(t)){for(i=String(t);i.length<n;)i="0"+i;return i}return String(NaN)}var vn=Ct.extend({init:function(t){var n;this.adTitle=rn(t.adTitle),this.adSystem=rn(t.adSystem),this.impressions=Pn(t.impression),this.creatives=Dn(t.creatives),this.description=rn(t.description),this.advertiser=rn(t.advertiser),this.pricing=rn(t.pricing),this.errors=Mn(t.error),this.surveys=(n=t.survey)?T(n).filter(function(t){return t&&m(t.keyValue)}).map(function(t){return{uri:t.keyValue,type:t.attr("type")}}):[],this.extensions=qn(t.extensions)}}),pn=Ct.extend({init:function(t){this.adSystem=rn(t.adSystem),this.vastAdTagUri=rn(t.vASTAdTagURI),this.impressions=Pn(t.impression),this.errors=Mn(t.error),this.creatives=Dn(t.creatives),this.extensions=qn(t.extensions),this.allowMultipleAds=on(t,"allowMultipleAds"),this.fallbackOnNoAd=on(t,"fallbackOnNoAd"),this.followAdditionalWrappers=!m(on(t,"followAdditionalWrappers"))||on(t,"followAdditionalWrappers")}}),mn=Ct.extend({statics:{TYPE:"beachfront-io",isType:function(t){return t&&"beachfront-io"===t.type}},init:function(t){var n,i,e,r,o;this.vpaidMeta=(n=t.vpaidMeta)?{advertiser:rn(n.advertiser),campaignid:rn(n.campaignid),to:rn(n.to),gto:rn(n.gto),rurl:rn(n.rurl),crurl:rn(n.crurl)}:null,this.priorities=(i=t.priorities)?{marketplace:rn(i.marketplace),level:rn(i.level),weight:rn(i.weight)}:null,this.viewability=(e=t.viewability)?{moat:rn(e.moat),moat_imp:rn(e.moat_imp),appid:rn(e.appid),ts:rn(e.ts),rid:rn(e.rid),iab:rn(e.iab),viewable100:rn(e.viewable100)}:null,this.tracking=(r=t.tracking)?{start:rn(r.start),complete:rn(r.complete)}:null,this.jSInjects=m(o=t.jSInjects)&&m(o.jSInject)?T(o.jSInject).map(function(t){return{name:t.attr("name"),onload:t.attr("onload"),url:rn(t)}}):[]},merge:function(t){t&&t.data&&(this.vpaidMeta=this.vpaidMeta?P({},t.data.vpaidMeta,this.vpaidMeta):t.data.vpaidMeta,this.priorities=this.priorities?P({},t.data.priorities,this.priorities):t.data.priorities,this.viewability=this.viewability?P({},t.data.viewability,this.viewability):t.data.viewability,_(t.data.jSInjects)&&(this.jSInjects=this.jSInjects.concat(t.data.jSInjects)))},getAdvertiser:function(){return this.vpaidMeta&&this.vpaidMeta.advertiser},getCampaignId:function(){return this.vpaidMeta&&this.vpaidMeta.campaignid},getTimeout:function(){return this.vpaidMeta&&this.vpaidMeta.to},getGlobalTimeout:function(){return this.vpaidMeta&&this.vpaidMeta.gto},getResponseUrl:function(){return this.vpaidMeta&&this.vpaidMeta.rurl},getCreativeUploadUrl:function(){return this.vpaidMeta&&this.vpaidMeta.crurl},getMarketplace:function(){return this.priorities&&this.priorities.marketplace},getLevel:function(){return this.priorities&&this.priorities.level},getWeight:function(){return this.priorities&&this.priorities.weight},isMoatEnabled:function(){return Boolean(this.viewability&&this.viewability.moat)},getMoatImpression:function(){return this.viewability&&this.viewability.moat_imp},getImpressionId:function(){return this.viewability&&this.viewability.appid},getTimeStamp:function(){return this.viewability&&this.viewability.ts},getTransactionId:function(){return this.viewability&&this.viewability.rid},getIabUrl:function(){return this.viewability&&this.viewability.iab},getViewableUrl:function(){return this.viewability&&this.viewability.viewable100},getTrackingStart:function(){return this.tracking&&this.tracking.start},getTrackingComplete:function(){return this.tracking&&this.tracking.complete}});var An=Ct.extend({init:function(t,n){this.id=t.attr("id"),this.sequence=t.attr("sequence"),this.meta=n,t.inLine&&(this.inLine=vn.create(t.inLine)),t.wrapper&&(this.wrapper=pn.create(t.wrapper))},findExtension:function(t){return this.inLine?D(this.inLine.extensions,t):this.wrapper?D(this.wrapper.extensions,t):null},findIOExtension:function(){return this.findExtension(mn.isType)}}),gn=Ct.extend({init:function(t,n){this.uri=rn(t),this.name=t.attr("event"),"progress"===this.name&&(this.offset=kn(t.attr("offset"),n))}}),bn=Ct.extend({init:function(t){this.clickThrough=rn(t.clickThrough),this.clickTrackings=xn(t.clickTracking),this.customClicks=xn(t.customClick)}}),wn=Ct.extend({init:function(t){var n,i;this.duration=Rn(rn(t.duration)),this.mediaFiles=(n=t.mediaFiles)&&n.mediaFile?T(n.mediaFile).map(Sn.create):[],this.trackingEvents=On(t.trackingEvents,this.duration),this.skipoffset=kn(on(t,"skipoffset"),this.duration),this.icons=(i=t.icons)&&i.icon?T(i.icon).map(Tn.create):[],t.videoClicks&&(this.videoClicks=bn.create(t.videoClicks)),t.adParameters&&(this.adParameters=rn(t.adParameters),on(t.adParameters,"xmlEncoded")&&(this.adParameters=un(this.adParameters)))}}),En=Ct.extend({init:function(t){this.id=t.attr("id"),this.sequence=t.attr("sequence"),this.adId=t.attr("adId"),this.apiFramework=t.attr("apiFramework"),t.linear?this.linear=wn.create(t.linear):t.companionAds&&(this.companionAds=Nn(t.companionAds))}}),yn=Ct.extend({init:function(t){this.type=t.attr("type"),this.type===mn.TYPE?this.data=mn.create(t):this.data=t}}),Sn=Ct.extend({init:function(t){this.src=rn(t),this.delivery=t.attr("delivery"),this.type=t.attr("type"),this.width=t.attr("width"),this.height=t.attr("height"),this.codec=t.attr("codec"),this.id=t.attr("id"),this.bitrate=t.attr("bitrate"),this.minBitrate=t.attr("minBitrate"),this.maxBitrate=t.attr("maxBitrate"),this.scalable=t.attr("scalable"),this.maintainAspectRatio=t.attr("maintainAspectRatio"),this.apiFramework=t.attr("apiFramework")}}),_n=Ct.extend({init:function(t){this.clickThrough=rn(t.iconClickThrough),this.clickTrackings=xn(t.iconClickTracking)}}),Tn=Ct.extend({init:function(t){this.program=t.attr("program"),this.width=t.attr("width"),this.height=t.attr("height"),this.xPosition=t.attr("xPosition"),this.yPosition=t.attr("yPosition"),this.duration=Rn(t.attr("duration")),this.offset=kn(t.attr("offset")),this.apiFramework=t.attr("apiFramework"),this.viewTracking=xn(t.iconViewTracking),t.iconClicks&&(this.iconClicks=_n.create(t.iconClicks)),this.htmlResource=rn(t.hTMLResource),this.iframeResource=rn(t.iFrameResource),this.staticResource=rn(t.staticResource),this.creativeType=on(t.staticResource,"creativeType")}}),In=Ct.extend({init:function(t){this.width=t.attr("width"),this.height=t.attr("height"),this.id=t.attr("id"),this.expandedWidth=t.attr("expandedWidth"),this.expandedHeight=t.attr("expandedHeight"),this.apiFramework=t.attr("apiFramework"),this.altText=rn(t.altText),this.clickThrough=rn(t.companionClickThrough),this.clickTracking=rn(t.companionClickTracking),this.trackingEvents=On(t.trackingEvents),this.htmlResource=rn(t.hTMLResource),this.iframeResource=rn(t.iFrameResource),this.staticResource=rn(t.staticResource),this.creativeType=on(t.staticResource,"creativeType"),t.adParameters&&(this.adParameters=rn(t.adParameters),on(t.adParameters,"xmlEncoded")&&(this.adParameters=un(this.adParameters))),this.toXmlString=V(function(){return t.toXmlString()})}});function kn(t,n){return/^\d+(\.\d+)?%$/g.test(t)?function(t,n){return n?n*parseFloat(t.replace("%",""))/100:null}(t,n):Rn(t)}function Rn(t){var n,i,e,r;if(E(t)){var o=t.match(/(\d\d):(\d\d):(\d\d)(\.(\d\d\d))?/);o&&(r=o[1],n=60*parseInt(r,10)*60*1e3+(e=o[2],60*parseInt(e,10)*1e3)+(i=o[3],1e3*parseInt(i,10))+parseInt(o[5]||0,10))}return isNaN(n)?null:n}function Cn(t){var n=Math.floor(t/36e5),i=Math.floor(t/6e4%60),e=Math.floor(t/1e3%60),r=t%1e3;return ln(n,2)+":"+ln(i,2)+":"+ln(e,2)+"."+ln(r,3)}function Mn(t){return t?T(t).map(function(t){return t.keyValue}).filter(y):[]}function Pn(t){return t?T(t).map(function(t){return t.keyValue}).filter(y):[]}function xn(t){return t?T(t).filter(function(t){return t&&m(t.keyValue)}).map(function(t){return t.keyValue}):[]}function On(t,n){return t&&t.tracking?T(t.tracking).map(function(t){return gn.create(t,n)}):[]}function Dn(t){return t&&t.creative?T(t.creative).map(En.create):[]}function qn(t){return t&&t.extension?T(t.extension).map(yn.create):[]}function Nn(t){if(E(t))try{t=sn(t)}catch(t){return[]}return t&&t.companion?T(t.companion).map(In.create):[]}var Vn=Ct.extend({init:function(t){var n=t.vpaids?T(t.vpaids).map(function(t){return t.ad}):t.ad,i={request:rn(t.iORequest),baseRequest:rn(t.baseIORequest)};this.version=on(t,"version"),this.ads=function(t,n){return t?T(t).map(function(t){return An.create(t,n)}):[]}(n,i),this.errors=Mn(t.error)}}),Un=Ct.extend({ping:vt,parseVAST:function(t){var n=this;return new Promise(function(i,e){Bn(t,function(r,o){Ot.push({type:"VastParsed",adTag:t,error:String(r)},r?Pt.WARN:Pt.DEBUG),r&&o&&Wn(o,r,n.ping),r?e(x(r,{vast:o})):i(o)})})},fetchVAST:function(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(e,r){L(Ln,Fn,Bn)(t,i,function(i,o){Ot.push({type:"VastFetched",adTag:t,error:String(i)},i?Pt.WARN:Pt.DEBUG),i&&o&&Wn(o,i,n.ping),i?r(x(i,{vast:o})):e(o)})})},processVAST:function(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(e,r){!function(t,n,i){var e=[t],r=Hn(t);if(r)return i(r,e);if(t.wrapper)return function t(n,i,e,r){var o=n.wrapper,u=o.vastAdTagUri,s=o.followAdditionalWrappers;var a=e.shouldFollowWrapper;if(i.length>=St)return r(Ft.create(Ft.WRAPPER_LIMIT),i);if(b(a)&&!a(n))return r(null,i);L(Ln,Fn,Bn,jn)(u,e,function(n,o){return o&&i.push(o),n?r(n,i):o.wrapper&&s?t(o,i,e,r):o.wrapper&&!s?r(Ft.create(Ft.EXPECTED_INLINE),i):r(null,i)})}(t,e,n,i);i(null,e)}(t,i,function(i,o){Ot.push({type:"VastProcessed",adId:t.id,error:String(i)},i?Pt.WARN:Pt.DEBUG),i&&o&&Wn(o,i,n.ping),i?r(x(i,{ads:o})):e(o)})})}});function Ln(t,n,i){i(null,lt(t,n.macroVars),n)}function Fn(t,n,i){var e=n.cancelToken;try{an.get({url:t,cancelToken:e,withCredentials:!0,retryWithoutCredentials:!0},function(t,n){t&&!t.canceled?i(Ft.create(Ft.UNAVAILABLE_AD_TAG)):i(t,n)})}catch(t){i(t)}}function Bn(t,n){try{var i=Vn.create(sn(t));n(function(t){var n=t.version;if(0===t.ads.length)return Ft.create(Ft.NO_AD);if(n&&n<Et)return Ft.create(Ft.UNSUPPORTED_VAST_VERSION);return null}(i),i)}catch(t){n(Ft.create(Ft.XML_PARSING_ERROR))}}function jn(t,n){var i,r=t.ads.filter(function(t){return t.inLine}),o=t.ads.filter(function(t){return t.wrapper}),u=e(r).concat(e(o)),s=D(u,(i=Hn,function(){return!i.apply(this,arguments)}))||u[0];n(Hn(s),s)}function Wn(t,n,i){i(T(t).reduce(function(t,n){return n.errors&&(t=t.concat(n.errors)),n.wrapper&&(t=t.concat(n.wrapper.errors)),n.inLine&&(t=t.concat(n.inLine.errors)),t},[]),{ERRORCODE:n.code||900})}function Hn(t){var n=t.wrapper,i=t.inLine;return i&&n?Ft.create(Ft.BOTH_INLINE_AND_WRAPPER):i||n?i&&0===i.creatives.length?Ft.create(Ft.NO_CREATIVE):n&&!n.vastAdTagUri?Ft.create(Ft.NO_AD_TAG_URI):null:Ft.create(Ft.NO_INLINE_OR_WRAPPER)}var zn=document.createElement("video");function Gn(t){return function(n){return n.width===t.width&&n.height===t.height}}Math.PI;function Yn(t,n,i){return Math.max(n,Math.min(i,t))}var Qn=Object.freeze({EVENTS:["abort","canplay","canplaythrough","durationchange","emptied","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"],PROPS:["NETWORK_EMPTY","NETWORK_IDLE","NETWORK_LOADING","NETWORK_NO_SOURCE","HAVE_NOTHING","HAVE_METADATA","HAVE_CURRENT_DATA","HAVE_FUTURE_DATA","HAVE_ENOUGH_DATA","audioTracks","autoplay","buffered","controller","controls","crossOrigin","currentSrc","currentTime","defaultMuted","defaultPlaybackRate","duration","ended","error","loop","mediaGroup","muted","networkState","paused","playbackRate","played","preload","readyState","seekable","seeking","src","startDate","textTracks","type","videoHeight","videoWidth","volume"]}),Xn=Ct.extend({decorators:[function(t){Qn.PROPS.forEach(function(n){Object.defineProperty(t,n,{get:function(){return this.h?this.h[n]:void 0},set:function(t){if(this.h){if(function(t,n,i,e){var r="muted"===t&&!1===n;return("volume"===t&&n>0||r)&&1!==i&&e<1}(n,t,this.l,this.h.currentTime))return;this.h[n]=t,"src"===n&&this.p.push(t),"volume"===n&&(this.h.muted=0===t)}}})})}],init:function(t,n){this.h=t||document.createElement("video"),this.l=n||1,this.c=[],this.p=[]},dispose:function(){var t=this;this.h&&this.c.forEach(function(n){t.h.removeEventListener(n.type,n.listener,n.useCapture)}),this.h=null,this.c=[]},addEventListener:function(t,n,i){if(this.h){var e=Kn(t,n,i);D(this.c,function(t){return t.key===e})||(this.h.addEventListener(t,n,i),this.c.push({type:t,listener:n,useCapture:i,key:e}))}},removeEventListener:function(t,n,i){if(this.h){var e=Kn(t,n,i),r=D(this.c,function(t){return t.key===e});r&&(this.h.removeEventListener(t,n,i),this.c=this.c.filter(function(t){return t!==r}))}},replace:function(t){var n=this;this.h&&(this.c.forEach(function(t){n.h.removeEventListener(t.type,t.listener,t.useCapture)}),t.playbackRate=this.h.playbackRate,t.muted=this.h.muted,t.volume=this.h.volume,t.type=this.h.type,t.src=this.h.src,t.load(),this.c.forEach(function(n){t.addEventListener(n.type,n.listener,n.useCapture)}),this.h.src=""),this.h=t},getSourceHistory:function(){return this.p.slice()},setAttribute:function(t,n){this.h&&(this.h.setAttribute(t,n),"src"===t&&this.p.push(n))},canPlayType:function(t){return this.h?this.h.canPlayType(t):""},load:function(){this.h&&this.h.load()},play:function(){var t=this;if(this.h)return qt(function(){return t.h.play()}).catch(function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.name,e=n.message;return Ot.warn({type:"AutoplayBlocked",error:{name:i,message:e}}),t.h.muted=!0,t.h.play()})},pause:function(){this.h&&this.h.pause()},click:function(){this.h&&b(this.h.click)&&this.h.click()}});function Kn(t,n,i){return n.guid__=n.guid__||C(),t+String(n.guid__)+Boolean(i)}var $n=Bt.extend({init:function(t,n){var i=n.companionAds,e=n.playback;Bt.call(this),this.video=Xn.create(t,e),this.companionAds=i||[],this.quartiles=[],this.width=null,this.height=null,this.viewMode="normal",this.type="VAST"},initAd:function(t,n,i){this.width=t,this.height=n,this.viewMode=i,this.dispatch("AdLoaded")},startAd:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.type,e=t.src,r=t.volume;return function(){var t=this,n=this.video;X(n,"durationchange",function(){t.dispatch("AdStarted")}),X(n,"loadedmetadata",function(){t.dispatch("AdDurationChange")}),Y(n,"error",function(){var i=n.error?"MediaError ".concat(n.error.code,": ").concat(n.error.message):"";t.dispatch({type:"AdError",data:{message:i}})}),Y(n,"volumechange",function(){t.dispatch("AdVolumeChange")}),Y(n,"timeupdate",function(){var i=n.currentTime/n.duration;t.dispatch("AdRemainingTimeChange"),i>0&&!O(t.quartiles,0)&&(t.quartiles.push(0),t.dispatch("AdImpression"),t.dispatch("AdVideoStart")),i>=.25&&!O(t.quartiles,1)&&(t.quartiles.push(1),t.dispatch("AdVideoFirstQuartile")),i>=.5&&!O(t.quartiles,2)&&(t.quartiles.push(2),t.dispatch("AdVideoMidpoint")),i>=.75&&!O(t.quartiles,3)&&(t.quartiles.push(3),t.dispatch("AdVideoThirdQuartile"))}),Y(n,"ended",function(){t.dispatch("AdVideoComplete"),t.stopAd()}),Y(n,"pause",function(){Math.abs(n.duration-n.currentTime)<.25||(t.dispatch("AdPaused"),X(n,"play",function(){t.dispatch("AdPlaying")}))})}.call(this),this.video.autoplay=!0,this.video.type=i,this.video.src=e,this.video.volume=r,this.video.load(),this.video.play(),this.waitForEvent("AdStarted").catch(function(t){var o;throw Ot.error((n(o={type:"MediaError",error:String(t)},"type",i),n(o,"volume",r),n(o,"src",e),o)),t.code===Ft.VPAID_TIMEOUT.code?Ft.create(Ft.MEDIA_FILE_TIMEOUT):Ft.create(Ft.MEDIA_FILE_ERROR)})},stopAd:function(){this.video.dispose(),this.dispatch("AdStopped")},pauseAd:function(){this.video.pause()},resumeAd:function(){this.video.play()},skipAd:function(){this.video.pause(),this.dispatch("AdSkipped"),this.stopAd()},resizeAd:function(t,n,i){this.width=t,this.height=n,this.viewMode=i,this.dispatch("AdSizeChange")},setAdVolume:function(t){this.video.volume=Yn(t,0,1)},getAdVolume:function(){return this.video.muted?0:this.video.volume},getAdWidth:function(){return this.width},getAdHeight:function(){return this.height},getAdRemainingTime:function(){return Math.max(0,this.video.duration-this.video.currentTime)},getAdDuration:function(){return this.video.duration},getAdCompanions:function(){var t=this.companionAds.map(function(t){return t.toXmlString()}).join("");return"<CompanionAds>".concat(t,"</CompanionAds>")}});var Jn={selectMediaFile:function(t){var n=t.adResponse,i=t.state;return function(t,n){t=_(t)?t:[];var i=m((n=n||{}).width)||m(n.height),e=m(n.bitrate),r=Number(n.width)||1,o=Number(n.height)||1,u=Number(n.bitrate)||0;return t.reduce(function(t,s){var a=s.width||1,c=s.height||1,d=s.bitrate||0,f=1/0,h=1/0;return i&&(f=n.useAspectRatio?Math.abs(r/o-a/c):Math.sqrt(Math.pow(r-a,2)+Math.pow(o-c,2))),e&&(h=Math.abs(d-u)),f<t.dim||f===t.dim&&h<t.bit?{item:s,dim:f,bit:h}:t},{item:null,dim:1/0,bit:1/0}).item}(n.mediaFiles.filter(function(t){return n=t.type,zn.canPlayType(n);var n}).filter(function(t){return y(t.src)}).filter(function(t){return"streaming"!==t.delivery}),{width:i.width,height:i.height,bitrate:0})},loadAdUnit:function(t){var n=t.videoSlot,i=t.adResponse,e=t.plugins;return $n.create(n,{companionAds:i.companionAds,playback:e.autoplay.playback})},startAdUnit:function(t){var n=t.mediaFile,i=t.adUnit,e=t.state;return i.startAd({type:n.type,src:n.src,volume:e.volume})}},Zn=Object.freeze({FLASH:["application/x-shockwave-flash"],HTML5:["text/javascript","text/javascript1.0","text/javascript1.2","text/javascript1.4","text/jscript","application/javascript","application/x-javascript","text/ecmascript","text/ecmascript1.0","text/ecmascript1.2","text/ecmascript1.4","text/livescript","application/ecmascript","application/x-ecmascript"],VIDEO:["video/mp4","video/webm","video/ogg","video/3gp","video/3g2","application/x-mpegURL"],IMAGE:["image/gif","image/jpeg","image/png"]}),ti=["skipAd"],ni=ut.METHODS.filter(function(t){return!O(ti,t)});function ii(t,n){var i=function(t,n){var i=document.createElement("iframe");return i.setAttribute("SCROLLING","NO"),i.src=n||"about:blank",i.marginWidth="0",i.marginHeight="0",i.frameBorder="0",i.width="100%",i.height="100%",ei(i),t.appendChild(i),i}(t,null),e=i.contentWindow&&i.contentWindow.document;return e?(e.write(n),i):null}function ei(t){t&&(t.style.position="absolute",t.style.left="0",t.style.top="0",t.style.margin="0px",t.style.padding="0px",t.style.border="none",t.style.width="100%",t.style.height="100%")}var ri=Bt.extend({decorators:[function(t){ut.GETTERS.forEach(function(n){t[n]=function(){try{return this.creative[n]()}catch(t){return Bt.prototype[n]()}}})}],init:function(t,n,i,e){if(!function(t){return Boolean(t)&&ni.every(function(n){return b(t[n])})}(t))throw Ft.create(Ft.INVALID_VPAID_CREATIVE);Bt.call(this),this.creative=t,this.slot=n,this.videoSlot=i,this.iframe=e,this.viewMode="normal",this.type="VPAID",ei(n),function(){var t=this;if(ut.EVENTS.forEach(function(n){"AdClickThru"===n?t.creative.subscribe(function(i,e,r){t.dispatch({type:n,data:{url:i,id:e,playerHandles:r}})},n):"AdError"===n?t.creative.subscribe(function(i){t.dispatch({type:n,data:{message:i}})},n):t.creative.subscribe(function(){t.dispatch(n)},n)}),this.videoSlot&&this.iframe){var n=this.iframe.contentDocument.documentElement;n.addEventListener("click",function(i){i.target===n&&t.videoSlot.click()})}}.call(this)},handshakeVersion:function(t){var n=this;return qt(function(){return n.creative.handshakeVersion(t)})},initAd:function(t,n,i,e,r,o){var u=this,s=this.slot,a=this.videoSlot;return o=x({slot:s,videoSlot:a},o),new Promise(function(s,a){u.waitForEvent("AdLoaded").then(s,a),u.creative.initAd(t,n,i,e,r,o)})},startAd:function(){var t=this;return new Promise(function(n,i){t.waitForEvent("AdStarted").then(n,i),t.creative.startAd()})},stopAd:function(){var t=this;return new Promise(function(n,i){t.waitForEvent("AdStopped").then(n,i),t.creative.stopAd()})},pauseAd:function(){var t=this;return new Promise(function(n,i){t.waitForEvent("AdPaused").then(n,i),t.creative.pauseAd()})},resumeAd:function(){var t=this;return new Promise(function(n,i){t.waitForEvent("AdPlaying").then(n,i),t.creative.resumeAd()})},expandAd:function(){var t=this;return new Promise(function(n,i){t.waitForEvent("AdExpandedChange").then(n,i),t.creative.expandAd()})},collapseAd:function(){var t=this;return new Promise(function(n,i){t.waitForEvent("AdExpandedChange").then(n,i),t.creative.collapseAd()})},skipAd:function(){var t=this;return new Promise(function(n,i){t.waitForEvent("AdSkipped").then(n,i),t.creative.skipAd()})},resizeAd:function(t,n,i){var e=this;return new Promise(function(r,o){e.waitForEvent("AdSizeChange").then(r,o),e.creative.resizeAd(t,n,i),e.viewMode=i})},setAdVolume:function(t){var n=this;return new Promise(function(i,e){n.waitForEvent("AdVolumeChange").then(i,e),n.creative.setAdVolume(t)})}});var oi=Ct.extend({timeout:8e3,init:function(t,n){this.el=t,this.video=n},loadAd:function(t){var n=this,i=ii(this.el,'<!DOCTYPE html>\n\t<html lang="en">\n\t\t<head><meta charset="UTF-8"></head>\n\t\t<body style="margin:0; padding:0">\n\t\t\t<div id="ad-element"></div>\n\t\t</body>\n\t</html>');return Promise.resolve().then(function(){return i.contentWindow.document.body}).catch(function(){throw Ft.create(Ft.IFRAME_LOAD_ERROR)}).then(function(i){return Promise.race([Dt(n.timeout).then(function(){throw Ft.create(Ft.MEDIA_FILE_TIMEOUT)}),$(t,i).catch(function(){throw Ft.create(Ft.MEDIA_FILE_ERROR)})])}).then(function(){var t=i.contentWindow.getVPAIDAd(),e=i.contentWindow.document.getElementById("ad-element");return ri.create(t,e,n.video,i)}).catch(function(t){throw W(i),t})}}),ui={selectMediaFile:function(t){return i(t.adResponse.mediaFiles.filter(function(t){return"VPAID"===t.apiFramework}).filter(function(t){return y(t.src)}).filter(function(t){return O(Zn.HTML5,t.type)}),1)[0]},loadAdUnit:function(t){var n=t.adResponse,i=t.mediaFile,e=t.videoSlot,r=t.container,o=t.settings,u=t.state,s=t.plugins,a=null,c=tt()?e:null,d=s.autoplay.playback,f=Xn.create(c,d);return oi.create(r.el(),f).loadAd(i.src).then(function(t){return(a=t).handshakeVersion("2.0")}).then(function(t){if(!function(t){var n=String(t).split("."),i=parseInt(n[0],10);return i>=1&&i<=2}(t))throw Ft.create(Ft.UNSUPPORTED_VPAID_VERSION);var i=Number(o.desired_bitrate)||-1,e={AdParameters:n.adParameters||""};return a.initAd(u.width,u.height,st.NORMAL,i,e)}).then(function(){return a})},startAdUnit:function(t){var n=t.adUnit,i=t.videoSlot;return n.once(["AdStopped","AdError"],function(){n.videoSlot.dispose()}),n.setAdVolume(0),n.startAd().then(function(){if(!tt())return n.impressionPromise}).then(function(){var t;i.autoplay=!0,tt()||n.videoSlot.replace(i);var e=function(){t=setTimeout(function(){return n.stopAd()},1e3)};n.videoSlot.addEventListener("ended",e),n.once("AdVideoComplete",e),n.once("AdStopped",function(){return clearTimeout(t)})})}},si=Bt.extend({init:function(t){var n=this,i=t.playback;Bt.call(this),this.playback=i||1,this.hasImpression=!1,this.adsManager=null,this.container=null,this.currentAd=null,this.viewMode="normal",this.type="IMA",this.impressionPromise.then(function(){n.hasImpression=!0})},stopAd:function(){try{this.adsManager.stop()}catch(t){}},pauseAd:function(){try{this.adsManager.pause()}catch(t){}},resumeAd:function(){try{this.adsManager.resume()}catch(t){}},skipAd:function(){try{this.adsManager.skip()}catch(t){}},resizeAd:function(t,n,i){try{this.adsManager.resize(t,n,i),this.viewMode=i,this.dispatch("AdSizeChange")}catch(t){}},setAdVolume:function(t){t=Yn(t,0,1);try{(this.hasImpression||1===this.playback)&&this.adsManager.setVolume(t)}catch(t){}},getAdVolume:function(){try{return this.adsManager.getVolume()}catch(t){return-2}},getAdWidth:function(){var t=this.container.getDimension();try{return this.currentAd.getWidth()||t.width}catch(n){return t.width}},getAdHeight:function(){var t=this.container.getDimension();try{return this.currentAd.getHeight()||t.height}catch(n){return t.height}},getAdRemainingTime:function(){try{return this.adsManager.getRemainingTime()}catch(t){return-2}},getAdDuration:function(){try{return this.currentAd.getDuration()}catch(t){return-2}},getAdSkippableState:function(){try{return this.adsManager.getAdSkippableState()}catch(t){return!1}},getAdLinear:function(){try{return this.currentAd.isLinear()}catch(t){return!0}}}),ai=750,ci=".g.doubleclick.net";function di(t){return t&&t.wrapper&&O(ct(t.wrapper.vastAdTagUri).host,ci)}var fi={shouldFollowWrapper:function(t){var n=t.ad;return!t.settings.ima_enabled||!di(n)},selectMediaFile:function(t){var n=t.adResponse,i=n.ads[n.ads.length-1];return di(i)?{src:i.wrapper.vastAdTagUri}:null},loadAdUnit:function(t){var n=t.mediaFile,i=t.videoSlot,e=t.container,r=t.state,o=t.macroVars,u=t.plugins;return new Promise(function(t,s){u.ima.promise.then(function(a){var c=a.adsLoader,d=window.google.ima,f={},h=u.autoplay.playback;c.addEventListener(d.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(n){if(n.getUserRequestContext()===f){var r=new d.AdsRenderingSettings;r.loadVideoTimeout=6e4,r.bitrate=400;var o=si.create({playback:h});o.adsManager=n.getAdsManager(i,r),o.container=e,o.once(["AdStopped","AdError"],function(){o.adsManager.destroy()}),t(o)}}),c.addEventListener(d.AdErrorEvent.Type.AD_ERROR,function(t){var n=t.getError().toString();s(Ft.create({message:n}))});var l=new d.AdsRequest;l.adTagUrl=lt(n.src,o),l.linearAdSlotWidth=r.width,l.linearAdSlotHeight=r.height,l.setAdWillAutoPlay(3!==h),l.setAdWillPlayMuted(1!==h),c.requestAds(l,f)})})},startAdUnit:function(t){var n=t.adUnit,i=t.state,e=t.plugins;return new Promise(function(t,r){var o=window.google.ima,u=n.adsManager,s=1===e.autoplay.playback?i.volume:0;function a(i){u.removeEventListener(o.AdEvent.Type.LOADED,a),u.removeEventListener(o.AdEvent.Type.IMPRESSION,a),n.currentAd=i.getAd(),function(t){var n=t.adsManager,i=window.google.ima;n.addEventListener(i.AdEvent.Type.SKIPPED,function(){t.dispatch("AdSkipped")}),n.addEventListener(i.AdEvent.Type.RESUMED,function(){t.dispatch("AdPlaying")}),n.addEventListener(i.AdEvent.Type.PAUSED,function(){t.dispatch("AdPaused")}),n.addEventListener(i.AdEvent.Type.STARTED,function(){t.dispatch("AdVideoStart")}),n.addEventListener(i.AdEvent.Type.FIRST_QUARTILE,function(){t.dispatch("AdVideoFirstQuartile")}),n.addEventListener(i.AdEvent.Type.MIDPOINT,function(){t.dispatch("AdVideoMidpoint")}),n.addEventListener(i.AdEvent.Type.THIRD_QUARTILE,function(){t.dispatch("AdVideoThirdQuartile")}),n.addEventListener(i.AdEvent.Type.COMPLETE,function(){t.dispatch("AdVideoComplete")}),n.addEventListener(i.AdEvent.Type.CLICK,function(){t.dispatch("AdClickThru")}),n.addEventListener(i.AdEvent.Type.USER_CLOSE,function(){t.dispatch("AdUserClose")}),n.addEventListener(i.AdEvent.Type.INTERACTION,function(){t.dispatch("AdInteraction")}),n.addEventListener(i.AdEvent.Type.DURATION_CHANGE,function(){t.dispatch("AdDurationChange")}),n.addEventListener(i.AdEvent.Type.VOLUME_CHANGED,function(){t.dispatch("AdVolumeChange")}),n.addEventListener(i.AdEvent.Type.ALL_ADS_COMPLETED,function(){setTimeout(function(){return t.dispatch("AdStopped")},ai)}),n.addEventListener(i.AdErrorEvent.Type.AD_ERROR,function(n){var i=n.getError().toString();t.dispatch({type:"AdError",data:{message:i}})})}(n),t(),i.type===o.AdEvent.Type.IMPRESSION?n.dispatch("AdImpression"):u.addEventListener(o.AdEvent.Type.IMPRESSION,function(){n.dispatch("AdImpression")})}u.addEventListener(o.AdEvent.Type.LOADED,a),u.addEventListener(o.AdEvent.Type.IMPRESSION,a),u.addEventListener(o.AdErrorEvent.Type.AD_ERROR,function(t){var n=t.getError().toString();r(Ft.create({message:n}))}),u.init(i.width,i.height,o.ViewMode.NORMAL),u.setVolume(s),u.start()})}};var hi=Ct.extend({builders:[Jn,ui,fi],shouldFollowWrapper:function(t){return this.builders.every(function(n){return!b(n.shouldFollowWrapper)||n.shouldFollowWrapper(t)})},selectMediaFile:function(t){var n=t.adResponse,i=null;if(this.builder=D(this.builders,function(n){return i=n.selectMediaFile(t)}),!this.builder){var e=Ft.create(Ft.UNSUPPORTED_MEDIA_FILE);throw this.handleError(t)(e),e}return Ot.info({type:"MediaFileSelected",adId:n.adId,mediaFile:i}),i},loadAdUnit:function(t){var n=this,i=t.cancelToken,e=qt(function(){return i.throwIfCanceled(),n.builder.loadAdUnit(t)});return e.catch(this.handleError(t)),e},startAdUnit:function(t){var n=this,i=t.cancelToken,e=t.adUnit,r=qt(function(){return i.throwIfCanceled(),i.subscribe(function(){return e.stopAd()}),n.builder.startAdUnit(t)});return r.catch(this.handleError(t)),r},handleError:function(t){var n=t.adResponse,i=t.container;return function(t){Ot.warn({type:"AdFactoryError",adId:n.adId,error:String(t)}),n.trackError(t.code),i.dispose()}}}),li=Ct.extend({init:function(t){var n=this;this.ads=[],this.errorURLMacros=[],this.impressions=[],this.clickTrackings=[],this.customClicks=[],this.trackingEvents={},this.mediaFiles=[],this.icons=[],this.companionAds=[],this.clickThrough=void 0,this.adTitle="",this.duration=void 0,this.skipoffset=void 0,this.extensions=[],M(t,function(t){return n.addAd(t)})},addAd:function(t){t instanceof An&&(this.ads.push(t),t.inLine&&this.addInLine(t.inLine),t.wrapper&&this.addWrapper(t.wrapper),A(this.adId)&&(this.adId=t.id),A(this.meta)&&(this.meta=t.meta))},addInLine:function(t){var n=this;t instanceof vn&&(this.addTitle(t.adTitle),this.addErrorTrackUrl(t.errors),this.addImpressions(t.impressions),this.addExtensions(t.extensions),t.creatives.forEach(function(t){t.linear?n.addLinear(t.linear):t.companionAds&&n.addCompanionAds(t.companionAds)}))},addWrapper:function(t){var n=this;t instanceof pn&&(this.addErrorTrackUrl(t.errors),this.addImpressions(t.impressions),this.addExtensions(t.extensions),t.creatives.forEach(function(t){t.linear?(n.addVideoClicks(t.linear.videoClicks),n.clickThrough=void 0,n.addTrackingEvents(t.linear.trackingEvents),n.addIcons(t.linear.icons)):t.companionAds&&n.addCompanionAds(t.companionAds)}))},addErrorTrackUrl:function(t){var n=this,i=t instanceof nn?rn(t):t;i&&T(i).forEach(function(t){return n.errorURLMacros.push(t)})},addImpressions:function(t){var n=this;_(t)&&t.forEach(function(t){return n.impressions.push(t)})},addExtensions:function(t){var n=this;_(t)&&t.forEach(function(t){var i;mn.isType(t)&&(i=n.findIOExtension()),i?i.data.merge(t):n.extensions.push(t)})},addClickThrough:function(t){y(t)&&(this.clickThrough=t)},addClickTrackings:function(t){var n=this;_(t)&&t.forEach(function(t){return n.clickTrackings.push(t)})},addCustomClicks:function(t){var n=this;_(t)&&t.forEach(function(t){return n.customClicks.push(t)})},addTrackingEvents:function(t){var n=this;t&&T(t).forEach(function(t){n.trackingEvents[t.name]=n.trackingEvents[t.name]||[],n.trackingEvents[t.name].push(t)})},addTitle:function(t){y(t)&&(this.adTitle=t)},addDuration:function(t){w(t)&&(this.duration=t)},addVideoClicks:function(t){t instanceof bn&&(this.addClickThrough(t.clickThrough),this.addClickTrackings(t.clickTrackings),this.addCustomClicks(t.customClicks))},addMediaFiles:function(t){var n=this;_(t)&&t.forEach(function(t){return n.mediaFiles.push(t)})},addSkipoffset:function(t){t&&(this.skipoffset=t)},addIcons:function(t){var n=this;_(t)&&t.forEach(function(t){return n.icons.push(t)})},addAdParameters:function(t){t&&(this.adParameters=t)},addLinear:function(t){t instanceof wn&&(this.addDuration(t.duration),this.addTrackingEvents(t.trackingEvents),this.addVideoClicks(t.videoClicks),this.addMediaFiles(t.mediaFiles),this.addSkipoffset(t.skipoffset),this.addIcons(t.icons),this.addAdParameters(t.adParameters))},addCompanionAds:function(t){var n=this;_(t)&&t.forEach(function(t){return n.companionAds.push(t)})},findIOExtension:function(){return D(this.extensions,mn.isType)},trackError:function(t){var n={ERRORCODE:t||900};vt(this.errorURLMacros,n)}}),vi=Ct.extend({ping:vt,init:function(t){this.adResponse=t,this.tracked=!1},trackResponse:function(t,n){if(!this.tracked){var i=this.adResponse&&this.adResponse.meta,e=this.adResponse&&this.adResponse.findIOExtension(),r=e&&e.data.getResponseUrl(),o=n?n.code||900:void 0;r&&(this.tracked=!0,this.ping(r,{RES_TIME:t,ER_CODE:o,BASE_IO_REQUEST:i&&i.baseRequest,IO_REQUEST:i&&i.request}),Ot.info({type:"TrackAdHealth",adId:this.adResponse.adId,rt:t,error:String(n)}))}}}),pi=Ct.extend({autoBind:!0,decorators:[Vt],init:function(t,n){this.id=t.id,this.firstAd=t,this.env=n,this.weight=function(t){var n=t.findIOExtension();return n?n.data.getWeight():Rt}(t),this.vastClient=Un.create(),this.adFactory=hi.create(),this.adTimer=Ht.create(),this.cancelSource=it.create(),this.container=Wt.create({className:"bfm-vast-container"}),this.adHealth=null,this.adResponse=null,this.env.slot.insertBefore(this.container.el(),this.env.slot.firstChild),K(this.env.videoSlot)&&!this.env.videoSlot.parentNode&&this.container.el().appendChild(this.env.videoSlot)},m:function(){var t=this,n=yt;this.A=setTimeout(function(){return t.cancelSource.cancel(jt.create(jt.VAST_TIMEOUT))},n)},g:function(){var t=this,n=this.adTimer.currentTime(),i=function(t,n){n=Number(n)||0;var i=t.findIOExtension(),e=i&&i.data.getTimeout()||_t;return e=Math.max(e,Tt),e=Math.max(e-n,0)}(this.firstAd,n);this.b=setTimeout(function(){return t.cancelSource.cancel(jt.create(jt.AD_TIMEOUT))},i)},w:function(t){this.adTimer.stop();var n=this.adTimer.currentTime();this.adHealth&&this.adHealth.trackResponse(n,t)},loadAd:function(){var t=this;Ot.info({type:"AdSourceLoading",adId:this.firstAd.id,weight:this.weight}),this.m(),this.g(),this.adTimer.start(),this.vastClient.processVAST(this.firstAd,{cancelToken:this.cancelSource.token,macroVars:this.env.macroVars,shouldFollowWrapper:function(n){return t.adFactory.shouldFollowWrapper(x({ad:n},t.env))}}).then(function(n){t.adResponse=li.create(n),t.adHealth=vi.create(t.adResponse),clearTimeout(t.A);var i=x({container:t.container,adResponse:t.adResponse,cancelToken:t.cancelSource.token},t.env);return qt(function(){return t.mediaFile=i.mediaFile=t.adFactory.selectMediaFile(i),t.adFactory.loadAdUnit(i)}).then(function(n){Ot.info({type:"AdSourceLoaded",adId:t.firstAd.id,weight:t.weight}),clearTimeout(t.b),t.adUnit=n,t.adTimer.stop(),t.dispatch(zt)},function(n){n=n&&n.code&&901!==n.code?n:jt.create(jt.TECH_ERROR),clearTimeout(t.b),t.w(n),t.dispatch(Yt)})},function(n){t.adResponse=li.create(n.ads),t.adHealth=vi.create(t.adResponse),clearTimeout(t.A),clearTimeout(t.b),n=n&&303===n.code?jt.create(jt.VAST_OPT_OUT):n,t.w(n),t.dispatch(Yt)}),this.cancelSource.token.subscribe(this.w)},startAd:function(){var t=this;Ot.info({type:"AdSourceStarting",adId:this.firstAd.id,weight:this.weight});var n=x({container:this.container,adResponse:this.adResponse,mediaFile:this.mediaFile,adUnit:this.adUnit,cancelToken:this.cancelSource.token},this.env);this.g(),this.adTimer.start(),this.adFactory.startAdUnit(n).then(function(){Ot.info({type:"AdSourceStarted",adId:t.firstAd.id,weight:t.weight}),clearTimeout(t.b),t.w(),t.dispatch(Gt)},function(n){n=n&&n.code&&901!==n.code?n:jt.create(jt.VPAID_OPT_OUT),clearTimeout(t.b),t.w(n),t.dispatch(Yt)})}}),mi=Ct.extend({getState:function(){},getRequestParams:function(){},beforeAdLoaded:function(){},beforeAdRequested:function(){},beforeAdStarted:function(){},dispose:function(){}}),Ai=Ct.extend({ping:vt,init:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.response=t,this.assetUri=n.assetUri||"",this.duration=n.duration||0,this.progress=n.progress||0,this.y=[]},isTrackedOnce:function(t){return O(this.y,t)},trackUrls:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(_(t)&&t.length>0){var i=this.response.meta;this.ping(t,x({ASSETURI:this.assetUri,CONTENTPLAYHEAD:Cn(this.progress),IO_DUR:Math.round(this.duration),BASE_IO_REQUEST:i&&i.baseRequest,IO_REQUEST:i&&i.request},n))}},trackEvent:function(t,n){if(!O(this.y,t)){var i=this.response.trackingEvents[t];if(_(i)){var e=i.map(function(t){return t.uri}).filter(Boolean);this.trackUrls(e)}n&&this.y.push(t),Ot.log({type:"TrackEvent",eventName:t,adId:this.response.adId})}},trackProgress:function(t){var n=this;if(w(t)){this.progress-t>3e3&&this.trackRewind();var i,e=this.response.trackingEvents.progress;if(_(e)){var r=e.filter(function(t){return!O(n.y,t)}).filter((i=t,function(t){return w(t.offset)&&t.offset<=i})),o=r.map(function(t){return t.uri}).filter(Boolean);this.y=this.y.concat(r),this.trackUrls(o)}this.progress=t}},trackError:function(t){this.trackUrls(this.response.errorURLMacros,{ERRORCODE:t||900}),Ot.log({type:"TrackEvent",eventName:"error",adId:this.response.adId})},trackImpressions:function(){this.trackUrls(this.response.impressions),Ot.log({type:"TrackEvent",eventName:"impression",adId:this.response.adId})},trackClick:function(){this.trackUrls(this.response.clickTrackings),Ot.log({type:"TrackEvent",eventName:"click",adId:this.response.adId})},trackCreativeView:function(){this.trackEvent("creativeView",!0)},trackFirstQuartile:function(){this.trackEvent("firstQuartile",!0)},trackMidpoint:function(){this.trackEvent("midpoint",!0)},trackThirdQuartile:function(){this.trackEvent("thirdQuartile",!0)},trackComplete:function(){this.trackEvent("complete",!0)},trackRewind:function(){this.trackEvent("rewind")},trackFullscreen:function(){this.trackEvent("fullscreen")},trackExitFullscreen:function(){this.trackEvent("exitFullscreen")},trackPause:function(){this.trackEvent("pause")},trackResume:function(){this.trackEvent("resume")},trackMute:function(){this.trackEvent("mute")},trackUnmute:function(){this.trackEvent("unmute")},trackAcceptInvitation:function(){this.trackEvent("acceptInvitation")},trackAcceptInvitationLinear:function(){this.trackEvent("acceptInvitationLinear")},trackCollapse:function(){this.trackEvent("collapse")},trackExpand:function(){this.trackEvent("expand")},trackStart:function(){this.trackEvent("start",!0)},trackSkip:function(){this.trackEvent("skip",!0)},trackClose:function(){this.trackEvent("close",!0)},trackCloseLinear:function(){this.trackEvent("closeLinear",!0)}}),gi=mi.extend({name:"vast-tracking",beforeAdStarted:function(t){var n=t.adUnit,i=t.adResponse,e=t.mediaFile,r=t.videoSlot;if("DISPLAY"!==n.type){var o="IMA"===n.type?null:e.src,u=Math.max(n.getAdDuration(),0)||i.duration/1e3,s=Ai.create(i,{assetUri:o,duration:u}),a=r.muted?0:r.volume,c=n.viewMode;n.impressionPromise.then(function(){s.trackImpressions()}),n.videoStartPromise.then(function(){s.trackStart(),s.trackCreativeView()}),n.on("AdVideoFirstQuartile",function(){s.trackFirstQuartile()}),n.on("AdVideoMidpoint",function(){s.trackMidpoint()}),n.on("AdVideoThirdQuartile",function(){s.trackThirdQuartile()}),n.on("AdVideoComplete",function(){s.trackComplete()}),n.on("AdStopped",function(){s.isTrackedOnce("thirdQuartile")&&s.trackComplete()}),n.on("AdPlaying",function(){s.trackResume()}),n.on("AdPaused",function(){s.trackPause()}),n.on("AdSkipped",function(){s.trackSkip()}),n.on("AdUserMinimize",function(){s.trackCollapse()}),n.on("AdUserClose",function(){s.trackClose(),s.trackCloseLinear()}),n.on("AdUserAcceptInvitation",function(){s.trackAcceptInvitation(),s.trackAcceptInvitationLinear()}),n.on("AdClickThru",function(){s.trackClick()}),n.on("AdError",function(){s.trackError(901)}),n.on("AdVolumeChange",function(){var t=n.getAdVolume();0===t&&a>0&&s.trackMute(),t>0&&0===a&&s.trackUnmute(),a=t}),n.on("AdSizeChange",function(){var t=n.viewMode;"fullscreen"===t&&"fullscreen"!==c&&s.trackFullscreen(),"fullscreen"!==t&&"fullscreen"===c&&s.trackExitFullscreen(),c=t}),n.on("AdRemainingTimeChange",function(){var t=1e3*r.currentTime;t>0&&s.trackProgress(t)})}}}),bi=mi.extend({name:"user-sync",ping:vt,beforeAdRequested:function(t){var n=t.slot,i=t.settings;this.ping(i.pixels),M(i.iframes,function(t){var i=document.createElement("iframe");i.src=t,i.width="0",i.height="0",i.frameBorder="0",n.appendChild(i)})}}),wi=mi.extend({name:"ima",getState:function(){return{promise:this.promise}},beforeAdRequested:function(t){var n=t.slot,i=t.settings;this.promise=Promise.resolve().then(function(){if(!i.ima_enabled)throw new Error("Google IMA SDK disabled");if(!window.google||!window.google.ima)return $("https://imasdk.googleapis.com/js/sdkloader/ima3.js",document.body).catch(function(){throw new Error("Google IMA SDK script failed to load")})}).then(function(){var t=window.google.ima,i=Wt.create({className:"bfm-ima-slot"});n.appendChild(i.el());var e=new t.AdDisplayContainer(i.el());e.initialize();var r=new t.AdsLoader(e);return r.getSettings().setVpaidMode(t.ImaSdkSettings.VpaidMode.ENABLED),{adDisplayContainer:e,adsLoader:r,component:i}}).catch(function(t){Ot.warn({type:"ImaError",message:t.toString()})})},beforeAdStarted:function(t){"IMA"!==t.adUnit.type&&this.dispose()},dispose:function(){return Promise.resolve(this.promise).then(function(t){t.adDisplayContainer.destroy(),t.adsLoader.destroy(),t.component.dispose()}).catch(v)}}),Ei=mi.extend({name:"stream",init:function(){this.streamType="na"},getRequestParams:function(){return{stream:this.streamType}},beforeAdRequested:function(t){var n=this,i=t.slot,e=t.settings;if(!(0===String(e.inventory_id).indexOf("bid:")||y(e.ad_tag_url)||y(e.ad_tag_xml)))return Dt(0).then(function(){return function(t){return Promise.resolve().then(function(){var n=t.ownerDocument.defaultView,i=yi(t);return function t(n,i){var e=I(n.document.getElementsByTagName("video")).filter(function(t){var n=y(t.prevSrc__)||y(t.src)&&!S(t,"prevSrc__"),i=H(t,"vjs-tech")||H(t,"jw-video");return n||i});var r=D(e,function(t){var n=yi(t);return Math.abs(i.top-n.top)<8&&Math.abs(i.left-n.left)<8&&Math.abs(i.bottom-n.bottom)<8&&Math.abs(i.right-n.right)<8});if(r)return"in";if(n===n.parent)return"out";try{n.parent.location.toString()}catch(t){return"na"}return t(n.parent,i)}(n,i)}).catch(function(){return"err"})}(i)}).then(function(t){Ot.info({type:"StreamDetection",streamType:t}),n.streamType=t})}});function yi(t){var n=t.getBoundingClientRect(),i=function(t){for(var n=t,i=t.ownerDocument.defaultView,e=[];n;)if(n.parentNode)n=n.parentNode,e.push(n);else if(n.nodeType===Node.DOCUMENT_NODE&&i!==i.parent){try{n=D(I(i.parent.document.getElementsByTagName("iframe")),function(t){return t.contentWindow===i}),i=i.parent}catch(t){n=null}n&&e.push(n)}else n=null;return e}(t).filter(function(t){return"IFRAME"===t.tagName}).map(function(t){return t.getBoundingClientRect()}).reduce(Si,{top:0,left:0});return{top:n.top+i.top,left:n.left+i.left,bottom:n.bottom+i.top,right:n.right+i.left}}function Si(t,n){return t.top+=n.top,t.left+=n.left,t}var _i=1,Ti=2,Ii=3,ki=mi.extend({name:"autoplay",init:function(){this.playback=_i},getState:function(){return{playback:this.playback}},getRequestParams:function(){return{playback:this.playback}},beforeAdRequested:function(t){var n=this,i=t.videoSlot,e=tt()?i:document.createElement("video");return Dt(0).then(function(){return e.setAttribute("playsinline","true"),e.muted=!1,e.prevSrc__=e.src,e.src="data:audio/mpeg;base64,/+MYxAAAAANIAUAAAASEEB/jwOFM/0MM/90b/+RhST//w4NFwOjf///PZu////9lns5GFDv//l9GlUIEEIAAAgIg8Ir/JGq3/+MYxDsLIj5QMYcoAP0dv9HIjUcH//yYSg+CIbkGP//8w0bLVjUP///3Z0x5QCAv/yLjwtGKTEFNRTMuOTeqqqqqqqqqqqqq/+MYxEkNmdJkUYc4AKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",Promise.race([qt(function(){return e.play()}),Dt(300)])}).then(function(){return _i}).catch(function(t){return t&&"NotSupportedError"===t.name?_i:(e.muted=!0,Promise.race([qt(function(){return e.play()}),Dt(300)]).then(function(){return Ti}).catch(function(){return Ii}))}).then(function(t){Ot.info({type:"AutoplayDetection",playback:t}),e.pause(),e.src="",n.playback=t}).catch(v)}}),Ri=mi.extend({name:"click-through",beforeAdStarted:function(t){var n=t.adUnit,i=t.adResponse,e=t.mediaFile,r=t.videoSlot,o=t.container;if("VAST"===n.type){var u=function(){var t=document.createElement("a"),e=i.clickThrough;return z(t,"bfm-vast-blocker"),t.href=s(e),t.target="_blank",t.addEventListener("click",function(t){r.paused?(r.play(),t.stopPropagation(),t.preventDefault()):(r.pause(),n.dispatch("AdClickThru"),e||(t.stopPropagation(),t.preventDefault()))}),t}();o.el().insertBefore(u,o.el().lastChild),n.on("AdRemainingTimeChange",function(){u.href=s(i.clickThrough)||"#"})}function s(t){var i={ASSETURI:encodeURIComponent(e.src),CONTENTPLAYHEAD:"VAST"===n.type?Cn(1e3*r.currentTime):0};return t?lt(t,i):null}"VPAID"===n.type&&n.on("AdClickThru",function(t){var n=t.data||{},e=n.url,r=n.playerHandles,o=y(e)?e:s(i.clickThrough);r&&o&&window.open(o,"_blank"),t.data={url:"",id:"",playerHandles:!1}})}}),Ci=Wt.extend({options:{className:"bfm-ad-skip-button",children:{label:{className:"bfm-ad-skip-label",textContent:"Skip Ad"}}}}),Mi=mi.extend({name:"skip",beforeAdStarted:function(t){var n=t.adUnit,i=t.adResponse,e=t.videoSlot,r=t.container;if("VAST"===n.type&&w(i.skipoffset)){var o=Ci.create();o.on("click",function(){n.skipAd()}),n.on("AdRemainingTimeChange",function t(){1e3*e.currentTime>=i.skipoffset&&(n.off("AdRemainingTimeChange",t),r.addChild(o))})}}}),Pi=Wt.extend({options:{className:"bfm-progress-circle",children:{leftCircle:{className:"bfm-circle-part"},rightCircle:{className:"bfm-circle-part"}}},setProgress:function(t,n){t=Yn(t,0,1);var i,e,r="";n?(i="rotate(".concat(360*t-180,"deg)"),e="rotate(".concat(180*Math.max(2*t-1,0),"deg)"),this.el().style.clip=t<.5?"auto":"",this.addClass("bfm-invert")):(i="rotate(".concat(360*t,"deg)"),e="rotate(".concat(180*Math.min(2*t,1),"deg)"),r=1===t?"auto":"",this.el().style.clip=t>.5?"auto":"",this.removeClass("bfm-invert")),P(this.leftCircle.el().style,{transform:i,webkitTransform:i,clip:r}),P(this.rightCircle.el().style,{transform:e,webkitTransform:e,clip:r})}}),xi=Wt.extend({options:{hide:!0,invert:!0,className:"bfm-ad-countdown",children:{label:{className:"bfm-ad-countdown-label",textContent:"Ad"},time:{className:"bfm-ad-countdown-time"},progress:Pi}},init:function(t){Wt.call(this,t),this.initialRemainingTime=-1},update:function(t,n){if(this.initialRemainingTime=this.initialRemainingTime<0?t:this.initialRemainingTime,n=n<0?this.initialRemainingTime:n,t<0||n<0)this.hide();else{var i=1-t/n;this.show(),this.setProgress(i),this.setRemainingTime(t)}},setProgress:function(t){this.progress.setProgress(t,this.options.invert)},setRemainingTime:function(t){this.time.el().textContent=Math.round(t)||0}}),Oi=mi.extend({name:"countdown",beforeAdStarted:function(t){var n=t.adUnit,i=t.settings,e=t.container;if("VAST"===n.type&&i.show_countdown){var r=xi.create();e.addChild(r),n.on(["AdDurationChange","AdRemainingTimeChange"],function(){r.update(n.getAdRemainingTime(),n.getAdDuration())})}}}),Di=Wt.extend({autoBind:!0,options:{className:"bfm-companion-view"},init:function(t,n){Wt.call(this),this.slot=t,this.data=n},inject:function(){var t=this.el(),n=this.slot,i=this.data,e=i.width,r=i.height,o=i.trackingEvents;t.style.position="relative",t.style.width=n.style.width=fn(e),t.style.height=n.style.height=fn(r),n.appendChild(t),this.S(),M(o,function(t){"creativeView"===t.name&&vt(t.uri)})},S:function(){var t=this.data,n=t.width,i=t.height,e=t.htmlResource,r=t.iframeResource,o=t.staticResource,u=this.el();if(e){var s=Ni();u.appendChild(s),(s.contentWindow&&s.contentWindow.document||s.contentDocument).write(qi(e))}else if(r){var a=Ni(r,n,i);u.appendChild(a)}else if(o){var c=Ni();u.appendChild(c);var d=c.contentWindow&&c.contentWindow.document||c.contentDocument;d.write(qi(function(t){var n=t.creativeType,i=t.staticResource,e=t.altText;if(n=String(n).toLowerCase(),O(Zn.IMAGE,n))return'<img src="'.concat(i,'" title="').concat(e||"",'"></img>');if(O(Zn.HTML5,n))return'<script type="text/javascript" src="'.concat(i,'"><\/script>');return""}(this.data))),d.body.addEventListener("click",this._)}},_:function(){var t=this.data,n=t.clickThrough,i=t.clickTracking;n&&window.open(n),i&&vt(i)}});function qi(t){return'<html>\n\t\t\t<head>\n\t\t\t\t<meta charset="UTF-8">\n\t\t\t</head>\n\t\t\t<body style="padding:0;margin:0;cursor:pointer;">'.concat(t,"</body>\n\t\t</html>")}function Ni(t,n,i){var e=document.createElement("iframe");return e.src=t||"about:blank",e.width=n||"100%",e.height=i||"100%",e.frameBorder="0",e.scrolling="no",e.style.position="absolute",e.style.left="0",e.style.top="0",e}var Vi=[{id:"bfm_comp_any",matches:function(){return!0}},{id:"bfm_comp_300x250",matches:Gn({width:300,height:250})},{id:"bfm_comp_300x60",matches:Gn({width:300,height:60})},{id:"bfm_comp_728x90",matches:Gn({width:728,height:90})}],Ui=mi.extend({name:"companion",init:function(){this.ads=[]},beforeAdStarted:function(t){var n=t.adUnit,i=t.adResponse;if("DISPLAY"!==n.type){var e,r="VPAID"===n.type?Nn(n.getAdCompanions()):[],o=i.companionAds.concat(r);this.ads=Vi.map((e=o,function(t){var n=document.getElementById(t.id),i=D(e,t.matches);return n&&i?(j(n),Di.create(n,i)):null})).filter(Boolean),this.ads.forEach(function(t){return t.inject()})}},dispose:function(){this.ads.forEach(function(t){return t.dispose()})}});var Li=["ext","aid","isexch","isOwn","pc","adser","c","dspid","seatid","adomain","bidcrid","wr","settle"],Fi=mi.extend({name:"moat-tracking",ping:vt,beforeAdStarted:function(t){var n=this,i=t.adUnit,e=t.adResponse,r=t.container,o=t.settings;if("DISPLAY"!==i.type){var u=e.findIOExtension(),s=u&&u.data.isMoatEnabled(),a=u&&u.data.getMoatImpression();s&&a&&i.impressionPromise.then(function(){var t=e.adId,s=e.meta,c=i.getAdDuration(),d=bt(o.page_url),f={BASE_IO_REQUEST:s&&s.baseRequest,IO_REQUEST:s&&s.request},h=dt(lt(a,f)),l=Li.reduce(function(t,n){return y(h[n])&&(t[n]=h[n]),t},{}),v=0===String(o.inventory_id).indexOf("bid:")?String(o.inventory_id).split(":")[2]:o.inventory_id,p={level1:u.data.getAdvertiser(),level2:l.aid,level3:1===t?h.adomain:t,level4:h.bidcrid,slicer1:d.hostname,slicer2:v,zMoatIMP:u.data.getImpressionId(),zMoatTS:u.data.getTimeStamp()+"&"+ft(l),zMoatTI:u.data.getTransactionId(),zMoatPG:d.hostname,zMoatPT:"html5"};(function(t,n,i,e,r){var o,u,s=document.createElement("script"),a={events:[],addEvent:function(t){c.sendEvent?(a.events&&(c.sendEvent(a.events),a.events=!1),c.sendEvent(t)):a.events.push(t)}},c={adData:{ids:i,duration:r,vpaid:t,build:"cc07a80-clean"},dispatchEvent:a.addEvent};i="_moatApi"+Math.floor(1e8*Math.random()),t&&t.subscribe;try{u=(o=n.ownerDocument).defaultView||o.parentWindow}catch(t){o=document,u=window}return u[i]=c,s.type="text/javascript",n&&n.insertBefore(s,n.childNodes[0]||null),s.src="https://z.moatads.com/"+e+"/moatvideo.js#"+i,c})(i,r.el(),p,"beachfrontvpaidtwoint364442147540",c).dispatchEvent({type:"AdStarted"}),n.ping(a,f)})}}}),Bi=mi.extend({name:"poster",init:function(){this.poster=Wt.create({className:"bfm-ad-poster"})},beforeAdRequested:function(t){t.slot.appendChild(this.poster.el())},beforeAdStarted:function(){this.poster.hide()},dispose:function(){this.poster.remove()}});function ji(t,n,i){if(w((i=x({path:"/"},i)).expires)){var e=new Date;e.setMilliseconds(e.getMilliseconds()+864e5*i.expires),i.expires=e}return t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape),n=encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),document.cookie=[t,"=",n,i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")}function Wi(t){for(var n=t?null:{},i=document.cookie?document.cookie.split("; "):[],e=/(%[0-9A-Z]{2})+/g,r=0;r<i.length;r++){var o=i[r].split("="),u=o.slice(1).join("=");'"'===u.charAt(0)&&(u=u.slice(1,-1));try{var s=o[0].replace(e,decodeURIComponent);if(u=u.replace(e,decodeURIComponent),t===s){n=u;break}t||(n[s]=u)}catch(t){}}return n}var Hi=mi.extend({name:"request-throttling",init:function(){this.block=!1},getRequestParams:function(){return{nm:Number(this.block)}},beforeAdRequested:function(t){var n=this,i=t.settings;if(Wi("__io_nm_"+i.inventory_id))this.block=!0;else if(!tt()){ji("__io_nm_"+i.inventory_id,"1",{expires:10/86400,path:""});try{mt.window.addEventListener("unload",function(){n.removeCookies()})}catch(t){}}},beforeAdStarted:function(t){var n=this;t.adUnit.impressionPromise.then(function(){n.removeCookies()})},removeCookies:function(){M(Wi(),function(t,n){0===String(n).indexOf("__io_nm_")&&function(t,n){ji(t,"",x({},n,{expires:-1}))}(n,{path:""})})}}),zi=mi.extend({name:"script-injection",beforeAdStarted:function(t){var n=t.adUnit,i=t.adResponse;if("DISPLAY"!==n.type){var e=i.findIOExtension();e&&e.data.jSInjects&&n.impressionPromise.then(function(){e.data.jSInjects.forEach(function(t){$(t.url,document.body).then(function(){b(window[t.onload])&&window[t.onload]()}).catch(function(t){Ot.error({type:"ScriptInjectionError",message:t.toString()})})})})}}}),Gi=mi.extend({name:"custom-tracking",ping:vt,beforeAdStarted:function(t){var n=this,i=t.adUnit,e=t.adResponse;if("DISPLAY"!==i.type){var r=e.findIOExtension();if(r){var o=Date.now(),u=r.data.getTrackingStart(),s=r.data.getTrackingComplete(),a={io_playing_time:function(){return Date.now()-o},io_ad_length:1e3*i.getAdDuration(),io_timestamp:Date.now};this.ping(u,a),i.once(["AdStopped","AdError"],function(){n.ping(s,a)})}}}}),Yi=mi.extend({name:"creative-upload",ping:vt,beforeAdStarted:function(t){var n=this,i=t.adUnit,e=t.adResponse,r=t.slot,o=t.videoSlot,u=t.settings;if("DISPLAY"!==i.type){var s=e.findIOExtension(),a=s&&s.data.getCreativeUploadUrl();if(a){var c="VPAID"===i.type?Qi(i.iframe.contentDocument)||o:"IMA"===i.type&&Qi(r.querySelector(".bfm-ima-slot"))||o,d="VPAID"===i.type&&i.videoSlot.getSourceHistory().pop()||c.src;if(!Ki(c))return Ot.error({type:"NoVideoSource",id:u.inventory_id});var f,h=D([c.type,function(t){var n=String(t).toLowerCase().split(".").pop();if("m3u8"===n)return"application/x-mpegURL";return"video/"+n}(d),"video/mp4"],function(t){return O(Zn.VIDEO,t)});Promise.race([i.nextEvent(["AdStopped","AdError"]).then(function(t){throw new Error(t.type)}),(f=c,new Promise(function(t){f.addEventListener("timeupdate",function n(i){f.currentTime>0&&(f.removeEventListener("timeupdate",n),t(i))})}))]).then(function(){return Xi(c)?c:(t=d,(n=document.createElement("video")).autoplay=!1,n.muted=!0,n.src=t,(i=n,e="loadedmetadata",new Promise(function(t){X(i,e,t)})).then(function(){var t={videoHeight:n.videoHeight,videoWidth:n.videoWidth};return n.src="",t}));var t,n,i,e}).then(function(t){n.ping(a,{$cr_uri$:"IMA"===i.type?c.src:d,$cr_type$:h,$cr_width$:t.videoWidth,$cr_height$:t.videoHeight})}).catch(function(t){Ot.error({type:"CreativeUploadFailed",message:t.toString()})})}}}});function Qi(t){var n=t.querySelector("video"),i=t.querySelectorAll("iframe");if(n&&Ki(n))return n;for(var e=0;e<i.length;e++)try{var r=Qi(i[e].contentDocument);if(r)return r}catch(t){}return null}function Xi(t){return t.ownerDocument&&1===t.nodeType}function Ki(t){return Xi(t)?t.src!==t.ownerDocument.defaultView.location.href:Boolean(t.src)}var $i=Ct.extend({registry:[gi,bi,wi,Ei,ki,Ri,Mi,Oi,Ui,Fi,Bi,Hi,zi,Gi,Yi],init:function(t){this.registry=t||this.registry,this.instances=this.registry.map(function(t){return t.create()})},handleError:function(t,n){return function(i){return Ot.error({type:"PluginError",plugin:t,method:n,error:String(i)}),null}},callGetter:function(t){var n=this;return this.instances.reduce(function(i,e){try{i[e.name]=e[t]()||{}}catch(r){i[e.name]={},n.handleError(e.name,t)(r)}return i},{})},callHook:function(t,n){var i=this;return Promise.all(this.instances.map(function(e){return qt(function(){return e[t](n)}).catch(i.handleError(e.name,t))}))},getRequestParams:function(){var t=this.callGetter("getRequestParams");return x.apply(void 0,[{}].concat(e(Object.keys(t).map(function(n){return t[n]}))))},getState:function(){return this.callGetter("getState")},beforeAdLoaded:function(t){return this.callHook("beforeAdLoaded",t)},beforeAdRequested:function(t){return this.callHook("beforeAdRequested",t)},beforeAdStarted:function(t){return this.callHook("beforeAdStarted",t)},dispose:function(t){return this.callHook("dispose",t)}}),Ji={create:function(t,n){var i=n,e=[],r=!1;function o(n){if(b(n))return n(o,i);if(A(n.type))throw new Error('Actions must define a "type" property');if(r)throw new Error("Reducers may not dispatch actions");try{r=!0,i=t(i,n)}finally{r=!1}return e.slice().forEach(function(t){return t()}),n}return o({type:"@@store/INIT"}),{getState:function(){return i},subscribe:function(t){var n=!0;return e.push(t),function(){if(n){var i=e.indexOf(t);e.splice(i,1),n=!1}}},dispatch:o}}};var Zi=function(t,n){return n.weight-t.weight},te=function(t,n){return n.ad.weight-t.ad.weight},ne=function(t){return function(n){return n.status===t}},ie=function(t){return function(n){return n.status!==t}},ee=Ct.extend({init:function(t){var n,i,e=this;this.T=Ht.create({interval:50}),this.I=Ji.create(oe,{data:t.data}),this.k=(n=t.actions,i=this.I.dispatch,Object.keys(n).reduce(function(t,e){return t[e]=U(i,n[e]),t},{})),this.I.subscribe(function(){var t=e.I.getState();Ot.info({type:"MediatorStateChanged",tasks:t.tasks.map(function(t){return{status:t.status,adId:t.ad.id,weight:t.ad.weight}})})})},load:function(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=i.cancelToken||et,r=re(this.I,"loaded");return r.then(function(){n.T.stop(),Ot.info("MediatorLoadCompleted")},function(){n.T.dispose(),Ot.info("MediatorLoadFailed")}),t.forEach(function(t){e.subscribe(t.cancelSource.cancel),t.once(Yt,function(){return n.k.onAdError({ad:t})}),t.once(zt,function(){return n.k.onAdLoaded({ad:t})}),t.once(Gt,function(){return n.k.onAdStarted({ad:t})})}),i.timeout&&this.T.subscribe(function(){if(n.T.currentTime()>=i.timeout){var e=jt.create(jt.INVENTORY_TIMEOUT);n.k.cancelAds(e),t.forEach(function(t){return t.cancelSource.cancel(e)})}}),e.isCanceled()?this.k.cancelAds():(e.subscribe(this.k.cancelAds),this.T.start(),this.k.loadAds({ads:t})),r},start:function(){var t=this,n=re(this.I,"started");return n.then(function(n){var i=t.I.getState(),e=jt.create(jt.AD_DISCARDED);t.k.cancelAds(),i.tasks.forEach(function(t){return t.ad.off()}),i.tasks.filter(function(t){return t.ad!==n}).forEach(function(t){return t.ad.cancelSource.cancel(e)}),t.T.dispose(),Ot.info("MediatorStartCompleted")},function(){t.T.dispose(),Ot.info("MediatorStartFailed")}),this.T.start(),this.k.startAds(),n}});function re(t,n){return new Promise(function(i,e){var r=t.subscribe(function(){var o=t.getState(),u=D(o.tasks,ne(n)),s=o.tasks.every(ne("error"));u?(r(),i(u.ad)):s&&(r(),e(jt.create({message:"Mediation failed"})))})})}function oe(t,n){return{tasks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n.tasks){var i=t.filter(function(t){return null===D(n.tasks,function(n){return n.ad===t.ad})});return e(i).concat(e(n.tasks)).sort(te)}return t}(t.tasks,n),data:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n.data)return x({},t,n.data);return t}(t.data,n)}}var ue="UPDATE_TASKS",se={loadAds:function(t){var n=t.ads;return function(t,i){var e,r=i.data.concurrency,o=void 0===r?1:r,u=n.slice().sort(Zi).map((e="pending",function(t){return{status:e,ad:t}}));u.slice(0,o).forEach(function(t){t.status="loading",t.ad.loadAd()}),t({type:ue,tasks:u,data:{startAllowed:!1}})}},startAds:function(){return function(t,n){var i=D(n.tasks,ne("starting")),e=D(n.tasks,ne("loaded")),r=[];!i&&e&&(e.ad.startAd(),r.push({status:"starting",ad:e.ad})),t({type:ue,tasks:r,data:{startAllowed:!0}})}},onAdLoaded:function(t){var n=t.ad;return function(t,i){var e=i.tasks.filter(function(t){return t.ad!==n}),r=D(e,ne("starting")),o=D(e,ne("started")),u=[];r||o||!i.data.startAllowed?u.push({status:"loaded",ad:n}):(n.startAd(),u.push({status:"starting",ad:n})),t({type:ue,tasks:u})}},onAdError:function(t){var n=t.ad;return function(t,i){var e=i.tasks.filter(function(t){return t.ad!==n}),r=e.filter(ie("pending")).filter(ie("error")),o=D(e,ne("pending")),u=D(e,ne("starting")),s=D(e,ne("started")),a=D(e,ne("loaded")),c=[{status:"error",ad:n}];r.length<i.data.concurrency&&o&&(o.ad.loadAd(),c.push({status:"loading",ad:o.ad})),!u&&!s&&a&&i.data.startAllowed&&(a.ad.startAd(),c.push({status:"starting",ad:a.ad})),t({type:ue,tasks:c})}},onAdStarted:function(t){var n=t.ad;return function(t){t({type:ue,tasks:[{status:"started",ad:n}]})}},cancelAds:function(){return function(t,n){var i;t({type:ue,tasks:n.tasks.filter(ie("started")).map((i="error",function(t){return{status:i,ad:t.ad}}))})}}},ae={DESKTOP:{actions:se,data:{concurrency:1}},MOBILE:{actions:se,data:{concurrency:1}}},ce=function(t){if(!E(t))return Object(t);try{return JSON.parse(t)}catch(t){return{}}},de=function(t){return function(n){return Object.keys(n).filter(function(n){return S(t,hn(n))}).reduce(function(t,i){var e;return t[hn(i)]=(e=n[i],$t.test(e)?"true"===String(e).toLowerCase():e),t},{})}},fe=function(t){return function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return i=i.filter(Boolean).map(ce).map(de(t)),Object.freeze(x.apply(void 0,[{},t].concat(e(i))))}},he=function(){if(void 0===document.currentScript){var t=document.getElementsByTagName("script");return t[t.length-1]||{}}return document.currentScript||{}}().dataset,le={create:fe({width:0,height:0,view_mode:st.NORMAL,desired_bitrate:-1,video_source:"",video_current_time:0,video_duration:0,content:{},pixels:[],iframes:[],inventory_type:"pre",inventory_id:"",request_endpoint:"//reachms.bfmio.com/getmu",request_params:{},ad_tag_url:"",ad_tag_xml:"",ad_request_js:!0,server_side_mediation:!1,do_not_track:!1,ima_enabled:!tt(),show_countdown:!0,page_url:"",log_level:"",log_div:"",player_id:void 0,publisher_id:void 0,app_url:void 0,bundle_id:void 0,idfa:void 0,dsp:void 0,cat:void 0})},ve=["AdLoaded","AdStarted","AdStopped","AdError","AdImpression","AdVideoStart"],pe=ut.EVENTS.filter(function(t){return-1===ve.indexOf(t)}),me=Bt.extend({init:function(){var t=this;this.vastClient=null,this.adMediator=null,this.adUnit=null,this.slot=null,this.videoSlot=null,this.macroVars={},this.requestUrl="",this.settings={},this.state={volume:0,width:0,height:0,viewMode:st.NORMAL},this.running=!1,this.cancelSource=it.create(),this.pluginClient=$i.create(),this.on(["AdStopped","AdError"],function(){return t.dispose()}),this.on("*",function(t){var n=t.type,i=t.data;return Ot.info({type:n,data:i})}),window.addEventListener("unload",function(){Ot.warn("WindowUnload"),t.stopAd()})},dispose:function(){this.vastClient=null,this.adMediator=null,this.adUnit=null,this.running=!1,this.cancelSource=it.create(),this.pluginClient.dispose(this),K(this.slot)&&(I(this.slot.getElementsByClassName("bfm-vast-container")).forEach(W),G(this.slot,"bfm-ad-slot")),Ot.clear()},initAd:function(t,n,i,e,r,o){var u=this,s=(r||{}).AdParameters,a=o||{},c=a.slot,d=a.videoSlot,f=le.create(he,s,{width:Math.floor(t),height:Math.floor(n),view_mode:i,desired_bitrate:e,video_source:d.src,video_current_time:d.currentTime,video_duration:d.duration});this.slot=c,this.videoSlot=d,this.settings=f,this.state.width=f.width,this.state.height=f.height,z(c,"bfm-ad-slot"),function(t){var n=t.href,i=t.css,e=t.id,r=t.doc,o=void 0===r?document:r;if(!(e&&o.getElementById(e)||n&&D(o.styleSheets,function(t){return t.href===n})))if(n){var u=o.createElement("link");u.type="text/css",u.rel="stylesheet",u.href=n,e&&(u.id=e),o.head.appendChild(u)}else if(i){var s=o.createElement("style");s.type="text/css",s.appendChild(o.createTextNode(i)),e&&(s.id=e),o.head.appendChild(s)}}({id:"neptune_player_css",doc:c.ownerDocument,css:"div.bfm-ad-slot,div.bfm-ima-slot,div.bfm-vast-container{font-family:Lato,Arial,sans-serif!important;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;position:absolute;top:0;left:0;width:100%!important;height:100%!important}div.bfm-ad-slot iframe,div.bfm-ima-slot iframe,div.bfm-vast-container iframe{width:100%!important;height:100%!important;border:0!important}div.bfm-ad-slot video,div.bfm-ima-slot video,div.bfm-vast-container video{background-color:#000;position:absolute;top:0;left:0;width:100%!important;height:100%!important}div.bfm-ad-slot *,div.bfm-ima-slot *,div.bfm-vast-container *{-webkit-box-sizing:border-box!important;-moz-box-sizing:border-box!important;box-sizing:border-box!important}div.bfm-ima-slot,div.bfm-vast-container{z-index:1}div.bfm-ad-countdown{width:36px;height:36px;position:absolute;top:0;right:0;color:#f7f7f7;margin:8px;font-size:15px;font-weight:700;filter:drop-shadow(0 0 1px rgba(0, 0, 0, .5));z-index:1}div.bfm-ad-countdown div.bfm-ad-countdown-label{position:absolute;top:0;left:-44px;width:100%;height:100%;line-height:36px;text-align:right}div.bfm-ad-countdown div.bfm-ad-countdown-time{position:absolute;top:0;left:0;width:100%;height:100%;line-height:36px;text-align:center}.bfm-mraid div.bfm-ad-countdown{display:none!important}div.bfm-ad-poster{position:absolute;top:0;bottom:0;left:0;right:0;margin:0;padding:0;background-color:#000;z-index:1}div.bfm-progress-circle{margin:0;width:36px;height:36px;position:absolute;top:0;left:0;clip:rect(0,36px,36px,18px)}div.bfm-progress-circle.bfm-invert{clip:rect(0,18px,36px,0)}div.bfm-progress-circle div.bfm-circle-part{width:100%;height:100%;border:3px solid #f7f7f7;border-radius:100%;position:absolute;clip:rect(0,18px,36px,0);clip-path:inset(0 50% 0 0);-webkit-clip-path:inset(0 50% 0 0)}div.bfm-ad-skip-button{width:100px;height:32px;position:absolute;z-index:2;bottom:54px;right:0;font-size:15px;background-color:rgba(51,51,51,.8);color:#f7f7f7;cursor:pointer}div.bfm-ad-skip-button div.bfm-ad-skip-label{position:absolute;top:0;width:100%;height:100%;line-height:32px;text-align:center;cursor:pointer}a.bfm-vast-blocker{display:block;position:absolute;z-index:2;margin:0;padding:0;height:100%;width:100%;top:0;left:0;right:0;bottom:0}"}),Ot.payload.width=f.width,Ot.payload.height=f.height,Ot.setLogLevel(f.log_level),Ot.setOutput(f.log_div),Ot.info({type:"initAd",settings:f});var h=x({},this.state);this.pluginClient.beforeAdRequested(this).then(function(){return u.R()}).then(function(t){return u.C(t,h)}).then(function(){return u.pluginClient.beforeAdLoaded(u)}).then(function(){u.dispatch("AdLoaded")}).catch(function(t){u.dispatch({type:"AdError",data:{message:String(t)}})})},startAd:function(){var t=this;Ot.log("startAd"),this.running||(this.running=!0,this.M().then(function(n){return t.P(n)}).then(function(){var n=t.state,i=n.width,e=n.height,r=n.viewMode,o=t.pluginClient.getState().autoplay,u=o&&1!==o.playback?0:t.state.volume;t.adUnit.resizeAd(i,e,r),t.adUnit.setAdVolume(u),t.dispatch("AdStarted"),t.adUnit.impressionPromise.then(function(){t.dispatch("AdImpression")}),t.adUnit.videoStartPromise.then(function(){t.dispatch("AdVideoStart")})}).catch(function(n){t.dispatch({type:"AdError",data:{message:String(n)}})}))},R:function(){var t,n,i;if(this.macroVars=(t=this.settings,n=bt(t.page_url),i={BFM_EMBEDDING_PAGE_URL_FULL:n.href||"NA",BFM_EMBEDDING_PAGE_URL_QUERY:n.search||"",BFM_EMBEDDING_PAGE_URL_UNESC:function(){return n.hostname||"NA"},BFM_EMBEDDING_PAGE_URL:n.hostname||"NA",BFM_VIDEO_WIDTH:t.width,BFM_VIDEO_HEIGHT:t.height,BFM_VIDEO_URL:t.video_source,BFM_VIDEO_POSITION:t.video_current_time,BFM_VIDEO_DURATION:t.video_duration,BFM_VIDEO_DESCRIPTION:t.content.description,BFM_VIDEO_KEYWORDS:t.content.keywords,BFM_VIDEO_ID:t.content.id,BFM_VIDEO_TITLE:t.content.title,BFM_VIDEO_COUNT:t.content.count,BFM_REACH_PLAYER_ID:t.player_id,BFM_REACH_PUBLISHER_ID:t.publisher_id,BFM_REACH_CATEGORY:_(t.content.category)?t.content.category[0]:void 0,BFM_REACH_IAB_CATEGORY:t.content.iab_category,BFM_REACH_PROVIDER_ID:t.content.provider,BFM_REACH_CONTRIBUTOR_ID:t.content.contributor,BFM_REACH_FEED_ID:t.content.feed,BFM_OS:nt(),BFM_CACHE_BREAKER_TS:Date.now,BFM_CACHE_BREAKER:R},M(t.content.macro,function(t,n){i[n]=t}),M(i,function(t,n){i[n]=b(t)?t:encodeURIComponent(t)}),i),this.requestUrl=function(t,n){var i=bt(t.page_url);if(y(t.ad_tag_url))return t.ad_tag_url;var e=x({},E(t.request_params)?dt(t.request_params):t.request_params,n,{v:"1",apv:"nep-"+F.replace(/\./g,"-"),width:t.width,height:t.height,i_type:t.inventory_type,aid:t.inventory_id,dsp:t.dsp,cat:t.cat,pageurl:p(t.page_url)?void 0:i.href||"NA",playerid:t.player_id,publisherid:t.publisher_id,feedid:t.content.feed,providerid:t.content.provider,contentid:t.content.id,contributorid:t.content.contributor,iabc:t.content.iab_category,categoryid:_(t.content.category)?t.content.category[0]:void 0,custom_content_id:g(t.content.macro)?t.content.macro.BFM_VIDEO_CUSTOM_CONTENT_ID:void 0,osvers:nt(),network:"cellular"===Z()?"c":"wifi"===Z()?"w":"u",cm:!Number(t.server_side_mediation),te:!Number(t.do_not_track),flash:!1,vjs:Boolean(t.ad_request_js),appurl:t.app_url,bundleid:t.bundle_id,idfa:t.idfa,xml:-1===String(t.inventory_id).indexOf("bid:"),cb:R()});return ht(t.request_endpoint,e)}(this.settings,this.pluginClient.getRequestParams()),this.vastClient=Un.create(),y(this.settings.ad_tag_xml)){var e=window.atob(this.settings.ad_tag_xml);return this.vastClient.parseVAST(e)}return this.vastClient.fetchVAST(this.requestUrl,{macroVars:this.macroVars,cancelToken:this.cancelSource.token})},C:function(t,n){var i={slot:this.slot,videoSlot:this.videoSlot,macroVars:this.macroVars,settings:this.settings,plugins:this.pluginClient.getState(),state:n},e=tt()?ae.MOBILE:ae.DESKTOP,r=t.ads.map(function(t){return pi.create(t,i)}),o=this.settings.dsp?2e4:function(t){var n=t.map(function(t){return t.findIOExtension()}).filter(Boolean);return n.length?n.map(function(t){return t.data.getGlobalTimeout()||It}).reduce(function(t,n){return Math.max(t,n)},kt):It}(t.ads),u=this.cancelSource.token;return this.adMediator=ee.create(e),this.adMediator.load(r,{timeout:o,cancelToken:u})},M:function(){return this.adMediator.start()},P:function(t){var n=this;this.adResponse=t.adResponse,this.mediaFile=t.mediaFile,this.adUnit=t.adUnit,this.container=t.container,pe.forEach(function(t){n.adUnit.on(t,function(t){var i=t.type,e=t.data;n.dispatch({type:i,data:e})})}),this.adUnit.once(["AdStopped","AdError"],function(){n.dispatch("AdStopped")}),this.pluginClient.beforeAdStarted(this)},stopAd:function(){Ot.log("stopAd");var t=jt.create(jt.EXTERNAL_TIMEOUT);this.cancelSource.cancel(t)},pauseAd:function(){return Ot.log("pauseAd"),this.adUnit?this.adUnit.pauseAd():void 0},resumeAd:function(){return Ot.log("resumeAd"),this.adUnit?this.adUnit.resumeAd():void 0},expandAd:function(){return Ot.log("expandAd"),this.adUnit?this.adUnit.expandAd():void 0},collapseAd:function(){return Ot.log("collapseAd"),this.adUnit?this.adUnit.collapseAd():void 0},skipAd:function(){return Ot.log("skipAd"),this.adUnit?this.adUnit.skipAd():void 0},resizeAd:function(t,n,i){Ot.log({type:"resizeAd",width:t,height:n,viewMode:i}),this.adUnit?this.adUnit.resizeAd(t,n,i):(this.state.width=t,this.state.height=n,this.state.viewMode=i,this.dispatch("AdSizeChange"))},setAdVolume:function(t){Ot.log({type:"setAdVolume",volume:t}),this.adUnit?this.adUnit.setAdVolume(t):(this.state.volume=t,this.dispatch("AdVolumeChange"))},getAdVolume:function(){var t=this.adUnit?this.adUnit.getAdVolume():this.state.volume;return Ot.log({type:"getAdVolume",volume:t}),t},getAdWidth:function(){var t=this.adUnit?this.adUnit.getAdWidth():this.state.width;return Ot.log({type:"getAdWidth",width:t}),t},getAdHeight:function(){var t=this.adUnit?this.adUnit.getAdHeight():this.state.height;return Ot.log({type:"getAdHeight",height:t}),t},getAdRemainingTime:function(){return Ot.log("getAdRemainingTime"),this.adUnit?this.adUnit.getAdRemainingTime():-2},getAdDuration:function(){return Ot.log("getAdDuration"),this.adUnit?this.adUnit.getAdDuration():-2},getAdSkippableState:function(){return Ot.log("getAdSkippableState"),!!this.adUnit&&this.adUnit.getAdSkippableState()},getAdExpanded:function(){return Ot.log("getAdExpanded"),!!this.adUnit&&this.adUnit.getAdExpanded()},getAdIcons:function(){return Ot.log("getAdIcons"),!!this.adUnit&&this.adUnit.getAdIcons()},getAdCompanions:function(){return Ot.log("getAdCompanions"),this.adUnit?this.adUnit.getAdCompanions():""},getAdLinear:function(){return Ot.log("getAdLinear"),!0},getAdType:function(){return Ot.log("getAdType"),this.adUnit?this.adUnit.type:""}}),Ae=2e3,ge=["AdStopped","AdVideoComplete","AdError","AdSkipped"],be=function(t){var n={},i=Vt();return["on","off","once"].forEach(function(t){n[t]=i[t].bind(i)}),["getAdType"].concat(ut.METHODS,ut.GETTERS,ut.SETTERS).forEach(function(i){n[i]=t[i].bind(t)}),["subscribe","unsubscribe"].forEach(function(t){n[t]=Bt.prototype[t].bind(i)}),t.on("*",function(t){var e=function(){return i.dispatch(t,n)},r=O(ge,t.type)?Ae:0;return r?setTimeout(e,r):qt(e)}),n};var we=Wt.extend({options:{className:"bfm-mraid bfm-ad-slot",children:{video:{tagName:"video",tagAttributes:{playsinline:"true","webkit-playsinline":"true"}}}}}),Ee=Ct.extend({autoBind:!0,init:function(t){var n=t.el,i=t.mraid,e=t.vpaid;this.mraid=i,this.vpaid=e,this.slot=we.create(),n.appendChild(this.slot.el())},start:function(){"loading"===this.mraid.getState()?X(this.mraid,"ready",this.x):this.x()},x:function(){var t=this.mraid,n=this.vpaid,i=this.slot,e=t.getVersion()>1&&t.getMaxSize(),r=e&&e.width||i.el().clientWidth,o=e&&e.height||i.el().clientHeight,u={slot:i.el(),videoSlot:i.video.el()};n.once("AdLoaded",this.O),n.once("AdStarted",this.D),n.once(["AdStopped","AdError"],function(){return setTimeout(function(){return t.close()},250)}),n.initAd(r,o,"normal",-1,{AdParameters:{ad_request_js:!1,server_side_mediation:!0,page_url:null}},u)},O:function(){var t=this.mraid,n=this.vpaid;t.getVersion()>1&&t.supports("vpaid")?t.initVpaid({subscribe:n.subscribe,unsubscribe:n.unsubscribe,startAd:n.startAd,getAdDuration:n.getAdDuration,getAdRemainingTime:n.getAdRemainingTime}):t.isViewable()?n.startAd():Y(t,"viewableChange",this.q)},D:function(){var t=this.mraid,n=this.slot.video.el(),i=n.videoWidth,e=n.videoHeight;t.setOrientationProperties({allowOrientationChange:!1,forceOrientation:i>e?"landscape":"portrait"})},q:function(t){var n=this.mraid,i=this.vpaid;t&&(Q(n,"viewableChange",this.q),i.startAd())}}),ye=U(be,me.create);window.Beachfront=window.Beachfront||{},window.Beachfront.Neptune={version:F,Player:ye},window.getVPAIDAd=ye,window.addEventListener("error",function(t){var n=t.filename,i=t.message,e=t.error;O(String(n),"neptune-player.js")&&Ot.error({type:"UncaughtError",message:i,error:String(e)})}),window.addEventListener("unhandledrejection",function(t){var n=t.reason;Ot.warn({type:"UnhandledRejection",reason:String(n)})}),window.mraid&&Ee.create({el:document.body,mraid:window.mraid,vpaid:ye()}).start()}();
