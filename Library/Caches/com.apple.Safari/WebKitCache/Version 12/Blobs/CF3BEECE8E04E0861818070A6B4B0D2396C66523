/*! jQuery v1.11.3 | (c) 2005, 2015 jQuery Foundation, Inc. | jquery.org/license */
!function(n,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=n.document?t(n,!0):function(n){if(!n.document)throw new Error("jQuery requires a window with a document");return t(n)}:t(n)}("undefined"!=typeof window?window:this,function(n,t){function ri(n){var t="length"in n&&n.length,r=i.type(n);return"function"===r||i.isWindow(n)?!1:1===n.nodeType&&t?!0:"array"===r||0===t||"number"==typeof t&&t>0&&t-1 in n}function ui(n,t,r){if(i.isFunction(t))return i.grep(n,function(n,i){return!!t.call(n,i,n)!==r});if(t.nodeType)return i.grep(n,function(n){return n===t!==r});if("string"==typeof t){if(re.test(t))return i.filter(t,n,r);t=i.filter(t,n)}return i.grep(n,function(n){return i.inArray(n,t)>=0!==r})}function hr(n,t){do n=n[t];while(n&&1!==n.nodeType);return n}function ee(n){var t=fi[n]={};return i.each(n.match(h)||[],function(n,i){t[i]=!0}),t}function cr(){u.addEventListener?(u.removeEventListener("DOMContentLoaded",a,!1),n.removeEventListener("load",a,!1)):(u.detachEvent("onreadystatechange",a),n.detachEvent("onload",a))}function a(){(u.addEventListener||"load"===event.type||"complete"===u.readyState)&&(cr(),i.ready())}function yr(n,t,r){if(void 0===r&&1===n.nodeType){var u="data-"+t.replace(vr,"-$1").toLowerCase();if(r=n.getAttribute(u),"string"==typeof r){try{r="true"===r?!0:"false"===r?!1:"null"===r?null:+r+""===r?+r:ar.test(r)?i.parseJSON(r):r}catch(f){}i.data(n,t,r)}else r=void 0}return r}function ei(n){for(var t in n)if(("data"!==t||!i.isEmptyObject(n[t]))&&"toJSON"!==t)return!1;return!0}function pr(n,t,r,u){if(i.acceptData(n)){var s,e,h=i.expando,l=n.nodeType,o=l?i.cache:n,f=l?n[h]:n[h]&&h;if(f&&o[f]&&(u||o[f].data)||void 0!==r||"string"!=typeof t)return f||(f=l?n[h]=c.pop()||i.guid++:h),o[f]||(o[f]=l?{}:{toJSON:i.noop}),("object"==typeof t||"function"==typeof t)&&(u?o[f]=i.extend(o[f],t):o[f].data=i.extend(o[f].data,t)),e=o[f],u||(e.data||(e.data={}),e=e.data),void 0!==r&&(e[i.camelCase(t)]=r),"string"==typeof t?(s=e[t],null==s&&(s=e[i.camelCase(t)])):s=e,s}}function wr(n,t,u){if(i.acceptData(n)){var o,s,h=n.nodeType,f=h?i.cache:n,e=h?n[i.expando]:i.expando;if(f[e]){if(t&&(o=u?f[e]:f[e].data)){for(i.isArray(t)?t=t.concat(i.map(t,i.camelCase)):(t in o)?t=[t]:(t=i.camelCase(t),t=(t in o)?[t]:t.split(" ")),s=t.length;s--;)delete o[t[s]];if(u?!ei(o):!i.isEmptyObject(o))return}(u||(delete f[e].data,ei(f[e])))&&(h?i.cleanData([n],!0):r.deleteExpando||f!=f.window?delete f[e]:f[e]=null)}}}function vt(){return!0}function it(){return!1}function dr(){try{return u.activeElement}catch(n){}}function gr(n){var i=nu.split("|"),t=n.createDocumentFragment();if(t.createElement)while(i.length)t.createElement(i.pop());return t}function f(n,t){var e,u,s=0,r=typeof n.getElementsByTagName!==o?n.getElementsByTagName(t||"*"):typeof n.querySelectorAll!==o?n.querySelectorAll(t||"*"):void 0;if(!r)for(r=[],e=n.childNodes||n;null!=(u=e[s]);s++)!t||i.nodeName(u,t)?r.push(u):i.merge(r,f(u,t));return void 0===t||t&&i.nodeName(n,t)?i.merge([n],r):r}function we(n){oi.test(n.type)&&(n.defaultChecked=n.checked)}function eu(n,t){return i.nodeName(n,"table")&&i.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?n.getElementsByTagName("tbody")[0]||n.appendChild(n.ownerDocument.createElement("tbody")):n}function ou(n){return n.type=(null!==i.find.attr(n,"type"))+"/"+n.type,n}function su(n){var t=ve.exec(n.type);return t?n.type=t[1]:n.removeAttribute("type"),n}function li(n,t){for(var u,r=0;null!=(u=n[r]);r++)i._data(u,"globalEval",!t||i._data(t[r],"globalEval"))}function hu(n,t){if(1===t.nodeType&&i.hasData(n)){var u,f,o,s=i._data(n),r=i._data(t,s),e=s.events;if(e){delete r.handle;r.events={};for(u in e)for(f=0,o=e[u].length;o>f;f++)i.event.add(t,u,e[u][f])}r.data&&(r.data=i.extend({},r.data))}}function be(n,t){var u,e,f;if(1===t.nodeType){if(u=t.nodeName.toLowerCase(),!r.noCloneEvent&&t[i.expando]){f=i._data(t);for(e in f.events)i.removeEvent(t,e,f.handle);t.removeAttribute(i.expando)}"script"===u&&t.text!==n.text?(ou(t).text=n.text,su(t)):"object"===u?(t.parentNode&&(t.outerHTML=n.outerHTML),r.html5Clone&&n.innerHTML&&!i.trim(t.innerHTML)&&(t.innerHTML=n.innerHTML)):"input"===u&&oi.test(n.type)?(t.defaultChecked=t.checked=n.checked,t.value!==n.value&&(t.value=n.value)):"option"===u?t.defaultSelected=t.selected=n.defaultSelected:("input"===u||"textarea"===u)&&(t.defaultValue=n.defaultValue)}}function cu(t,r){var f,u=i(r.createElement(t)).appendTo(r.body),e=n.getDefaultComputedStyle&&(f=n.getDefaultComputedStyle(u[0]))?f.display:i.css(u[0],"display");return u.detach(),e}function yt(n){var r=u,t=ai[n];return t||(t=cu(n,r),"none"!==t&&t||(ot=(ot||i("<iframe frameborder='0' width='0' height='0'/>")).appendTo(r.documentElement),r=(ot[0].contentWindow||ot[0].contentDocument).document,r.write(),r.close(),t=cu(n,r),ot.detach()),ai[n]=t),t}function au(n,t){return{get:function(){var i=n();if(null!=i)return i?void delete this.get:(this.get=t).apply(this,arguments)}}}function pu(n,t){if(t in n)return t;for(var r=t.charAt(0).toUpperCase()+t.slice(1),u=t,i=yu.length;i--;)if(t=yu[i]+r,t in n)return t;return u}function wu(n,t){for(var f,r,o,e=[],u=0,s=n.length;s>u;u++)r=n[u],r.style&&(e[u]=i._data(r,"olddisplay"),f=r.style.display,t?(e[u]||"none"!==f||(r.style.display=""),""===r.style.display&&et(r)&&(e[u]=i._data(r,"olddisplay",yt(r.nodeName)))):(o=et(r),(f&&"none"!==f||!o)&&i._data(r,"olddisplay",o?f:i.css(r,"display"))));for(u=0;s>u;u++)r=n[u],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?e[u]||"":"none"));return n}function bu(n,t,i){var r=no.exec(t);return r?Math.max(0,r[1]-(i||0))+(r[2]||"px"):t}function ku(n,t,r,u,f){for(var e=r===(u?"border":"content")?4:"width"===t?1:0,o=0;4>e;e+=2)"margin"===r&&(o+=i.css(n,r+w[e],!0,f)),u?("content"===r&&(o-=i.css(n,"padding"+w[e],!0,f)),"margin"!==r&&(o-=i.css(n,"border"+w[e]+"Width",!0,f))):(o+=i.css(n,"padding"+w[e],!0,f),"padding"!==r&&(o+=i.css(n,"border"+w[e]+"Width",!0,f)));return o}function du(n,t,u){var o=!0,f="width"===t?n.offsetWidth:n.offsetHeight,e=k(n),s=r.boxSizing&&"border-box"===i.css(n,"boxSizing",!1,e);if(0>=f||null==f){if(f=d(n,t,e),(0>f||null==f)&&(f=n.style[t]),pt.test(f))return f;o=s&&(r.boxSizingReliable()||f===n.style[t]);f=parseFloat(f)||0}return f+ku(n,t,u||(s?"border":"content"),o,e)+"px"}function e(n,t,i,r,u){return new e.prototype.init(n,t,i,r,u)}function nf(){return setTimeout(function(){rt=void 0}),rt=i.now()}function kt(n,t){var r,i={height:n},u=0;for(t=t?1:0;4>u;u+=2-t)r=w[u],i["margin"+r]=i["padding"+r]=n;return t&&(i.opacity=i.width=n),i}function tf(n,t,i){for(var u,f=(st[t]||[]).concat(st["*"]),r=0,e=f.length;e>r;r++)if(u=f[r].call(i,t,n))return u}function fo(n,t,u){var f,a,p,v,s,w,h,b,l=this,y={},o=n.style,c=n.nodeType&&et(n),e=i._data(n,"fxshow");u.queue||(s=i._queueHooks(n,"fx"),null==s.unqueued&&(s.unqueued=0,w=s.empty.fire,s.empty.fire=function(){s.unqueued||w()}),s.unqueued++,l.always(function(){l.always(function(){s.unqueued--;i.queue(n,"fx").length||s.empty.fire()})}));1===n.nodeType&&("height"in t||"width"in t)&&(u.overflow=[o.overflow,o.overflowX,o.overflowY],h=i.css(n,"display"),b="none"===h?i._data(n,"olddisplay")||yt(n.nodeName):h,"inline"===b&&"none"===i.css(n,"float")&&(r.inlineBlockNeedsLayout&&"inline"!==yt(n.nodeName)?o.zoom=1:o.display="inline-block"));u.overflow&&(o.overflow="hidden",r.shrinkWrapBlocks()||l.always(function(){o.overflow=u.overflow[0];o.overflowX=u.overflow[1];o.overflowY=u.overflow[2]}));for(f in t)if(a=t[f],ro.exec(a)){if(delete t[f],p=p||"toggle"===a,a===(c?"hide":"show")){if("show"!==a||!e||void 0===e[f])continue;c=!0}y[f]=e&&e[f]||i.style(n,f)}else h=void 0;if(i.isEmptyObject(y))"inline"===("none"===h?yt(n.nodeName):h)&&(o.display=h);else{e?"hidden"in e&&(c=e.hidden):e=i._data(n,"fxshow",{});p&&(e.hidden=!c);c?i(n).show():l.done(function(){i(n).hide()});l.done(function(){var t;i._removeData(n,"fxshow");for(t in y)i.style(n,t,y[t])});for(f in y)v=tf(c?e[f]:0,f,l),f in e||(e[f]=v.start,c&&(v.end=v.start,v.start="width"===f||"height"===f?1:0))}}function eo(n,t){var r,f,e,u,o;for(r in n)if(f=i.camelCase(r),e=t[f],u=n[r],i.isArray(u)&&(e=u[1],u=n[r]=u[0]),r!==f&&(n[f]=u,delete n[r]),o=i.cssHooks[f],o&&"expand"in o){u=o.expand(u);delete n[f];for(r in u)r in n||(n[r]=u[r],t[r]=e)}else t[f]=e}function rf(n,t,r){var h,e,o=0,l=bt.length,f=i.Deferred().always(function(){delete c.elem}),c=function(){if(e)return!1;for(var s=rt||nf(),t=Math.max(0,u.startTime+u.duration-s),h=t/u.duration||0,i=1-h,r=0,o=u.tweens.length;o>r;r++)u.tweens[r].run(i);return f.notifyWith(n,[u,i,t]),1>i&&o?t:(f.resolveWith(n,[u]),!1)},u=f.promise({elem:n,props:i.extend({},t),opts:i.extend(!0,{specialEasing:{}},r),originalProperties:t,originalOptions:r,startTime:rt||nf(),duration:r.duration,tweens:[],createTween:function(t,r){var f=i.Tween(n,u.opts,t,r,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(f),f},stop:function(t){var i=0,r=t?u.tweens.length:0;if(e)return this;for(e=!0;r>i;i++)u.tweens[i].run(1);return t?f.resolveWith(n,[u,t]):f.rejectWith(n,[u,t]),this}}),s=u.props;for(eo(s,u.opts.specialEasing);l>o;o++)if(h=bt[o].call(u,n,s,u.opts))return h;return i.map(s,tf,u),i.isFunction(u.opts.start)&&u.opts.start.call(n,u),i.fx.timer(i.extend(c,{elem:n,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function af(n){return function(t,r){"string"!=typeof t&&(r=t,t="*");var u,f=0,e=t.toLowerCase().match(h)||[];if(i.isFunction(r))while(u=e[f++])"+"===u.charAt(0)?(u=u.slice(1)||"*",(n[u]=n[u]||[]).unshift(r)):(n[u]=n[u]||[]).push(r)}}function vf(n,t,r,u){function e(s){var h;return f[s]=!0,i.each(n[s]||[],function(n,i){var s=i(t,r,u);return"string"!=typeof s||o||f[s]?o?!(h=s):void 0:(t.dataTypes.unshift(s),e(s),!1)}),h}var f={},o=n===bi;return e(t.dataTypes[0])||!f["*"]&&e("*")}function ki(n,t){var u,r,f=i.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((f[r]?n:u||(u={}))[r]=t[r]);return u&&i.extend(!0,n,u),n}function ao(n,t,i){for(var o,e,u,f,s=n.contents,r=n.dataTypes;"*"===r[0];)r.shift(),void 0===e&&(e=n.mimeType||t.getResponseHeader("Content-Type"));if(e)for(f in s)if(s[f]&&s[f].test(e)){r.unshift(f);break}if(r[0]in i)u=r[0];else{for(f in i){if(!r[0]||n.converters[f+" "+r[0]]){u=f;break}o||(o=f)}u=u||o}if(u)return(u!==r[0]&&r.unshift(u),i[u])}function vo(n,t,i,r){var h,u,f,s,e,o={},c=n.dataTypes.slice();if(c[1])for(f in n.converters)o[f.toLowerCase()]=n.converters[f];for(u=c.shift();u;)if(n.responseFields[u]&&(i[n.responseFields[u]]=t),!e&&r&&n.dataFilter&&(t=n.dataFilter(t,n.dataType)),e=u,u=c.shift())if("*"===u)u=e;else if("*"!==e&&e!==u){if(f=o[e+" "+u]||o["* "+u],!f)for(h in o)if(s=h.split(" "),s[1]===u&&(f=o[e+" "+s[0]]||o["* "+s[0]])){f===!0?f=o[h]:o[h]!==!0&&(u=s[0],c.unshift(s[1]));break}if(f!==!0)if(f&&n.throws)t=f(t);else try{t=f(t)}catch(l){return{state:"parsererror",error:f?l:"No conversion from "+e+" to "+u}}}return{state:"success",data:t}}function di(n,t,r,u){var f;if(i.isArray(t))i.each(t,function(t,i){r||po.test(n)?u(n,i):di(n+"["+("object"==typeof i?t:"")+"]",i,r,u)});else if(r||"object"!==i.type(t))u(n,t);else for(f in t)di(n+"["+f+"]",t[f],r,u)}function pf(){try{return new n.XMLHttpRequest}catch(t){}}function go(){try{return new n.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function wf(n){return i.isWindow(n)?n:9===n.nodeType?n.defaultView||n.parentWindow:!1}var c=[],l=c.slice,ir=c.concat,ii=c.push,rr=c.indexOf,ct={},df=ct.toString,tt=ct.hasOwnProperty,r={},ur="1.11.3",i=function(n,t){return new i.fn.init(n,t)},gf=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ne=/^-ms-/,te=/-([\da-z])/gi,ie=function(n,t){return t.toUpperCase()},p,or,sr,h,fi,lt,o,lr,ar,vr,ot,ai,uf,ef,of,gt,gi,ti,nr,tr,bf,kf;i.fn=i.prototype={jquery:ur,constructor:i,selector:"",length:0,toArray:function(){return l.call(this)},get:function(n){return null!=n?0>n?this[n+this.length]:this[n]:l.call(this)},pushStack:function(n){var t=i.merge(this.constructor(),n);return t.prevObject=this,t.context=this.context,t},each:function(n,t){return i.each(this,n,t)},map:function(n){return this.pushStack(i.map(this,function(t,i){return n.call(t,i,t)}))},slice:function(){return this.pushStack(l.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(n){var i=this.length,t=+n+(0>n?i:0);return this.pushStack(t>=0&&i>t?[this[t]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:ii,sort:c.sort,splice:c.splice};i.extend=i.fn.extend=function(){var r,e,t,f,o,s,n=arguments[0]||{},u=1,c=arguments.length,h=!1;for("boolean"==typeof n&&(h=n,n=arguments[u]||{},u++),"object"==typeof n||i.isFunction(n)||(n={}),u===c&&(n=this,u--);c>u;u++)if(null!=(o=arguments[u]))for(f in o)r=n[f],t=o[f],n!==t&&(h&&t&&(i.isPlainObject(t)||(e=i.isArray(t)))?(e?(e=!1,s=r&&i.isArray(r)?r:[]):s=r&&i.isPlainObject(r)?r:{},n[f]=i.extend(h,s,t)):void 0!==t&&(n[f]=t));return n};i.extend({expando:"jQuery"+(ur+Math.random()).replace(/\D/g,""),isReady:!0,error:function(n){throw new Error(n);},noop:function(){},isFunction:function(n){return"function"===i.type(n)},isArray:Array.isArray||function(n){return"array"===i.type(n)},isWindow:function(n){return null!=n&&n==n.window},isNumeric:function(n){return!i.isArray(n)&&n-parseFloat(n)+1>=0},isEmptyObject:function(n){for(var t in n)return!1;return!0},isPlainObject:function(n){var t;if(!n||"object"!==i.type(n)||n.nodeType||i.isWindow(n))return!1;try{if(n.constructor&&!tt.call(n,"constructor")&&!tt.call(n.constructor.prototype,"isPrototypeOf"))return!1}catch(u){return!1}if(r.ownLast)for(t in n)return tt.call(n,t);for(t in n);return void 0===t||tt.call(n,t)},type:function(n){return null==n?n+"":"object"==typeof n||"function"==typeof n?ct[df.call(n)]||"object":typeof n},globalEval:function(t){t&&i.trim(t)&&(n.execScript||function(t){n.eval.call(n,t)})(t)},camelCase:function(n){return n.replace(ne,"ms-").replace(te,ie)},nodeName:function(n,t){return n.nodeName&&n.nodeName.toLowerCase()===t.toLowerCase()},each:function(n,t,i){var u,r=0,f=n.length,e=ri(n);if(i){if(e){for(;f>r;r++)if(u=t.apply(n[r],i),u===!1)break}else for(r in n)if(u=t.apply(n[r],i),u===!1)break}else if(e){for(;f>r;r++)if(u=t.call(n[r],r,n[r]),u===!1)break}else for(r in n)if(u=t.call(n[r],r,n[r]),u===!1)break;return n},trim:function(n){return null==n?"":(n+"").replace(gf,"")},makeArray:function(n,t){var r=t||[];return null!=n&&(ri(Object(n))?i.merge(r,"string"==typeof n?[n]:n):ii.call(r,n)),r},inArray:function(n,t,i){var r;if(t){if(rr)return rr.call(t,n,i);for(r=t.length,i=i?0>i?Math.max(0,r+i):i:0;r>i;i++)if(i in t&&t[i]===n)return i}return-1},merge:function(n,t){for(var r=+t.length,i=0,u=n.length;r>i;)n[u++]=t[i++];if(r!==r)while(void 0!==t[i])n[u++]=t[i++];return n.length=u,n},grep:function(n,t,i){for(var u,f=[],r=0,e=n.length,o=!i;e>r;r++)u=!t(n[r],r),u!==o&&f.push(n[r]);return f},map:function(n,t,i){var u,r=0,e=n.length,o=ri(n),f=[];if(o)for(;e>r;r++)u=t(n[r],r,i),null!=u&&f.push(u);else for(r in n)u=t(n[r],r,i),null!=u&&f.push(u);return ir.apply([],f)},guid:1,proxy:function(n,t){var u,r,f;return"string"==typeof t&&(f=n[t],t=n,n=f),i.isFunction(n)?(u=l.call(arguments,2),r=function(){return n.apply(t||this,u.concat(l.call(arguments)))},r.guid=n.guid=n.guid||i.guid++,r):void 0},now:function(){return+new Date},support:r});i.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(n,t){ct["[object "+t+"]"]=t.toLowerCase()});p=function(n){function r(n,t,i,r){var p,s,a,c,w,y,d,v,nt,g;if((t?t.ownerDocument||t:h)!==o&&k(t),t=t||o,i=i||[],c=t.nodeType,"string"!=typeof n||!n||1!==c&&9!==c&&11!==c)return i;if(!r&&l){if(11!==c&&(p=hr.exec(n)))if(a=p[1]){if(9===c){if(s=t.getElementById(a),!s||!s.parentNode)return i;if(s.id===a)return i.push(s),i}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(a))&&et(t,s)&&s.id===a)return i.push(s),i}else{if(p[2])return b.apply(i,t.getElementsByTagName(n)),i;if((a=p[3])&&u.getElementsByClassName)return b.apply(i,t.getElementsByClassName(a)),i}if(u.qsa&&(!e||!e.test(n))){if(v=d=f,nt=t,g=1!==c&&n,1===c&&"object"!==t.nodeName.toLowerCase()){for(y=ft(n),(d=t.getAttribute("id"))?v=d.replace(cr,"\\$&"):t.setAttribute("id",v),v="[id='"+v+"'] ",w=y.length;w--;)y[w]=v+vt(y[w]);nt=dt.test(n)&&ti(t.parentNode)||t;g=y.join(",")}if(g)try{return b.apply(i,nt.querySelectorAll(g)),i}catch(tt){}finally{d||t.removeAttribute("id")}}}return oi(n.replace(lt,"$1"),t,i,r)}function gt(){function n(r,u){return i.push(r+" ")>t.cacheLength&&delete n[i.shift()],n[r+" "]=u}var i=[];return n}function c(n){return n[f]=!0,n}function v(n){var t=o.createElement("div");try{return!!n(t)}catch(i){return!1}finally{t.parentNode&&t.parentNode.removeChild(t);t=null}}function ni(n,i){for(var u=n.split("|"),r=n.length;r--;)t.attrHandle[u[r]]=i}function wi(n,t){var i=t&&n,r=i&&1===n.nodeType&&1===t.nodeType&&(~t.sourceIndex||li)-(~n.sourceIndex||li);if(r)return r;if(i)while(i=i.nextSibling)if(i===t)return-1;return n?1:-1}function lr(n){return function(t){var i=t.nodeName.toLowerCase();return"input"===i&&t.type===n}}function ar(n){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===n}}function tt(n){return c(function(t){return t=+t,c(function(i,r){for(var u,f=n([],i.length,t),e=f.length;e--;)i[u=f[e]]&&(i[u]=!(r[u]=i[u]))})})}function ti(n){return n&&"undefined"!=typeof n.getElementsByTagName&&n}function bi(){}function vt(n){for(var t=0,r=n.length,i="";r>t;t++)i+=n[t].value;return i}function ii(n,t,i){var r=t.dir,u=i&&"parentNode"===r,e=ki++;return t.first?function(t,i,f){while(t=t[r])if(1===t.nodeType||u)return n(t,i,f)}:function(t,i,o){var s,h,c=[a,e];if(o){while(t=t[r])if((1===t.nodeType||u)&&n(t,i,o))return!0}else while(t=t[r])if(1===t.nodeType||u){if(h=t[f]||(t[f]={}),(s=h[r])&&s[0]===a&&s[1]===e)return c[2]=s[2];if(h[r]=c,c[2]=n(t,i,o))return!0}}}function ri(n){return n.length>1?function(t,i,r){for(var u=n.length;u--;)if(!n[u](t,i,r))return!1;return!0}:n[0]}function vr(n,t,i){for(var u=0,f=t.length;f>u;u++)r(n,t[u],i);return i}function yt(n,t,i,r,u){for(var e,o=[],f=0,s=n.length,h=null!=t;s>f;f++)(e=n[f])&&(!i||i(e,r,u))&&(o.push(e),h&&t.push(f));return o}function ui(n,t,i,r,u,e){return r&&!r[f]&&(r=ui(r)),u&&!u[f]&&(u=ui(u,e)),c(function(f,e,o,s){var l,c,a,p=[],y=[],w=e.length,k=f||vr(t||"*",o.nodeType?[o]:o,[]),v=!n||!f&&t?k:yt(k,p,n,o,s),h=i?u||(f?n:w||r)?[]:e:v;if(i&&i(v,h,o,s),r)for(l=yt(h,y),r(l,[],o,s),c=l.length;c--;)(a=l[c])&&(h[y[c]]=!(v[y[c]]=a));if(f){if(u||n){if(u){for(l=[],c=h.length;c--;)(a=h[c])&&l.push(v[c]=a);u(null,h=[],l,s)}for(c=h.length;c--;)(a=h[c])&&(l=u?nt(f,a):p[c])>-1&&(f[l]=!(e[l]=a))}}else h=yt(h===e?h.splice(w,h.length):h),u?u(null,e,h,s):b.apply(e,h)})}function fi(n){for(var o,u,r,s=n.length,h=t.relative[n[0].type],c=h||t.relative[" "],i=h?1:0,l=ii(function(n){return n===o},c,!0),a=ii(function(n){return nt(o,n)>-1},c,!0),e=[function(n,t,i){var r=!h&&(i||t!==ht)||((o=t).nodeType?l(n,t,i):a(n,t,i));return o=null,r}];s>i;i++)if(u=t.relative[n[i].type])e=[ii(ri(e),u)];else{if(u=t.filter[n[i].type].apply(null,n[i].matches),u[f]){for(r=++i;s>r;r++)if(t.relative[n[r].type])break;return ui(i>1&&ri(e),i>1&&vt(n.slice(0,i-1).concat({value:" "===n[i-2].type?"*":""})).replace(lt,"$1"),u,r>i&&fi(n.slice(i,r)),s>r&&fi(n=n.slice(r)),s>r&&vt(n))}e.push(u)}return ri(e)}function yr(n,i){var u=i.length>0,f=n.length>0,e=function(e,s,h,c,l){var y,d,w,k=0,v="0",g=e&&[],p=[],nt=ht,tt=e||f&&t.find.TAG("*",l),it=a+=null==nt?1:Math.random()||.1,rt=tt.length;for(l&&(ht=s!==o&&s);v!==rt&&null!=(y=tt[v]);v++){if(f&&y){for(d=0;w=n[d++];)if(w(y,s,h)){c.push(y);break}l&&(a=it)}u&&((y=!w&&y)&&k--,e&&g.push(y))}if(k+=v,u&&v!==k){for(d=0;w=i[d++];)w(g,p,s,h);if(e){if(k>0)while(v--)g[v]||p[v]||(p[v]=gi.call(c));p=yt(p)}b.apply(c,p);l&&!e&&p.length>0&&k+i.length>1&&r.uniqueSort(c)}return l&&(a=it,ht=nt),g};return u?c(e):e}var it,u,t,st,ei,ft,pt,oi,ht,w,rt,k,o,s,l,e,d,ct,et,f="sizzle"+1*new Date,h=n.document,a=0,ki=0,si=gt(),hi=gt(),ci=gt(),wt=function(n,t){return n===t&&(rt=!0),0},li=-2147483648,di={}.hasOwnProperty,g=[],gi=g.pop,nr=g.push,b=g.push,ai=g.slice,nt=function(n,t){for(var i=0,r=n.length;r>i;i++)if(n[i]===t)return i;return-1},bt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",i="[\\x20\\t\\r\\n\\f]",ut="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",vi=ut.replace("w","w#"),yi="\\["+i+"*("+ut+")(?:"+i+"*([*^$|!~]?=)"+i+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+vi+"))|)"+i+"*\\]",kt=":("+ut+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+yi+")*)|.*)\\)|)",tr=new RegExp(i+"+","g"),lt=new RegExp("^"+i+"+|((?:^|[^\\\\])(?:\\\\.)*)"+i+"+$","g"),ir=new RegExp("^"+i+"*,"+i+"*"),rr=new RegExp("^"+i+"*([>+~]|"+i+")"+i+"*"),ur=new RegExp("="+i+"*([^\\]'\"]*?)"+i+"*\\]","g"),fr=new RegExp(kt),er=new RegExp("^"+vi+"$"),at={ID:new RegExp("^#("+ut+")"),CLASS:new RegExp("^\\.("+ut+")"),TAG:new RegExp("^("+ut.replace("w","w*")+")"),ATTR:new RegExp("^"+yi),PSEUDO:new RegExp("^"+kt),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+i+"*(even|odd|(([+-]|)(\\d*)n|)"+i+"*(?:([+-]|)"+i+"*(\\d+)|))"+i+"*\\)|)","i"),bool:new RegExp("^(?:"+bt+")$","i"),needsContext:new RegExp("^"+i+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+i+"*((?:-\\d)?\\d*)"+i+"*\\)|)(?=[^-]|$)","i")},or=/^(?:input|select|textarea|button)$/i,sr=/^h\d$/i,ot=/^[^{]+\{\s*\[native \w/,hr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,dt=/[+~]/,cr=/'|\\/g,y=new RegExp("\\\\([\\da-f]{1,6}"+i+"?|("+i+")|.)","ig"),p=function(n,t,i){var r="0x"+t-65536;return r!==r||i?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},pi=function(){k()};try{b.apply(g=ai.call(h.childNodes),h.childNodes);g[h.childNodes.length].nodeType}catch(pr){b={apply:g.length?function(n,t){nr.apply(n,ai.call(t))}:function(n,t){for(var i=n.length,r=0;n[i++]=t[r++];);n.length=i-1}}}u=r.support={};ei=r.isXML=function(n){var t=n&&(n.ownerDocument||n).documentElement;return t?"HTML"!==t.nodeName:!1};k=r.setDocument=function(n){var a,c,r=n?n.ownerDocument||n:h;return r!==o&&9===r.nodeType&&r.documentElement?(o=r,s=r.documentElement,c=r.defaultView,c&&c!==c.top&&(c.addEventListener?c.addEventListener("unload",pi,!1):c.attachEvent&&c.attachEvent("onunload",pi)),l=!ei(r),u.attributes=v(function(n){return n.className="i",!n.getAttribute("className")}),u.getElementsByTagName=v(function(n){return n.appendChild(r.createComment("")),!n.getElementsByTagName("*").length}),u.getElementsByClassName=ot.test(r.getElementsByClassName),u.getById=v(function(n){return s.appendChild(n).id=f,!r.getElementsByName||!r.getElementsByName(f).length}),u.getById?(t.find.ID=function(n,t){if("undefined"!=typeof t.getElementById&&l){var i=t.getElementById(n);return i&&i.parentNode?[i]:[]}},t.filter.ID=function(n){var t=n.replace(y,p);return function(n){return n.getAttribute("id")===t}}):(delete t.find.ID,t.filter.ID=function(n){var t=n.replace(y,p);return function(n){var i="undefined"!=typeof n.getAttributeNode&&n.getAttributeNode("id");return i&&i.value===t}}),t.find.TAG=u.getElementsByTagName?function(n,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(n):u.qsa?t.querySelectorAll(n):void 0}:function(n,t){var i,r=[],f=0,u=t.getElementsByTagName(n);if("*"===n){while(i=u[f++])1===i.nodeType&&r.push(i);return r}return u},t.find.CLASS=u.getElementsByClassName&&function(n,t){if(l)return t.getElementsByClassName(n)},d=[],e=[],(u.qsa=ot.test(r.querySelectorAll))&&(v(function(n){s.appendChild(n).innerHTML="<a id='"+f+"'><\/a><select id='"+f+"-\f]' msallowcapture=''><option selected=''><\/option><\/select>";n.querySelectorAll("[msallowcapture^='']").length&&e.push("[*^$]="+i+"*(?:''|\"\")");n.querySelectorAll("[selected]").length||e.push("\\["+i+"*(?:value|"+bt+")");n.querySelectorAll("[id~="+f+"-]").length||e.push("~=");n.querySelectorAll(":checked").length||e.push(":checked");n.querySelectorAll("a#"+f+"+*").length||e.push(".#.+[+~]")}),v(function(n){var t=r.createElement("input");t.setAttribute("type","hidden");n.appendChild(t).setAttribute("name","D");n.querySelectorAll("[name=d]").length&&e.push("name"+i+"*[*^$|!~]?=");n.querySelectorAll(":enabled").length||e.push(":enabled",":disabled");n.querySelectorAll("*,:x");e.push(",.*:")})),(u.matchesSelector=ot.test(ct=s.matches||s.webkitMatchesSelector||s.mozMatchesSelector||s.oMatchesSelector||s.msMatchesSelector))&&v(function(n){u.disconnectedMatch=ct.call(n,"div");ct.call(n,"[s!='']:x");d.push("!=",kt)}),e=e.length&&new RegExp(e.join("|")),d=d.length&&new RegExp(d.join("|")),a=ot.test(s.compareDocumentPosition),et=a||ot.test(s.contains)?function(n,t){var r=9===n.nodeType?n.documentElement:n,i=t&&t.parentNode;return n===i||!(!i||1!==i.nodeType||!(r.contains?r.contains(i):n.compareDocumentPosition&&16&n.compareDocumentPosition(i)))}:function(n,t){if(t)while(t=t.parentNode)if(t===n)return!0;return!1},wt=a?function(n,t){if(n===t)return rt=!0,0;var i=!n.compareDocumentPosition-!t.compareDocumentPosition;return i?i:(i=(n.ownerDocument||n)===(t.ownerDocument||t)?n.compareDocumentPosition(t):1,1&i||!u.sortDetached&&t.compareDocumentPosition(n)===i?n===r||n.ownerDocument===h&&et(h,n)?-1:t===r||t.ownerDocument===h&&et(h,t)?1:w?nt(w,n)-nt(w,t):0:4&i?-1:1)}:function(n,t){if(n===t)return rt=!0,0;var i,u=0,o=n.parentNode,s=t.parentNode,f=[n],e=[t];if(!o||!s)return n===r?-1:t===r?1:o?-1:s?1:w?nt(w,n)-nt(w,t):0;if(o===s)return wi(n,t);for(i=n;i=i.parentNode;)f.unshift(i);for(i=t;i=i.parentNode;)e.unshift(i);while(f[u]===e[u])u++;return u?wi(f[u],e[u]):f[u]===h?-1:e[u]===h?1:0},r):o};r.matches=function(n,t){return r(n,null,null,t)};r.matchesSelector=function(n,t){if((n.ownerDocument||n)!==o&&k(n),t=t.replace(ur,"='$1']"),!(!u.matchesSelector||!l||d&&d.test(t)||e&&e.test(t)))try{var i=ct.call(n,t);if(i||u.disconnectedMatch||n.document&&11!==n.document.nodeType)return i}catch(f){}return r(t,o,null,[n]).length>0};r.contains=function(n,t){return(n.ownerDocument||n)!==o&&k(n),et(n,t)};r.attr=function(n,i){(n.ownerDocument||n)!==o&&k(n);var f=t.attrHandle[i.toLowerCase()],r=f&&di.call(t.attrHandle,i.toLowerCase())?f(n,i,!l):void 0;return void 0!==r?r:u.attributes||!l?n.getAttribute(i):(r=n.getAttributeNode(i))&&r.specified?r.value:null};r.error=function(n){throw new Error("Syntax error, unrecognized expression: "+n);};r.uniqueSort=function(n){var r,f=[],t=0,i=0;if(rt=!u.detectDuplicates,w=!u.sortStable&&n.slice(0),n.sort(wt),rt){while(r=n[i++])r===n[i]&&(t=f.push(i));while(t--)n.splice(f[t],1)}return w=null,n};st=r.getText=function(n){var r,i="",u=0,t=n.nodeType;if(t){if(1===t||9===t||11===t){if("string"==typeof n.textContent)return n.textContent;for(n=n.firstChild;n;n=n.nextSibling)i+=st(n)}else if(3===t||4===t)return n.nodeValue}else while(r=n[u++])i+=st(r);return i};t=r.selectors={cacheLength:50,createPseudo:c,match:at,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(n){return n[1]=n[1].replace(y,p),n[3]=(n[3]||n[4]||n[5]||"").replace(y,p),"~="===n[2]&&(n[3]=" "+n[3]+" "),n.slice(0,4)},CHILD:function(n){return n[1]=n[1].toLowerCase(),"nth"===n[1].slice(0,3)?(n[3]||r.error(n[0]),n[4]=+(n[4]?n[5]+(n[6]||1):2*("even"===n[3]||"odd"===n[3])),n[5]=+(n[7]+n[8]||"odd"===n[3])):n[3]&&r.error(n[0]),n},PSEUDO:function(n){var i,t=!n[6]&&n[2];return at.CHILD.test(n[0])?null:(n[3]?n[2]=n[4]||n[5]||"":t&&fr.test(t)&&(i=ft(t,!0))&&(i=t.indexOf(")",t.length-i)-t.length)&&(n[0]=n[0].slice(0,i),n[2]=t.slice(0,i)),n.slice(0,3))}},filter:{TAG:function(n){var t=n.replace(y,p).toLowerCase();return"*"===n?function(){return!0}:function(n){return n.nodeName&&n.nodeName.toLowerCase()===t}},CLASS:function(n){var t=si[n+" "];return t||(t=new RegExp("(^|"+i+")"+n+"("+i+"|$)"))&&si(n,function(n){return t.test("string"==typeof n.className&&n.className||"undefined"!=typeof n.getAttribute&&n.getAttribute("class")||"")})},ATTR:function(n,t,i){return function(u){var f=r.attr(u,n);return null==f?"!="===t:t?(f+="","="===t?f===i:"!="===t?f!==i:"^="===t?i&&0===f.indexOf(i):"*="===t?i&&f.indexOf(i)>-1:"$="===t?i&&f.slice(-i.length)===i:"~="===t?(" "+f.replace(tr," ")+" ").indexOf(i)>-1:"|="===t?f===i||f.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(n,t,i,r,u){var s="nth"!==n.slice(0,3),o="last"!==n.slice(-4),e="of-type"===t;return 1===r&&0===u?function(n){return!!n.parentNode}:function(t,i,h){var v,k,c,l,y,w,b=s!==o?"nextSibling":"previousSibling",p=t.parentNode,g=e&&t.nodeName.toLowerCase(),d=!h&&!e;if(p){if(s){while(b){for(c=t;c=c[b];)if(e?c.nodeName.toLowerCase()===g:1===c.nodeType)return!1;w=b="only"===n&&!w&&"nextSibling"}return!0}if(w=[o?p.firstChild:p.lastChild],o&&d){for(k=p[f]||(p[f]={}),v=k[n]||[],y=v[0]===a&&v[1],l=v[0]===a&&v[2],c=y&&p.childNodes[y];c=++y&&c&&c[b]||(l=y=0)||w.pop();)if(1===c.nodeType&&++l&&c===t){k[n]=[a,y,l];break}}else if(d&&(v=(t[f]||(t[f]={}))[n])&&v[0]===a)l=v[1];else while(c=++y&&c&&c[b]||(l=y=0)||w.pop())if((e?c.nodeName.toLowerCase()===g:1===c.nodeType)&&++l&&(d&&((c[f]||(c[f]={}))[n]=[a,l]),c===t))break;return l-=u,l===r||l%r==0&&l/r>=0}}},PSEUDO:function(n,i){var e,u=t.pseudos[n]||t.setFilters[n.toLowerCase()]||r.error("unsupported pseudo: "+n);return u[f]?u(i):u.length>1?(e=[n,n,"",i],t.setFilters.hasOwnProperty(n.toLowerCase())?c(function(n,t){for(var r,f=u(n,i),e=f.length;e--;)r=nt(n,f[e]),n[r]=!(t[r]=f[e])}):function(n){return u(n,0,e)}):u}},pseudos:{not:c(function(n){var t=[],r=[],i=pt(n.replace(lt,"$1"));return i[f]?c(function(n,t,r,u){for(var e,o=i(n,null,u,[]),f=n.length;f--;)(e=o[f])&&(n[f]=!(t[f]=e))}):function(n,u,f){return t[0]=n,i(t,null,f,r),t[0]=null,!r.pop()}}),has:c(function(n){return function(t){return r(n,t).length>0}}),contains:c(function(n){return n=n.replace(y,p),function(t){return(t.textContent||t.innerText||st(t)).indexOf(n)>-1}}),lang:c(function(n){return er.test(n||"")||r.error("unsupported lang: "+n),n=n.replace(y,p).toLowerCase(),function(t){var i;do if(i=l?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return i=i.toLowerCase(),i===n||0===i.indexOf(n+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var i=n.location&&n.location.hash;return i&&i.slice(1)===t.id},root:function(n){return n===s},focus:function(n){return n===o.activeElement&&(!o.hasFocus||o.hasFocus())&&!!(n.type||n.href||~n.tabIndex)},enabled:function(n){return n.disabled===!1},disabled:function(n){return n.disabled===!0},checked:function(n){var t=n.nodeName.toLowerCase();return"input"===t&&!!n.checked||"option"===t&&!!n.selected},selected:function(n){return n.parentNode&&n.parentNode.selectedIndex,n.selected===!0},empty:function(n){for(n=n.firstChild;n;n=n.nextSibling)if(n.nodeType<6)return!1;return!0},parent:function(n){return!t.pseudos.empty(n)},header:function(n){return sr.test(n.nodeName)},input:function(n){return or.test(n.nodeName)},button:function(n){var t=n.nodeName.toLowerCase();return"input"===t&&"button"===n.type||"button"===t},text:function(n){var t;return"input"===n.nodeName.toLowerCase()&&"text"===n.type&&(null==(t=n.getAttribute("type"))||"text"===t.toLowerCase())},first:tt(function(){return[0]}),last:tt(function(n,t){return[t-1]}),eq:tt(function(n,t,i){return[0>i?i+t:i]}),even:tt(function(n,t){for(var i=0;t>i;i+=2)n.push(i);return n}),odd:tt(function(n,t){for(var i=1;t>i;i+=2)n.push(i);return n}),lt:tt(function(n,t,i){for(var r=0>i?i+t:i;--r>=0;)n.push(r);return n}),gt:tt(function(n,t,i){for(var r=0>i?i+t:i;++r<t;)n.push(r);return n})}};t.pseudos.nth=t.pseudos.eq;for(it in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})t.pseudos[it]=lr(it);for(it in{submit:!0,reset:!0})t.pseudos[it]=ar(it);return bi.prototype=t.filters=t.pseudos,t.setFilters=new bi,ft=r.tokenize=function(n,i){var e,f,s,o,u,h,c,l=hi[n+" "];if(l)return i?0:l.slice(0);for(u=n,h=[],c=t.preFilter;u;){(!e||(f=ir.exec(u)))&&(f&&(u=u.slice(f[0].length)||u),h.push(s=[]));e=!1;(f=rr.exec(u))&&(e=f.shift(),s.push({value:e,type:f[0].replace(lt," ")}),u=u.slice(e.length));for(o in t.filter)(f=at[o].exec(u))&&(!c[o]||(f=c[o](f)))&&(e=f.shift(),s.push({value:e,type:o,matches:f}),u=u.slice(e.length));if(!e)break}return i?u.length:u?r.error(n):hi(n,h).slice(0)},pt=r.compile=function(n,t){var r,u=[],e=[],i=ci[n+" "];if(!i){for(t||(t=ft(n)),r=t.length;r--;)i=fi(t[r]),i[f]?u.push(i):e.push(i);i=ci(n,yr(e,u));i.selector=n}return i},oi=r.select=function(n,i,r,f){var s,e,o,a,v,c="function"==typeof n&&n,h=!f&&ft(n=c.selector||n);if(r=r||[],1===h.length){if(e=h[0]=h[0].slice(0),e.length>2&&"ID"===(o=e[0]).type&&u.getById&&9===i.nodeType&&l&&t.relative[e[1].type]){if(i=(t.find.ID(o.matches[0].replace(y,p),i)||[])[0],!i)return r;c&&(i=i.parentNode);n=n.slice(e.shift().value.length)}for(s=at.needsContext.test(n)?0:e.length;s--;){if(o=e[s],t.relative[a=o.type])break;if((v=t.find[a])&&(f=v(o.matches[0].replace(y,p),dt.test(e[0].type)&&ti(i.parentNode)||i))){if(e.splice(s,1),n=f.length&&vt(e),!n)return b.apply(r,f),r;break}}}return(c||pt(n,h))(f,i,!l,r,dt.test(n)&&ti(i.parentNode)||i),r},u.sortStable=f.split("").sort(wt).join("")===f,u.detectDuplicates=!!rt,k(),u.sortDetached=v(function(n){return 1&n.compareDocumentPosition(o.createElement("div"))}),v(function(n){return n.innerHTML="<a href='#'><\/a>","#"===n.firstChild.getAttribute("href")})||ni("type|href|height|width",function(n,t,i){if(!i)return n.getAttribute(t,"type"===t.toLowerCase()?1:2)}),u.attributes&&v(function(n){return n.innerHTML="<input/>",n.firstChild.setAttribute("value",""),""===n.firstChild.getAttribute("value")})||ni("value",function(n,t,i){if(!i&&"input"===n.nodeName.toLowerCase())return n.defaultValue}),v(function(n){return null==n.getAttribute("disabled")})||ni(bt,function(n,t,i){var r;if(!i)return n[t]===!0?t.toLowerCase():(r=n.getAttributeNode(t))&&r.specified?r.value:null}),r}(n);i.find=p;i.expr=p.selectors;i.expr[":"]=i.expr.pseudos;i.unique=p.uniqueSort;i.text=p.getText;i.isXMLDoc=p.isXML;i.contains=p.contains;var fr=i.expr.match.needsContext,er=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,re=/^.[^:#\[\.,]*$/;i.filter=function(n,t,r){var u=t[0];return r&&(n=":not("+n+")"),1===t.length&&1===u.nodeType?i.find.matchesSelector(u,n)?[u]:[]:i.find.matches(n,i.grep(t,function(n){return 1===n.nodeType}))};i.fn.extend({find:function(n){var t,r=[],u=this,f=u.length;if("string"!=typeof n)return this.pushStack(i(n).filter(function(){for(t=0;f>t;t++)if(i.contains(u[t],this))return!0}));for(t=0;f>t;t++)i.find(n,u[t],r);return r=this.pushStack(f>1?i.unique(r):r),r.selector=this.selector?this.selector+" "+n:n,r},filter:function(n){return this.pushStack(ui(this,n||[],!1))},not:function(n){return this.pushStack(ui(this,n||[],!0))},is:function(n){return!!ui(this,"string"==typeof n&&fr.test(n)?i(n):n||[],!1).length}});var ft,u=n.document,ue=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,fe=i.fn.init=function(n,t){var r,f;if(!n)return this;if("string"==typeof n){if(r="<"===n.charAt(0)&&">"===n.charAt(n.length-1)&&n.length>=3?[null,n,null]:ue.exec(n),!r||!r[1]&&t)return!t||t.jquery?(t||ft).find(n):this.constructor(t).find(n);if(r[1]){if(t=t instanceof i?t[0]:t,i.merge(this,i.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:u,!0)),er.test(r[1])&&i.isPlainObject(t))for(r in t)i.isFunction(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}if(f=u.getElementById(r[2]),f&&f.parentNode){if(f.id!==r[2])return ft.find(n);this.length=1;this[0]=f}return this.context=u,this.selector=n,this}return n.nodeType?(this.context=this[0]=n,this.length=1,this):i.isFunction(n)?"undefined"!=typeof ft.ready?ft.ready(n):n(i):(void 0!==n.selector&&(this.selector=n.selector,this.context=n.context),i.makeArray(n,this))};fe.prototype=i.fn;ft=i(u);or=/^(?:parents|prev(?:Until|All))/;sr={children:!0,contents:!0,next:!0,prev:!0};i.extend({dir:function(n,t,r){for(var f=[],u=n[t];u&&9!==u.nodeType&&(void 0===r||1!==u.nodeType||!i(u).is(r));)1===u.nodeType&&f.push(u),u=u[t];return f},sibling:function(n,t){for(var i=[];n;n=n.nextSibling)1===n.nodeType&&n!==t&&i.push(n);return i}});i.fn.extend({has:function(n){var t,r=i(n,this),u=r.length;return this.filter(function(){for(t=0;u>t;t++)if(i.contains(this,r[t]))return!0})},closest:function(n,t){for(var r,f=0,o=this.length,u=[],e=fr.test(n)||"string"!=typeof n?i(n,t||this.context):0;o>f;f++)for(r=this[f];r&&r!==t;r=r.parentNode)if(r.nodeType<11&&(e?e.index(r)>-1:1===r.nodeType&&i.find.matchesSelector(r,n))){u.push(r);break}return this.pushStack(u.length>1?i.unique(u):u)},index:function(n){return n?"string"==typeof n?i.inArray(this[0],i(n)):i.inArray(n.jquery?n[0]:n,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(n,t){return this.pushStack(i.unique(i.merge(this.get(),i(n,t))))},addBack:function(n){return this.add(null==n?this.prevObject:this.prevObject.filter(n))}});i.each({parent:function(n){var t=n.parentNode;return t&&11!==t.nodeType?t:null},parents:function(n){return i.dir(n,"parentNode")},parentsUntil:function(n,t,r){return i.dir(n,"parentNode",r)},next:function(n){return hr(n,"nextSibling")},prev:function(n){return hr(n,"previousSibling")},nextAll:function(n){return i.dir(n,"nextSibling")},prevAll:function(n){return i.dir(n,"previousSibling")},nextUntil:function(n,t,r){return i.dir(n,"nextSibling",r)},prevUntil:function(n,t,r){return i.dir(n,"previousSibling",r)},siblings:function(n){return i.sibling((n.parentNode||{}).firstChild,n)},children:function(n){return i.sibling(n.firstChild)},contents:function(n){return i.nodeName(n,"iframe")?n.contentDocument||n.contentWindow.document:i.merge([],n.childNodes)}},function(n,t){i.fn[n]=function(r,u){var f=i.map(this,t,r);return"Until"!==n.slice(-5)&&(u=r),u&&"string"==typeof u&&(f=i.filter(u,f)),this.length>1&&(sr[n]||(f=i.unique(f)),or.test(n)&&(f=f.reverse())),this.pushStack(f)}});h=/\S+/g;fi={};i.Callbacks=function(n){n="string"==typeof n?fi[n]||ee(n):i.extend({},n);var o,u,h,f,e,c,t=[],r=!n.once&&[],l=function(i){for(u=n.memory&&i,h=!0,e=c||0,c=0,f=t.length,o=!0;t&&f>e;e++)if(t[e].apply(i[0],i[1])===!1&&n.stopOnFalse){u=!1;break}o=!1;t&&(r?r.length&&l(r.shift()):u?t=[]:s.disable())},s={add:function(){if(t){var r=t.length;!function e(r){i.each(r,function(r,u){var f=i.type(u);"function"===f?n.unique&&s.has(u)||t.push(u):u&&u.length&&"string"!==f&&e(u)})}(arguments);o?f=t.length:u&&(c=r,l(u))}return this},remove:function(){return t&&i.each(arguments,function(n,r){for(var u;(u=i.inArray(r,t,u))>-1;)t.splice(u,1),o&&(f>=u&&f--,e>=u&&e--)}),this},has:function(n){return n?i.inArray(n,t)>-1:!(!t||!t.length)},empty:function(){return t=[],f=0,this},disable:function(){return t=r=u=void 0,this},disabled:function(){return!t},lock:function(){return r=void 0,u||s.disable(),this},locked:function(){return!r},fireWith:function(n,i){return!t||h&&!r||(i=i||[],i=[n,i.slice?i.slice():i],o?r.push(i):l(i)),this},fire:function(){return s.fireWith(this,arguments),this},fired:function(){return!!h}};return s};i.extend({Deferred:function(n){var u=[["resolve","done",i.Callbacks("once memory"),"resolved"],["reject","fail",i.Callbacks("once memory"),"rejected"],["notify","progress",i.Callbacks("memory")]],f="pending",r={state:function(){return f},always:function(){return t.done(arguments).fail(arguments),this},then:function(){var n=arguments;return i.Deferred(function(f){i.each(u,function(u,e){var o=i.isFunction(n[u])&&n[u];t[e[1]](function(){var n=o&&o.apply(this,arguments);n&&i.isFunction(n.promise)?n.promise().done(f.resolve).fail(f.reject).progress(f.notify):f[e[0]+"With"](this===r?f.promise():this,o?[n]:arguments)})});n=null}).promise()},promise:function(n){return null!=n?i.extend(n,r):r}},t={};return r.pipe=r.then,i.each(u,function(n,i){var e=i[2],o=i[3];r[i[1]]=e.add;o&&e.add(function(){f=o},u[1^n][2].disable,u[2][2].lock);t[i[0]]=function(){return t[i[0]+"With"](this===t?r:this,arguments),this};t[i[0]+"With"]=e.fireWith}),r.promise(t),n&&n.call(t,t),t},when:function(n){var t=0,u=l.call(arguments),r=u.length,e=1!==r||n&&i.isFunction(n.promise)?r:0,f=1===e?n:i.Deferred(),h=function(n,t,i){return function(r){t[n]=this;i[n]=arguments.length>1?l.call(arguments):r;i===o?f.notifyWith(t,i):--e||f.resolveWith(t,i)}},o,c,s;if(r>1)for(o=new Array(r),c=new Array(r),s=new Array(r);r>t;t++)u[t]&&i.isFunction(u[t].promise)?u[t].promise().done(h(t,s,u)).fail(f.reject).progress(h(t,c,o)):--e;return e||f.resolveWith(s,u),f.promise()}});i.fn.ready=function(n){return i.ready.promise().done(n),this};i.extend({isReady:!1,readyWait:1,holdReady:function(n){n?i.readyWait++:i.ready(!0)},ready:function(n){if(n===!0?!--i.readyWait:!i.isReady){if(!u.body)return setTimeout(i.ready);i.isReady=!0;n!==!0&&--i.readyWait>0||(lt.resolveWith(u,[i]),i.fn.triggerHandler&&(i(u).triggerHandler("ready"),i(u).off("ready")))}}});i.ready.promise=function(t){if(!lt)if(lt=i.Deferred(),"complete"===u.readyState)setTimeout(i.ready);else if(u.addEventListener)u.addEventListener("DOMContentLoaded",a,!1),n.addEventListener("load",a,!1);else{u.attachEvent("onreadystatechange",a);n.attachEvent("onload",a);var r=!1;try{r=null==n.frameElement&&u.documentElement}catch(e){}r&&r.doScroll&&!function f(){if(!i.isReady){try{r.doScroll("left")}catch(n){return setTimeout(f,50)}cr();i.ready()}}()}return lt.promise(t)};o="undefined";for(lr in i(r))break;r.ownLast="0"!==lr;r.inlineBlockNeedsLayout=!1;i(function(){var f,t,n,i;n=u.getElementsByTagName("body")[0];n&&n.style&&(t=u.createElement("div"),i=u.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(t),typeof t.style.zoom!==o&&(t.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",r.inlineBlockNeedsLayout=f=3===t.offsetWidth,f&&(n.style.zoom=1)),n.removeChild(i))}),function(){var n=u.createElement("div");if(null==r.deleteExpando){r.deleteExpando=!0;try{delete n.test}catch(t){r.deleteExpando=!1}}n=null}();i.acceptData=function(n){var t=i.noData[(n.nodeName+" ").toLowerCase()],r=+n.nodeType||1;return 1!==r&&9!==r?!1:!t||t!==!0&&n.getAttribute("classid")===t};ar=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/;vr=/([A-Z])/g;i.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(n){return n=n.nodeType?i.cache[n[i.expando]]:n[i.expando],!!n&&!ei(n)},data:function(n,t,i){return pr(n,t,i)},removeData:function(n,t){return wr(n,t)},_data:function(n,t,i){return pr(n,t,i,!0)},_removeData:function(n,t){return wr(n,t,!0)}});i.fn.extend({data:function(n,t){var f,u,e,r=this[0],o=r&&r.attributes;if(void 0===n){if(this.length&&(e=i.data(r),1===r.nodeType&&!i._data(r,"parsedAttrs"))){for(f=o.length;f--;)o[f]&&(u=o[f].name,0===u.indexOf("data-")&&(u=i.camelCase(u.slice(5)),yr(r,u,e[u])));i._data(r,"parsedAttrs",!0)}return e}return"object"==typeof n?this.each(function(){i.data(this,n)}):arguments.length>1?this.each(function(){i.data(this,n,t)}):r?yr(r,n,i.data(r,n)):void 0},removeData:function(n){return this.each(function(){i.removeData(this,n)})}});i.extend({queue:function(n,t,r){var u;if(n)return(t=(t||"fx")+"queue",u=i._data(n,t),r&&(!u||i.isArray(r)?u=i._data(n,t,i.makeArray(r)):u.push(r)),u||[])},dequeue:function(n,t){t=t||"fx";var r=i.queue(n,t),e=r.length,u=r.shift(),f=i._queueHooks(n,t),o=function(){i.dequeue(n,t)};"inprogress"===u&&(u=r.shift(),e--);u&&("fx"===t&&r.unshift("inprogress"),delete f.stop,u.call(n,o,f));!e&&f&&f.empty.fire()},_queueHooks:function(n,t){var r=t+"queueHooks";return i._data(n,r)||i._data(n,r,{empty:i.Callbacks("once memory").add(function(){i._removeData(n,t+"queue");i._removeData(n,r)})})}});i.fn.extend({queue:function(n,t){var r=2;return"string"!=typeof n&&(t=n,n="fx",r--),arguments.length<r?i.queue(this[0],n):void 0===t?this:this.each(function(){var r=i.queue(this,n,t);i._queueHooks(this,n);"fx"===n&&"inprogress"!==r[0]&&i.dequeue(this,n)})},dequeue:function(n){return this.each(function(){i.dequeue(this,n)})},clearQueue:function(n){return this.queue(n||"fx",[])},promise:function(n,t){var r,f=1,e=i.Deferred(),u=this,o=this.length,s=function(){--f||e.resolveWith(u,[u])};for("string"!=typeof n&&(t=n,n=void 0),n=n||"fx";o--;)r=i._data(u[o],n+"queueHooks"),r&&r.empty&&(f++,r.empty.add(s));return s(),e.promise(t)}});var at=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,w=["Top","Right","Bottom","Left"],et=function(n,t){return n=t||n,"none"===i.css(n,"display")||!i.contains(n.ownerDocument,n)},b=i.access=function(n,t,r,u,f,e,o){var s=0,c=n.length,h=null==r;if("object"===i.type(r)){f=!0;for(s in r)i.access(n,t,s,r[s],!0,e,o)}else if(void 0!==u&&(f=!0,i.isFunction(u)||(o=!0),h&&(o?(t.call(n,u),t=null):(h=t,t=function(n,t,r){return h.call(i(n),r)})),t))for(;c>s;s++)t(n[s],r,o?u:u.call(n[s],s,t(n[s],r)));return f?n:h?t.call(n):c?t(n[0],r):e},oi=/^(?:checkbox|radio)$/i;!function(){var t=u.createElement("input"),n=u.createElement("div"),i=u.createDocumentFragment();if(n.innerHTML="  <link/><table><\/table><a href='/a'>a<\/a><input type='checkbox'/>",r.leadingWhitespace=3===n.firstChild.nodeType,r.tbody=!n.getElementsByTagName("tbody").length,r.htmlSerialize=!!n.getElementsByTagName("link").length,r.html5Clone="<:nav><\/:nav>"!==u.createElement("nav").cloneNode(!0).outerHTML,t.type="checkbox",t.checked=!0,i.appendChild(t),r.appendChecked=t.checked,n.innerHTML="<textarea>x<\/textarea>",r.noCloneChecked=!!n.cloneNode(!0).lastChild.defaultValue,i.appendChild(n),n.innerHTML="<input type='radio' checked='checked' name='t'/>",r.checkClone=n.cloneNode(!0).cloneNode(!0).lastChild.checked,r.noCloneEvent=!0,n.attachEvent&&(n.attachEvent("onclick",function(){r.noCloneEvent=!1}),n.cloneNode(!0).click()),null==r.deleteExpando){r.deleteExpando=!0;try{delete n.test}catch(f){r.deleteExpando=!1}}}(),function(){var t,i,f=u.createElement("div");for(t in{submit:!0,change:!0,focusin:!0})i="on"+t,(r[t+"Bubbles"]=i in n)||(f.setAttribute(i,"t"),r[t+"Bubbles"]=f.attributes[i].expando===!1);f=null}();var si=/^(?:input|select|textarea)$/i,oe=/^key/,se=/^(?:mouse|pointer|contextmenu)|click/,br=/^(?:focusinfocus|focusoutblur)$/,kr=/^([^.]*)(?:\.(.+)|)$/;i.event={global:{},add:function(n,t,r,u,f){var w,y,b,p,s,c,l,a,e,k,d,v=i._data(n);if(v){for(r.handler&&(p=r,r=p.handler,f=p.selector),r.guid||(r.guid=i.guid++),(y=v.events)||(y=v.events={}),(c=v.handle)||(c=v.handle=function(n){if(typeof i!==o&&(!n||i.event.triggered!==n.type))return i.event.dispatch.apply(c.elem,arguments)},c.elem=n),t=(t||"").match(h)||[""],b=t.length;b--;)w=kr.exec(t[b])||[],e=d=w[1],k=(w[2]||"").split(".").sort(),e&&(s=i.event.special[e]||{},e=(f?s.delegateType:s.bindType)||e,s=i.event.special[e]||{},l=i.extend({type:e,origType:d,data:u,handler:r,guid:r.guid,selector:f,needsContext:f&&i.expr.match.needsContext.test(f),namespace:k.join(".")},p),(a=y[e])||(a=y[e]=[],a.delegateCount=0,s.setup&&s.setup.call(n,u,k,c)!==!1||(n.addEventListener?n.addEventListener(e,c,!1):n.attachEvent&&n.attachEvent("on"+e,c))),s.add&&(s.add.call(n,l),l.handler.guid||(l.handler.guid=r.guid)),f?a.splice(a.delegateCount++,0,l):a.push(l),i.event.global[e]=!0);n=null}},remove:function(n,t,r,u,f){var y,o,s,b,p,a,c,l,e,w,k,v=i.hasData(n)&&i._data(n);if(v&&(a=v.events)){for(t=(t||"").match(h)||[""],p=t.length;p--;)if(s=kr.exec(t[p])||[],e=k=s[1],w=(s[2]||"").split(".").sort(),e){for(c=i.event.special[e]||{},e=(u?c.delegateType:c.bindType)||e,l=a[e]||[],s=s[2]&&new RegExp("(^|\\.)"+w.join("\\.(?:.*\\.|)")+"(\\.|$)"),b=y=l.length;y--;)o=l[y],!f&&k!==o.origType||r&&r.guid!==o.guid||s&&!s.test(o.namespace)||u&&u!==o.selector&&("**"!==u||!o.selector)||(l.splice(y,1),o.selector&&l.delegateCount--,c.remove&&c.remove.call(n,o));b&&!l.length&&(c.teardown&&c.teardown.call(n,w,v.handle)!==!1||i.removeEvent(n,e,v.handle),delete a[e])}else for(e in a)i.event.remove(n,e+t[p],r,u,!0);i.isEmptyObject(a)&&(delete v.handle,i._removeData(n,"events"))}},trigger:function(t,r,f,e){var l,a,o,p,c,h,w,y=[f||u],s=tt.call(t,"type")?t.type:t,v=tt.call(t,"namespace")?t.namespace.split("."):[];if(o=h=f=f||u,3!==f.nodeType&&8!==f.nodeType&&!br.test(s+i.event.triggered)&&(s.indexOf(".")>=0&&(v=s.split("."),s=v.shift(),v.sort()),a=s.indexOf(":")<0&&"on"+s,t=t[i.expando]?t:new i.Event(s,"object"==typeof t&&t),t.isTrigger=e?2:3,t.namespace=v.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=f),r=null==r?[t]:i.makeArray(r,[t]),c=i.event.special[s]||{},e||!c.trigger||c.trigger.apply(f,r)!==!1)){if(!e&&!c.noBubble&&!i.isWindow(f)){for(p=c.delegateType||s,br.test(p+s)||(o=o.parentNode);o;o=o.parentNode)y.push(o),h=o;h===(f.ownerDocument||u)&&y.push(h.defaultView||h.parentWindow||n)}for(w=0;(o=y[w++])&&!t.isPropagationStopped();)t.type=w>1?p:c.bindType||s,l=(i._data(o,"events")||{})[t.type]&&i._data(o,"handle"),l&&l.apply(o,r),l=a&&o[a],l&&l.apply&&i.acceptData(o)&&(t.result=l.apply(o,r),t.result===!1&&t.preventDefault());if(t.type=s,!e&&!t.isDefaultPrevented()&&(!c._default||c._default.apply(y.pop(),r)===!1)&&i.acceptData(f)&&a&&f[s]&&!i.isWindow(f)){h=f[a];h&&(f[a]=null);i.event.triggered=s;try{f[s]()}catch(b){}i.event.triggered=void 0;h&&(f[a]=h)}return t.result}},dispatch:function(n){n=i.event.fix(n);var e,f,t,r,o,s=[],h=l.call(arguments),c=(i._data(this,"events")||{})[n.type]||[],u=i.event.special[n.type]||{};if(h[0]=n,n.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,n)!==!1){for(s=i.event.handlers.call(this,n,c),e=0;(r=s[e++])&&!n.isPropagationStopped();)for(n.currentTarget=r.elem,o=0;(t=r.handlers[o++])&&!n.isImmediatePropagationStopped();)(!n.namespace_re||n.namespace_re.test(t.namespace))&&(n.handleObj=t,n.data=t.data,f=((i.event.special[t.origType]||{}).handle||t.handler).apply(r.elem,h),void 0!==f&&(n.result=f)===!1&&(n.preventDefault(),n.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,n),n.result}},handlers:function(n,t){var f,e,u,o,h=[],s=t.delegateCount,r=n.target;if(s&&r.nodeType&&(!n.button||"click"!==n.type))for(;r!=this;r=r.parentNode||this)if(1===r.nodeType&&(r.disabled!==!0||"click"!==n.type)){for(u=[],o=0;s>o;o++)e=t[o],f=e.selector+" ",void 0===u[f]&&(u[f]=e.needsContext?i(f,this).index(r)>=0:i.find(f,this,null,[r]).length),u[f]&&u.push(e);u.length&&h.push({elem:r,handlers:u})}return s<t.length&&h.push({elem:this,handlers:t.slice(s)}),h},fix:function(n){if(n[i.expando])return n;var e,o,s,r=n.type,f=n,t=this.fixHooks[r];for(t||(this.fixHooks[r]=t=se.test(r)?this.mouseHooks:oe.test(r)?this.keyHooks:{}),s=t.props?this.props.concat(t.props):this.props,n=new i.Event(f),e=s.length;e--;)o=s[e],n[o]=f[o];return n.target||(n.target=f.srcElement||u),3===n.target.nodeType&&(n.target=n.target.parentNode),n.metaKey=!!n.metaKey,t.filter?t.filter(n,f):n},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(n,t){return null==n.which&&(n.which=null!=t.charCode?t.charCode:t.keyCode),n}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(n,t){var i,e,r,f=t.button,o=t.fromElement;return null==n.pageX&&null!=t.clientX&&(e=n.target.ownerDocument||u,r=e.documentElement,i=e.body,n.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),n.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),!n.relatedTarget&&o&&(n.relatedTarget=o===n.target?t.toElement:o),n.which||void 0===f||(n.which=1&f?1:2&f?3:4&f?2:0),n}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==dr()&&this.focus)try{return this.focus(),!1}catch(n){}},delegateType:"focusin"},blur:{trigger:function(){if(this===dr()&&this.blur)return(this.blur(),!1)},delegateType:"focusout"},click:{trigger:function(){if(i.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return(this.click(),!1)},_default:function(n){return i.nodeName(n.target,"a")}},beforeunload:{postDispatch:function(n){void 0!==n.result&&n.originalEvent&&(n.originalEvent.returnValue=n.result)}}},simulate:function(n,t,r,u){var f=i.extend(new i.Event,r,{type:n,isSimulated:!0,originalEvent:{}});u?i.event.trigger(f,null,t):i.event.dispatch.call(t,f);f.isDefaultPrevented()&&r.preventDefault()}};i.removeEvent=u.removeEventListener?function(n,t,i){n.removeEventListener&&n.removeEventListener(t,i,!1)}:function(n,t,i){var r="on"+t;n.detachEvent&&(typeof n[r]===o&&(n[r]=null),n.detachEvent(r,i))};i.Event=function(n,t){return this instanceof i.Event?(n&&n.type?(this.originalEvent=n,this.type=n.type,this.isDefaultPrevented=n.defaultPrevented||void 0===n.defaultPrevented&&n.returnValue===!1?vt:it):this.type=n,t&&i.extend(this,t),this.timeStamp=n&&n.timeStamp||i.now(),void(this[i.expando]=!0)):new i.Event(n,t)};i.Event.prototype={isDefaultPrevented:it,isPropagationStopped:it,isImmediatePropagationStopped:it,preventDefault:function(){var n=this.originalEvent;this.isDefaultPrevented=vt;n&&(n.preventDefault?n.preventDefault():n.returnValue=!1)},stopPropagation:function(){var n=this.originalEvent;this.isPropagationStopped=vt;n&&(n.stopPropagation&&n.stopPropagation(),n.cancelBubble=!0)},stopImmediatePropagation:function(){var n=this.originalEvent;this.isImmediatePropagationStopped=vt;n&&n.stopImmediatePropagation&&n.stopImmediatePropagation();this.stopPropagation()}};i.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(n,t){i.event.special[n]={delegateType:t,bindType:t,handle:function(n){var u,f=this,r=n.relatedTarget,e=n.handleObj;return(!r||r!==f&&!i.contains(f,r))&&(n.type=e.origType,u=e.handler.apply(this,arguments),n.type=t),u}}});r.submitBubbles||(i.event.special.submit={setup:function(){return i.nodeName(this,"form")?!1:void i.event.add(this,"click._submit keypress._submit",function(n){var r=n.target,t=i.nodeName(r,"input")||i.nodeName(r,"button")?r.form:void 0;t&&!i._data(t,"submitBubbles")&&(i.event.add(t,"submit._submit",function(n){n._submit_bubble=!0}),i._data(t,"submitBubbles",!0))})},postDispatch:function(n){n._submit_bubble&&(delete n._submit_bubble,this.parentNode&&!n.isTrigger&&i.event.simulate("submit",this.parentNode,n,!0))},teardown:function(){return i.nodeName(this,"form")?!1:void i.event.remove(this,"._submit")}});r.changeBubbles||(i.event.special.change={setup:function(){return si.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(i.event.add(this,"propertychange._change",function(n){"checked"===n.originalEvent.propertyName&&(this._just_changed=!0)}),i.event.add(this,"click._change",function(n){this._just_changed&&!n.isTrigger&&(this._just_changed=!1);i.event.simulate("change",this,n,!0)})),!1):void i.event.add(this,"beforeactivate._change",function(n){var t=n.target;si.test(t.nodeName)&&!i._data(t,"changeBubbles")&&(i.event.add(t,"change._change",function(n){!this.parentNode||n.isSimulated||n.isTrigger||i.event.simulate("change",this.parentNode,n,!0)}),i._data(t,"changeBubbles",!0))})},handle:function(n){var t=n.target;if(this!==t||n.isSimulated||n.isTrigger||"radio"!==t.type&&"checkbox"!==t.type)return n.handleObj.handler.apply(this,arguments)},teardown:function(){return i.event.remove(this,"._change"),!si.test(this.nodeName)}});r.focusinBubbles||i.each({focus:"focusin",blur:"focusout"},function(n,t){var r=function(n){i.event.simulate(t,n.target,i.event.fix(n),!0)};i.event.special[t]={setup:function(){var u=this.ownerDocument||this,f=i._data(u,t);f||u.addEventListener(n,r,!0);i._data(u,t,(f||0)+1)},teardown:function(){var u=this.ownerDocument||this,f=i._data(u,t)-1;f?i._data(u,t,f):(u.removeEventListener(n,r,!0),i._removeData(u,t))}}});i.fn.extend({on:function(n,t,r,u,f){var o,e;if("object"==typeof n){"string"!=typeof t&&(r=r||t,t=void 0);for(o in n)this.on(o,t,r,n[o],f);return this}if(null==r&&null==u?(u=t,r=t=void 0):null==u&&("string"==typeof t?(u=r,r=void 0):(u=r,r=t,t=void 0)),u===!1)u=it;else if(!u)return this;return 1===f&&(e=u,u=function(n){return i().off(n),e.apply(this,arguments)},u.guid=e.guid||(e.guid=i.guid++)),this.each(function(){i.event.add(this,n,u,r,t)})},one:function(n,t,i,r){return this.on(n,t,i,r,1)},off:function(n,t,r){var u,f;if(n&&n.preventDefault&&n.handleObj)return u=n.handleObj,i(n.delegateTarget).off(u.namespace?u.origType+"."+u.namespace:u.origType,u.selector,u.handler),this;if("object"==typeof n){for(f in n)this.off(f,t,n[f]);return this}return(t===!1||"function"==typeof t)&&(r=t,t=void 0),r===!1&&(r=it),this.each(function(){i.event.remove(this,n,r,t)})},trigger:function(n,t){return this.each(function(){i.event.trigger(n,t,this)})},triggerHandler:function(n,t){var r=this[0];if(r)return i.event.trigger(n,t,r,!0)}});var nu="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",he=/ jQuery\d+="(?:null|\d+)"/g,tu=new RegExp("<(?:"+nu+")[\\s/>]","i"),hi=/^\s+/,iu=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ru=/<([\w:]+)/,uu=/<tbody/i,ce=/<|&#?\w+;/,le=/<(?:script|style|link)/i,ae=/checked\s*(?:[^=]|=\s*.checked.)/i,fu=/^$|\/(?:java|ecma)script/i,ve=/^true\/(.*)/,ye=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,s={option:[1,"<select multiple='multiple'>","<\/select>"],legend:[1,"<fieldset>","<\/fieldset>"],area:[1,"<map>","<\/map>"],param:[1,"<object>","<\/object>"],thead:[1,"<table>","<\/table>"],tr:[2,"<table><tbody>","<\/tbody><\/table>"],col:[2,"<table><tbody><\/tbody><colgroup>","<\/colgroup><\/table>"],td:[3,"<table><tbody><tr>","<\/tr><\/tbody><\/table>"],_default:r.htmlSerialize?[0,"",""]:[1,"X<div>","<\/div>"]},pe=gr(u),ci=pe.appendChild(u.createElement("div"));s.optgroup=s.option;s.tbody=s.tfoot=s.colgroup=s.caption=s.thead;s.th=s.td;i.extend({clone:function(n,t,u){var e,c,s,o,h,l=i.contains(n.ownerDocument,n);if(r.html5Clone||i.isXMLDoc(n)||!tu.test("<"+n.nodeName+">")?s=n.cloneNode(!0):(ci.innerHTML=n.outerHTML,ci.removeChild(s=ci.firstChild)),!(r.noCloneEvent&&r.noCloneChecked||1!==n.nodeType&&11!==n.nodeType||i.isXMLDoc(n)))for(e=f(s),h=f(n),o=0;null!=(c=h[o]);++o)e[o]&&be(c,e[o]);if(t)if(u)for(h=h||f(n),e=e||f(s),o=0;null!=(c=h[o]);o++)hu(c,e[o]);else hu(n,s);return e=f(s,"script"),e.length>0&&li(e,!l&&f(n,"script")),e=h=c=null,s},buildFragment:function(n,t,u,e){for(var c,o,b,h,p,w,a,k=n.length,v=gr(t),l=[],y=0;k>y;y++)if(o=n[y],o||0===o)if("object"===i.type(o))i.merge(l,o.nodeType?[o]:o);else if(ce.test(o)){for(h=h||v.appendChild(t.createElement("div")),p=(ru.exec(o)||["",""])[1].toLowerCase(),a=s[p]||s._default,h.innerHTML=a[1]+o.replace(iu,"<$1><\/$2>")+a[2],c=a[0];c--;)h=h.lastChild;if(!r.leadingWhitespace&&hi.test(o)&&l.push(t.createTextNode(hi.exec(o)[0])),!r.tbody)for(o="table"!==p||uu.test(o)?"<table>"!==a[1]||uu.test(o)?0:h:h.firstChild,c=o&&o.childNodes.length;c--;)i.nodeName(w=o.childNodes[c],"tbody")&&!w.childNodes.length&&o.removeChild(w);for(i.merge(l,h.childNodes),h.textContent="";h.firstChild;)h.removeChild(h.firstChild);h=v.lastChild}else l.push(t.createTextNode(o));for(h&&v.removeChild(h),r.appendChecked||i.grep(f(l,"input"),we),y=0;o=l[y++];)if((!e||-1===i.inArray(o,e))&&(b=i.contains(o.ownerDocument,o),h=f(v.appendChild(o),"script"),b&&li(h),u))for(c=0;o=h[c++];)fu.test(o.type||"")&&u.push(o);return h=null,v},cleanData:function(n,t){for(var u,e,f,s,a=0,h=i.expando,l=i.cache,v=r.deleteExpando,y=i.event.special;null!=(u=n[a]);a++)if((t||i.acceptData(u))&&(f=u[h],s=f&&l[f])){if(s.events)for(e in s.events)y[e]?i.event.remove(u,e):i.removeEvent(u,e,s.handle);l[f]&&(delete l[f],v?delete u[h]:typeof u.removeAttribute!==o?u.removeAttribute(h):u[h]=null,c.push(f))}}});i.fn.extend({text:function(n){return b(this,function(n){return void 0===n?i.text(this):this.empty().append((this[0]&&this[0].ownerDocument||u).createTextNode(n))},null,n,arguments.length)},append:function(){return this.domManip(arguments,function(n){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=eu(this,n);t.appendChild(n)}})},prepend:function(){return this.domManip(arguments,function(n){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=eu(this,n);t.insertBefore(n,t.firstChild)}})},before:function(){return this.domManip(arguments,function(n){this.parentNode&&this.parentNode.insertBefore(n,this)})},after:function(){return this.domManip(arguments,function(n){this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling)})},remove:function(n,t){for(var r,e=n?i.filter(n,this):this,u=0;null!=(r=e[u]);u++)t||1!==r.nodeType||i.cleanData(f(r)),r.parentNode&&(t&&i.contains(r.ownerDocument,r)&&li(f(r,"script")),r.parentNode.removeChild(r));return this},empty:function(){for(var n,t=0;null!=(n=this[t]);t++){for(1===n.nodeType&&i.cleanData(f(n,!1));n.firstChild;)n.removeChild(n.firstChild);n.options&&i.nodeName(n,"select")&&(n.options.length=0)}return this},clone:function(n,t){return n=null==n?!1:n,t=null==t?n:t,this.map(function(){return i.clone(this,n,t)})},html:function(n){return b(this,function(n){var t=this[0]||{},u=0,e=this.length;if(void 0===n)return 1===t.nodeType?t.innerHTML.replace(he,""):void 0;if(!("string"!=typeof n||le.test(n)||!r.htmlSerialize&&tu.test(n)||!r.leadingWhitespace&&hi.test(n)||s[(ru.exec(n)||["",""])[1].toLowerCase()])){n=n.replace(iu,"<$1><\/$2>");try{for(;e>u;u++)t=this[u]||{},1===t.nodeType&&(i.cleanData(f(t,!1)),t.innerHTML=n);t=0}catch(o){}}t&&this.empty().append(n)},null,n,arguments.length)},replaceWith:function(){var n=arguments[0];return this.domManip(arguments,function(t){n=this.parentNode;i.cleanData(f(this));n&&n.replaceChild(t,this)}),n&&(n.length||n.nodeType)?this:this.remove()},detach:function(n){return this.remove(n,!0)},domManip:function(n,t){n=ir.apply([],n);var h,u,c,o,v,s,e=0,l=this.length,p=this,w=l-1,a=n[0],y=i.isFunction(a);if(y||l>1&&"string"==typeof a&&!r.checkClone&&ae.test(a))return this.each(function(i){var r=p.eq(i);y&&(n[0]=a.call(this,i,r.html()));r.domManip(n,t)});if(l&&(s=i.buildFragment(n,this[0].ownerDocument,!1,this),h=s.firstChild,1===s.childNodes.length&&(s=h),h)){for(o=i.map(f(s,"script"),ou),c=o.length;l>e;e++)u=s,e!==w&&(u=i.clone(u,!0,!0),c&&i.merge(o,f(u,"script"))),t.call(this[e],u,e);if(c)for(v=o[o.length-1].ownerDocument,i.map(o,su),e=0;c>e;e++)u=o[e],fu.test(u.type||"")&&!i._data(u,"globalEval")&&i.contains(v,u)&&(u.src?i._evalUrl&&i._evalUrl(u.src):i.globalEval((u.text||u.textContent||u.innerHTML||"").replace(ye,"")));s=h=null}return this}});i.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(n,t){i.fn[n]=function(n){for(var u,r=0,f=[],e=i(n),o=e.length-1;o>=r;r++)u=r===o?this:this.clone(!0),i(e[r])[t](u),ii.apply(f,u.get());return this.pushStack(f)}});ai={};!function(){var n;r.shrinkWrapBlocks=function(){if(null!=n)return n;n=!1;var t,i,r;return i=u.getElementsByTagName("body")[0],i&&i.style?(t=u.createElement("div"),r=u.createElement("div"),r.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",i.appendChild(r).appendChild(t),typeof t.style.zoom!==o&&(t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",t.appendChild(u.createElement("div")).style.width="5px",n=3!==t.offsetWidth),i.removeChild(r),n):void 0}}();var lu=/^margin/,pt=new RegExp("^("+at+")(?!px)[a-z%]+$","i"),k,d,ke=/^(top|right|bottom|left)$/;n.getComputedStyle?(k=function(t){return t.ownerDocument.defaultView.opener?t.ownerDocument.defaultView.getComputedStyle(t,null):n.getComputedStyle(t,null)},d=function(n,t,r){var e,o,s,u,f=n.style;return r=r||k(n),u=r?r.getPropertyValue(t)||r[t]:void 0,r&&(""!==u||i.contains(n.ownerDocument,n)||(u=i.style(n,t)),pt.test(u)&&lu.test(t)&&(e=f.width,o=f.minWidth,s=f.maxWidth,f.minWidth=f.maxWidth=f.width=u,u=r.width,f.width=e,f.minWidth=o,f.maxWidth=s)),void 0===u?u:u+""}):u.documentElement.currentStyle&&(k=function(n){return n.currentStyle},d=function(n,t,i){var o,f,e,r,u=n.style;return i=i||k(n),r=i?i[t]:void 0,null==r&&u&&u[t]&&(r=u[t]),pt.test(r)&&!ke.test(t)&&(o=u.left,f=n.runtimeStyle,e=f&&f.left,e&&(f.left=n.currentStyle.left),u.left="fontSize"===t?"1em":r,r=u.pixelLeft+"px",u.left=o,e&&(f.left=e)),void 0===r?r:r+""||"auto"});!function(){var f,t,l,o,s,e,h;if(f=u.createElement("div"),f.innerHTML="  <link/><table><\/table><a href='/a'>a<\/a><input type='checkbox'/>",l=f.getElementsByTagName("a")[0],t=l&&l.style){t.cssText="float:left;opacity:.5";r.opacity="0.5"===t.opacity;r.cssFloat=!!t.cssFloat;f.style.backgroundClip="content-box";f.cloneNode(!0).style.backgroundClip="";r.clearCloneStyle="content-box"===f.style.backgroundClip;r.boxSizing=""===t.boxSizing||""===t.MozBoxSizing||""===t.WebkitBoxSizing;i.extend(r,{reliableHiddenOffsets:function(){return null==e&&c(),e},boxSizingReliable:function(){return null==s&&c(),s},pixelPosition:function(){return null==o&&c(),o},reliableMarginRight:function(){return null==h&&c(),h}});function c(){var i,r,f,t;r=u.getElementsByTagName("body")[0];r&&r.style&&(i=u.createElement("div"),f=u.createElement("div"),f.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",r.appendChild(f).appendChild(i),i.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",o=s=!1,h=!0,n.getComputedStyle&&(o="1%"!==(n.getComputedStyle(i,null)||{}).top,s="4px"===(n.getComputedStyle(i,null)||{width:"4px"}).width,t=i.appendChild(u.createElement("div")),t.style.cssText=i.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",t.style.marginRight=t.style.width="0",i.style.width="1px",h=!parseFloat((n.getComputedStyle(t,null)||{}).marginRight),i.removeChild(t)),i.innerHTML="<table><tr><td><\/td><td>t<\/td><\/tr><\/table>",t=i.getElementsByTagName("td"),t[0].style.cssText="margin:0;border:0;padding:0;display:none",e=0===t[0].offsetHeight,e&&(t[0].style.display="",t[1].style.display="none",e=0===t[0].offsetHeight),r.removeChild(f))}}}();i.swap=function(n,t,i,r){var f,u,e={};for(u in t)e[u]=n.style[u],n.style[u]=t[u];f=i.apply(n,r||[]);for(u in t)n.style[u]=e[u];return f};var vi=/alpha\([^)]*\)/i,de=/opacity\s*=\s*([^)]*)/,ge=/^(none|table(?!-c[ea]).+)/,no=new RegExp("^("+at+")(.*)$","i"),to=new RegExp("^([+-])=("+at+")","i"),io={position:"absolute",visibility:"hidden",display:"block"},vu={letterSpacing:"0",fontWeight:"400"},yu=["Webkit","O","Moz","ms"];i.extend({cssHooks:{opacity:{get:function(n,t){if(t){var i=d(n,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:r.cssFloat?"cssFloat":"styleFloat"},style:function(n,t,u,f){if(n&&3!==n.nodeType&&8!==n.nodeType&&n.style){var o,h,e,s=i.camelCase(t),c=n.style;if(t=i.cssProps[s]||(i.cssProps[s]=pu(c,s)),e=i.cssHooks[t]||i.cssHooks[s],void 0===u)return e&&"get"in e&&void 0!==(o=e.get(n,!1,f))?o:c[t];if(h=typeof u,"string"===h&&(o=to.exec(u))&&(u=(o[1]+1)*o[2]+parseFloat(i.css(n,t)),h="number"),null!=u&&u===u&&("number"!==h||i.cssNumber[s]||(u+="px"),r.clearCloneStyle||""!==u||0!==t.indexOf("background")||(c[t]="inherit"),!(e&&"set"in e&&void 0===(u=e.set(n,u,f)))))try{c[t]=u}catch(l){}}},css:function(n,t,r,u){var s,f,e,o=i.camelCase(t);return t=i.cssProps[o]||(i.cssProps[o]=pu(n.style,o)),e=i.cssHooks[t]||i.cssHooks[o],e&&"get"in e&&(f=e.get(n,!0,r)),void 0===f&&(f=d(n,t,u)),"normal"===f&&t in vu&&(f=vu[t]),""===r||r?(s=parseFloat(f),r===!0||i.isNumeric(s)?s||0:f):f}});i.each(["height","width"],function(n,t){i.cssHooks[t]={get:function(n,r,u){if(r)return ge.test(i.css(n,"display"))&&0===n.offsetWidth?i.swap(n,io,function(){return du(n,t,u)}):du(n,t,u)},set:function(n,u,f){var e=f&&k(n);return bu(n,u,f?ku(n,t,f,r.boxSizing&&"border-box"===i.css(n,"boxSizing",!1,e),e):0)}}});r.opacity||(i.cssHooks.opacity={get:function(n,t){return de.test((t&&n.currentStyle?n.currentStyle.filter:n.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(n,t){var r=n.style,u=n.currentStyle,e=i.isNumeric(t)?"alpha(opacity="+100*t+")":"",f=u&&u.filter||r.filter||"";r.zoom=1;(t>=1||""===t)&&""===i.trim(f.replace(vi,""))&&r.removeAttribute&&(r.removeAttribute("filter"),""===t||u&&!u.filter)||(r.filter=vi.test(f)?f.replace(vi,e):f+" "+e)}});i.cssHooks.marginRight=au(r.reliableMarginRight,function(n,t){if(t)return i.swap(n,{display:"inline-block"},d,[n,"marginRight"])});i.each({margin:"",padding:"",border:"Width"},function(n,t){i.cssHooks[n+t]={expand:function(i){for(var r=0,f={},u="string"==typeof i?i.split(" "):[i];4>r;r++)f[n+w[r]+t]=u[r]||u[r-2]||u[0];return f}};lu.test(n)||(i.cssHooks[n+t].set=bu)});i.fn.extend({css:function(n,t){return b(this,function(n,t,r){var f,e,o={},u=0;if(i.isArray(t)){for(f=k(n),e=t.length;e>u;u++)o[t[u]]=i.css(n,t[u],!1,f);return o}return void 0!==r?i.style(n,t,r):i.css(n,t)},n,t,arguments.length>1)},show:function(){return wu(this,!0)},hide:function(){return wu(this)},toggle:function(n){return"boolean"==typeof n?n?this.show():this.hide():this.each(function(){et(this)?i(this).show():i(this).hide()})}});i.Tween=e;e.prototype={constructor:e,init:function(n,t,r,u,f,e){this.elem=n;this.prop=r;this.easing=f||"swing";this.options=t;this.start=this.now=this.cur();this.end=u;this.unit=e||(i.cssNumber[r]?"":"px")},cur:function(){var n=e.propHooks[this.prop];return n&&n.get?n.get(this):e.propHooks._default.get(this)},run:function(n){var t,r=e.propHooks[this.prop];return this.pos=this.options.duration?t=i.easing[this.easing](n,this.options.duration*n,0,1,this.options.duration):t=n,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),r&&r.set?r.set(this):e.propHooks._default.set(this),this}};e.prototype.init.prototype=e.prototype;e.propHooks={_default:{get:function(n){var t;return null==n.elem[n.prop]||n.elem.style&&null!=n.elem.style[n.prop]?(t=i.css(n.elem,n.prop,""),t&&"auto"!==t?t:0):n.elem[n.prop]},set:function(n){i.fx.step[n.prop]?i.fx.step[n.prop](n):n.elem.style&&(null!=n.elem.style[i.cssProps[n.prop]]||i.cssHooks[n.prop])?i.style(n.elem,n.prop,n.now+n.unit):n.elem[n.prop]=n.now}}};e.propHooks.scrollTop=e.propHooks.scrollLeft={set:function(n){n.elem.nodeType&&n.elem.parentNode&&(n.elem[n.prop]=n.now)}};i.easing={linear:function(n){return n},swing:function(n){return.5-Math.cos(n*Math.PI)/2}};i.fx=e.prototype.init;i.fx.step={};var rt,wt,ro=/^(?:toggle|show|hide)$/,gu=new RegExp("^(?:([+-])=|)("+at+")([a-z%]*)$","i"),uo=/queueHooks$/,bt=[fo],st={"*":[function(n,t){var f=this.createTween(n,t),s=f.cur(),r=gu.exec(t),e=r&&r[3]||(i.cssNumber[n]?"":"px"),u=(i.cssNumber[n]||"px"!==e&&+s)&&gu.exec(i.css(f.elem,n)),o=1,h=20;if(u&&u[3]!==e){e=e||u[3];r=r||[];u=+s||1;do o=o||".5",u/=o,i.style(f.elem,n,u+e);while(o!==(o=f.cur()/s)&&1!==o&&--h)}return r&&(u=f.start=+u||+s||0,f.unit=e,f.end=r[1]?u+(r[1]+1)*r[2]:+r[2]),f}]};i.Animation=i.extend(rf,{tweener:function(n,t){i.isFunction(n)?(t=n,n=["*"]):n=n.split(" ");for(var r,u=0,f=n.length;f>u;u++)r=n[u],st[r]=st[r]||[],st[r].unshift(t)},prefilter:function(n,t){t?bt.unshift(n):bt.push(n)}});i.speed=function(n,t,r){var u=n&&"object"==typeof n?i.extend({},n):{complete:r||!r&&t||i.isFunction(n)&&n,duration:n,easing:r&&t||t&&!i.isFunction(t)&&t};return u.duration=i.fx.off?0:"number"==typeof u.duration?u.duration:u.duration in i.fx.speeds?i.fx.speeds[u.duration]:i.fx.speeds._default,(null==u.queue||u.queue===!0)&&(u.queue="fx"),u.old=u.complete,u.complete=function(){i.isFunction(u.old)&&u.old.call(this);u.queue&&i.dequeue(this,u.queue)},u};i.fn.extend({fadeTo:function(n,t,i,r){return this.filter(et).css("opacity",0).show().end().animate({opacity:t},n,i,r)},animate:function(n,t,r,u){var o=i.isEmptyObject(n),e=i.speed(t,r,u),f=function(){var t=rf(this,i.extend({},n),e);(o||i._data(this,"finish"))&&t.stop(!0)};return f.finish=f,o||e.queue===!1?this.each(f):this.queue(e.queue,f)},stop:function(n,t,r){var u=function(n){var t=n.stop;delete n.stop;t(r)};return"string"!=typeof n&&(r=t,t=n,n=void 0),t&&n!==!1&&this.queue(n||"fx",[]),this.each(function(){var o=!0,t=null!=n&&n+"queueHooks",e=i.timers,f=i._data(this);if(t)f[t]&&f[t].stop&&u(f[t]);else for(t in f)f[t]&&f[t].stop&&uo.test(t)&&u(f[t]);for(t=e.length;t--;)e[t].elem!==this||null!=n&&e[t].queue!==n||(e[t].anim.stop(r),o=!1,e.splice(t,1));(o||!r)&&i.dequeue(this,n)})},finish:function(n){return n!==!1&&(n=n||"fx"),this.each(function(){var t,f=i._data(this),r=f[n+"queue"],e=f[n+"queueHooks"],u=i.timers,o=r?r.length:0;for(f.finish=!0,i.queue(this,n,[]),e&&e.stop&&e.stop.call(this,!0),t=u.length;t--;)u[t].elem===this&&u[t].queue===n&&(u[t].anim.stop(!0),u.splice(t,1));for(t=0;o>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete f.finish})}});i.each(["toggle","show","hide"],function(n,t){var r=i.fn[t];i.fn[t]=function(n,i,u){return null==n||"boolean"==typeof n?r.apply(this,arguments):this.animate(kt(t,!0),n,i,u)}});i.each({slideDown:kt("show"),slideUp:kt("hide"),slideToggle:kt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(n,t){i.fn[n]=function(n,i,r){return this.animate(t,n,i,r)}});i.timers=[];i.fx.tick=function(){var r,n=i.timers,t=0;for(rt=i.now();t<n.length;t++)r=n[t],r()||n[t]!==r||n.splice(t--,1);n.length||i.fx.stop();rt=void 0};i.fx.timer=function(n){i.timers.push(n);n()?i.fx.start():i.timers.pop()};i.fx.interval=13;i.fx.start=function(){wt||(wt=setInterval(i.fx.tick,i.fx.interval))};i.fx.stop=function(){clearInterval(wt);wt=null};i.fx.speeds={slow:600,fast:200,_default:400};i.fn.delay=function(n,t){return n=i.fx?i.fx.speeds[n]||n:n,t=t||"fx",this.queue(t,function(t,i){var r=setTimeout(t,n);i.stop=function(){clearTimeout(r)}})},function(){var n,t,f,i,e;t=u.createElement("div");t.setAttribute("className","t");t.innerHTML="  <link/><table><\/table><a href='/a'>a<\/a><input type='checkbox'/>";i=t.getElementsByTagName("a")[0];f=u.createElement("select");e=f.appendChild(u.createElement("option"));n=t.getElementsByTagName("input")[0];i.style.cssText="top:1px";r.getSetAttribute="t"!==t.className;r.style=/top/.test(i.getAttribute("style"));r.hrefNormalized="/a"===i.getAttribute("href");r.checkOn=!!n.value;r.optSelected=e.selected;r.enctype=!!u.createElement("form").enctype;f.disabled=!0;r.optDisabled=!e.disabled;n=u.createElement("input");n.setAttribute("value","");r.input=""===n.getAttribute("value");n.value="t";n.setAttribute("type","radio");r.radioValue="t"===n.value}();uf=/\r/g;i.fn.extend({val:function(n){var t,r,f,u=this[0];return arguments.length?(f=i.isFunction(n),this.each(function(r){var u;1===this.nodeType&&(u=f?n.call(this,r,i(this).val()):n,null==u?u="":"number"==typeof u?u+="":i.isArray(u)&&(u=i.map(u,function(n){return null==n?"":n+""})),t=i.valHooks[this.type]||i.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,u,"value")||(this.value=u))})):u?(t=i.valHooks[u.type]||i.valHooks[u.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(r=t.get(u,"value"))?r:(r=u.value,"string"==typeof r?r.replace(uf,""):null==r?"":r)):void 0}});i.extend({valHooks:{option:{get:function(n){var t=i.find.attr(n,"value");return null!=t?t:i.trim(i.text(n))}},select:{get:function(n){for(var o,t,s=n.options,u=n.selectedIndex,f="select-one"===n.type||0>u,h=f?null:[],c=f?u+1:s.length,e=0>u?c:f?u:0;c>e;e++)if(t=s[e],!(!t.selected&&e!==u||(r.optDisabled?t.disabled:null!==t.getAttribute("disabled"))||t.parentNode.disabled&&i.nodeName(t.parentNode,"optgroup"))){if(o=i(t).val(),f)return o;h.push(o)}return h},set:function(n,t){for(var f,r,u=n.options,o=i.makeArray(t),e=u.length;e--;)if(r=u[e],i.inArray(i.valHooks.option.get(r),o)>=0)try{r.selected=f=!0}catch(s){r.scrollHeight}else r.selected=!1;return f||(n.selectedIndex=-1),u}}}});i.each(["radio","checkbox"],function(){i.valHooks[this]={set:function(n,t){if(i.isArray(t))return n.checked=i.inArray(i(n).val(),t)>=0}};r.checkOn||(i.valHooks[this].get=function(n){return null===n.getAttribute("value")?"on":n.value})});var ut,ff,v=i.expr.attrHandle,yi=/^(?:checked|selected)$/i,g=r.getSetAttribute,dt=r.input;i.fn.extend({attr:function(n,t){return b(this,i.attr,n,t,arguments.length>1)},removeAttr:function(n){return this.each(function(){i.removeAttr(this,n)})}});i.extend({attr:function(n,t,r){var u,f,e=n.nodeType;if(n&&3!==e&&8!==e&&2!==e)return typeof n.getAttribute===o?i.prop(n,t,r):(1===e&&i.isXMLDoc(n)||(t=t.toLowerCase(),u=i.attrHooks[t]||(i.expr.match.bool.test(t)?ff:ut)),void 0===r?u&&"get"in u&&null!==(f=u.get(n,t))?f:(f=i.find.attr(n,t),null==f?void 0:f):null!==r?u&&"set"in u&&void 0!==(f=u.set(n,r,t))?f:(n.setAttribute(t,r+""),r):void i.removeAttr(n,t))},removeAttr:function(n,t){var r,u,e=0,f=t&&t.match(h);if(f&&1===n.nodeType)while(r=f[e++])u=i.propFix[r]||r,i.expr.match.bool.test(r)?dt&&g||!yi.test(r)?n[u]=!1:n[i.camelCase("default-"+r)]=n[u]=!1:i.attr(n,r,""),n.removeAttribute(g?r:u)},attrHooks:{type:{set:function(n,t){if(!r.radioValue&&"radio"===t&&i.nodeName(n,"input")){var u=n.value;return n.setAttribute("type",t),u&&(n.value=u),t}}}}});ff={set:function(n,t,r){return t===!1?i.removeAttr(n,r):dt&&g||!yi.test(r)?n.setAttribute(!g&&i.propFix[r]||r,r):n[i.camelCase("default-"+r)]=n[r]=!0,r}};i.each(i.expr.match.bool.source.match(/\w+/g),function(n,t){var r=v[t]||i.find.attr;v[t]=dt&&g||!yi.test(t)?function(n,t,i){var u,f;return i||(f=v[t],v[t]=u,u=null!=r(n,t,i)?t.toLowerCase():null,v[t]=f),u}:function(n,t,r){if(!r)return n[i.camelCase("default-"+t)]?t.toLowerCase():null}});dt&&g||(i.attrHooks.value={set:function(n,t,r){return i.nodeName(n,"input")?void(n.defaultValue=t):ut&&ut.set(n,t,r)}});g||(ut={set:function(n,t,i){var r=n.getAttributeNode(i);return r||n.setAttributeNode(r=n.ownerDocument.createAttribute(i)),r.value=t+="","value"===i||t===n.getAttribute(i)?t:void 0}},v.id=v.name=v.coords=function(n,t,i){var r;if(!i)return(r=n.getAttributeNode(t))&&""!==r.value?r.value:null},i.valHooks.button={get:function(n,t){var i=n.getAttributeNode(t);if(i&&i.specified)return i.value},set:ut.set},i.attrHooks.contenteditable={set:function(n,t,i){ut.set(n,""===t?!1:t,i)}},i.each(["width","height"],function(n,t){i.attrHooks[t]={set:function(n,i){if(""===i)return(n.setAttribute(t,"auto"),i)}}}));r.style||(i.attrHooks.style={get:function(n){return n.style.cssText||void 0},set:function(n,t){return n.style.cssText=t+""}});ef=/^(?:input|select|textarea|button|object)$/i;of=/^(?:a|area)$/i;i.fn.extend({prop:function(n,t){return b(this,i.prop,n,t,arguments.length>1)},removeProp:function(n){return n=i.propFix[n]||n,this.each(function(){try{this[n]=void 0;delete this[n]}catch(t){}})}});i.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(n,t,r){var f,u,o,e=n.nodeType;if(n&&3!==e&&8!==e&&2!==e)return o=1!==e||!i.isXMLDoc(n),o&&(t=i.propFix[t]||t,u=i.propHooks[t]),void 0!==r?u&&"set"in u&&void 0!==(f=u.set(n,r,t))?f:n[t]=r:u&&"get"in u&&null!==(f=u.get(n,t))?f:n[t]},propHooks:{tabIndex:{get:function(n){var t=i.find.attr(n,"tabindex");return t?parseInt(t,10):ef.test(n.nodeName)||of.test(n.nodeName)&&n.href?0:-1}}}});r.hrefNormalized||i.each(["href","src"],function(n,t){i.propHooks[t]={get:function(n){return n.getAttribute(t,4)}}});r.optSelected||(i.propHooks.selected={get:function(n){var t=n.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}});i.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){i.propFix[this.toLowerCase()]=this});r.enctype||(i.propFix.enctype="encoding");gt=/[\t\r\n\f]/g;i.fn.extend({addClass:function(n){var o,t,r,u,s,f,e=0,c=this.length,l="string"==typeof n&&n;if(i.isFunction(n))return this.each(function(t){i(this).addClass(n.call(this,t,this.className))});if(l)for(o=(n||"").match(h)||[];c>e;e++)if(t=this[e],r=1===t.nodeType&&(t.className?(" "+t.className+" ").replace(gt," "):" ")){for(s=0;u=o[s++];)r.indexOf(" "+u+" ")<0&&(r+=u+" ");f=i.trim(r);t.className!==f&&(t.className=f)}return this},removeClass:function(n){var o,t,r,u,s,f,e=0,c=this.length,l=0===arguments.length||"string"==typeof n&&n;if(i.isFunction(n))return this.each(function(t){i(this).removeClass(n.call(this,t,this.className))});if(l)for(o=(n||"").match(h)||[];c>e;e++)if(t=this[e],r=1===t.nodeType&&(t.className?(" "+t.className+" ").replace(gt," "):"")){for(s=0;u=o[s++];)while(r.indexOf(" "+u+" ")>=0)r=r.replace(" "+u+" "," ");f=n?i.trim(r):"";t.className!==f&&(t.className=f)}return this},toggleClass:function(n,t){var r=typeof n;return"boolean"==typeof t&&"string"===r?t?this.addClass(n):this.removeClass(n):this.each(i.isFunction(n)?function(r){i(this).toggleClass(n.call(this,r,this.className,t),t)}:function(){if("string"===r)for(var t,f=0,u=i(this),e=n.match(h)||[];t=e[f++];)u.hasClass(t)?u.removeClass(t):u.addClass(t);else(r===o||"boolean"===r)&&(this.className&&i._data(this,"__className__",this.className),this.className=this.className||n===!1?"":i._data(this,"__className__")||"")})},hasClass:function(n){for(var i=" "+n+" ",t=0,r=this.length;r>t;t++)if(1===this[t].nodeType&&(" "+this[t].className+" ").replace(gt," ").indexOf(i)>=0)return!0;return!1}});i.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(n,t){i.fn[t]=function(n,i){return arguments.length>0?this.on(t,null,n,i):this.trigger(t)}});i.fn.extend({hover:function(n,t){return this.mouseenter(n).mouseleave(t||n)},bind:function(n,t,i){return this.on(n,null,t,i)},unbind:function(n,t){return this.off(n,null,t)},delegate:function(n,t,i,r){return this.on(t,n,i,r)},undelegate:function(n,t,i){return 1===arguments.length?this.off(n,"**"):this.off(t,n||"**",i)}});var pi=i.now(),wi=/\?/,oo=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;i.parseJSON=function(t){if(n.JSON&&n.JSON.parse)return n.JSON.parse(t+"");var f,r=null,u=i.trim(t+"");return u&&!i.trim(u.replace(oo,function(n,t,i,u){return f&&t&&(r=0),0===r?n:(f=i||t,r+=!u-!i,"")}))?Function("return "+u)():i.error("Invalid JSON: "+t)};i.parseXML=function(t){var r,u;if(!t||"string"!=typeof t)return null;try{n.DOMParser?(u=new DOMParser,r=u.parseFromString(t,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(t))}catch(f){r=void 0}return r&&r.documentElement&&!r.getElementsByTagName("parsererror").length||i.error("Invalid XML: "+t),r};var nt,y,so=/#.*$/,sf=/([?&])_=[^&]*/,ho=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,co=/^(?:GET|HEAD)$/,lo=/^\/\//,hf=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,cf={},bi={},lf="*/".concat("*");try{y=location.href}catch(ns){y=u.createElement("a");y.href="";y=y.href}nt=hf.exec(y.toLowerCase())||[];i.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:y,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(nt[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":lf,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":i.parseJSON,"text xml":i.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(n,t){return t?ki(ki(n,i.ajaxSettings),t):ki(i.ajaxSettings,n)},ajaxPrefilter:af(cf),ajaxTransport:af(bi),ajax:function(n,t){function w(n,t,s,h){var v,it,nt,y,w,c=t;2!==e&&(e=2,k&&clearTimeout(k),a=void 0,b=h||"",u.readyState=n>0?4:0,v=n>=200&&300>n||304===n,s&&(y=ao(r,u,s)),y=vo(r,y,u,v),v?(r.ifModified&&(w=u.getResponseHeader("Last-Modified"),w&&(i.lastModified[f]=w),w=u.getResponseHeader("etag"),w&&(i.etag[f]=w)),204===n||"HEAD"===r.type?c="nocontent":304===n?c="notmodified":(c=y.state,it=y.data,nt=y.error,v=!nt)):(nt=c,(n||!c)&&(c="error",0>n&&(n=0))),u.status=n,u.statusText=(t||c)+"",v?g.resolveWith(o,[it,c,u]):g.rejectWith(o,[u,c,nt]),u.statusCode(p),p=void 0,l&&d.trigger(v?"ajaxSuccess":"ajaxError",[u,r,v?it:nt]),tt.fireWith(o,[u,c]),l&&(d.trigger("ajaxComplete",[u,r]),--i.active||i.event.trigger("ajaxStop")))}"object"==typeof n&&(t=n,n=void 0);t=t||{};var s,c,f,b,k,l,a,v,r=i.ajaxSetup({},t),o=r.context||r,d=r.context&&(o.nodeType||o.jquery)?i(o):i.event,g=i.Deferred(),tt=i.Callbacks("once memory"),p=r.statusCode||{},it={},rt={},e=0,ut="canceled",u={readyState:0,getResponseHeader:function(n){var t;if(2===e){if(!v)for(v={};t=ho.exec(b);)v[t[1].toLowerCase()]=t[2];t=v[n.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===e?b:null},setRequestHeader:function(n,t){var i=n.toLowerCase();return e||(n=rt[i]=rt[i]||n,it[n]=t),this},overrideMimeType:function(n){return e||(r.mimeType=n),this},statusCode:function(n){var t;if(n)if(2>e)for(t in n)p[t]=[p[t],n[t]];else u.always(n[u.status]);return this},abort:function(n){var t=n||ut;return a&&a.abort(t),w(0,t),this}};if(g.promise(u).complete=tt.add,u.success=u.done,u.error=u.fail,r.url=((n||r.url||y)+"").replace(so,"").replace(lo,nt[1]+"//"),r.type=t.method||t.type||r.method||r.type,r.dataTypes=i.trim(r.dataType||"*").toLowerCase().match(h)||[""],null==r.crossDomain&&(s=hf.exec(r.url.toLowerCase()),r.crossDomain=!(!s||s[1]===nt[1]&&s[2]===nt[2]&&(s[3]||("http:"===s[1]?"80":"443"))===(nt[3]||("http:"===nt[1]?"80":"443")))),r.data&&r.processData&&"string"!=typeof r.data&&(r.data=i.param(r.data,r.traditional)),vf(cf,r,t,u),2===e)return u;l=i.event&&r.global;l&&0==i.active++&&i.event.trigger("ajaxStart");r.type=r.type.toUpperCase();r.hasContent=!co.test(r.type);f=r.url;r.hasContent||(r.data&&(f=r.url+=(wi.test(f)?"&":"?")+r.data,delete r.data),r.cache===!1&&(r.url=sf.test(f)?f.replace(sf,"$1_="+pi++):f+(wi.test(f)?"&":"?")+"_="+pi++));r.ifModified&&(i.lastModified[f]&&u.setRequestHeader("If-Modified-Since",i.lastModified[f]),i.etag[f]&&u.setRequestHeader("If-None-Match",i.etag[f]));(r.data&&r.hasContent&&r.contentType!==!1||t.contentType)&&u.setRequestHeader("Content-Type",r.contentType);u.setRequestHeader("Accept",r.dataTypes[0]&&r.accepts[r.dataTypes[0]]?r.accepts[r.dataTypes[0]]+("*"!==r.dataTypes[0]?", "+lf+"; q=0.01":""):r.accepts["*"]);for(c in r.headers)u.setRequestHeader(c,r.headers[c]);if(r.beforeSend&&(r.beforeSend.call(o,u,r)===!1||2===e))return u.abort();ut="abort";for(c in{success:1,error:1,complete:1})u[c](r[c]);if(a=vf(bi,r,t,u)){u.readyState=1;l&&d.trigger("ajaxSend",[u,r]);r.async&&r.timeout>0&&(k=setTimeout(function(){u.abort("timeout")},r.timeout));try{e=1;a.send(it,w)}catch(ft){if(!(2>e))throw ft;w(-1,ft)}}else w(-1,"No Transport");return u},getJSON:function(n,t,r){return i.get(n,t,r,"json")},getScript:function(n,t){return i.get(n,void 0,t,"script")}});i.each(["get","post"],function(n,t){i[t]=function(n,r,u,f){return i.isFunction(r)&&(f=f||u,u=r,r=void 0),i.ajax({url:n,type:t,dataType:f,data:r,success:u})}});i._evalUrl=function(n){return i.ajax({url:n,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})};i.fn.extend({wrapAll:function(n){if(i.isFunction(n))return this.each(function(t){i(this).wrapAll(n.call(this,t))});if(this[0]){var t=i(n,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]);t.map(function(){for(var n=this;n.firstChild&&1===n.firstChild.nodeType;)n=n.firstChild;return n}).append(this)}return this},wrapInner:function(n){return this.each(i.isFunction(n)?function(t){i(this).wrapInner(n.call(this,t))}:function(){var t=i(this),r=t.contents();r.length?r.wrapAll(n):t.append(n)})},wrap:function(n){var t=i.isFunction(n);return this.each(function(r){i(this).wrapAll(t?n.call(this,r):n)})},unwrap:function(){return this.parent().each(function(){i.nodeName(this,"body")||i(this).replaceWith(this.childNodes)}).end()}});i.expr.filters.hidden=function(n){return n.offsetWidth<=0&&n.offsetHeight<=0||!r.reliableHiddenOffsets()&&"none"===(n.style&&n.style.display||i.css(n,"display"))};i.expr.filters.visible=function(n){return!i.expr.filters.hidden(n)};var yo=/%20/g,po=/\[\]$/,yf=/\r?\n/g,wo=/^(?:submit|button|image|reset|file)$/i,bo=/^(?:input|select|textarea|keygen)/i;i.param=function(n,t){var r,u=[],f=function(n,t){t=i.isFunction(t)?t():null==t?"":t;u[u.length]=encodeURIComponent(n)+"="+encodeURIComponent(t)};if(void 0===t&&(t=i.ajaxSettings&&i.ajaxSettings.traditional),i.isArray(n)||n.jquery&&!i.isPlainObject(n))i.each(n,function(){f(this.name,this.value)});else for(r in n)di(r,n[r],t,f);return u.join("&").replace(yo,"+")};i.fn.extend({serialize:function(){return i.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var n=i.prop(this,"elements");return n?i.makeArray(n):this}).filter(function(){var n=this.type;return this.name&&!i(this).is(":disabled")&&bo.test(this.nodeName)&&!wo.test(n)&&(this.checked||!oi.test(n))}).map(function(n,t){var r=i(this).val();return null==r?null:i.isArray(r)?i.map(r,function(n){return{name:t.name,value:n.replace(yf,"\r\n")}}):{name:t.name,value:r.replace(yf,"\r\n")}}).get()}});i.ajaxSettings.xhr=void 0!==n.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&pf()||go()}:pf;var ko=0,ni={},ht=i.ajaxSettings.xhr();return n.attachEvent&&n.attachEvent("onunload",function(){for(var n in ni)ni[n](void 0,!0)}),r.cors=!!ht&&"withCredentials"in ht,ht=r.ajax=!!ht,ht&&i.ajaxTransport(function(n){if(!n.crossDomain||r.cors){var t;return{send:function(r,u){var e,f=n.xhr(),o=++ko;if(f.open(n.type,n.url,n.async,n.username,n.password),n.xhrFields)for(e in n.xhrFields)f[e]=n.xhrFields[e];n.mimeType&&f.overrideMimeType&&f.overrideMimeType(n.mimeType);n.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");for(e in r)void 0!==r[e]&&f.setRequestHeader(e,r[e]+"");f.send(n.hasContent&&n.data||null);t=function(r,e){var s,c,h;if(t&&(e||4===f.readyState))if(delete ni[o],t=void 0,f.onreadystatechange=i.noop,e)4!==f.readyState&&f.abort();else{h={};s=f.status;"string"==typeof f.responseText&&(h.text=f.responseText);try{c=f.statusText}catch(l){c=""}s||!n.isLocal||n.crossDomain?1223===s&&(s=204):s=h.text?200:404}h&&u(s,c,h,f.getAllResponseHeaders())};n.async?4===f.readyState?setTimeout(t):f.onreadystatechange=ni[o]=t:t()},abort:function(){t&&t(void 0,!0)}}}}),i.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(n){return i.globalEval(n),n}}}),i.ajaxPrefilter("script",function(n){void 0===n.cache&&(n.cache=!1);n.crossDomain&&(n.type="GET",n.global=!1)}),i.ajaxTransport("script",function(n){if(n.crossDomain){var t,r=u.head||i("head")[0]||u.documentElement;return{send:function(i,f){t=u.createElement("script");t.async=!0;n.scriptCharset&&(t.charset=n.scriptCharset);t.src=n.url;t.onload=t.onreadystatechange=function(n,i){(i||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,i||f(200,"success"))};r.insertBefore(t,r.firstChild)},abort:function(){t&&t.onload(void 0,!0)}}}}),gi=[],ti=/(=)\?(?=&|$)|\?\?/,i.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var n=gi.pop()||i.expando+"_"+pi++;return this[n]=!0,n}}),i.ajaxPrefilter("json jsonp",function(t,r,u){var f,o,e,s=t.jsonp!==!1&&(ti.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&ti.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return(f=t.jsonpCallback=i.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(ti,"$1"+f):t.jsonp!==!1&&(t.url+=(wi.test(t.url)?"&":"?")+t.jsonp+"="+f),t.converters["script json"]=function(){return e||i.error(f+" was not called"),e[0]},t.dataTypes[0]="json",o=n[f],n[f]=function(){e=arguments},u.always(function(){n[f]=o;t[f]&&(t.jsonpCallback=r.jsonpCallback,gi.push(f));e&&i.isFunction(o)&&o(e[0]);e=o=void 0}),"script")}),i.parseHTML=function(n,t,r){if(!n||"string"!=typeof n)return null;"boolean"==typeof t&&(r=t,t=!1);t=t||u;var f=er.exec(n),e=!r&&[];return f?[t.createElement(f[1])]:(f=i.buildFragment([n],t,e),e&&e.length&&i(e).remove(),i.merge([],f.childNodes))},nr=i.fn.load,i.fn.load=function(n,t,r){if("string"!=typeof n&&nr)return nr.apply(this,arguments);var u,o,s,f=this,e=n.indexOf(" ");return e>=0&&(u=i.trim(n.slice(e,n.length)),n=n.slice(0,e)),i.isFunction(t)?(r=t,t=void 0):t&&"object"==typeof t&&(s="POST"),f.length>0&&i.ajax({url:n,type:s,dataType:"html",data:t}).done(function(n){o=arguments;f.html(u?i("<div>").append(i.parseHTML(n)).find(u):n)}).complete(r&&function(n,t){f.each(r,o||[n.responseText,t,n])}),this},i.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(n,t){i.fn[t]=function(n){return this.on(t,n)}}),i.expr.filters.animated=function(n){return i.grep(i.timers,function(t){return n===t.elem}).length},tr=n.document.documentElement,i.offset={setOffset:function(n,t,r){var e,o,s,h,u,c,v,l=i.css(n,"position"),a=i(n),f={};"static"===l&&(n.style.position="relative");u=a.offset();s=i.css(n,"top");c=i.css(n,"left");v=("absolute"===l||"fixed"===l)&&i.inArray("auto",[s,c])>-1;v?(e=a.position(),h=e.top,o=e.left):(h=parseFloat(s)||0,o=parseFloat(c)||0);i.isFunction(t)&&(t=t.call(n,r,u));null!=t.top&&(f.top=t.top-u.top+h);null!=t.left&&(f.left=t.left-u.left+o);"using"in t?t.using.call(n,f):a.css(f)}},i.fn.extend({offset:function(n){if(arguments.length)return void 0===n?this:this.each(function(t){i.offset.setOffset(this,n,t)});var t,f,u={top:0,left:0},r=this[0],e=r&&r.ownerDocument;if(e)return t=e.documentElement,i.contains(t,r)?(typeof r.getBoundingClientRect!==o&&(u=r.getBoundingClientRect()),f=wf(e),{top:u.top+(f.pageYOffset||t.scrollTop)-(t.clientTop||0),left:u.left+(f.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):u},position:function(){if(this[0]){var n,r,t={top:0,left:0},u=this[0];return"fixed"===i.css(u,"position")?r=u.getBoundingClientRect():(n=this.offsetParent(),r=this.offset(),i.nodeName(n[0],"html")||(t=n.offset()),t.top+=i.css(n[0],"borderTopWidth",!0),t.left+=i.css(n[0],"borderLeftWidth",!0)),{top:r.top-t.top-i.css(u,"marginTop",!0),left:r.left-t.left-i.css(u,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var n=this.offsetParent||tr;n&&!i.nodeName(n,"html")&&"static"===i.css(n,"position");)n=n.offsetParent;return n||tr})}}),i.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(n,t){var r=/Y/.test(t);i.fn[n]=function(u){return b(this,function(n,u,f){var e=wf(n);return void 0===f?e?t in e?e[t]:e.document.documentElement[u]:n[u]:void(e?e.scrollTo(r?i(e).scrollLeft():f,r?f:i(e).scrollTop()):n[u]=f)},n,u,arguments.length,null)}}),i.each(["top","left"],function(n,t){i.cssHooks[t]=au(r.pixelPosition,function(n,r){if(r)return(r=d(n,t),pt.test(r)?i(n).position()[t]+"px":r)})}),i.each({Height:"height",Width:"width"},function(n,t){i.each({padding:"inner"+n,content:t,"":"outer"+n},function(r,u){i.fn[u]=function(u,f){var e=arguments.length&&(r||"boolean"!=typeof u),o=r||(u===!0||f===!0?"margin":"border");return b(this,function(t,r,u){var f;return i.isWindow(t)?t.document.documentElement["client"+n]:9===t.nodeType?(f=t.documentElement,Math.max(t.body["scroll"+n],f["scroll"+n],t.body["offset"+n],f["offset"+n],f["client"+n])):void 0===u?i.css(t,r,o):i.style(t,r,u,o)},t,e?u:void 0,e,null)}})}),i.fn.size=function(){return this.length},i.fn.andSelf=i.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return i}),bf=n.jQuery,kf=n.$,i.noConflict=function(t){return n.$===i&&(n.$=kf),t&&n.jQuery===i&&(n.jQuery=bf),i},typeof t===o&&(n.jQuery=n.$=i),i});g367CB268B1094004A3689751E7AC568F.floatingbanner_jQuery=jQuery.noConflict(!0);g367CB268B1094004A3689751E7AC568F.counter=0;g367CB268B1094004A3689751E7AC568F.Modules.FloatingBanner=function(n,t){function c(n,t){this._context=n;this._func=t;this._isOneTime=!1;this._called=!1;this._timeout=null;this._timeoutCallback=null;this._canceledByTimeout=!1;this._disabled=!1;this._callInterval=null;this._callGateOpen=!0;var i=this;this._value=function(){return(i._timeout&&(clearTimeout(i._timeout),i._timeout=null,i._timeoutCallback=null),i._canceledByTimeout||i._disabled)?undefined:i._isOneTime&&i._called?undefined:(i._called=!0,i._callInterval!=null)?i._callGateOpen?(i._callGateOpen=!1,setTimeout(function(){i._callGateOpen=!0},i._callInterval),i._func.apply(i._context,arguments)):undefined:i._func.apply(i._context,arguments)}}function w(n){if(!n.getElementById("g367CB268B1094004A3689751E7AC568F_videoButtons_style")){var t=n.createElement("style");t.id="g367CB268B1094004A3689751E7AC568F_videoButtons_style";t.innerHTML=".$inf-hover { display: none } .$inf-videoButtons-container { position: relative;  } .$inf-videoButtons-container:hover .$inf-hover { display: block } .$inf-playerButton { position: absolute; background-color: rgba(24,35,53,0.8); border-radius: 4px; font-size: 22px; line-height: 30px; padding: 3px !important; cursor: pointer; opacity: 0.8; z-index: 100;  transform: translateZ(0); -webkit-transform: translateZ(0);} .$inf-volumeButton { right: 15px; bottom: 15px } .$inf-closeButton { right: 15px; top: 15px } .$inf-skipButton { color: rgba(255,255,255,0.8); font-size: 16px; font-family: Tahoma; padding: 3px; padding-left: 12px !important; padding-right: 12px !important; line-height: 28px; border-radius: 2px; opacity: 0.8; border-style: solid; border-width: 1px; min-width: 61px; border-color: #4d4d4d } .$inf-playButton { margin: auto !important; width: 50px; height: 50px; top: 0; left: 0; right: 0; bottom: 0 } .$inf-volumeButton-icon-on, .$inf-volumeButton-icon-off { width: 28px; height: 28px; background-size: contain; opacity: 0.5; background-position: center; } .$inf-closeButton-icon { width: 24px; height: 24px; background-size: contain; margin: 2px; opacity: 0.5; background-position: center; } .$inf-playButton-icon { width: 50px; height: 50px; background-size: contain; opacity: 0.5; background-position: center; } .$inf-skipButton-active { color: rgba(222,222,222,1); opacity: 1; } .$inf-skipButton-active:hover { background-color: rgba(24,35,53,1); border-color: #c7c7c7 } .$inf-volumeButton-icon-on:hover, .$inf-closeButton-icon:hover, .$inf-playButton-icon:hover, .$inf-volumeButton-icon-off:hover { opacity: 1; } .$inf-volumeButton-icon-on { background-image: url('data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAHYcAAB2HAY/l8WUAAAAZdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuMjHxIGmVAAACH0lEQVRYR8XXz4sPcRzH8bV+nBTKjwPlZ65uDk7yJyAHKRdXNhFOSv6DlQMnJ+Xkb+CAcpGUIlIOImVzWoWv53N23prv7Hu+OzszffdVjzKv/cx3Pvb7mc/MzoxGozWVltOUli1sxiUcr3SdpOUKduAFzE9kY8IB7K91Y9JyAi/+GtVk43QQv/AH97AVy8YtKybILm6ysfJ/7gQiH3EEY+PGDibYieziJhsfvOBTRBZwFP/HVAc32YP3aEp9/HW4Rs6Vx7O4jcg37EUxvnpiZqWLm/o5XxB5gE2wv2pRxt+KE5s4gTYXN/XzzuA7Io+wDv7MCUXOo3ECh+CiaZPs/N2orhn3DPst+GpB3mHW8iF+1CyibfyMO3iCCyh+tXDhfoZxv9gO+2sWZU5Y9I274t+lfxZ5jI3ws09alLmBmNhvCzI/xAT8jMuoLr6bsPe7/2BBnsFOsZO+HGoC2oa3FsRFuB72dy2Im9IG2N23IAtDTkAXLcocht2V4mgpu2B3qzgiHvRNXFxrOoE2X0F0g38FbRbhc9hp0EXobVhN9TY8ZVGm8TYcYiOaR+eNKLMPbZ4DJjt/VVtxk64Po9Po/TAKXR7HnxDp9TgOTuINmlIfPwdX+dnyuNcLSWh6HzTZ+DDIK1lY7Uupr+SDvZQGJ/EK1WTjFG/Fg72WB2+l2Mm8pbIxwdvZvw+ynxXSsgV3PxfbsUrXSVpOU1pOz2jmH8zQlWJH4tZcAAAAAElFTkSuQmCC') } .$inf-volumeButton-icon-off { background-image: url('data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwgAADsIBFShKgAAAABl0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC4yMfEgaZUAAAI7SURBVFhHxZfLSsNAFIa9C0Wq4kqqgigoilt9E3Eh+AAu3elb+BC6c+nKleBCENS4EAQveKHQ0lJ7oRfajv9fMjGdTJppTeriI50zp+d8MzFjOiCE+Fe0wX6iBhK5XO6gXq8vK/FA0un0cLFY3KnVaqu6eT/aBtVq9SSVSolyuZxsNpvr7rkAYvjORTabFZVK5Q7jQWXel7YBBPYKhYIgphLYsQnkXubzeVEqlQRqfCE+pub54QlgC/exlUYSyI0j54q5WLkUeMNc7wLEUGIKTa9l81AFSCcJNJtB7MbdPHQBokpgvGTf81u1eSQCxC3B4uCeY7V5ZAJEShA20TUnoQhYljWEIsdY8QOKnqL5COOUsG+FtjkJRQCrTLAJV8tnG4XPTSVCEcAxvIBiFdmkG4lQBFBgHsVQ/7eBqURkAsREIlIBEiQRuQDpJGELvKg1O+EJBAkQPwkK4HvfGG+odf3wBCggV8OrmyAJeVgh1/h9QhcchcQZiqRxdUCzOqVMJOxbYiShDRIUi6PApAQSmyzKBmFKaIN+NBqNNezCZ5gS2mAn0GgFRd/9JJDTegRNJTwBE/jWjKKvLK5K8O8HOa2XUhOJtkE3oOAieHZL2OdACvPjMi9IwvnQC/zHhaJPUsIW8JyEqgRwJJykPzCH5o8sbj+mH4h5jmK3BHKSuLZ+/LQl9Qp2YhbNrUwmwx2wdDmEEhTAryjuxC5j2sQemUbxQwhsaeYcILGNHTjC5xjH2qR+og32DzHwA/mS7LQFix2YAAAAAElFTkSuQmCC') } .$inf-playButton-icon { background-image: url('data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwgAADsIBFShKgAAAABl0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC4yMfEgaZUAAAHtSURBVGhD3dZLahRRHEbxaKIxW4iKiUhExKEDdyEIIkiIDwSRQIZxHyKC+EBExIW4AEVQRFQ0E1eQh5HyXPCO+rTVVV23yr8XfpNDd936Jk3PVFX1X9AYkcaINEakMSKNEWmMSGNEGiPSOMZBXMB5HPjT/hkaxQJeI583uIQ0zj7fO43iBuy8xWUMPkijuIu/nXe4gsEGaRR1Q/J5j6uYhT2nGI1i0iH5fMAq5mDP65xG0XRIPh+xhuKDNIq2Q/L5hOsoNkijmHZIPp9xE4dg97SmUXQ1JJ8vuIXDsPsa0yi6HpLPV9zG1IM0ilJD8vmGO5iH3V9Loyg9JJ/vWMcR2HuMpVH0NSSfLVyDvYvSKPoeks9F2PuM0CiGGvIA9j4jNIqhhqQfAHufERpF30N+4Qkm/iegUfQ1JA14hXOw9xhLoyg9JA14ibOw+2tpFKWGpAEvcAZ278Q0iq6H7OM5TsPua0yj6GrITzzDCuye1jSKaYekAU9xCvb8qWkUbYekAY9xEvbczmgUTYfs4RGWYc/rnEYx6ZBdPMQS7DnFaBR1Q9KA9L/oBOz7xWkUG7Czg/s4DvtebzSKRfxAPtu4h2Owz/dO4xhHsYn0jzQNs88MRmNEGiPSGJHGiDRGpDEijRFpjEhjRBrjqWZ+A44vQYizqKsgAAAAAElFTkSuQmCC') } .$inf-closeButton-icon { background-image: url('data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAGdYAABnWARjRyu0AAAAZdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuMjHxIGmVAAABmklEQVRIS42W0UoDMRBF+w2LlD70C0oRkVKKFH9aREREfBAR6YMPRXwSERHxI+o92UnJ2kySAxc2yZ1JOruz3VFkt9t10qW0kWY23Yxi5tKzdCF1Nt2jiYl0L0U+JALM4YPHvMRE7qRxNHDyNHnkXToOpgJ4pDR5hE06DNdhmOdLOrVcB2htYR6PK0yv/bULCTilpd2X5cTWSmzjKb7D0IcS7Mula5LnypJCzkUMWEq104RySbWyAOt9ctAAraRfqQSBteQ/Ege27AmaXEu1TUqQ/MzS5ZGBX1K7JzmIWVoaH5lay5Xil8VD5nOpZRM8awtrR0EtTwvgcZvxAJlRSxOl4B00o4tMLU2UY9CMWWRoLYtHvlyabC0LN7R24z+lYblsolaW8LRILU8Xr/p5TP7/zyIHTbQKAYJrmytBzhnmlzD04bQktPT7krY04wbjbX+dhQ51m4g1qbTJDaax9BSGQ7jh1XeLPF65HqWjaJpKfBFECOCRDesl8Ei8h9JNOPDULD2a4MviQXqT2lvfUAwHIpYck352NPoDAGMXuY+giWkAAAAASUVORK5CYII=') } ".replace(/\.\$/g,".g367CB268B1094004A3689751E7AC568F-");n.body.appendChild(t)}}var e,ni,o,u,a,b,ti,rt,ii,ri,oi,y,ut,ft,k,et,d,ot,p,st,ht,ct,lt,at,vt,g,nt,ui,v,yt,pt,fi,wt,ei,kt,it,dt,gt;!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):n.Promise=t()}(this,function(){"use strict";function e(){}function n(t){if(!(this instanceof n))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0;this._handled=!1;this._value=undefined;this._deferreds=[];f(t,this)}function u(r,u){for(;3===r._state;)r=r._value;0!==r._state?(r._handled=!0,n._immediateFn(function(){var n=1===r._state?u.onFulfilled:u.onRejected,f;if(null!==n){try{f=n(r._value)}catch(e){return void t(u.promise,e)}i(u.promise,f)}else(1===r._state?i:t)(u.promise,r._value)})):r._deferreds.push(u)}function i(i,u){try{if(u===i)throw new TypeError("A promise cannot be resolved with itself.");if(u&&("object"==typeof u||"function"==typeof u)){var e=u.then;if(u instanceof n)return i._state=3,i._value=u,void r(i);if("function"==typeof e)return void f(function(n,t){return function(){n.apply(t,arguments)}}(e,u),i)}i._state=1;i._value=u;r(i)}catch(o){t(i,o)}}function t(n,t){n._state=2;n._value=t;r(n)}function r(t){2===t._state&&0===t._deferreds.length&&n._immediateFn(function(){t._handled||n._unhandledRejectionFn(t._value)});for(var i=0,r=t._deferreds.length;r>i;i++)u(t,t._deferreds[i]);t._deferreds=null}function f(n,r){var u=!1;try{n(function(n){u||(u=!0,i(r,n))},function(n){u||(u=!0,t(r,n))})}catch(f){if(u)return;u=!0;t(r,f)}}var o=setTimeout;return n.prototype["catch"]=function(n){return this.then(null,n)},n.prototype.then=function(n,t){var i=new this.constructor(e);return u(this,new function(n,t,i){this.onFulfilled="function"==typeof n?n:null;this.onRejected="function"==typeof t?t:null;this.promise=i}(n,t,i)),i},n.prototype["finally"]=function(n){var t=this.constructor;return this.then(function(i){return t.resolve(n()).then(function(){return i})},function(i){return t.resolve(n()).then(function(){return t.reject(i)})})},n.all=function(t){return new n(function(n,i){function f(t,u){try{if(u&&("object"==typeof u||"function"==typeof u)){var o=u.then;if("function"==typeof o)return void o.call(u,function(n){f(t,n)},i)}r[t]=u;0==--e&&n(r)}catch(s){i(s)}}var r,e,u;if(!t||"undefined"==typeof t.length)throw new TypeError("Promise.all accepts an array");if(r=Array.prototype.slice.call(t),0===r.length)return n([]);for(e=r.length,u=0;r.length>u;u++)f(u,r[u])})},n.resolve=function(t){return t&&"object"==typeof t&&t.constructor===n?t:new n(function(n){n(t)})},n.reject=function(t){return new n(function(n,i){i(t)})},n.race=function(t){return new n(function(n,i){for(var r=0,u=t.length;u>r;r++)t[r].then(n,i)})},n._immediateFn="function"==typeof setImmediate&&function(n){setImmediate(n)}||function(n){o(n,0)},n._unhandledRejectionFn=function(n){void 0!==console&&console&&console.warn("Possible Unhandled Promise Rejection:",n)},n});e=typeof e=="undefined"?this.Promise:e,function(n){if(typeof exports=="object"&&typeof module!="undefined")module.exports=n();else if(typeof define=="function"&&define.amd)define([],n);else{var t;t=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:this;t.DMVAST=n()}}(function(){return function(){function n(t,i,r){function u(f,o){var h,c,s;if(!i[f]){if(!t[f]){if(h="function"==typeof require&&require,!o&&h)return h(f,!0);if(e)return e(f,!0);c=new Error("Cannot find module '"+f+"'");throw c.code="MODULE_NOT_FOUND",c;}s=i[f]={exports:{}};t[f][0].call(s.exports,function(n){var i=t[f][1][n];return u(i||n)},s,s.exports,n,t,i,r)}return i[f].exports}for(var e="function"==typeof require&&require,f=0;f<r.length;f++)u(r[f]);return u}return n}()({1:[function(n,t){function i(){this._events=this._events||{};this._maxListeners=this._maxListeners||undefined}function r(n){return typeof n=="function"}function e(n){return typeof n=="number"}function u(n){return typeof n=="object"&&n!==null}function f(n){return n===void 0}t.exports=i;i.EventEmitter=i;i.prototype._events=undefined;i.prototype._maxListeners=undefined;i.defaultMaxListeners=10;i.prototype.setMaxListeners=function(n){if(!e(n)||n<0||isNaN(n))throw TypeError("n must be a positive number");return this._maxListeners=n,this};i.prototype.emit=function(n){var i,t,c,e,o,s,h;if(this._events||(this._events={}),n==="error"&&(!this._events.error||u(this._events.error)&&!this._events.error.length))if(i=arguments[1],i instanceof Error)throw i;else{h=new Error('Uncaught, unspecified "error" event. ('+i+")");h.context=i;throw h;}if(t=this._events[n],f(t))return!1;if(r(t))switch(arguments.length){case 1:t.call(this);break;case 2:t.call(this,arguments[1]);break;case 3:t.call(this,arguments[1],arguments[2]);break;default:e=Array.prototype.slice.call(arguments,1);t.apply(this,e)}else if(u(t))for(e=Array.prototype.slice.call(arguments,1),s=t.slice(),c=s.length,o=0;o<c;o++)s[o].apply(this,e);return!0};i.prototype.addListener=function(n,t){var e;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",n,r(t.listener)?t.listener:t),this._events[n]?u(this._events[n])?this._events[n].push(t):this._events[n]=[this._events[n],t]:this._events[n]=t,u(this._events[n])&&!this._events[n].warned&&(e=f(this._maxListeners)?i.defaultMaxListeners:this._maxListeners,e&&e>0&&this._events[n].length>e&&(this._events[n].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[n].length),typeof console.trace=="function"&&console.trace())),this};i.prototype.on=i.prototype.addListener;i.prototype.once=function(n,t){function i(){this.removeListener(n,i);u||(u=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var u=!1;i.listener=t;this.on(n,i);return this};i.prototype.removeListener=function(n,t){var i,e,o,f;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[n])return this;if(i=this._events[n],o=i.length,e=-1,i===t||r(i.listener)&&i.listener===t)delete this._events[n],this._events.removeListener&&this.emit("removeListener",n,t);else if(u(i)){for(f=o;f-->0;)if(i[f]===t||i[f].listener&&i[f].listener===t){e=f;break}if(e<0)return this;i.length===1?(i.length=0,delete this._events[n]):i.splice(e,1);this._events.removeListener&&this.emit("removeListener",n,t)}return this};i.prototype.removeAllListeners=function(n){var i,t;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[n]&&delete this._events[n],this;if(arguments.length===0){for(i in this._events)i!=="removeListener"&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events={},this}if(t=this._events[n],r(t))this.removeListener(n,t);else if(t)while(t.length)this.removeListener(n,t[t.length-1]);return delete this._events[n],this};i.prototype.listeners=function(n){return this._events&&this._events[n]?r(this._events[n])?[this._events[n]]:this._events[n].slice():[]};i.prototype.listenerCount=function(n){if(this._events){var t=this._events[n];if(r(t))return 1;if(t)return t.length}return 0};i.listenerCount=function(n,t){return n.listenerCount(t)}},{}],2:[function(n,t){var i;i=function(){function n(){this.id=null;this.sequence=null;this.system=null;this.title=null;this.description=null;this.advertiser=null;this.pricing=null;this.survey=null;this.errorURLTemplates=[];this.impressionURLTemplates=[];this.creatives=[];this.extensions=[]}return n}();t.exports=i},{}],3:[function(n,t,i){var r,u,f;u=n("./parser");f=n("./util");r=function(){function n(){}return n.cappingFreeLunch=0,n.cappingMinimumTimeInterval=0,n.options={withCredentials:!1,timeout:0},n.get=function(n,t,r){var s,f,e,o;if(f=+new Date,s=i.extend=function(n,t){var i,r;for(i in t)r=t[i],n[i]=r;return n},r||(typeof t=="function"&&(r=t),e={}),e=s(this.options,t),this.totalCallsTimeout<f?(this.totalCalls=1,this.totalCallsTimeout=f+36e5):this.totalCalls++,this.cappingFreeLunch>=this.totalCalls){r(null,new Error("VAST call canceled  FreeLunch capping not reached yet "+this.totalCalls+"/"+this.cappingFreeLunch));return}if(o=f-this.lastSuccessfullAd,o<0)this.lastSuccessfullAd=0;else if(o<this.cappingMinimumTimeInterval){r(null,new Error("VAST call canceled  ("+this.cappingMinimumTimeInterval+")ms minimum interval reached"));return}return u.parse(n,e,function(){return function(n,t){return r(n,t)}}(this))},function(){var i,t;t=f.storage;i=Object.defineProperty;["lastSuccessfullAd","totalCalls","totalCallsTimeout"].forEach(function(r){i(n,r,{get:function(){return t.getItem(r)},set:function(n){return t.setItem(r,n)},configurable:!1,enumerable:!0})});n.lastSuccessfullAd==null&&(n.lastSuccessfullAd=0);n.totalCalls==null&&(n.totalCalls=0);n.totalCallsTimeout==null&&(n.totalCallsTimeout=0)}(),n}();t.exports=r},{"./parser":12,"./util":18}],4:[function(n,t){var i;i=function(){function n(){this.id=null;this.width=0;this.height=0;this.type=null;this.staticResource=null;this.htmlResource=null;this.iframeResource=null;this.altText=null;this.companionClickThroughURLTemplate=null;this.companionClickTrackingURLTemplates=[];this.trackingEvents={}}return n}();t.exports=i},{}],5:[function(n,t){var i,u,f,e,r=function(n,t){function r(){this.constructor=n}for(var i in t)o.call(t,i)&&(n[i]=t[i]);return r.prototype=t.prototype,n.prototype=new r,n.__super__=t.prototype,n},o={}.hasOwnProperty;i=function(){function n(n){n==null&&(n={});this.id=n.id||null;this.adId=n.adId||null;this.sequence=n.sequence||null;this.apiFramework=n.apiFramework||null;this.trackingEvents={}}return n}();f=function(n){function t(){t.__super__.constructor.apply(this,arguments);this.type="linear";this.duration=0;this.skipDelay=null;this.mediaFiles=[];this.videoClickThroughURLTemplate=null;this.videoClickTrackingURLTemplates=[];this.videoCustomClickURLTemplates=[];this.adParameters=null;this.icons=[]}return r(t,n),t}(i);e=function(n){function t(){t.__super__.constructor.apply(this,arguments);this.type="nonlinear";this.variations=[]}return r(t,n),t}(i);u=function(n){function t(){t.__super__.constructor.apply(this,arguments);this.type="companion";this.variations=[]}return r(t,n),t}(i);t.exports={VASTCreativeLinear:f,VASTCreativeNonLinear:e,VASTCreativeCompanion:u}},{}],6:[function(n,t){var i;i=function(){function n(){this.attributes={};this.children=[]}return n}();t.exports=i},{}],7:[function(n,t){var i;i=function(){function n(){this.name=null;this.value=null;this.attributes={}}return n}();t.exports=i},{}],8:[function(n,t){var i;i=function(){function n(){this.program=null;this.height=0;this.width=0;this.xPosition=0;this.yPosition=0;this.apiFramework=null;this.offset=null;this.duration=0;this.type=null;this.staticResource=null;this.htmlResource=null;this.iframeResource=null;this.iconClickThroughURLTemplate=null;this.iconClickTrackingURLTemplates=[];this.iconViewTrackingURLTemplate=null}return n}();t.exports=i},{}],9:[function(n,t){t.exports={client:n("./client"),tracker:n("./tracker"),parser:n("./parser"),util:n("./util")}},{"./client":3,"./parser":12,"./tracker":14,"./util":18}],10:[function(n,t){var i;i=function(){function n(){this.id=null;this.fileURL=null;this.deliveryType="progressive";this.mimeType=null;this.codec=null;this.bitrate=0;this.minBitrate=0;this.maxBitrate=0;this.width=0;this.height=0;this.apiFramework=null;this.scalable=null;this.maintainAspectRatio=null}return n}();t.exports=i},{}],11:[function(n,t){var i;i=function(){function n(){this.id=null;this.width=0;this.height=0;this.expandedWidth=0;this.expandedHeight=0;this.scalable=!0;this.maintainAspectRatio=!0;this.minSuggestedDuration=0;this.apiFramework="static";this.type=null;this.staticResource=null;this.htmlResource=null;this.iframeResource=null;this.nonlinearClickThroughURLTemplate=null;this.nonlinearClickTrackingURLTemplates=[];this.adParameters=null}return n}();t.exports=i},{}],12:[function(n,t){var r,u,f,e,o,s,h,c,l,a,v,y,p,w,i,b=[].indexOf||function(n){for(var t=0,i=this.length;t<i;t++)if(t in this&&this[t]===n)return t;return-1};u=n("./urlhandler");w=n("./response");f=n("./ad");e=n("./extension");o=n("./extensionchild");i=n("./util");c=n("./creative").VASTCreativeLinear;h=n("./creative").VASTCreativeCompanion;l=n("./creative").VASTCreativeNonLinear;v=n("./mediafile");a=n("./icon");s=n("./companionad");y=n("./nonlinear");r=n("events").EventEmitter;p=function(){function n(){}var t;return t=[],n.addURLTemplateFilter=function(n){typeof n=="function"&&t.push(n)},n.removeURLTemplateFilter=function(){return t.pop()},n.countURLTemplateFilters=function(){return t.length},n.clearUrlTemplateFilters=function(){return t=[]},n.parse=function(n,t,i){return i||(typeof t=="function"&&(i=t),t={}),this._parse(n,null,t,function(n,t){return i(t,n)})},n.load=function(n,t,i){return i||(typeof t=="function"&&(i=t),t={}),this.parseXmlDocument(null,[],t,n,i)},n.vent=new r,n.track=function(n,t){return this.vent.emit("VAST-error",t),i.track(n,t)},n.on=function(n,t){return this.vent.on(n,t)},n.once=function(n,t){return this.vent.once(n,t)},n.off=function(n,t){return this.vent.removeListener(n,t)},n._parse=function(n,i,r,f){var o,e,s;for(f||(typeof r=="function"&&(f=r),r={}),e=0,s=t.length;e<s;e++)o=t[e],n=o(n);return i==null&&(i=[]),i.push(n),u.get(n,r,function(t){return function(u,e){return u!=null?f(u):t.parseXmlDocument(n,i,r,e,f)}}(this))},n.parseXmlDocument=function(t,i,r,u,f){var o,h,c,l,p,k,a,s,v,y,e;if(e=new w,!((u!=null?u.documentElement:void 0)!=null&&u.documentElement.nodeName==="VAST"))return f(new Error("Invalid VAST XMLDocument"));for(v=u.documentElement.childNodes,c=0,p=v.length;c<p;c++)s=v[c],s.nodeName==="Error"&&e.errorURLTemplates.push(n.parseNodeText(s));for(y=u.documentElement.childNodes,l=0,k=y.length;l<k;l++)s=y[l],s.nodeName==="Ad"&&(o=n.parseAdElement(s),o!=null?e.ads.push(o):n.track(e.errorURLTemplates,{ERRORCODE:101}));for(h=function(t,i){var r,h,u,s;if(t==null&&(t=null),i==null&&(i=!1),e){for(u=!0,s=e.ads,r=0,h=s.length;r<h;r++){if(o=s[r],o.nextWrapperURL!=null)return;o.creatives.length>0&&(u=!1)}return u&&(i||n.track(e.errorURLTemplates,{ERRORCODE:303})),e.ads.length===0&&(e=null,t=new Error("No ads: no valid <inline> has been found")),f(t,e)}},a=e.ads.length;a--;)(o=e.ads[a],o.nextWrapperURL!=null)&&function(u){var f;if(i.length>(r.wrapperLimit!==null?r.wrapperLimit:9)||(f=u.nextWrapperURL,b.call(i,f)>=0)){n.track(u.errorURLTemplates,{ERRORCODE:302});e.ads.splice(e.ads.indexOf(u),1);h(new Error("Wrapper limit reached, as defined by the video player"));return}return t!=null&&(u.nextWrapperURL=n.resolveVastAdTagURI(u.nextWrapperURL,t)),n._parse(u.nextWrapperURL,i,r,function(t,i){var r,o,f,l,s,c;if(r=!1,t!=null)n.track(u.errorURLTemplates,{ERRORCODE:301}),e.ads.splice(e.ads.indexOf(u),1),r=!0;else if(i==null)n.track(u.errorURLTemplates,{ERRORCODE:303}),e.ads.splice(e.ads.indexOf(u),1),r=!0;else for(e.errorURLTemplates=e.errorURLTemplates.concat(i.errorURLTemplates),o=e.ads.indexOf(u),e.ads.splice(o,1),s=i.ads,f=0,l=s.length;f<l;f++)c=s[f],n.mergeWrapperAdData(c,u),e.ads.splice(++o,0,c);return delete u.nextWrapperURL,h(t,r)})}(o);return h()},n.resolveVastAdTagURI=function(n,t){var i,r;return n.indexOf("//")===0?(r=location.protocol,""+r+n):n.indexOf("://")===-1?(i=t.slice(0,t.lastIndexOf("/")),i+"/"+n):n},n.mergeWrapperAdData=function(n,t){var y,i,r,u,f,e,o,p,w,b,k,h,d,c,g,l,nt,a,v,s,tt;for(n.errorURLTemplates=t.errorURLTemplates.concat(n.errorURLTemplates),n.impressionURLTemplates=t.impressionURLTemplates.concat(n.impressionURLTemplates),n.extensions=t.extensions.concat(n.extensions),h=n.creatives,u=0,p=h.length;u<p;u++)if(i=h[u],((d=t.trackingEvents)!=null?d[i.type]:void 0)!=null){c=t.trackingEvents[i.type];for(r in c)tt=c[r],(y=i.trackingEvents)[r]||(y[r]=[]),i.trackingEvents[r]=i.trackingEvents[r].concat(tt)}if((g=t.videoClickTrackingURLTemplates)!=null?g.length:void 0)for(l=n.creatives,f=0,w=l.length;f<w;f++)i=l[f],i.type==="linear"&&(i.videoClickTrackingURLTemplates=i.videoClickTrackingURLTemplates.concat(t.videoClickTrackingURLTemplates));if((nt=t.videoCustomClickURLTemplates)!=null?nt.length:void 0)for(a=n.creatives,e=0,b=a.length;e<b;e++)i=a[e],i.type==="linear"&&(i.videoCustomClickURLTemplates=i.videoCustomClickURLTemplates.concat(t.videoCustomClickURLTemplates));if(t.videoClickThroughURLTemplate!=null){for(v=n.creatives,s=[],o=0,k=v.length;o<k;o++)i=v[o],i.type==="linear"&&i.videoClickThroughURLTemplate==null?s.push(i.videoClickThroughURLTemplate=t.videoClickThroughURLTemplate):s.push(void 0);return s}},n.childByName=function(n,t){var r,i,f,u;for(u=n.childNodes,i=0,f=u.length;i<f;i++)if(r=u[i],r.nodeName===t)return r},n.childsByName=function(n,t){var r,u,i,e,f;for(u=[],f=n.childNodes,i=0,e=f.length;i<e;i++)r=f[i],r.nodeName===t&&u.push(r);return u},n.parseAdElement=function(n){var t,i,u,r,f;for(r=n.childNodes,i=0,u=r.length;i<u;i++)if(t=r[i],(f=t.nodeName)==="Wrapper"||f==="InLine"){if(this.copyNodeAttribute("id",n,t),this.copyNodeAttribute("sequence",n,t),t.nodeName==="Wrapper")return this.parseWrapperElement(t);if(t.nodeName==="InLine")return this.parseInLineElement(t)}},n.parseWrapperElement=function(n){var t,p,w,u,f,e,o,s,h,b,k,d,g,nt,c,tt,l,a,v,it,y,i,r;for(t=this.parseInLineElement(n),r=this.childByName(n,"VASTAdTagURI"),r!=null?t.nextWrapperURL=this.parseNodeText(r):(r=this.childByName(n,"VASTAdTagURL"),r!=null&&(t.nextWrapperURL=this.parseNodeText(this.childByName(r,"URL")))),c=t.creatives,f=0,b=c.length;f<b;f++)if(i=c[f],(tt=i.type)==="linear"||tt==="nonlinear"){if(i.trackingEvents!=null){t.trackingEvents||(t.trackingEvents={});(p=t.trackingEvents)[nt=i.type]||(p[nt]={});l=i.trackingEvents;for(u in l)for(y=l[u],(w=t.trackingEvents[i.type])[u]||(w[u]=[]),o=0,k=y.length;o<k;o++)it=y[o],t.trackingEvents[i.type][u].push(it)}if(i.videoClickTrackingURLTemplates!=null)for(t.videoClickTrackingURLTemplates||(t.videoClickTrackingURLTemplates=[]),a=i.videoClickTrackingURLTemplates,s=0,d=a.length;s<d;s++)e=a[s],t.videoClickTrackingURLTemplates.push(e);if(i.videoClickThroughURLTemplate!=null&&(t.videoClickThroughURLTemplate=i.videoClickThroughURLTemplate),i.videoCustomClickURLTemplates!=null)for(t.videoCustomClickURLTemplates||(t.videoCustomClickURLTemplates=[]),v=i.videoCustomClickURLTemplates,h=0,g=v.length;h<g;h++)e=v[h],t.videoCustomClickURLTemplates.push(e)}if(t.nextWrapperURL!=null)return t},n.parseInLineElement=function(n){var t,r,o,u,e,s,h,c,y,p,w,i,l,a,v;for(t=new f,t.id=n.getAttribute("id")||null,t.sequence=n.getAttribute("sequence")||null,l=n.childNodes,s=0,y=l.length;s<y;s++){i=l[s];switch(i.nodeName){case"Error":t.errorURLTemplates.push(this.parseNodeText(i));break;case"Impression":t.impressionURLTemplates.push(this.parseNodeText(i));break;case"Creatives":for(a=this.childsByName(i,"Creative"),h=0,p=a.length;h<p;h++)for(u=a[h],o={id:u.getAttribute("id")||null,adId:this.parseCreativeAdIdAttribute(u),sequence:u.getAttribute("sequence")||null,apiFramework:u.getAttribute("apiFramework")||null},v=u.childNodes,c=0,w=v.length;c<w;c++){e=v[c];switch(e.nodeName){case"Linear":r=this.parseCreativeLinearElement(e,o);r&&t.creatives.push(r);break;case"NonLinearAds":r=this.parseNonLinear(e,o);r&&t.creatives.push(r);break;case"CompanionAds":r=this.parseCompanionAd(e,o);r&&t.creatives.push(r)}}break;case"Extensions":this.parseExtension(t.extensions,this.childsByName(i,"Extension"));break;case"AdSystem":t.system={value:this.parseNodeText(i),version:i.getAttribute("version")||null};break;case"AdTitle":t.title=this.parseNodeText(i);break;case"Description":t.description=this.parseNodeText(i);break;case"Advertiser":t.advertiser=this.parseNodeText(i);break;case"Pricing":t.pricing={value:this.parseNodeText(i),model:i.getAttribute("model")||null,currency:i.getAttribute("currency")||null};break;case"Survey":t.survey=this.parseNodeText(i)}}return t},n.parseExtension=function(n,t){var i,u,r,a,f,v,s,h,c,l,d,g,nt,tt,y,p,w,b,k;for(b=[],s=0,d=t.length;s<d;s++){if(f=t[s],u=new e,f.attributes)for(y=f.attributes,h=0,g=y.length;h<g;h++)v=y[h],u.attributes[v.nodeName]=v.nodeValue;for(p=f.childNodes,c=0,nt=p.length;c<nt;c++)if(i=p[c],k=this.parseNodeText(i),i.nodeName!=="#comment"&&k!==""){if(r=new o,r.name=i.nodeName,r.value=k,i.attributes)for(w=i.attributes,l=0,tt=w.length;l<tt;l++)a=w[l],r.attributes[a.nodeName]=a.nodeValue;u.children.push(r)}b.push(n.push(u))}return b},n.parseCreativeLinearElement=function(n,t){var st,ui,fi,u,ei,o,ht,w,i,oi,b,f,ct,lt,k,d,g,si,hi,ci,li,ai,vi,yi,pi,wi,bi,ki,nt,s,r,e,di,tt,it,l,rt,gi,ut,ft,at,vt,yt,pt,wt,bt,kt,dt,gt,ni,ti,et,h,y,ii,ot,nr,ri,p;if(u=new c(t),u.duration=this.parseDuration(this.parseNodeText(this.childByName(n,"Duration"))),u.duration===-1&&n.parentNode.parentNode.parentNode.nodeName!=="Wrapper")return null;if(y=n.getAttribute("skipoffset"),y==null?u.skipDelay=null:y.charAt(y.length-1)==="%"?(gi=parseInt(y,10),u.skipDelay=u.duration*(gi/100)):u.skipDelay=this.parseDuration(y),p=this.childByName(n,"VideoClicks"),p!=null){for(u.videoClickThroughURLTemplate=this.parseNodeText(this.childByName(p,"ClickThrough")),at=this.childsByName(p,"ClickTracking"),w=0,si=at.length;w<si;w++)fi=at[w],u.videoClickTrackingURLTemplates.push(this.parseNodeText(fi));for(vt=this.childsByName(p,"CustomClick"),k=0,hi=vt.length;k<hi;k++)ei=vt[k],u.videoCustomClickURLTemplates.push(this.parseNodeText(ei))}for(st=this.childByName(n,"AdParameters"),st!=null&&(u.adParameters=this.parseNodeText(st)),pt=this.childsByName(n,"TrackingEvents"),d=0,li=pt.length;d<li;d++)for(nr=pt[d],wt=this.childsByName(nr,"Tracking"),g=0,ai=wt.length;g<ai;g++)if(ot=wt[g],o=ot.getAttribute("event"),ri=this.parseNodeText(ot),o!=null&&ri!=null){if(o==="progress"){if(l=ot.getAttribute("offset"),!l)continue;o=l.charAt(l.length-1)==="%"?"progress-"+l:"progress-"+Math.round(this.parseDuration(l))}(ui=u.trackingEvents)[o]==null&&(ui[o]=[]);u.trackingEvents[o].push(ri)}for(bt=this.childsByName(n,"MediaFiles"),nt=0,vi=bt.length;nt<vi;nt++)for(di=bt[nt],kt=this.childsByName(di,"MediaFile"),tt=0,yi=kt.length;tt<yi;tt++)e=kt[tt],r=new v,r.id=e.getAttribute("id"),r.fileURL=this.parseNodeText(e),r.deliveryType=e.getAttribute("delivery"),r.codec=e.getAttribute("codec"),r.mimeType=e.getAttribute("type"),r.apiFramework=e.getAttribute("apiFramework"),r.bitrate=parseInt(e.getAttribute("bitrate")||0),r.minBitrate=parseInt(e.getAttribute("minBitrate")||0),r.maxBitrate=parseInt(e.getAttribute("maxBitrate")||0),r.width=parseInt(e.getAttribute("width")||0),r.height=parseInt(e.getAttribute("height")||0),h=e.getAttribute("scalable"),h&&typeof h=="string"&&(h=h.toLowerCase(),h==="true"?r.scalable=!0:h==="false"&&(r.scalable=!1)),s=e.getAttribute("maintainAspectRatio"),s&&typeof s=="string"&&(s=s.toLowerCase(),s==="true"?r.maintainAspectRatio=!0:s==="false"&&(r.maintainAspectRatio=!1)),u.mediaFiles.push(r);if(ct=this.childByName(n,"Icons"),ct!=null)for(dt=this.childsByName(ct,"Icon"),it=0,pi=dt.length;it<pi;it++){for(f=dt[it],i=new a,i.program=f.getAttribute("program"),i.height=parseInt(f.getAttribute("height")||0),i.width=parseInt(f.getAttribute("width")||0),i.xPosition=this.parseXPosition(f.getAttribute("xPosition")),i.yPosition=this.parseYPosition(f.getAttribute("yPosition")),i.apiFramework=f.getAttribute("apiFramework"),i.offset=this.parseDuration(f.getAttribute("offset")),i.duration=this.parseDuration(f.getAttribute("duration")),gt=this.childsByName(f,"HTMLResource"),rt=0,wi=gt.length;rt<wi;rt++)ht=gt[rt],i.type=ht.getAttribute("creativeType")||"text/html",i.htmlResource=this.parseNodeText(ht);for(ni=this.childsByName(f,"IFrameResource"),ut=0,bi=ni.length;ut<bi;ut++)lt=ni[ut],i.type=lt.getAttribute("creativeType")||0,i.iframeResource=this.parseNodeText(lt);for(ti=this.childsByName(f,"StaticResource"),ft=0,ki=ti.length;ft<ki;ft++)ii=ti[ft],i.type=ii.getAttribute("creativeType")||0,i.staticResource=this.parseNodeText(ii);if(b=this.childByName(f,"IconClicks"),b!=null)for(i.iconClickThroughURLTemplate=this.parseNodeText(this.childByName(b,"IconClickThrough")),yt=this.childsByName(b,"IconClickTracking"),et=0,ci=yt.length;et<ci;et++)oi=yt[et],i.iconClickTrackingURLTemplates.push(this.parseNodeText(oi));i.iconViewTrackingURLTemplate=this.parseNodeText(this.childByName(f,"IconViewTracking"));u.icons.push(i)}return u},n.parseNonLinear=function(n,t){var p,ot,st,u,f,w,e,b,o,s,h,ht,ct,lt,at,vt,yt,pt,c,a,i,r,v,k,d,g,nt,tt,it,rt,ut,ft,wt,et;for(u=new l(t),k=this.childsByName(n,"TrackingEvents"),e=0,ht=k.length;e<ht;e++)for(wt=k[e],d=this.childsByName(wt,"Tracking"),o=0,ct=d.length;o<ct;o++)ft=d[o],f=ft.getAttribute("event"),et=this.parseNodeText(ft),f!=null&&et!=null&&((ot=u.trackingEvents)[f]==null&&(ot[f]=[]),u.trackingEvents[f].push(et));for(g=this.childsByName(n,"NonLinear"),s=0,lt=g.length;s<lt;s++){for(r=g[s],i=new y,i.id=r.getAttribute("id")||null,i.width=r.getAttribute("width"),i.height=r.getAttribute("height"),i.expandedWidth=r.getAttribute("expandedWidth"),i.expandedHeight=r.getAttribute("expandedHeight"),i.scalable=this.parseBoolean(r.getAttribute("scalable")),i.maintainAspectRatio=this.parseBoolean(r.getAttribute("maintainAspectRatio")),i.minSuggestedDuration=this.parseDuration(r.getAttribute("minSuggestedDuration")),i.apiFramework=r.getAttribute("apiFramework"),nt=this.childsByName(r,"HTMLResource"),h=0,at=nt.length;h<at;h++)w=nt[h],i.type=w.getAttribute("creativeType")||"text/html",i.htmlResource=this.parseNodeText(w);for(tt=this.childsByName(r,"IFrameResource"),c=0,vt=tt.length;c<vt;c++)b=tt[c],i.type=b.getAttribute("creativeType")||0,i.iframeResource=this.parseNodeText(b);for(it=this.childsByName(r,"StaticResource"),a=0,yt=it.length;a<yt;a++)ut=it[a],i.type=ut.getAttribute("creativeType")||0,i.staticResource=this.parseNodeText(ut);for(p=this.childByName(r,"AdParameters"),p!=null&&(i.adParameters=this.parseNodeText(p)),i.nonlinearClickThroughURLTemplate=this.parseNodeText(this.childByName(r,"NonLinearClickThrough")),rt=this.childsByName(r,"NonLinearClickTracking"),v=0,pt=rt.length;v<pt;v++)st=rt[v],i.nonlinearClickTrackingURLTemplates.push(this.parseNodeText(st));u.variations.push(i)}return u},n.parseCompanionAd=function(n,t){var st,ht,ct,i,r,p,u,w,f,b,e,o,c,lt,at,vt,yt,pt,wt,bt,kt,l,a,v,y,k,d,g,nt,tt,it,rt,ut,ft,et,dt,ot;for(p=new h(t),k=this.childsByName(n,"Companion"),f=0,lt=k.length;f<lt;f++){for(r=k[f],i=new s,i.id=r.getAttribute("id")||null,i.width=r.getAttribute("width"),i.height=r.getAttribute("height"),i.companionClickTrackingURLTemplates=[],d=this.childsByName(r,"HTMLResource"),e=0,at=d.length;e<at;e++)w=d[e],i.type=w.getAttribute("creativeType")||"text/html",i.htmlResource=this.parseNodeText(w);for(g=this.childsByName(r,"IFrameResource"),o=0,vt=g.length;o<vt;o++)b=g[o],i.type=b.getAttribute("creativeType")||0,i.iframeResource=this.parseNodeText(b);for(nt=this.childsByName(r,"StaticResource"),c=0,yt=nt.length;c<yt;c++){for(ft=nt[c],i.type=ft.getAttribute("creativeType")||0,tt=this.childsByName(r,"AltText"),l=0,pt=tt.length;l<pt;l++)ht=tt[l],i.altText=this.parseNodeText(ht);i.staticResource=this.parseNodeText(ft)}for(it=this.childsByName(r,"TrackingEvents"),a=0,wt=it.length;a<wt;a++)for(dt=it[a],rt=this.childsByName(dt,"Tracking"),v=0,bt=rt.length;v<bt;v++)et=rt[v],u=et.getAttribute("event"),ot=this.parseNodeText(et),u!=null&&ot!=null&&((st=i.trackingEvents)[u]==null&&(st[u]=[]),i.trackingEvents[u].push(ot));for(ut=this.childsByName(r,"CompanionClickTracking"),y=0,kt=ut.length;y<kt;y++)ct=ut[y],i.companionClickTrackingURLTemplates.push(this.parseNodeText(ct));i.companionClickThroughURLTemplate=this.parseNodeText(this.childByName(r,"CompanionClickThrough"));i.companionClickTrackingURLTemplate=this.parseNodeText(this.childByName(r,"CompanionClickTracking"));p.variations.push(i)}return p},n.parseDuration=function(n){var t,e,u,r,f;return(n!=null)?i.isNumeric(n)?parseInt(n):(t=n.split(":"),t.length!==3)?-1:(f=t[2].split("."),r=parseInt(f[0]),f.length===2&&(r+=parseFloat("0."+f[1])),u=parseInt(t[1]*60),e=parseInt(t[0]*3600),isNaN(e)||isNaN(u)||isNaN(r)||u>3600||r>60)?-1:e+u+r:-1},n.parseXPosition=function(n){return n==="left"||n==="right"?n:parseInt(n||0)},n.parseYPosition=function(n){return n==="top"||n==="bottom"?n:parseInt(n||0)},n.parseBoolean=function(n){return n==="true"||n==="TRUE"||n==="1"},n.parseNodeText=function(n){return n&&(n.textContent||n.text||"").trim()},n.copyNodeAttribute=function(n,t,i){var r;return r=t.getAttribute(n),r?i.setAttribute(n,r):void 0},n.parseCreativeAdIdAttribute=function(n){return n.getAttribute("AdID")||n.getAttribute("adID")||n.getAttribute("adId")||null},n}();t.exports=p},{"./ad":2,"./companionad":4,"./creative":5,"./extension":6,"./extensionchild":7,"./icon":8,"./mediafile":10,"./nonlinear":11,"./response":13,"./urlhandler":15,"./util":18,events:1}],13:[function(n,t){var i;i=function(){function n(){this.ads=[];this.errorURLTemplates=[]}return n}();t.exports=i},{}],14:[function(n,t){var r,u,f,e,o,s,i,h=function(n,t){function r(){this.constructor=n}for(var i in t)c.call(t,i)&&(n[i]=t[i]);return r.prototype=t.prototype,n.prototype=new r,n.__super__=t.prototype,n},c={}.hasOwnProperty;u=n("./client");i=n("./util");e=n("./creative").VASTCreativeLinear;o=n("./nonlinear");f=n("./companionad");r=n("events").EventEmitter;s=function(n){function t(n,t,i){var r,h,s;this.ad=n;this.creative=t;this.variation=i!=null?i:null;this.muted=!1;this.impressed=!1;this.skipable=!1;this.skipDelayDefault=-1;this.trackingEvents={};this.emitAlwaysEvents=["creativeView","start","firstQuartile","midpoint","thirdQuartile","complete","resume","pause","rewind","skip","closeLinear","close"];this._alreadyTriggeredQuartiles={};s=this.creative.trackingEvents;for(r in s)h=s[r],this.trackingEvents[r]=h.slice(0);this.creative instanceof e?(this.setDuration(this.creative.duration),this.skipDelay=this.creative.skipDelay,this.linear=!0,this.clickThroughURLTemplate=this.creative.videoClickThroughURLTemplate,this.clickTrackingURLTemplates=this.creative.videoClickTrackingURLTemplates):(this.skipDelay=-1,this.linear=!1,this.variation&&(this.variation instanceof o?(this.clickThroughURLTemplate=this.variation.nonlinearClickThroughURLTemplate,this.clickTrackingURLTemplates=this.variation.nonlinearClickTrackingURLTemplates):this.variation instanceof f&&(this.clickThroughURLTemplate=this.variation.companionClickThroughURLTemplate,this.clickTrackingURLTemplates=this.variation.companionClickTrackingURLTemplates)));this.on("start",function(){u.lastSuccessfullAd=+new Date})}return h(t,n),t.off=function(n,t){return this.removeListener(n,t)},t.prototype.setDuration=function(n){return this.assetDuration=n,this.quartiles={firstQuartile:Math.round(25*this.assetDuration)/100,midpoint:Math.round(50*this.assetDuration)/100,thirdQuartile:Math.round(75*this.assetDuration)/100}},t.prototype.setProgress=function(n){var e,t,r,o,s,i,f,u,h;if(u=this.skipDelay===null?this.skipDelayDefault:this.skipDelay,u===-1||this.skipable||(u>n?this.emit("skip-countdown",u-n):(this.skipable=!0,this.emit("skip-countdown",0))),this.linear&&this.assetDuration>0){if(t=[],n>0){t.push("start");s=Math.round(n/this.assetDuration*100);t.push("progress-"+s+"%");t.push("progress-"+Math.round(n));f=this.quartiles;for(i in f)h=f[i],this.isQuartileReached(i,h,n)&&(t.push(i),this._alreadyTriggeredQuartiles[i]=!0)}for(r=0,o=t.length;r<o;r++)e=t[r],this.track(e,!0);n<this.progress&&this.track("rewind")}return this.progress=n},t.prototype.isQuartileReached=function(n,t,i){var r;return r=!1,t<=i&&!this._alreadyTriggeredQuartiles[n]&&(r=!0),r},t.prototype.setMuted=function(n){return this.muted!==n&&this.track(n?"mute":"unmute"),this.muted=n},t.prototype.setPaused=function(n){return this.paused!==n&&this.track(n?"pause":"resume"),this.paused=n},t.prototype.setFullscreen=function(n){return this.fullscreen!==n&&this.track(n?"fullscreen":"exitFullscreen"),this.fullscreen=n},t.prototype.setExpand=function(n){return this.expanded!==n&&this.track(n?"expand":"collapse"),this.expanded=n},t.prototype.setSkipDelay=function(n){if(typeof n=="number")return this.skipDelay=n},t.prototype.load=function(){if(!this.impressed)return this.impressed=!0,this.trackURLs(this.ad.impressionURLTemplates),this.track("creativeView")},t.prototype.errorWithCode=function(n){return this.trackURLs(this.ad.errorURLTemplates,{ERRORCODE:n})},t.prototype.complete=function(){return this.track("complete")},t.prototype.close=function(){return this.track(this.linear?"closeLinear":"close")},t.prototype.stop=function(){},t.prototype.skip=function(){return this.track("skip"),this.trackingEvents=[]},t.prototype.click=function(){var n,t,r;return((t=this.clickTrackingURLTemplates)!=null?t.length:void 0)&&this.trackURLs(this.clickTrackingURLTemplates),this.clickThroughURLTemplate!=null?(this.linear&&(r={CONTENTPLAYHEAD:this.progressFormated()}),n=i.resolveURLTemplates([this.clickThroughURLTemplate],r)[0],this.emit("clickthrough",n)):void 0},t.prototype.track=function(n,t){var i,r;t==null&&(t=!1);n==="closeLinear"&&this.trackingEvents[n]==null&&this.trackingEvents.close!=null&&(n="close");r=this.trackingEvents[n];i=this.emitAlwaysEvents.indexOf(n);r!=null?(this.emit(n,""),this.trackURLs(r)):i!==-1&&this.emit(n,"");t===!0&&(delete this.trackingEvents[n],i>-1&&this.emitAlwaysEvents.splice(i,1))},t.prototype.trackURLs=function(n,t){var r;return t==null&&(t={}),this.linear&&(((r=this.creative.mediaFiles[0])!=null?r.fileURL:void 0)!=null&&(t.ASSETURI=this.creative.mediaFiles[0].fileURL),t.CONTENTPLAYHEAD=this.progressFormated()),i.track(n,t)},t.prototype.progressFormated=function(){var t,n,u,r,i;return i=parseInt(this.progress),t=i/3600,t.length<2&&(t="0"+t),n=i/60%60,n.length<2&&(n="0"+n),r=i%60,r.length<2&&(r="0"+n),u=parseInt((this.progress-i)*100),t+":"+n+":"+r+"."+u},t}(r);t.exports=s},{"./client":3,"./companionad":4,"./creative":5,"./nonlinear":11,"./util":18,events:1}],15:[function(n,t){var u,i,r;r=n("./urlhandlers/xmlhttprequest");i=n("./urlhandlers/flash");u=function(){function t(){}return t.get=function(t,u,f){var e,o;return f||(typeof u=="function"&&(f=u),u={}),u.response!=null?(o=u.response,delete u.response,f(null,o)):((e=u.urlhandler)!=null?e.supported():void 0)?u.urlhandler.get(t,u,f):typeof window=="undefined"||window===null?n("./urlhandlers/node").get(t,u,f):r.supported()?r.get(t,u,f):i.supported()?i.get(t,u,f):f(new Error("Current context is not supported by any of the default URLHandlers. Please provide a custom URLHandler"))},t}();t.exports=u},{"./urlhandlers/flash":16,"./urlhandlers/xmlhttprequest":17}],16:[function(n,t){var i;i=function(){function n(){}return n.xdr=function(){var n;return window.XDomainRequest&&(n=new XDomainRequest),n},n.supported=function(){return!!this.xdr()},n.get=function(n,t,i){var r,u;if(u=typeof ActiveXObject=="function"?new window.ActiveXObject("Microsoft.XMLDOM"):void 0)u.async=!1;else return i(new Error("FlashURLHandler: Microsoft.XMLDOM format not supported"));return r=this.xdr(),r.open("GET",n),r.timeout=t.timeout||0,r.withCredentials=t.withCredentials||!1,r.send(),r.onprogress=function(){},r.onload=function(){return u.loadXML(r.responseText),i(null,u)}},n}();t.exports=i},{}],17:[function(n,t){var i;i=function(){function n(){}return n.xhr=function(){var n;return n=new window.XMLHttpRequest,"withCredentials"in n?n:void 0},n.supported=function(){return!!this.xhr()},n.get=function(n,t,i){var r;if(window.location.protocol==="https:"&&n.indexOf("http://")===0)return i(new Error("XHRURLHandler: Cannot go from HTTPS to HTTP."));try{return r=this.xhr(),r.open("GET",n),r.timeout=t.timeout||0,r.withCredentials=t.withCredentials||!1,r.overrideMimeType&&r.overrideMimeType("text/xml"),r.onreadystatechange=function(){if(r.readyState===4)return r.status===200?i(null,r.responseXML):i(new Error("XHRURLHandler: "+r.statusText))},r.send()}catch(u){return i(new Error("XHRURLHandler: Unexpected error"))}},n}();t.exports=i},{}],18:[function(n,t){var i;i=function(){function n(){}return n.track=function(n,t){var f,r,e,i,o,u;for(r=this.resolveURLTemplates(n,t),u=[],i=0,o=r.length;i<o;i++)f=r[i],typeof window!="undefined"&&window!==null&&(e=new Image,u.push(e.src=f));return u},n.resolveURLTemplates=function(n,t){var o,f,r,u,s,h,c,i,e;for(t==null&&(t={}),f=[],t.ASSETURI!=null&&(t.ASSETURI=this.encodeURIComponentRFC3986(t.ASSETURI)),t.CONTENTPLAYHEAD!=null&&(t.CONTENTPLAYHEAD=this.encodeURIComponentRFC3986(t.CONTENTPLAYHEAD)),t.ERRORCODE==null||/^[0-9]{3}$/.test(t.ERRORCODE)||(t.ERRORCODE=900),t.CACHEBUSTING=this.leftpad(Math.round(Math.random()*1e8).toString()),t.TIMESTAMP=this.encodeURIComponentRFC3986((new Date).toISOString()),t.RANDOM=t.random=t.CACHEBUSTING,r=0,s=n.length;r<s;r++)if(o=n[r],i=o,i){for(u in t)e=t[u],h="["+u+"]",c="%%"+u+"%%",i=i.replace(h,e),i=i.replace(c,e);f.push(i)}return f},n.encodeURIComponentRFC3986=function(n){return encodeURIComponent(n).replace(/[!'()*]/g,function(n){return"%"+n.charCodeAt(0).toString(16)})},n.leftpad=function(n){return n.length<8?function(){var t,i,r;for(r=[],t=0,i=8-n.length;0<=i?t<i:t>i;0<=i?t++:t--)r.push("0");return r}().join("")+n:n},n.storage=function(){var n,i,t,r;try{t=typeof window!="undefined"&&window!==null?window.localStorage||window.sessionStorage:null}catch(u){r=u;t=null}return i=function(n){var i,t;try{if(t="__VASTUtil__",n.setItem(t,t),n.getItem(t)!==t)return!0}catch(r){return i=r,!0}return!1},(t==null||i(t))&&(n={},t={length:0,getItem:function(t){return n[t]},setItem:function(t,i){n[t]=i;this.length=Object.keys(n).length},removeItem:function(t){delete n[t];this.length=Object.keys(n).length},clear:function(){n={};this.length=0}}),t}(),n.isNumeric=function(n){return!isNaN(parseFloat(n))&&isFinite(n)},n}();t.exports=i},{}]},{},[9])(9)});
/*!
* screenfull
* v3.3.3 - 2018-09-04
* (c) Sindre Sorhus; MIT License
*/
!function(){"use strict";var t="undefined"!=typeof window&&void 0!==window.document?window.document:{},r="undefined"!=typeof module&&module.exports,f="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,n=function(){for(var i,r=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],n=0,f=r.length,u={};n<f;n++)if((i=r[n])&&i[1]in t){for(n=0;n<i.length;n++)u[r[0][n]]=i[n];return u}return!1}(),u={change:n.fullscreenchange,error:n.fullscreenerror},i={request:function(i){var r=n.requestFullscreen;i=i||t.documentElement;/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)?i[r]():i[r](f?Element.ALLOW_KEYBOARD_INPUT:{})},exit:function(){t[n.exitFullscreen]()},toggle:function(n){this.isFullscreen?this.exit():this.request(n)},onchange:function(n){this.on("change",n)},onerror:function(n){this.on("error",n)},on:function(n,i){var r=u[n];r&&t.addEventListener(r,i,!1)},off:function(n,i){var r=u[n];r&&t.removeEventListener(r,i,!1)},raw:n};if(!n)return void(r?module.exports=!1:window.screenfull=!1);Object.defineProperties(i,{isFullscreen:{get:function(){return Boolean(t[n.fullscreenElement])}},element:{enumerable:!0,get:function(){return t[n.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return Boolean(t[n.fullscreenEnabled])}}});r?module.exports=i:window.screenfull=i}(),function(n,t){"use strict";var rt="",nt="?",tt="function",b="undefined",d="object",ut="string",r="model",i="name",e="type",u="vendor",f="version",l="architecture",p="console",o="mobile",s="tablet",k="smarttv",g="wearable",a={extend:function(n,t){for(var i in t)"browser cpu device engine os".indexOf(i)!==-1&&t[i].length%2==0&&(n[i]=t[i].concat(n[i]));return n},has:function(n,t){return typeof n=="string"?t.toLowerCase().indexOf(n.toLowerCase())!==-1:!1},lowerize:function(n){return n.toLowerCase()},major:function(n){return typeof n===ut?n.split(".")[0]:t}},c={rgx:function(){for(var r,o=0,s,l,u,n,e,i,h=arguments,c,f;o<h.length&&!e;){if(c=h[o],f=h[o+1],typeof r===b){r={};for(u in f)f.hasOwnProperty(u)&&(n=f[u],typeof n===d?r[n[0]]=t:r[n]=t)}for(s=l=0;s<c.length&&!e;)if(e=c[s++].exec(this.getUA()),!!e)for(u=0;u<f.length;u++)i=e[++l],n=f[u],typeof n===d&&n.length>0?n.length==2?r[n[0]]=typeof n[1]==tt?n[1].call(this,i):n[1]:n.length==3?r[n[0]]=typeof n[1]===tt&&(!n[1].exec||!n[1].test)?i?n[1].call(this,i,n[2]):t:i?i.replace(n[1],n[2]):t:n.length==4&&(r[n[0]]=i?n[3].call(this,i.replace(n[1],n[2])):t):r[n]=i?i:t;o+=2}return r},str:function(n,i){var r,u;for(r in i)if(typeof i[r]===d&&i[r].length>0){for(u=0;u<i[r].length;u++)if(a.has(i[r][u],n))return r===nt?t:r}else if(a.has(i[r],n))return r===nt?t:r;return n}},v={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},it={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[i,f],[/\s(opr)\/([\w\.]+)/i],[[i,"Opera"],f],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs)\/([\w\.-]+)/i],[i,f],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[i,"IE"],f],[/(edge)\/((\d+)?[\w\.]+)/i],[i,f],[/(yabrowser)\/([\w\.]+)/i],[[i,"Yandex"],f],[/(comodo_dragon)\/([\w\.]+)/i],[[i,/_/g," "],f],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(qqbrowser)[\/\s]?([\w\.]+)/i],[i,f],[/(uc\s?browser)[\/\s]?([\w\.]+)/i,/ucweb.+(ucbrowser)[\/\s]?([\w\.]+)/i,/JUC.+(ucweb)[\/\s]?([\w\.]+)/i],[[i,"UCBrowser"],f],[/(dolfin)\/([\w\.]+)/i],[[i,"Dolphin"],f],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[i,"Chrome"],f],[/XiaoMi\/MiuiBrowser\/([\w\.]+)/i],[f,[i,"MIUI Browser"]],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)/i],[f,[i,"Android Browser"]],[/FBAV\/([\w\.]+);/i],[f,[i,"Facebook"]],[/fxios\/([\w\.-]+)/i],[f,[i,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[f,[i,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[f,i],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[i,[f,c.str,v.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[i,f],[/(navigator|netscape)\/([\w\.-]+)/i],[[i,"Netscape"],f],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[i,f]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[l,"amd64"]],[/(ia32(?=;))/i],[[l,a.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[l,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[l,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[l,/ower/,"",a.lowerize]],[/(sun4\w)[;\)]/i],[[l,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[l,a.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[r,u,[e,s]],[/applecoremedia\/[\w\.]+ \((ipad)/],[r,[u,"Apple"],[e,s]],[/(apple\s{0,1}tv)/i],[[r,"Apple TV"],[u,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[u,r,[e,s]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[r,[u,"Amazon"],[e,s]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[r,c.str,v.device.amazon.model],[u,"Amazon"],[e,o]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[r,u,[e,o]],[/\((ip[honed|\s\w*]+);/i],[r,[u,"Apple"],[e,o]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[u,r,[e,o]],[/\(bb10;\s(\w+)/i],[r,[u,"BlackBerry"],[e,o]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7)/i],[r,[u,"Asus"],[e,s]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[u,"Sony"],[r,"Xperia Tablet"],[e,s]],[/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i],[[u,"Sony"],[r,"Xperia Phone"],[e,o]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[u,r,[e,p]],[/android.+;\s(shield)\sbuild/i],[r,[u,"Nvidia"],[e,p]],[/(playstation\s[34portablevi]+)/i],[r,[u,"Sony"],[e,p]],[/(sprint\s(\w+))/i],[[u,c.str,v.device.sprint.vendor],[r,c.str,v.device.sprint.model],[e,o]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[u,r,[e,s]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[u,[r,/_/g," "],[e,o]],[/(nexus\s9)/i],[r,[u,"HTC"],[e,s]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[r,[u,"Microsoft"],[e,p]],[/(kin\.[onetw]{3})/i],[[r,/\./g," "],[u,"Microsoft"],[e,o]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s[6])/i],[r,[u,"Motorola"],[e,o]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[r,[u,"Motorola"],[e,s]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n8000|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[u,"Samsung"],r,[e,s]],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-n900))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[u,"Samsung"],r,[e,o]],[/(samsung);smarttv/i],[u,r,[e,k]],[/\(dtv[\);].+(aquos)/i],[r,[u,"Sharp"],[e,k]],[/sie-(\w+)*/i],[r,[u,"Siemens"],[e,o]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[u,"Nokia"],r,[e,o]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[r,[u,"Acer"],[e,s]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[u,"LG"],r,[e,s]],[/(lg) netcast\.tv/i],[u,r,[e,k]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],[r,[u,"LG"],[e,o]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[r,[u,"Lenovo"],[e,s]],[/linux;.+((jolla));/i],[u,r,[e,o]],[/((pebble))app\/[\d\.]+\s/i],[u,r,[e,g]],[/android.+;\s(glass)\s\d/i],[r,[u,"Google"],[e,g]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus)?[\s_]*(?:\d\w)?)\s+build/i],[[r,/_/g," "],[u,"Xiaomi"],[e,o]],[/\s(tablet)[;\/\s]/i,/\s(mobile)[;\/\s]/i],[[e,a.lowerize],u,r]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[f,[i,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[i,f],[/rv\:([\w\.]+).*(gecko)/i],[f,i]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[i,f],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[i,[f,c.str,v.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[i,"Windows"],[f,c.str,v.os.windows.version]],[/\((bb)(10);/i],[[i,"BlackBerry"],f],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[i,f],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[i,"Symbian"],f],[/\((series40);/i],[i],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[i,"Firefox OS"],f],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[i,f],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[i,"Chromium OS"],f],[/(sunos)\s?([\w\.]+\d)*/i],[[i,"Solaris"],f],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[i,f],[/(ip[honead]+)(?:.*os\s([\w]+)*\slike\smac|;\sopera)/i],[[i,"iOS"],[f,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[i,"Mac OS"],[f,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[i,f]]},h=function(t,i){if(this instanceof h){var u=t||(n&&n.navigator&&n.navigator.userAgent?n.navigator.userAgent:rt),r=i?a.extend(it,i):it;return this.getBrowser=function(){var n=c.rgx.apply(this,r.browser);return n.major=a.major(n.version),n},this.getCPU=function(){return c.rgx.apply(this,r.cpu)},this.getDevice=function(){return c.rgx.apply(this,r.device)},this.getEngine=function(){return c.rgx.apply(this,r.engine)},this.getOS=function(){return c.rgx.apply(this,r.os)},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return u},this.setUA=function(n){return u=n,this},this.setUA(u),this}return new h(t,i).getResult()},y,w;h.VERSION="0.7.10";h.BROWSER={NAME:i,MAJOR:"major",VERSION:f};h.CPU={ARCHITECTURE:l};h.DEVICE={MODEL:r,VENDOR:u,TYPE:e,CONSOLE:p,MOBILE:o,SMARTTV:k,TABLET:s,WEARABLE:g,EMBEDDED:"embedded"};h.ENGINE={NAME:i,VERSION:f};h.OS={NAME:i,VERSION:f};typeof exports!==b?(typeof module!==b&&module.exports&&(exports=module.exports=h),exports.UAParser=h):n.UAParser=h;y=n.jQuery||n.Zepto;typeof y!==b&&(w=new h,y.ua=w.getResult(),y.ua.get=function(){return w.getUA()},y.ua.set=function(n){var t,i;w.setUA(n);t=w.getResult();for(i in t)y.ua[i]=t[i]})}(typeof window=="object"?window:this);try{"undefined"!=typeof window&&function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Hls=t():n.Hls=t()}(this,function(){return function(n){function t(r){if(i[r])return i[r].exports;var u=i[r]={i:r,l:!1,exports:{}};return n[r].call(u.exports,u,u.exports,t),u.l=!0,u.exports}var i={};return t.m=n,t.c=i,t.d=function(n,i,r){t.o(n,i)||Object.defineProperty(n,i,{configurable:!1,enumerable:!0,get:r})},t.n=function(n){var i=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(i,"a",i),i},t.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},t.p="/dist/",t(t.s=29)}([function(n,t,i){"use strict";function r(){}function o(n,t){return"["+n+"] > "+t}function s(n){var t=e.console[n];return t?function(){for(var u=arguments.length,i=Array(u),r=0;r<u;r++)i[r]=arguments[r];i[0]&&(i[0]=o(n,i[0]));t.apply(e.console,i)}:r}function h(n){for(var i=arguments.length,r=Array(i>1?i-1:0),t=1;t<i;t++)r[t-1]=arguments[t];r.forEach(function(t){u[t]=n[t]?n[t].bind(n):s(t)})}i.d(t,"a",function(){return a});i.d(t,"b",function(){return v});var c=i(5),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},f={trace:r,debug:r,log:r,warn:r,info:r,error:r},u=f,e=Object(c.a)(),a=function(n){if(!0===n||"object"===(void 0===n?"undefined":l(n))){h(n,"debug","log","info","warn","error");try{u.log()}catch(n){u=f}}else u=f},v=u},function(n,t){"use strict";t.a={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition"}},function(n,t,i){"use strict";i.d(t,"b",function(){return r});i.d(t,"a",function(){return u});var r={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",KEY_SYSTEM_ERROR:"keySystemError",MUX_ERROR:"muxError",OTHER_ERROR:"otherError"},u={KEY_SYSTEM_NO_KEYS:"keySystemNoKeys",KEY_SYSTEM_NO_ACCESS:"keySystemNoAccess",KEY_SYSTEM_NO_SESSION:"keySystemNoSession",KEY_SYSTEM_LICENSE_REQUEST_FAILED:"keySystemLicenseRequestFailed",MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",REMUX_ALLOC_ERROR:"remuxAllocError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",BUFFER_NUDGE_ON_STALL:"bufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException"}},function(n,t,i){"use strict";i.d(t,"a",function(){return r});var r=Number.isFinite||function(n){return"number"==typeof n&&isFinite(n)}},function(n,t,i){"use strict";function u(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var f=i(0),r=i(2),e=i(1),o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},s=new Set(["hlsEventGeneric","hlsHandlerDestroying","hlsHandlerDestroyed"]),h=function(){function n(t){u(this,n);this.hls=t;this.onEvent=this.onEvent.bind(this);for(var r=arguments.length,f=Array(r>1?r-1:0),i=1;i<r;i++)f[i-1]=arguments[i];this.handledEvents=f;this.useGenericHandler=!0;this.registerListeners()}return n.prototype.destroy=function(){this.onHandlerDestroying();this.unregisterListeners();this.onHandlerDestroyed()},n.prototype.onHandlerDestroying=function(){},n.prototype.onHandlerDestroyed=function(){},n.prototype.isEventHandler=function(){return"object"===o(this.handledEvents)&&this.handledEvents.length&&"function"==typeof this.onEvent},n.prototype.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(n){if(s.has(n))throw new Error("Forbidden event-name: "+n);this.hls.on(n,this.onEvent)},this)},n.prototype.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(n){this.hls.off(n,this.onEvent)},this)},n.prototype.onEvent=function(n,t){this.onEventGeneric(n,t)},n.prototype.onEventGeneric=function(n,t){var i=function(n,t){var i="on"+n.replace("hls","");if("function"!=typeof this[i])throw new Error("Event "+n+" has no generic handler in this "+this.constructor.name+" class (tried "+i+")");return this[i].bind(this,t)};try{i.call(this,n,t).call()}catch(t){f.b.error("An internal error happened while handling event "+n+'. Error message: "'+t.message+'". Here is a stacktrace:',t);this.hls.trigger(e.a.ERROR,{type:r.b.OTHER_ERROR,details:r.a.INTERNAL_EXCEPTION,fatal:!1,event:n,err:t})}},n}();t.a=h},function(n,t){"use strict";function i(){return"undefined"==typeof window?self:window}t.a=i},function(n){!function(){var i=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/\;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,r=/^([^\/;?#]*)(.*)$/,u=/(?:\/|^)\.(?=\/)/g,f=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,t={buildAbsoluteURL:function(n,i,u){var s,f,e,h,o,c,l;if(u=u||{},n=n.trim(),!(i=i.trim())){if(!u.alwaysNormalize)return n;if(s=this.parseURL(n),!e)throw new Error("Error trying to parse base URL.");return s.path=t.normalizePath(s.path),t.buildURLFromParts(s)}if(f=this.parseURL(i),!f)throw new Error("Error trying to parse relative URL.");if(f.scheme)return u.alwaysNormalize?(f.path=t.normalizePath(f.path),t.buildURLFromParts(f)):i;if(e=this.parseURL(n),!e)throw new Error("Error trying to parse base URL.");return!e.netLoc&&e.path&&"/"!==e.path[0]&&(h=r.exec(e.path),e.netLoc=h[1],e.path=h[2]),e.netLoc&&!e.path&&(e.path="/"),o={scheme:e.scheme,netLoc:f.netLoc,path:null,params:f.params,query:f.query,fragment:f.fragment},f.netLoc||(o.netLoc=e.netLoc,"/"===f.path[0])||(f.path?(c=e.path,l=c.substring(0,c.lastIndexOf("/")+1)+f.path,o.path=t.normalizePath(l)):(o.path=e.path,f.params||(o.params=e.params,f.query||(o.query=e.query)))),null===o.path&&(o.path=u.alwaysNormalize?t.normalizePath(f.path):f.path),t.buildURLFromParts(o)},parseURL:function(n){var t=i.exec(n);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(n){for(n=n.split("").reverse().join("").replace(u,"");n.length!==(n=n.replace(f,"")).length;);return n.split("").reverse().join("")},buildURLFromParts:function(n){return n.scheme+n.netLoc+n.path+n.params+n.query+n.fragment}};n.exports=t}()},function(n,t){"use strict";var i={search:function(n,t){for(var e,r=0,u=n.length-1,i=null,f=null;r<=u;)if(i=(r+u)/2|0,f=n[i],e=t(f),e>0)r=i+1;else{if(!(e<0))return f;u=i-1}return null}};t.a=i},function(n,t,i){"use strict";function r(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}i.d(t,"a",function(){return u});var u=function(){function n(){r(this,n)}return n.isBuffered=function(n,t){try{if(n)for(var r=n.buffered,i=0;i<r.length;i++)if(t>=r.start(i)&&t<=r.end(i))return!0}catch(n){}return!1},n.bufferInfo=function(n,t,i){try{if(n){for(var u=n.buffered,f=[],r=void 0,r=0;r<u.length;r++)f.push({start:u.start(r),end:u.end(r)});return this.bufferedInfo(f,t,i)}}catch(n){}return{len:0,start:t,end:t,nextStart:void 0}},n.bufferedInfo=function(n,t,i){var u=[],s=void 0,h=void 0,e=void 0,a=void 0,r=void 0,o,c,f,l;for(n.sort(function(n,t){var i=n.start-t.start;return i||t.end-n.end}),r=0;r<n.length;r++)o=u.length,o?(c=u[o-1].end,n[r].start-c<i?n[r].end>c&&(u[o-1].end=n[r].end):u.push(n[r])):u.push(n[r]);for(r=0,s=0,h=e=t;r<u.length;r++)if(f=u[r].start,l=u[r].end,t+i>=f&&t<l)h=f,e=l,s=e-t;else if(t+i<f){a=f;break}return{len:s,start:h,end:e,nextStart:a}},n}()},function(n,t,i){"use strict";function u(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}i.d(t,"b",function(){return f});var r=function(){function n(){u(this,n)}return n.isHeader=function(n,t){return t+10<=n.length&&73===n[t]&&68===n[t+1]&&51===n[t+2]&&n[t+3]<255&&n[t+4]<255&&n[t+6]<128&&n[t+7]<128&&n[t+8]<128&&n[t+9]<128},n.isFooter=function(n,t){return t+10<=n.length&&51===n[t]&&68===n[t+1]&&73===n[t+2]&&n[t+3]<255&&n[t+4]<255&&n[t+6]<128&&n[t+7]<128&&n[t+8]<128&&n[t+9]<128},n.getID3Data=function(t,i){for(var u=i,r=0;n.isHeader(t,i);)r+=10,r+=n._readSize(t,i+6),n.isFooter(t,i+10)&&(r+=10),i+=r;if(r>0)return t.subarray(u,u+r)},n._readSize=function(n,t){var i=0;return i=(127&n[t])<<21,i|=(127&n[t+1])<<14,i|=(127&n[t+2])<<7,i|127&n[t+3]},n.getTimeStamp=function(t){for(var u,r=n.getID3Frames(t),i=0;i<r.length;i++)if(u=r[i],n.isTimeStampFrame(u))return n._readTimeStamp(u)},n.isTimeStampFrame=function(n){return n&&"PRIV"===n.key&&"com.apple.streaming.transportStreamTimestamp"===n.info},n._getFrameData=function(t){var r=String.fromCharCode(t[0],t[1],t[2],t[3]),i=n._readSize(t,4);return{type:r,size:i,data:t.subarray(10,10+i)}},n.getID3Frames=function(t){for(var e,o,u,f,i=0,r=[];n.isHeader(t,i);){for(e=n._readSize(t,i+6),i+=10,o=i+e;i+8<o;)u=n._getFrameData(t.subarray(i)),f=n._decodeFrame(u),f&&r.push(f),i+=u.size+10;n.isFooter(t,i)&&(i+=10)}return r},n._decodeFrame=function(t){return"PRIV"===t.type?n._decodePrivFrame(t):"T"===t.type[0]?n._decodeTextFrame(t):"W"===t.type[0]?n._decodeURLFrame(t):void 0},n._readTimeStamp=function(n){if(8===n.data.byteLength){var t=new Uint8Array(n.data),r=1&t[3],i=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return i/=45,r&&(i+=47721858.84),Math.round(i)}},n._decodePrivFrame=function(t){if(!(t.size<2)){var i=n._utf8ArrayToStr(t.data,!0),r=new Uint8Array(t.data.subarray(i.length+1));return{key:t.type,info:i,data:r.buffer}}},n._decodeTextFrame=function(t){var i,r,u,f;if(!(t.size<2))return"TXXX"===t.type?(i=1,r=n._utf8ArrayToStr(t.data.subarray(i)),i+=r.length+1,u=n._utf8ArrayToStr(t.data.subarray(i)),{key:t.type,info:r,data:u}):(f=n._utf8ArrayToStr(t.data.subarray(1)),{key:t.type,data:f})},n._decodeURLFrame=function(t){var i,r,u,f;return"WXXX"===t.type?t.size<2?void 0:(i=1,r=n._utf8ArrayToStr(t.data.subarray(i)),i+=r.length+1,u=n._utf8ArrayToStr(t.data.subarray(i)),{key:t.type,info:r,data:u}):(f=n._utf8ArrayToStr(t.data),{key:t.type,data:f})},n._utf8ArrayToStr=function(n){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=n.length,t=void 0,u=void 0,f=void 0,i="",r=0;r<o;){if(0===(t=n[r++])&&e)return i;if(0!==t&&3!==t)switch(t>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:i+=String.fromCharCode(t);break;case 12:case 13:u=n[r++];i+=String.fromCharCode((31&t)<<6|63&u);break;case 14:u=n[r++];f=n[r++];i+=String.fromCharCode((15&t)<<12|(63&u)<<6|(63&f)<<0)}}return i},n}(),f=r._utf8ArrayToStr;t.a=r},function(n,t,i){"use strict";function r(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function u(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t}function f(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var e=i(4),o=function(n){function t(i){var f;r(this,t);for(var o=arguments.length,s=Array(o>1?o-1:0),e=1;e<o;e++)s[e-1]=arguments[e];return f=u(this,n.call.apply(n,[this,i].concat(s))),f._tickInterval=null,f._tickTimer=null,f._tickCallCount=0,f._boundTick=f.tick.bind(f),f}return f(t,n),t.prototype.onHandlerDestroying=function(){this.clearNextTick();this.clearInterval()},t.prototype.hasInterval=function(){return!!this._tickInterval},t.prototype.hasNextTick=function(){return!!this._tickTimer},t.prototype.setInterval=function(n){function t(){return n.apply(this,arguments)}return t.toString=function(){return n.toString()},t}(function(n){return!this._tickInterval&&(this._tickInterval=setInterval(this._boundTick,n),!0)}),t.prototype.clearInterval=function(n){function t(){return n.apply(this,arguments)}return t.toString=function(){return n.toString()},t}(function(){return!!this._tickInterval&&(clearInterval(this._tickInterval),this._tickInterval=null,!0)}),t.prototype.clearNextTick=function(){return!!this._tickTimer&&(clearTimeout(this._tickTimer),this._tickTimer=null,!0)},t.prototype.tick=function(){1==++this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&(this.clearNextTick(),this._tickTimer=setTimeout(this._boundTick,0)),this._tickCallCount=0)},t.prototype.doTick=function(){},t}(e.a);t.a=o},function(n,t,i){"use strict";function u(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var r=i(3),f=i(6),e=i.n(f),o=i(19),s=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),h=function(){function n(){var t;u(this,n);this._url=null;this._byteRange=null;this._decryptdata=null;this.tagList=[];this.programDateTime=null;this.rawProgramDateTime=null;this._elementaryStreams=(t={},t[n.ElementaryStreamTypes.AUDIO]=!1,t[n.ElementaryStreamTypes.VIDEO]=!1,t)}return n.prototype.addElementaryStream=function(n){this._elementaryStreams[n]=!0},n.prototype.hasElementaryStream=function(n){return!0===this._elementaryStreams[n]},n.prototype.createInitializationVector=function(n){for(var i=new Uint8Array(16),t=12;t<16;t++)i[t]=n>>8*(15-t)&255;return i},n.prototype.fragmentDecryptdataFromLevelkey=function(n,t){var i=n;return n&&n.method&&n.uri&&!n.iv&&(i=new o.a,i.method=n.method,i.baseuri=n.baseuri,i.reluri=n.reluri,i.iv=this.createInitializationVector(t)),i},s(n,[{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=e.a.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(n){this._url=n}},{key:"byteRange",get:function(){var n,t,i;return!this._byteRange&&!this.rawByteRange?[]:this._byteRange?this._byteRange:(n=[],this.rawByteRange&&(t=this.rawByteRange.split("@",2),1===t.length?(i=this.lastByteRangeEndOffset,n[0]=i||0):n[0]=parseInt(t[1]),n[1]=parseInt(t[0])+n[0],this._byteRange=n),n)}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata}},{key:"endProgramDateTime",get:function(){if(!Object(r.a)(this.programDateTime))return null;var n=Object(r.a)(this.duration)?this.duration:0;return this.programDateTime+1e3*n}},{key:"encrypted",get:function(){return!(!this.decryptdata||null===this.decryptdata.uri||null!==this.decryptdata.key)}}],[{key:"ElementaryStreamTypes",get:function(){return{AUDIO:"audio",VIDEO:"video"}}}]),n}();t.a=h},function(n,t,i){"use strict";function e(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function o(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t}function s(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}i.d(t,"a",function(){return r});i.d(t,"b",function(){return c});var h=i(3),f=i(4),u=i(1),r={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"},c=function(n){function t(i){e(this,t);var r=o(this,n.call(this,i,u.a.BUFFER_APPENDED,u.a.FRAG_BUFFERED,u.a.FRAG_LOADED));return r.bufferPadding=.2,r.fragments=Object.create(null),r.timeRanges=Object.create(null),r.config=i.config,r}return s(t,n),t.prototype.destroy=function(){this.fragments=null;this.timeRanges=null;this.config=null;f.a.prototype.destroy.call(this);n.prototype.destroy.call(this)},t.prototype.getBufferedFrag=function(n,t){var i=this.fragments,r=Object.keys(i).filter(function(r){var u=i[r],f;return u.body.type!==t?!1:u.buffered?(f=u.body,f.startPTS<=n&&n<=f.endPTS):!1}),u;return 0===r.length?null:(u=r.pop(),i[u].body)},t.prototype.detectEvictedFragments=function(n,t){var i=this,r=void 0,u=void 0;Object.keys(this.fragments).forEach(function(f){var o=i.fragments[f],s,e;if(!0===o.buffered&&(s=o.range[n],s))for(r=s.time,e=0;e<r.length;e++)if(u=r[e],!1===i.isTimeBuffered(u.startPTS,u.endPTS,t)){i.removeFragment(o.body);break}})},t.prototype.detectPartialFragments=function(n){var i=this,r=this.getFragmentKey(n),t=this.fragments[r];t&&(t.buffered=!0,Object.keys(this.timeRanges).forEach(function(r){if(n.hasElementaryStream(r)){var u=i.timeRanges[r];t.range[r]=i.getBufferedTimes(n.startPTS,n.endPTS,u)}}))},t.prototype.getBufferedTimes=function(n,t,i){for(var f=[],u=void 0,e=void 0,o=!1,r=0;r<i.length;r++){if(u=i.start(r)-this.bufferPadding,e=i.end(r)+this.bufferPadding,n>=u&&t<=e){f.push({startPTS:Math.max(n,i.start(r)),endPTS:Math.min(t,i.end(r))});break}if(n<e&&t>u)f.push({startPTS:Math.max(n,i.start(r)),endPTS:Math.min(t,i.end(r))}),o=!0;else if(t<=u)break}return{time:f,partial:o}},t.prototype.getFragmentKey=function(n){return n.type+"_"+n.level+"_"+n.urlId+"_"+n.sn},t.prototype.getPartialFragment=function(n){var t=this,i=void 0,r=void 0,u=void 0,f=null,e=0;return Object.keys(this.fragments).forEach(function(o){var s=t.fragments[o];t.isPartial(s)&&(r=s.body.startPTS-t.bufferPadding,u=s.body.endPTS+t.bufferPadding,n>=r&&n<=u&&(i=Math.min(n-r,u-n),e<=i&&(f=s.body,e=i)))}),f},t.prototype.getState=function(n){var u=this.getFragmentKey(n),t=this.fragments[u],i=r.NOT_LOADED;return void 0!==t&&(i=t.buffered?!0===this.isPartial(t)?r.PARTIAL:r.OK:r.APPENDING),i},t.prototype.isPartial=function(n){return!0===n.buffered&&(void 0!==n.range.video&&!0===n.range.video.partial||void 0!==n.range.audio&&!0===n.range.audio.partial)},t.prototype.isTimeBuffered=function(n,t,i){for(var u=void 0,f=void 0,r=0;r<i.length;r++){if(u=i.start(r)-this.bufferPadding,f=i.end(r)+this.bufferPadding,n>=u&&t<=f)return!0;if(t<=u)return!1}return!1},t.prototype.onFragLoaded=function(n){var t=n.frag;Object(h.a)(t.sn)&&!t.bitrateTest&&(this.fragments[this.getFragmentKey(t)]={body:t,range:Object.create(null),buffered:!1})},t.prototype.onBufferAppended=function(n){var t=this;this.timeRanges=n.timeRanges;Object.keys(this.timeRanges).forEach(function(n){var i=t.timeRanges[n];t.detectEvictedFragments(n,i)})},t.prototype.onFragBuffered=function(n){this.detectPartialFragments(n.frag)},t.prototype.hasFragment=function(n){var t=this.getFragmentKey(n);return void 0!==this.fragments[t]},t.prototype.removeFragment=function(n){var t=this.getFragmentKey(n);delete this.fragments[t]},t.prototype.removeAllFragments=function(){this.fragments=Object.create(null)},t}(f.a)},function(n){function t(){this._events=this._events||{};this._maxListeners=this._maxListeners||void 0}function i(n){return"function"==typeof n}function f(n){return"number"==typeof n}function r(n){return"object"==typeof n&&null!==n}function u(n){return void 0===n}n.exports=t;t.EventEmitter=t;t.prototype._events=void 0;t.prototype._maxListeners=void 0;t.defaultMaxListeners=10;t.prototype.setMaxListeners=function(n){if(!f(n)||n<0||isNaN(n))throw TypeError("n must be a positive number");return this._maxListeners=n,this};t.prototype.emit=function(n){var f,t,c,e,o,s,h;if(this._events||(this._events={}),"error"===n&&(!this._events.error||r(this._events.error)&&!this._events.error.length)){if((f=arguments[1])instanceof Error)throw f;h=new Error('Uncaught, unspecified "error" event. ('+f+")");throw h.context=f,h;}if(t=this._events[n],u(t))return!1;if(i(t))switch(arguments.length){case 1:t.call(this);break;case 2:t.call(this,arguments[1]);break;case 3:t.call(this,arguments[1],arguments[2]);break;default:e=Array.prototype.slice.call(arguments,1);t.apply(this,e)}else if(r(t))for(e=Array.prototype.slice.call(arguments,1),s=t.slice(),c=s.length,o=0;o<c;o++)s[o].apply(this,e);return!0};t.prototype.addListener=function(n,f){var e;if(!i(f))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",n,i(f.listener)?f.listener:f),this._events[n]?r(this._events[n])?this._events[n].push(f):this._events[n]=[this._events[n],f]:this._events[n]=f,r(this._events[n])&&!this._events[n].warned&&(e=u(this._maxListeners)?t.defaultMaxListeners:this._maxListeners)&&e>0&&this._events[n].length>e&&(this._events[n].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[n].length),"function"==typeof console.trace&&console.trace()),this};t.prototype.on=t.prototype.addListener;t.prototype.once=function(n,t){function r(){this.removeListener(n,r);u||(u=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var u=!1;return r.listener=t,this.on(n,r),this};t.prototype.removeListener=function(n,t){var u,e,o,f;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[n])return this;if(u=this._events[n],o=u.length,e=-1,u===t||i(u.listener)&&u.listener===t)delete this._events[n],this._events.removeListener&&this.emit("removeListener",n,t);else if(r(u)){for(f=o;f-->0;)if(u[f]===t||u[f].listener&&u[f].listener===t){e=f;break}if(e<0)return this;1===u.length?(u.length=0,delete this._events[n]):u.splice(e,1);this._events.removeListener&&this.emit("removeListener",n,t)}return this};t.prototype.removeAllListeners=function(n){var r,t;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[n]&&delete this._events[n],this;if(0===arguments.length){for(r in this._events)"removeListener"!==r&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events={},this}if(t=this._events[n],i(t))this.removeListener(n,t);else if(t)for(;t.length;)this.removeListener(n,t[t.length-1]);return delete this._events[n],this};t.prototype.listeners=function(n){return this._events&&this._events[n]?i(this._events[n])?[this._events[n]]:this._events[n].slice():[]};t.prototype.listenerCount=function(n){if(this._events){var t=this._events[n];if(i(t))return 1;if(t)return t.length}return 0};t.listenerCount=function(n,t){return n.listenerCount(t)}},function(n,t,i){"use strict";function f(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var e=i(37),o=i(38),s=i(39),u=i(2),r=i(0),h=i(1),c=i(5),l=Object(c.a)(),a=function(){function n(t,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=o.removePKCS7Padding,e=void 0===u||u,r;if(f(this,n),this.logEnabled=!0,this.observer=t,this.config=i,this.removePKCS7Padding=e,e)try{r=l.crypto;r&&(this.subtle=r.subtle||r.webkitSubtle)}catch(n){}this.disableWebCrypto=!this.subtle}return n.prototype.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},n.prototype.decrypt=function(n,t,i,u){var c=this,f,h;this.disableWebCrypto&&this.config.enableSoftwareAES?(this.logEnabled&&(r.b.log("JS AES decrypt"),this.logEnabled=!1),f=this.decryptor,f||(this.decryptor=f=new s.a),f.expandKey(t),u(f.decrypt(n,0,i,this.removePKCS7Padding))):(this.logEnabled&&(r.b.log("WebCrypto AES decrypt"),this.logEnabled=!1),h=this.subtle,this.key!==t&&(this.key=t,this.fastAesKey=new o.a(h,t)),this.fastAesKey.expandKey().then(function(r){new e.a(h,i).decrypt(n,r).catch(function(r){c.onWebCryptoError(r,n,t,i,u)}).then(function(n){u(n)})}).catch(function(r){c.onWebCryptoError(r,n,t,i,u)}))},n.prototype.onWebCryptoError=function(n,t,i,f,e){this.config.enableSoftwareAES?(r.b.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(t,i,f,e)):(r.b.error("decrypting error : "+n.message),this.observer.trigger(h.a.ERROR,{type:u.b.MEDIA_ERROR,details:u.a.FRAG_DECRYPT_ERROR,fatal:!0,reason:n.message}))},n.prototype.destroy=function(){var n=this.decryptor;n&&(n.destroy(),this.decryptor=void 0)},n}();t.a=a},function(n,t){"use strict";function i(){if("undefined"!=typeof window)return window.MediaSource||window.WebKitMediaSource}t.a=i},function(n,t,i){"use strict";function o(n,t,i){switch(t){case"audio":n.audioGroupIds||(n.audioGroupIds=[]);n.audioGroupIds.push(i);break;case"text":n.textGroupIds||(n.textGroupIds=[]);n.textGroupIds.push(i)}}function f(n,t,i){var f=n[t],e=n[i],o=e.startPTS;Object(r.a)(o)?i>t?(f.duration=o-f.start,f.duration<0&&u.b.warn("negative duration computed for frag "+f.sn+",level "+f.level+", there should be some duration drift between playlist and fragment!")):(e.duration=f.start-o,e.duration<0&&u.b.warn("negative duration computed for frag "+e.sn+",level "+e.level+", there should be some duration drift between playlist and fragment!")):e.start=i>t?f.start+f.duration:Math.max(f.start-e.duration,0)}function e(n,t,i,u,e,o){var v=i,a,y,c;if(Object(r.a)(t.startPTS)&&(a=Math.abs(t.startPTS-i),t.deltaPTS=Object(r.a)(t.deltaPTS)?Math.max(a,t.deltaPTS):a,v=Math.max(i,t.startPTS),i=Math.min(i,t.startPTS),u=Math.max(u,t.endPTS),e=Math.min(e,t.startDTS),o=Math.max(o,t.endDTS)),y=i-t.start,t.start=t.startPTS=i,t.maxStartPTS=v,t.endPTS=u,t.startDTS=e,t.endDTS=o,t.duration=u-i,c=t.sn,!n||c<n.startSN||c>n.endSN)return 0;var l=void 0,h=void 0,s=void 0;for(l=c-n.startSN,h=n.fragments,h[l]=t,s=l;s>0;s--)f(h,s,s-1);for(s=l;s<h.length-1;s++)f(h,s,s+1);return n.PTSKnown=!0,y}function s(n,t){var v=Math.max(n.startSN,t.startSN)-t.startSN,y=Math.min(n.endSN,t.endSN)-t.startSN,c=t.startSN-n.startSN,l=n.fragments,h=t.fragments,a=0,s=void 0,i,o,f,p;if(t.initSegment&&n.initSegment&&(t.initSegment=n.initSegment),y<v)return void(t.PTSKnown=!1);for(i=v;i<=y;i++)o=l[c+i],f=h[i],f&&o&&(a=o.cc-f.cc,Object(r.a)(o.startPTS)&&(f.start=f.startPTS=o.startPTS,f.endPTS=o.endPTS,f.duration=o.duration,f.backtracked=o.backtracked,f.dropped=o.dropped,s=f));if(a)for(u.b.log("discontinuity sliding from playlist, take drift into account"),i=0;i<h.length;i++)h[i].cc+=a;if(s)e(t,s,s.startPTS,s.endPTS,s.startDTS,s.endDTS);else if(c>=0&&c<l.length)for(p=l[c].start,i=0;i<h.length;i++)h[i].start+=p;t.PTSKnown=n.PTSKnown}t.a=o;t.c=e;t.b=s;var r=i(3),u=i(0)},function(n,t,i){"use strict";function l(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function a(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t}function v(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var h=i(3),u=i(1),y=i(4),f=i(2),e=i(0),p=i(18),o=i(30),w=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),b=window,c=b.performance,r={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},s={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"},k=function(n){function t(i){l(this,t);var r=a(this,n.call(this,i,u.a.MANIFEST_LOADING,u.a.LEVEL_LOADING,u.a.AUDIO_TRACK_LOADING,u.a.SUBTITLE_TRACK_LOADING));return r.loaders={},r}return v(t,n),t.canHaveQualityLevels=function(n){return n!==r.AUDIO_TRACK&&n!==r.SUBTITLE_TRACK},t.mapContextToLevelType=function(n){switch(n.type){case r.AUDIO_TRACK:return s.AUDIO;case r.SUBTITLE_TRACK:return s.SUBTITLE;default:return s.MAIN}},t.getResponseUrl=function(n,t){var i=n.url;return void 0!==i&&0!==i.indexOf("data:")||(i=t.url),i},t.prototype.createInternalLoader=function(n){var t=this.hls.config,r=t.pLoader,u=t.loader,f=r||u,i=new f(t);return n.loader=i,this.loaders[n.type]=i,i},t.prototype.getInternalLoader=function(n){return this.loaders[n.type]},t.prototype.resetInternalLoader=function(n){this.loaders[n]&&delete this.loaders[n]},t.prototype.destroyInternalLoaders=function(){var n,t;for(n in this.loaders)t=this.loaders[n],t&&t.destroy(),this.resetInternalLoader(n)},t.prototype.destroy=function(){this.destroyInternalLoaders();n.prototype.destroy.call(this)},t.prototype.onManifestLoading=function(n){this.load(n.url,{type:r.MANIFEST,level:0,id:null})},t.prototype.onLevelLoading=function(n){this.load(n.url,{type:r.LEVEL,level:n.level,id:n.id})},t.prototype.onAudioTrackLoading=function(n){this.load(n.url,{type:r.AUDIO_TRACK,level:null,id:n.id})},t.prototype.onSubtitleTrackLoading=function(n){this.load(n.url,{type:r.SUBTITLE_TRACK,level:null,id:n.id})},t.prototype.load=function(n,t){var i=this.hls.config,u,s,l,a;if(e.b.debug("Loading playlist of type "+t.type+", level: "+t.level+", id: "+t.id),u=this.getInternalLoader(t),u){if(s=u.context,s&&s.url===n)return e.b.trace("playlist request ongoing"),!1;e.b.warn("aborting previous loader for type: "+t.type);u.abort()}var f=void 0,o=void 0,h=void 0,c=void 0;switch(t.type){case r.MANIFEST:f=i.manifestLoadingMaxRetry;o=i.manifestLoadingTimeOut;h=i.manifestLoadingRetryDelay;c=i.manifestLoadingMaxRetryTimeout;break;case r.LEVEL:f=0;o=i.levelLoadingTimeOut;break;default:f=i.levelLoadingMaxRetry;o=i.levelLoadingTimeOut;h=i.levelLoadingRetryDelay;c=i.levelLoadingMaxRetryTimeout}return u=this.createInternalLoader(t),t.url=n,t.responseType=t.responseType||"",l={timeout:o,maxRetry:f,retryDelay:h,maxRetryDelay:c},a={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},e.b.debug("Calling internal loader delegate for URL: "+n),u.load(t,l,a),!0},t.prototype.loadsuccess=function(n,t,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,u;if(i.isSidxRequest)return this._handleSidxRequest(n,i),void this._handlePlaylistLoaded(n,t,i,r);if(this.resetInternalLoader(i.type),u=n.data,t.tload=c.now(),0!==u.indexOf("#EXTM3U"))return void this._handleManifestParsingError(n,i,"no EXTM3U delimiter",r);u.indexOf("#EXTINF:")>0||u.indexOf("#EXT-X-TARGETDURATION:")>0?this._handleTrackOrLevelPlaylist(n,t,i,r):this._handleMasterPlaylist(n,t,i,r)},t.prototype.loaderror=function(n,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._handleNetworkError(t,i)},t.prototype.loadtimeout=function(n,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._handleNetworkError(t,i,!0)},t.prototype._handleMasterPlaylist=function(n,i,r,f){var v=this.hls,l=n.data,h=t.getResponseUrl(n,r),s=o.a.parseMasterPlaylist(l,h),a;if(!s.length)return void this._handleManifestParsingError(n,r,"no level found in manifest",f);var y=s.map(function(n){return{id:n.attrs.AUDIO,codec:n.audioCodec}}),c=o.a.parseMasterPlaylistMedia(l,h,"AUDIO",y),p=o.a.parseMasterPlaylistMedia(l,h,"SUBTITLES");c.length&&(a=!1,c.forEach(function(n){n.url||(a=!0)}),!1===a&&s[0].audioCodec&&!s[0].attrs.AUDIO&&(e.b.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),c.unshift({type:"main",name:"main"})));v.trigger(u.a.MANIFEST_LOADED,{levels:s,audioTracks:c,subtitles:p,url:h,stats:i,networkDetails:f})},t.prototype._handleTrackOrLevelPlaylist=function(n,i,f,e){var k=this.hls,l=f.id,a=f.level,y=f.type,v=t.getResponseUrl(n,f),p=Object(h.a)(l)?l:0,d=Object(h.a)(a)?a:p,g=t.mapContextToLevelType(f),s=o.a.parseLevelPlaylist(n.data,v,d,g,p),w,b;if((s.tload=i.tload,y===r.MANIFEST)&&(w={url:v,details:s},k.trigger(u.a.MANIFEST_LOADED,{levels:[w],audioTracks:[],url:v,stats:i,networkDetails:e})),i.tparsed=c.now(),s.needSidxRanges)return b=s.initSegment.url,void this.load(b,{isSidxRequest:!0,type:y,level:a,levelDetails:s,id:l,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"});f.levelDetails=s;this._handlePlaylistLoaded(n,i,f,e)},t.prototype._handleSidxRequest=function(n,t){var i=p.a.parseSegmentIndex(new Uint8Array(n.data));i.references.forEach(function(n,i){var r=n.info,u=t.levelDetails.fragments[i];0===u.byteRange.length&&(u.rawByteRange=String(1+r.end-r.start)+"@"+String(r.start))});t.levelDetails.initSegment.rawByteRange=String(i.moovEndOffset)+"@0"},t.prototype._handleManifestParsingError=function(n,t,i,r){this.hls.trigger(u.a.ERROR,{type:f.b.NETWORK_ERROR,details:f.a.MANIFEST_PARSING_ERROR,fatal:!0,url:n.url,reason:i,networkDetails:r})},t.prototype._handleNetworkError=function(n,t){var h=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.b.info("A network error occured while loading a "+n.type+"-type playlist");var o=void 0,i=void 0,s=this.getInternalLoader(n);switch(n.type){case r.MANIFEST:o=h?f.a.MANIFEST_LOAD_TIMEOUT:f.a.MANIFEST_LOAD_ERROR;i=!0;break;case r.LEVEL:o=h?f.a.LEVEL_LOAD_TIMEOUT:f.a.LEVEL_LOAD_ERROR;i=!1;break;case r.AUDIO_TRACK:o=h?f.a.AUDIO_TRACK_LOAD_TIMEOUT:f.a.AUDIO_TRACK_LOAD_ERROR;i=!1;break;default:i=!1}s&&(s.abort(),this.resetInternalLoader(n.type));this.hls.trigger(u.a.ERROR,{type:f.b.NETWORK_ERROR,details:o,fatal:i,url:s.url,loader:s,context:n,networkDetails:t})},t.prototype._handlePlaylistLoaded=function(n,i,f,e){var h=f.type,c=f.level,s=f.id,o=f.levelDetails;if(!o.targetduration)return void this._handleManifestParsingError(n,f,"invalid target duration",e);if(t.canHaveQualityLevels(f.type))this.hls.trigger(u.a.LEVEL_LOADED,{details:o,level:c||0,id:s||0,stats:i,networkDetails:e});else switch(h){case r.AUDIO_TRACK:this.hls.trigger(u.a.AUDIO_TRACK_LOADED,{details:o,id:s,stats:i,networkDetails:e});break;case r.SUBTITLE_TRACK:this.hls.trigger(u.a.SUBTITLE_TRACK_LOADED,{details:o,id:s,stats:i,networkDetails:e})}},w(t,null,[{key:"ContextType",get:function(){return r}},{key:"LevelType",get:function(){return s}}]),t}(y.a);t.a=k},function(n,t,i){"use strict";function f(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var e=i(0),r=i(1),u=Math.pow(2,32)-1,o=function(){function n(t,i){f(this,n);this.observer=t;this.remuxer=i}return n.prototype.resetTimeStamp=function(n){this.initPTS=n},n.prototype.resetInitSegment=function(t,i,u,f){var e,o;t&&t.byteLength?(e=this.initData=n.parseInitSegment(t),null==i&&(i="mp4a.40.5"),null==u&&(u="avc1.42e01e"),o={},e.audio&&e.video?o.audiovideo={container:"video/mp4",codec:i+","+u,initSegment:f?t:null}:(e.audio&&(o.audio={container:"audio/mp4",codec:i,initSegment:f?t:null}),e.video&&(o.video={container:"video/mp4",codec:u,initSegment:f?t:null})),this.observer.trigger(r.a.FRAG_PARSING_INIT_SEGMENT,{tracks:o})):(i&&(this.audioCodec=i),u&&(this.videoCodec=u))},n.probe=function(t){return n.findBox({data:t,start:0,end:Math.min(t.length,16384)},["moof"]).length>0},n.bin2str=function(n){return String.fromCharCode.apply(null,n)},n.readUint16=function(n,t){n.data&&(t+=n.start,n=n.data);var i=n[t]<<8|n[t+1];return i<0?65536+i:i},n.readUint32=function(n,t){n.data&&(t+=n.start,n=n.data);var i=n[t]<<24|n[t+1]<<16|n[t+2]<<8|n[t+3];return i<0?4294967296+i:i},n.writeUint32=function(n,t,i){n.data&&(t+=n.start,n=n.data);n[t]=i>>24;n[t+1]=i>>16&255;n[t+2]=i>>8&255;n[t+3]=255&i},n.findBox=function(t,i){var u=[],r=void 0,o=void 0,c=void 0,f=void 0,s=void 0,h=void 0,e=void 0;if(t.data?(h=t.start,f=t.end,t=t.data):(h=0,f=t.byteLength),!i.length)return null;for(r=h;r<f;)o=n.readUint32(t,r),c=n.bin2str(t.subarray(r+4,r+8)),e=o>1?r+o:f,c===i[0]&&(1===i.length?u.push({data:t,start:r+8,end:e}):(s=n.findBox({data:t,start:r+8,end:e},i.slice(1)),s.length&&(u=u.concat(s)))),r=e;return u},n.parseSegmentIndex=function(t){var y=n.findBox(t,["moov"])[0],p=y?y.end:null,r=0,i=n.findBox(t,["sidx"]),s=void 0,f,h,e,c,l,u,a,o,v;if(!i||!i[0])return null;for(s=[],i=i[0],f=i.data[0],r=0===f?8:16,h=n.readUint32(i,r),r+=4,r+=0===f?8:16,r+=2,e=i.end+0,c=n.readUint16(i,r),r+=2,l=0;l<c;l++){if(u=r,a=n.readUint32(i,u),u+=4,o=2147483647&a,1==(2147483648&a)>>>31)return void console.warn("SIDX has hierarchical references (not supported)");v=n.readUint32(i,u);u+=4;s.push({referenceSize:o,subsegmentDuration:v,info:{duration:v/h,start:e,end:e+o-1}});e+=o;u+=4;r=u}return{earliestPresentationTime:0,timescale:h,version:f,referencesCount:c,references:s,moovEndOffset:p}},n.parseInitSegment=function(t){var i=[];return n.findBox(t,["moov","trak"]).forEach(function(t){var o=n.findBox(t,["tkhd"])[0],l,u,v,f,r,y;if(o){var h=o.data[o.start],c=0===h?12:20,a=n.readUint32(o,c),s=n.findBox(t,["mdia","mdhd"])[0];s&&(h=s.data[s.start],c=0===h?12:20,l=n.readUint32(s,c),u=n.findBox(t,["mdia","hdlr"])[0],u&&(v=n.bin2str(u.data.subarray(u.start+8,u.start+12)),f={soun:"audio",vide:"video"}[v],f&&(r=n.findBox(t,["mdia","minf","stbl","stsd"]),r.length&&(r=r[0],y=n.bin2str(r.data.subarray(r.start+12,r.start+16)),e.b.log("MP4Demuxer:"+f+":"+y+" found")),i[a]={timescale:l,type:f},i[f]={timescale:l,id:a})))}}),i},n.getStartDTS=function(t,i){var u=void 0,f=void 0,r=void 0;return u=n.findBox(i,["moof","traf"]),f=[].concat.apply([],u.map(function(i){return n.findBox(i,["tfhd"]).map(function(r){var u=void 0,f=void 0;return u=n.readUint32(r,4),f=t[u].timescale||9e4,n.findBox(i,["tfdt"]).map(function(t){var r=void 0,i=void 0;return r=t.data[t.start],i=n.readUint32(t,4),1===r&&(i*=Math.pow(2,32),i+=n.readUint32(t,8)),i})[0]/f})})),r=Math.min.apply(null,f),isFinite(r)?r:0},n.offsetStartDTS=function(t,i,r){n.findBox(i,["moof","traf"]).map(function(i){return n.findBox(i,["tfhd"]).map(function(f){var o=n.readUint32(f,4),e=t[o].timescale||9e4;n.findBox(i,["tfdt"]).map(function(t){var s=t.data[t.start],i=n.readUint32(t,4),f,o;0===s?n.writeUint32(t,4,i-r*e):(i*=Math.pow(2,32),i+=n.readUint32(t,8),i-=r*e,i=Math.max(i,0),f=Math.floor(i/(u+1)),o=Math.floor(i%(u+1)),n.writeUint32(t,4,f),n.writeUint32(t,8,o))})})})},n.prototype.append=function(t,i,u,f){var e=this.initData,s,o,h;e||(this.resetInitSegment(t,this.audioCodec,this.videoCodec,!1),e=this.initData);s=void 0;o=this.initPTS;void 0===o&&(h=n.getStartDTS(e,t),this.initPTS=o=h-i,this.observer.trigger(r.a.INIT_PTS_FOUND,{initPTS:o}));n.offsetStartDTS(e,t,o);s=n.getStartDTS(e,t);this.remuxer.remux(e.audio,e.video,null,null,s,u,f,t)},n.prototype.destroy=function(){},n}();t.a=o},function(n,t,i){"use strict";function r(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var u=i(6),f=i.n(u),e=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),o=function(){function n(){r(this,n);this.method=null;this.key=null;this.iv=null;this._uri=null}return e(n,[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=f.a.buildAbsoluteURL(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}]),n}();t.a=o},function(n,t,i){"use strict";function r(n,t){var i=f[t];return!!i&&!0===i[n.slice(0,4)]}function u(n,t){return window.MediaSource.isTypeSupported((t||"video")+'/mp4;codecs="'+n+'"')}i.d(t,"b",function(){return r});i.d(t,"a",function(){return u});var f={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}}},function(n,t,i){"use strict";function h(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var c=i(3),l=i(13),a=i.n(l),v=i(36),y=i.n(v),r=i(1),e=i(22),u=i(0),o=i(2),p=i(15),w=i(5),s=Object(w.a)(),f=Object(p.a)(),b=function(){function n(t,i){var c,p,l,w,b,v;if(h(this,n),this.hls=t,this.id=i,c=this.observer=new a.a,p=t.config,c.trigger=function(n){for(var i=arguments.length,r=Array(i>1?i-1:0),t=1;t<i;t++)r[t-1]=arguments[t];c.emit.apply(c,[n,n].concat(r))},c.off=function(n){for(var i=arguments.length,r=Array(i>1?i-1:0),t=1;t<i;t++)r[t-1]=arguments[t];c.removeListener.apply(c,[n].concat(r))},l=function(n,i){i=i||{};i.frag=this.frag;i.id=this.id;t.trigger(n,i)}.bind(this),c.on(r.a.FRAG_DECRYPTED,l),c.on(r.a.FRAG_PARSING_INIT_SEGMENT,l),c.on(r.a.FRAG_PARSING_DATA,l),c.on(r.a.FRAG_PARSED,l),c.on(r.a.ERROR,l),c.on(r.a.FRAG_PARSING_METADATA,l),c.on(r.a.FRAG_PARSING_USERDATA,l),c.on(r.a.INIT_PTS_FOUND,l),w={mp4:f.isTypeSupported("video/mp4"),mpeg:f.isTypeSupported("audio/mpeg"),mp3:f.isTypeSupported('audio/mp4; codecs="mp3"')},b=navigator.vendor,p.enableWorker&&"undefined"!=typeof Worker){u.b.log("demuxing in webworker");v=void 0;try{v=this.w=y()(49);this.onwmsg=this.onWorkerMessage.bind(this);v.addEventListener("message",this.onwmsg);v.onerror=function(n){t.trigger(r.a.ERROR,{type:o.b.OTHER_ERROR,details:o.a.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:n.message+" ("+n.filename+":"+n.lineno+")"}})};v.postMessage({cmd:"init",typeSupported:w,vendor:b,id:i,config:JSON.stringify(p)})}catch(n){u.b.error("error while initializing DemuxerWorker, fallback on DemuxerInline");v&&s.URL.revokeObjectURL(v.objectURL);this.demuxer=new e.a(c,w,p,b);this.w=void 0}}else this.demuxer=new e.a(c,w,p,b)}return n.prototype.destroy=function(){var n=this.w,t,i;n?(n.removeEventListener("message",this.onwmsg),n.terminate(),this.w=null):(t=this.demuxer,t&&(t.destroy(),this.demuxer=null));i=this.observer;i&&(i.removeAllListeners(),this.observer=null)},n.prototype.push=function(n,t,i,r,f,e,o,s){var y=this.w,p=Object(c.a)(f.startDTS)?f.startDTS:f.start,w=f.decryptdata,h=this.frag,a=!(h&&f.cc===h.cc),l=!(h&&f.level===h.level),k=h&&f.sn===h.sn+1,b=!l&&k,v;(a&&u.b.log(this.id+":discontinuity detected"),l&&u.b.log(this.id+":switch detected"),this.frag=f,y)?y.postMessage({cmd:"demux",data:n,decryptdata:w,initSegment:t,audioCodec:i,videoCodec:r,timeOffset:p,discontinuity:a,trackSwitch:l,contiguous:b,duration:e,accurateTimeOffset:o,defaultInitPTS:s},n instanceof ArrayBuffer?[n]:[]):(v=this.demuxer,v&&v.push(n,w,t,i,r,p,a,l,b,e,o,s))},n.prototype.onWorkerMessage=function(n){var t=n.data,i=this.hls;switch(t.event){case"init":s.URL.revokeObjectURL(this.w.objectURL);break;case r.a.FRAG_PARSING_DATA:t.data.data1=new Uint8Array(t.data1);t.data2&&(t.data.data2=new Uint8Array(t.data2));default:t.data=t.data||{};t.data.frag=this.frag;t.data.id=this.id;i.trigger(t.event,t.data)}},n}();t.a=b},function(n,t,i){"use strict";function o(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var u=i(1),f=i(2),s=i(14),h=i(40),c=i(18),l=i(41),a=i(44),r=i(45),v=i(48),y=i(5),p=Object(y.a)(),e=p.performance,w=function(){function n(t,i,r,u){o(this,n);this.observer=t;this.typeSupported=i;this.config=r;this.vendor=u}return n.prototype.destroy=function(){var n=this.demuxer;n&&n.destroy()},n.prototype.push=function(n,t,i,r,f,o,h,c,l,a,v,y){var p,b,w;if(n.byteLength>0&&null!=t&&null!=t.key&&"AES-128"===t.method){p=this.decrypter;null==p&&(p=this.decrypter=new s.a(this.observer,this.config));b=this;w=void 0;try{w=e.now()}catch(n){w=Date.now()}p.decrypt(n,t.key.buffer,t.iv.buffer,function(n){var s=void 0;try{s=e.now()}catch(n){s=Date.now()}b.observer.trigger(u.a.FRAG_DECRYPTED,{stats:{tstart:w,tdecrypt:s}});b.pushDecrypted(new Uint8Array(n),t,new Uint8Array(i),r,f,o,h,c,l,a,v,y)})}else this.pushDecrypted(new Uint8Array(n),t,new Uint8Array(i),r,f,o,h,c,l,a,v,y)},n.prototype.pushDecrypted=function(n,t,i,e,o,s,y,p,w,b,k,d){var g=this.demuxer,nt,rt,st,ut;if(!g||(y||p)&&!this.probe(n)){for(var tt=this.observer,ft=this.typeSupported,et=this.config,ot=[{demux:l.a,remux:r.a},{demux:c.a,remux:v.a},{demux:h.a,remux:r.a},{demux:a.a,remux:r.a}],it=0,ht=ot.length;it<ht;it++)if(nt=ot[it],rt=nt.demux.probe,rt(n)){st=this.remuxer=new nt.remux(tt,et,ft,this.vendor);g=new nt.demux(tt,st,et,ft);this.probe=rt;break}if(!g)return void tt.trigger(u.a.ERROR,{type:f.b.MEDIA_ERROR,details:f.a.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=g}ut=this.remuxer;(y||p)&&(g.resetInitSegment(i,e,o,b),ut.resetInitSegment());y&&(g.resetTimeStamp(d),ut.resetTimeStamp(d));"function"==typeof g.setDecryptData&&g.setDecryptData(t);g.append(n,s,w,k)},n}();t.a=w},function(n,t,i){"use strict";function h(n,t,i,r){var e=void 0,u=void 0,h=void 0,c=void 0,f=void 0,l=navigator.userAgent.toLowerCase(),v=r,a=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];return e=1+((192&t[i+2])>>>6),(u=(60&t[i+2])>>>2)>a.length-1?void n.trigger(p.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+u}):(c=(1&t[i+2])<<2,c|=(192&t[i+3])>>>6,o.b.log("manifest codec:"+r+",ADTS data:type:"+e+",sampleingIndex:"+u+"["+a[u]+"Hz],channelConfig:"+c),/firefox/i.test(l)?u>=6?(e=5,f=new Array(4),h=u-3):(e=2,f=new Array(2),h=u):-1!==l.indexOf("android")?(e=2,f=new Array(2),h=u):(e=5,f=new Array(4),r&&(-1!==r.indexOf("mp4a.40.29")||-1!==r.indexOf("mp4a.40.5"))||!r&&u>=6?h=u-3:((r&&-1!==r.indexOf("mp4a.40.2")&&(u>=6&&1===c||/vivaldi/i.test(l))||!r&&1===c)&&(e=2,f=new Array(2)),h=u)),f[0]=e<<3,f[0]|=(14&u)>>1,f[1]|=(1&u)<<7,f[1]|=c<<3,5===e&&(f[1]|=(14&h)>>1,f[2]=(1&h)<<7,f[2]|=8,f[3]=0),{config:f,samplerate:a[u],channelCount:c,codec:"mp4a.40."+e,manifestCodec:v})}function r(n,t){return 255===n[t]&&240==(246&n[t+1])}function u(n,t){return 1&n[t+1]?7:9}function f(n,t){return(3&n[t+3])<<11|n[t+4]<<3|(224&n[t+5])>>>5}function c(n,t){return!!(t+1<n.length&&r(n,t))}function l(n,t){var o,e,i;return t+1<n.length&&r(n,t)&&(o=u(n,t),e=o,t+5<n.length&&(e=f(n,t)),i=t+e,i===n.length||i+1<n.length&&r(n,i))?!0:!1}function a(n,t,i,r,u){if(!n.samplerate){var f=h(t,i,r,u);n.config=f.config;n.samplerate=f.samplerate;n.channelCount=f.channelCount;n.codec=f.codec;n.manifestCodec=f.manifestCodec;o.b.log("parsed codec:"+n.codec+",rate:"+f.samplerate+",nb channel:"+f.channelCount)}}function e(n){return 9216e4/n}function v(n,t,i,r,e){var o=void 0,s=void 0,h=void 0,c=n.length;if(o=u(n,t),s=f(n,t),(s-=o)>0&&t+o+s<=c)return h=i+r*e,{headerLength:o,frameLength:s,stamp:h}}function y(n,t,i,r,u){var l=e(n.samplerate),f=v(t,i,r,u,l);if(f){var h=f.stamp,o=f.headerLength,s=f.frameLength,c={unit:t.subarray(i+o,i+o+s),pts:h,dts:h};return n.samples.push(c),n.len+=s,{sample:c,length:s+o}}}t.d=c;t.e=l;t.c=a;t.b=e;t.a=y;var o=i(0),s=i(2),p=i(1);i(5)},function(n,t){"use strict";var i={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(n,t,i,r,u){var f;if(!(i+24>t.length)&&(f=this.parseHeader(t,i),f&&i+f.frameLength<=t.length)){var s=9e4*f.samplesPerFrame/f.sampleRate,e=r+u*s,o={unit:t.subarray(i,i+f.frameLength),pts:e,dts:e};return n.config=[],n.channelCount=f.channelCount,n.samplerate=f.sampleRate,n.samples.push(o),n.len+=f.frameLength,{sample:o,length:f.frameLength}}},parseHeader:function(n,t){var r=n[t+1]>>3&3,u=n[t+1]>>1&3,f=n[t+2]>>4&15,e=n[t+2]>>2&3,c=n[t+2]>>1&1;if(1!==r&&0!==f&&15!==f&&3!==e){var l=3===r?3-u:3===u?3:4,a=1e3*i.BitratesMap[14*l+f-1],v=3===r?0:2===r?1:2,o=i.SamplingRateMap[3*v+e],y=n[t+3]>>6==3?1:2,s=i.SamplesCoefficients[r][u],h=i.BytesInSlot[u],p=8*s*h;return{sampleRate:o,channelCount:y,frameLength:parseInt(s*a/o+c,10)*h,samplesPerFrame:p}}},isHeaderPattern:function(n,t){return 255===n[t]&&224==(224&n[t+1])&&0!=(6&n[t+1])},isHeader:function(n,t){return!!(t+1<n.length&&this.isHeaderPattern(n,t))},probe:function(n,t){var i,u,r;return t+1<n.length&&this.isHeaderPattern(n,t)&&(i=this.parseHeader(n,t),u=4,i&&i.frameLength&&(u=i.frameLength),r=t+u,r===n.length||r+1<n.length&&this.isHeaderPattern(n,r))?!0:!1}};t.a=i},function(n,t){"use strict";var i={toString:function(n){for(var i="",r=n.length,t=0;t<r;t++)i+="["+n.start(t).toFixed(3)+","+n.end(t).toFixed(3)+"]";return i}};t.a=i},function(n,t,i){"use strict";function f(n,t){for(var r,u=null,i=0;i<n.length;i+=1)if(r=n[i],r&&r.cc===t){u=r;break}return u}function e(n,t){return v.a.search(n,function(n){return n.cc<t?1:n.cc>t?-1:0})}function o(n,t,i){var r=!1;return t&&t.details&&i&&(i.endCC>i.startCC||n&&n.cc<i.startCC)&&(r=!0),r}function s(n,t){var u=n.fragments,e=t.fragments,i;return!e.length||!u.length?void r.b.log("No fragments to align"):(i=f(u,e[0].cc),!i||i&&!i.startPTS?void r.b.log("No frag in previous level to align on"):i)}function u(n,t){t.fragments.forEach(function(t){if(t){var i=t.start+n;t.start=t.startPTS=i;t.endPTS=i+t.duration}});t.PTSKnown=!0}function h(n,t,i){c(n,i,t);!i.PTSKnown&&t&&l(i,t.details)}function c(n,t,i){if(o(n,i,t)){var f=s(i.details,t);f&&(r.b.log("Adjusting PTS using last level due to CC increase within current level"),u(f.start,t))}}function l(n,t){if(t&&t.fragments.length){if(!n.hasProgramDateTime||!t.hasProgramDateTime)return;var f=t.fragments[0].programDateTime,e=n.fragments[0].programDateTime,i=(e-f)/1e3+t.fragments[0].start;Object(a.a)(i)&&(r.b.log("adjusting PTS using programDateTime delta, sliding:"+i.toFixed(3)),u(i,n))}}t.b=e;t.a=h;var a=i(3),v=i(7),r=i(0)},function(n,t){"use strict";function i(n,t){var i=null;try{i=new window.Event("addtrack")}catch(n){i=document.createEvent("Event");i.initEvent("addtrack",!1,!1)}i.track=n;t.dispatchEvent(i)}function r(n){if(n&&n.cues)for(;n.cues.length>0;)n.removeCue(n.cues[0])}t.b=i;t.a=r},function(n,t,i){"use strict";function e(){this.window=window;this.state="INITIAL";this.buffer="";this.decoder=new c;this.regionList=[]}function l(n){function i(n,t,i,r){return 3600*(0|n)+60*(0|t)+(0|i)+(0|r)/1e3}var t=n.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return t?t[3]?i(t[1],t[2],t[3].replace(":",""),t[4]):t[1]>59?i(t[1],t[2],0,t[4]):i(0,t[1],t[2],t[4]):null}function o(){this.values=Object.create(null)}function s(n,t,i,r){var f=r?n.split(r):[n],e,u,o,s;for(e in f)"string"==typeof f[e]&&(u=f[e].split(i),2===u.length&&(o=u[0],s=u[1],t(o,s)))}function a(n,t,i){function e(){var t=l(n);if(null===t)throw new Error("Malformed timestamp: "+h);return n=n.replace(/^[^\sa-zA-Z-]+/,""),t}function f(){n=n.replace(/^\s+/,"")}var h=n;if(f(),t.startTime=e(),f(),"-->"!==n.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+h);n=n.substr(3);f();t.endTime=e();f(),function(n,t){var f=new o,e,h;s(n,function(n,t){var e,u,o;switch(n){case"region":for(e=i.length-1;e>=0;e--)if(i[e].id===t){f.set(n,i[e].region);break}break;case"vertical":f.alt(n,t,["rl","lr"]);break;case"line":u=t.split(",");o=u[0];f.integer(n,o);f.percent(n,o)&&f.set("snapToLines",!1);f.alt(n,o,["auto"]);2===u.length&&f.alt("lineAlign",u[1],["start",r,"end"]);break;case"position":u=t.split(",");f.percent(n,u[0]);2===u.length&&f.alt("positionAlign",u[1],["start",r,"end","line-left","line-right","auto"]);break;case"size":f.percent(n,t);break;case"align":f.alt(n,t,["start",r,"end","left","right"])}},/:/,/\s/);t.region=f.get("region",null);t.vertical=f.get("vertical","");e=f.get("line","auto");"auto"===e&&-1===u.line&&(e=-1);t.line=e;t.lineAlign=f.get("lineAlign","start");t.snapToLines=f.get("snapToLines",!0);t.size=f.get("size",100);t.align=f.get("align",r);h=f.get("position","auto");"auto"===h&&50===u.position&&(h="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50);t.position=h}(n,t)}function h(n){return n.replace(/<br(?: \/)?>/gi,"\n")}var f,c,u,r;i.d(t,"b",function(){return h});f=i(66);c=function(){return{decode:function(n){if(!n)return"";if("string"!=typeof n)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(n))}}};o.prototype={set:function(n,t){this.get(n)||""===t||(this.values[n]=t)},get:function(n,t,i){return i?this.has(n)?this.values[n]:t[i]:this.has(n)?this.values[n]:t},has:function(n){return n in this.values},alt:function(n,t,i){for(var r=0;r<i.length;++r)if(t===i[r]){this.set(n,t);break}},integer:function(n,t){/^-?\d+$/.test(t)&&this.set(n,parseInt(t,10))},percent:function(n,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t))>=0&&t<=100)&&(this.set(n,t),!0)}};u=new f.a(0,0,0);r="middle"===u.align?"middle":"center";e.prototype={parse:function(n){function e(){for(var i=t.buffer,n=0,r,i=h(i);n<i.length&&"\r"!==i[n]&&"\n"!==i[n];)++n;return r=i.substr(0,n),"\r"===i[n]&&++n,"\n"===i[n]&&++n,t.buffer=i.substr(n),r}var t=this,i,u,r,o;n&&(t.buffer+=t.decoder.decode(n,{stream:!0}));try{if(i=void 0,"INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;if(i=e(),u=i.match(/^()?WEBVTT([ \t].*)?$/),!u||!u[0])throw new Error("Malformed WebVTT signature.");t.state="HEADER"}for(r=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(r?r=!1:i=e(),t.state){case"HEADER":/:/.test(i)?function(n){s(n,function(){},/:/)}(i):i||(t.state="ID");continue;case"NOTE":i||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){t.state="NOTE";break}if(!i)continue;if(t.cue=new f.a(0,0,""),t.state="CUE",-1===i.indexOf("-->")){t.cue.id=i;continue}case"CUE":try{a(i,t.cue,t.regionList)}catch(n){t.cue=null;t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":if(o=-1!==i.indexOf("-->"),!i||o&&(r=!0)){t.oncue&&t.oncue(t.cue);t.cue=null;t.state="ID";continue}t.cue.text&&(t.cue.text+="\n");t.cue.text+=i;continue;case"BADCUE":i||(t.state="ID");continue}}}catch(n){"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue);t.cue=null;t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var n=this;try{if(n.buffer+=n.decoder.decode(),(n.cue||"HEADER"===n.state)&&(n.buffer+="\n\n",n.parse()),"INITIAL"===n.state)throw new Error("Malformed WebVTT signature.");}catch(n){throw n;}return n.onflush&&n.onflush(),this}};t.a=e},function(n,t,i){"use strict";function s(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var o;Object.defineProperty(t,"__esModule",{value:!0});var h=i(6),c=i.n(h),f=i(2),l=i(17),a=i(33),v=i(34),y=i(12),p=i(35),w=i(52),b=i(53),k=i(54),r=i(0),d=i(55),u=i(1),g=i(13),nt=i.n(g),e=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}();i(75);o=function(){function n(){var tt=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o,e,i,f,c,k,d;if(s(this,n),o=n.DefaultConfig,(t.liveSyncDurationCount||t.liveMaxLatencyDurationCount)&&(t.liveSyncDuration||t.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(e in o)e in t||(t[e]=o[e]);if(void 0!==t.liveMaxLatencyDurationCount&&t.liveMaxLatencyDurationCount<=t.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==t.liveMaxLatencyDuration&&(t.liveMaxLatencyDuration<=t.liveSyncDuration||void 0===t.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(r.a)(t.debug);this.config=t;this._autoLevelCapping=-1;i=this.observer=new nt.a;i.trigger=function(n){for(var r=arguments.length,u=Array(r>1?r-1:0),t=1;t<r;t++)u[t-1]=arguments[t];i.emit.apply(i,[n,n].concat(u))};i.off=function(n){for(var r=arguments.length,u=Array(r>1?r-1:0),t=1;t<r;t++)u[t-1]=arguments[t];i.removeListener.apply(i,[n].concat(u))};this.on=i.on.bind(i);this.off=i.off.bind(i);this.once=i.once.bind(i);this.trigger=i.trigger.bind(i);var it=this.abrController=new t.abrController(this),rt=new t.bufferController(this),ut=new t.capLevelController(this),ft=new t.fpsController(this),et=new l.a(this),ot=new a.a(this),st=new v.a(this),ht=new b.a(this),ct=this.levelController=new w.a(this),h=new y.b(this),lt=this.streamController=new p.a(this,h),g=[ct,lt],u=t.audioStreamController;u&&g.push(new u(this,h));this.networkControllers=g;f=[et,ot,st,it,rt,ut,ft,ht,h];(u=t.audioTrackController)&&(c=new u(this),this.audioTrackController=c,f.push(c));(u=t.subtitleTrackController)&&(k=new u(this),this.subtitleTrackController=k,f.push(k));(u=t.emeController)&&(d=new u(this),this.emeController=d,f.push(d));[t.subtitleStreamController,t.timelineController].forEach(function(n){n&&f.push(new n(tt))});this.coreComponents=f}return n.isSupported=function(){return Object(k.a)()},e(n,null,[{key:"version",get:function(){return"0.11.0"}},{key:"Events",get:function(){return u.a}},{key:"ErrorTypes",get:function(){return f.b}},{key:"ErrorDetails",get:function(){return f.a}},{key:"DefaultConfig",get:function(){return n.defaultConfig?n.defaultConfig:d.a},set:function(t){n.defaultConfig=t}}]),n.prototype.destroy=function(){r.b.log("destroy");this.trigger(u.a.DESTROYING);this.detachMedia();this.coreComponents.concat(this.networkControllers).forEach(function(n){n.destroy()});this.url=null;this.observer.removeAllListeners();this._autoLevelCapping=-1},n.prototype.attachMedia=function(n){r.b.log("attachMedia");this.media=n;this.trigger(u.a.MEDIA_ATTACHING,{media:n})},n.prototype.detachMedia=function(){r.b.log("detachMedia");this.trigger(u.a.MEDIA_DETACHING);this.media=null},n.prototype.loadSource=function(n){n=c.a.buildAbsoluteURL(window.location.href,n,{alwaysNormalize:!0});r.b.log("loadSource:"+n);this.url=n;this.trigger(u.a.MANIFEST_LOADING,{url:n})},n.prototype.startLoad=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;r.b.log("startLoad("+n+")");this.networkControllers.forEach(function(t){t.startLoad(n)})},n.prototype.stopLoad=function(){r.b.log("stopLoad");this.networkControllers.forEach(function(n){n.stopLoad()})},n.prototype.swapAudioCodec=function(){r.b.log("swapAudioCodec");this.streamController.swapAudioCodec()},n.prototype.recoverMediaError=function(){r.b.log("recoverMediaError");var n=this.media;this.detachMedia();this.attachMedia(n)},e(n,[{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(n){r.b.log("set currentLevel:"+n);this.loadLevel=n;this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(n){r.b.log("set nextLevel:"+n);this.levelController.manualLevel=n;this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(n){r.b.log("set loadLevel:"+n);this.levelController.manualLevel=n}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(n){this.levelController.nextLoadLevel=n}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(n){r.b.log("set firstLevel:"+n);this.levelController.firstLevel=n}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(n){r.b.log("set startLevel:"+n);var t=this;-1!==n&&(n=Math.max(n,t.minAutoLevel));t.levelController.startLevel=n}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(n){r.b.log("set autoLevelCapping:"+n);this._autoLevelCapping=n}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var i=this,t=i.levels,r=i.config.minAutoBitrate,u=t?t.length:0,n=0;n<u;n++)if((t[n].realBitrate?Math.max(t[n].realBitrate,t[n].bitrate):t[n].bitrate)>r)return n;return 0}},{key:"maxAutoLevel",get:function(){var t=this,n=t.levels,i=t.autoLevelCapping;return-1===i&&n&&n.length?n.length-1:i}},{key:"nextAutoLevel",get:function(){var n=this;return Math.min(Math.max(n.abrController.nextAutoLevel,n.minAutoLevel),n.maxAutoLevel)},set:function(n){var t=this;t.abrController.nextAutoLevel=Math.max(t.minAutoLevel,n)}},{key:"audioTracks",get:function(){var n=this.audioTrackController;return n?n.audioTracks:[]}},{key:"audioTrack",get:function(){var n=this.audioTrackController;return n?n.audioTrack:-1},set:function(n){var t=this.audioTrackController;t&&(t.audioTrack=n)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var n=this.subtitleTrackController;return n?n.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var n=this.subtitleTrackController;return n?n.subtitleTrack:-1},set:function(n){var t=this.subtitleTrackController;t&&(t.subtitleTrack=n)}},{key:"subtitleDisplay",get:function(){var n=this.subtitleTrackController;return!!n&&n.subtitleDisplay},set:function(n){var t=this.subtitleTrackController;t&&(t.subtitleDisplay=n)}}]),n}();t.default=o},function(n,t,i){"use strict";function l(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function a(n,t){for(var r,u=n[t],i=t-1;i>=0;i--)r=n[i],r.programDateTime=u.programDateTime-1e3*r.duration,u=r}function v(n,t){n.rawProgramDateTime?n.programDateTime=Date.parse(n.rawProgramDateTime):t&&t.programDateTime&&(n.programDateTime=t.endProgramDateTime);Object(f.a)(n.programDateTime)||(n.programDateTime=null,n.rawProgramDateTime=null)}var f=i(3),y=i(6),p=i.n(y),u=i(11),w=i(31),e=i(19),r=i(32),o=i(0),b=i(20),s=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,h=/#EXT-X-MEDIA:(.*)/g,c=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)(\S+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),k=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,d=/\.(mp4|m4s|m4v|m4a)$/i,g=function(){function n(){l(this,n)}return n.findGroup=function(n,t){var r,i,u;if(!n)return null;for(r=null,i=0;i<n.length;i++)u=n[i],u.id===t&&(r=u);return r},n.convertAVC1ToAVCOTI=function(n){var t=void 0,i=n.split(".");return i.length>2?(t=i.shift()+".",t+=parseInt(i.shift()).toString(16),t+=("000"+parseInt(i.shift()).toString(16)).substr(-4)):t=n,t},n.resolve=function(n,t){return p.a.buildAbsoluteURL(t,n,{alwaysNormalize:!0})},n.parseMasterPlaylist=function(t,i){var h=[],o=void 0,u,f,e;for(s.lastIndex=0;null!=(o=s.exec(t));)u={},f=u.attrs=new r.a(o[1]),u.url=n.resolve(o[2],i),e=f.decimalResolution("RESOLUTION"),e&&(u.width=e.width,u.height=e.height),u.bitrate=f.decimalInteger("AVERAGE-BANDWIDTH")||f.decimalInteger("BANDWIDTH"),u.name=f.NAME,function(n,t){["video","audio"].forEach(function(i){var r=n.filter(function(n){return Object(b.b)(n,i)}),u;r.length&&(u=r.filter(function(n){return 0===n.lastIndexOf("avc1",0)||0===n.lastIndexOf("mp4a",0)}),t[i+"Codec"]=u.length>0?u[0]:r[0],n=n.filter(function(n){return-1===r.indexOf(n)}))});t.unknownCodecs=n}([].concat((f.CODECS||"").split(/[ ,]+/)),u),u.videoCodec&&-1!==u.videoCodec.indexOf("avc1")&&(u.videoCodec=n.convertAVC1ToAVCOTI(u.videoCodec)),h.push(u);return h},n.parseMasterPlaylistMedia=function(t,i,u){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],c=void 0,l=[],a=0,f,e,s;for(h.lastIndex=0;null!==(c=h.exec(t));)f={},e=new r.a(c[1]),e.TYPE===u&&((f.groupId=e["GROUP-ID"],f.name=e.NAME,f.type=u,f.default="YES"===e.DEFAULT,f.autoselect="YES"===e.AUTOSELECT,f.forced="YES"===e.FORCED,e.URI&&(f.url=n.resolve(e.URI,i)),f.lang=e.LANGUAGE,f.name||(f.name=f.lang),o.length)&&(s=n.findGroup(o,f.groupId),f.audioCodec=s?s.codec:o[0].codec),f.id=a++,l.push(f));return l},n.parseLevelPlaylist=function(n,t,i,s,h){var ot=0,tt=0,y=new w.a(t),g=new e.a,ut=0,it=null,l=new u.a,p=void 0,nt=void 0,ft=null,rt,et,vt,st,b,ht,at;for(c.lastIndex=0;null!==(p=c.exec(n));)if(rt=p[1],rt)l.duration=parseFloat(rt),et=(" "+p[2]).slice(1),l.title=et||null,l.tagList.push(et?["INF",rt,et]:["INF",rt]);else if(p[3])Object(f.a)(l.duration)&&(vt=ot++,l.type=s,l.start=tt,l.levelkey=g,l.sn=vt,l.level=i,l.cc=ut,l.urlId=h,l.baseurl=t,l.relurl=(" "+p[3]).slice(1),v(l,it),y.fragments.push(l),it=l,tt+=l.duration,l=new u.a);else if(p[4])(l.rawByteRange=(" "+p[4]).slice(1),it)&&(st=it.byteRangeEndOffset,st&&(l.lastByteRangeEndOffset=st));else if(p[5])l.rawProgramDateTime=(" "+p[5]).slice(1),l.tagList.push(["PROGRAM-DATE-TIME",l.rawProgramDateTime]),null===ft&&(ft=y.fragments.length);else{for(p=p[0].match(k),nt=1;nt<p.length&&void 0===p[nt];nt++);b=(" "+p[nt+1]).slice(1);ht=(" "+p[nt+2]).slice(1);switch(p[nt]){case"#":l.tagList.push(ht?[b,ht]:[b]);break;case"PLAYLIST-TYPE":y.type=b.toUpperCase();break;case"MEDIA-SEQUENCE":ot=y.startSN=parseInt(b);break;case"TARGETDURATION":y.targetduration=parseFloat(b);break;case"VERSION":y.version=parseInt(b);break;case"EXTM3U":break;case"ENDLIST":y.live=!1;break;case"DIS":ut++;l.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":ut=parseInt(b);break;case"KEY":var wt=b,ct=new r.a(wt),lt=ct.enumeratedString("METHOD"),yt=ct.URI,bt=ct.hexadecimalInteger("IV");lt&&(g=new e.a,yt&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(lt)>=0&&(g.method=lt,g.baseuri=t,g.reluri=yt,g.key=null,g.iv=bt));break;case"START":var kt=b,dt=new r.a(kt),pt=dt.decimalFloatingPoint("TIME-OFFSET");Object(f.a)(pt)&&(y.startTimeOffset=pt);break;case"MAP":at=new r.a(b);l.relurl=at.URI;l.rawByteRange=at.BYTERANGE;l.baseurl=t;l.level=i;l.type=s;l.sn="initSegment";y.initSegment=l;l=new u.a;l.rawProgramDateTime=y.initSegment.rawProgramDateTime;break;default:o.b.warn("line parsed but not handled: "+p)}}return l=it,l&&!l.relurl&&(y.fragments.pop(),tt-=l.duration),y.totalduration=tt,y.averagetargetduration=tt/y.fragments.length,y.endSN=ot-1,y.startCC=y.fragments[0]?y.fragments[0].cc:0,y.endCC=ut,!y.initSegment&&y.fragments.length&&y.fragments.every(function(n){return d.test(n.relurl)})&&(o.b.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),l=new u.a,l.relurl=y.fragments[0].relurl,l.baseurl=t,l.level=i,l.type=s,l.sn="initSegment",y.initSegment=l,y.needSidxRanges=!0),ft&&a(y.fragments,ft),y},n}();t.a=g},function(n,t,i){"use strict";function r(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var u=i(3),f=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),e=function(){function n(t){r(this,n);this.endCC=0;this.endSN=0;this.fragments=[];this.initSegment=null;this.live=!0;this.needSidxRanges=!1;this.startCC=0;this.startSN=0;this.startTimeOffset=null;this.targetduration=0;this.totalduration=0;this.type=null;this.url=t;this.version=null}return f(n,[{key:"hasProgramDateTime",get:function(){return!(!this.fragments[0]||!Object(u.a)(this.fragments[0].programDateTime))}}]),n}();t.a=e},function(n,t){"use strict";function r(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var u=/^(\d+)x(\d+)$/,i=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,f=function(){function n(t){r(this,n);"string"==typeof t&&(t=n.parseAttrList(t));for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i])}return n.prototype.decimalInteger=function(n){var t=parseInt(this[n],10);return t>Number.MAX_SAFE_INTEGER?1/0:t},n.prototype.hexadecimalInteger=function(n){var t,r,i;if(this[n]){for(t=(this[n]||"0x").slice(2),t=(1&t.length?"0":"")+t,r=new Uint8Array(t.length/2),i=0;i<t.length/2;i++)r[i]=parseInt(t.slice(2*i,2*i+2),16);return r}return null},n.prototype.hexadecimalIntegerAsNumber=function(n){var t=parseInt(this[n],16);return t>Number.MAX_SAFE_INTEGER?1/0:t},n.prototype.decimalFloatingPoint=function(n){return parseFloat(this[n])},n.prototype.enumeratedString=function(n){return this[n]},n.prototype.decimalResolution=function(n){var t=u.exec(this[n]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}},n.parseAttrList=function(n){var r=void 0,u={},t;for(i.lastIndex=0;null!==(r=i.exec(n));)t=r[2],0===t.indexOf('"')&&t.lastIndexOf('"')===t.length-1&&(t=t.slice(1,-1)),u[r[1]]=t;return u},n}();t.a=f},function(n,t,i){"use strict";function e(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function o(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t}function s(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var f=i(3),r=i(1),h=i(4),u=i(2),c=i(0),l=function(n){function t(i){e(this,t);var u=o(this,n.call(this,i,r.a.FRAG_LOADING));return u.loaders={},u}return s(t,n),t.prototype.destroy=function(){var i=this.loaders,r,t;for(r in i)t=i[r],t&&t.destroy();this.loaders={};n.prototype.destroy.call(this)},t.prototype.onFragLoading=function(n){var t=n.frag,e=t.type,h=this.loaders,i=this.hls.config,v=i.fLoader,y=i.loader,r,o,s;t.loaded=0;r=h[e];r&&(c.b.warn("abort previous fragment loader for type: "+e),r.abort());r=h[e]=t.loader=i.fLoader?new v(i):new y(i);var u=void 0,l=void 0,a=void 0;u={url:t.url,frag:t,responseType:"arraybuffer",progressData:!1};o=t.byteRangeStartOffset;s=t.byteRangeEndOffset;Object(f.a)(o)&&Object(f.a)(s)&&(u.rangeStart=o,u.rangeEnd=s);l={timeout:i.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:i.fragLoadingMaxRetryTimeout};a={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)};r.load(u,l,a)},t.prototype.loadsuccess=function(n,t,i){var f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,e=n.data,u=i.frag;u.loader=void 0;this.loaders[u.type]=void 0;this.hls.trigger(r.a.FRAG_LOADED,{payload:e,frag:u,stats:t,networkDetails:f})},t.prototype.loaderror=function(n,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=t.frag,f=i.loader;f&&f.abort();this.loaders[i.type]=void 0;this.hls.trigger(r.a.ERROR,{type:u.b.NETWORK_ERROR,details:u.a.FRAG_LOAD_ERROR,fatal:!1,frag:t.frag,response:n,networkDetails:e})},t.prototype.loadtimeout=function(n,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=t.frag,f=i.loader;f&&f.abort();this.loaders[i.type]=void 0;this.hls.trigger(r.a.ERROR,{type:u.b.NETWORK_ERROR,details:u.a.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t.frag,networkDetails:e})},t.prototype.loadprogress=function(n,t){var u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=t.frag;i.loaded=n.loaded;this.hls.trigger(r.a.FRAG_LOAD_PROGRESS,{frag:i,stats:n,networkDetails:u})},t}(h.a);t.a=l},function(n,t,i){"use strict";function e(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function o(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t}function s(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var r=i(1),f=i(4),u=i(2),h=i(0),c=function(n){function t(i){e(this,t);var u=o(this,n.call(this,i,r.a.KEY_LOADING));return u.loaders={},u.decryptkey=null,u.decrypturl=null,u}return s(t,n),t.prototype.destroy=function(){var t,n;for(t in this.loaders)n=this.loaders[t],n&&n.destroy();this.loaders={};f.a.prototype.destroy.call(this)},t.prototype.onKeyLoading=function(n){var i=n.frag,u=i.type,e=this.loaders[u],o=i.decryptdata,f=o.uri,t;if(f!==this.decrypturl||null===this.decryptkey){t=this.hls.config;e&&(h.b.warn("abort previous key loader for type:"+u),e.abort());i.loader=this.loaders[u]=new t.loader(t);this.decrypturl=f;this.decryptkey=null;var s=void 0,c=void 0,l=void 0;s={url:f,frag:i,responseType:"arraybuffer"};c={timeout:t.fragLoadingTimeOut,maxRetry:t.fragLoadingMaxRetry,retryDelay:t.fragLoadingRetryDelay,maxRetryDelay:t.fragLoadingMaxRetryTimeout};l={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};i.loader.load(s,c,l)}else this.decryptkey&&(o.key=this.decryptkey,this.hls.trigger(r.a.KEY_LOADED,{frag:i}))},t.prototype.loadsuccess=function(n,t,i){var u=i.frag;this.decryptkey=u.decryptdata.key=new Uint8Array(n.data);u.loader=void 0;this.loaders[u.type]=void 0;this.hls.trigger(r.a.KEY_LOADED,{frag:u})},t.prototype.loaderror=function(n,t){var i=t.frag,f=i.loader;f&&f.abort();this.loaders[t.type]=void 0;this.hls.trigger(r.a.ERROR,{type:u.b.NETWORK_ERROR,details:u.a.KEY_LOAD_ERROR,fatal:!1,frag:i,response:n})},t.prototype.loadtimeout=function(n,t){var i=t.frag,f=i.loader;f&&f.abort();this.loaders[t.type]=void 0;this.hls.trigger(r.a.ERROR,{type:u.b.NETWORK_ERROR,details:u.a.KEY_LOAD_TIMEOUT,fatal:!1,frag:i})},t}(f.a);t.a=c},function(n,t,i){"use strict";function p(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function w(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t}function b(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var s=i(3),k=i(7),e=i(8),l=i(21),f=i(1),h=i(12),c=i(11),d=i(17),a=i(16),g=i(25),o=i(2),u=i(0),v=i(26),nt=i(10),y=i(50),tt=i(51),it=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),r={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_LEVEL:"WAITING_LEVEL",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR"},rt=function(n){function t(i,u){p(this,t);var e=w(this,n.call(this,i,f.a.MEDIA_ATTACHED,f.a.MEDIA_DETACHING,f.a.MANIFEST_LOADING,f.a.MANIFEST_PARSED,f.a.LEVEL_LOADED,f.a.KEY_LOADED,f.a.FRAG_LOADED,f.a.FRAG_LOAD_EMERGENCY_ABORTED,f.a.FRAG_PARSING_INIT_SEGMENT,f.a.FRAG_PARSING_DATA,f.a.FRAG_PARSED,f.a.ERROR,f.a.AUDIO_TRACK_SWITCHING,f.a.AUDIO_TRACK_SWITCHED,f.a.BUFFER_CREATED,f.a.BUFFER_APPENDED,f.a.BUFFER_FLUSHED));return e.fragmentTracker=u,e.config=i.config,e.audioCodecSwap=!1,e._state=r.STOPPED,e.stallReported=!1,e.gapController=null,e}return b(t,n),t.prototype.onHandlerDestroying=function(){this.stopLoad();n.prototype.onHandlerDestroying.call(this)},t.prototype.onHandlerDestroyed=function(){this.state=r.STOPPED;this.fragmentTracker=null;n.prototype.onHandlerDestroyed.call(this)},t.prototype.startLoad=function(n){var t,f,i;this.levels?(t=this.lastCurrentTime,f=this.hls,(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,this.startFragRequested)||(i=f.startLevel,-1===i&&(i=0,this.bitrateTest=!0),this.level=f.nextLoadLevel=i,this.loadedmetadata=!1),t>0&&-1===n&&(u.b.log("override startPosition with lastCurrentTime @"+t.toFixed(3)),n=t),this.state=r.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=n,this.tick()):(this.forceStartLoad=!0,this.state=r.STOPPED)},t.prototype.stopLoad=function(){var n=this.fragCurrent;n&&(n.loader&&n.loader.abort(),this.fragmentTracker.removeFragment(n),this.fragCurrent=null);this.fragPrevious=null;this.demuxer&&(this.demuxer.destroy(),this.demuxer=null);this.clearInterval();this.state=r.STOPPED;this.forceStartLoad=!1},t.prototype.doTick=function(){var n,i,t;switch(this.state){case r.BUFFER_FLUSHING:this.fragLoadError=0;break;case r.IDLE:this._doTickIdle();break;case r.WAITING_LEVEL:n=this.levels[this.level];n&&n.details&&(this.state=r.IDLE);break;case r.FRAG_LOADING_WAITING_RETRY:i=window.performance.now();t=this.retryDate;(!t||i>=t||this.media&&this.media.seeking)&&(u.b.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=r.IDLE)}this._checkBuffer();this._checkFragmentChanged()},t.prototype._doTickIdle=function(){var v=this.hls,t=v.config,h=this.media,c,l,a,y,i,s,p,o,n,w;if(void 0!==this.levelLastLoaded&&(h||!this.startFragRequested&&t.startFragPrefetch)&&(c=void 0,c=this.loadedmetadata?h.currentTime:this.nextLoadPosition,l=v.nextLoadLevel,a=this.levels[l],a&&(y=a.bitrate,i=void 0,i=y?Math.max(8*t.maxBufferSize/y,t.maxBufferLength):t.maxBufferLength,i=Math.min(i,t.maxMaxBufferLength),s=e.a.bufferInfo(this.mediaBuffer?this.mediaBuffer:h,c,t.maxBufferHole),p=s.len,!(p>=i)))){if(u.b.trace("buffer length of "+p.toFixed(3)+" is below max of "+i.toFixed(3)+". checking for more payload ..."),this.level=v.nextLoadLevel=l,o=a.details,!o||o.live&&this.levelLastLoaded!==l)return void(this.state=r.WAITING_LEVEL);if(n=this.fragPrevious,!o.live&&n&&!n.backtracked&&n.sn===o.endSN&&!s.nextStart&&Math.min(h.duration,n.start+n.duration)-Math.max(s.end,n.start)<=Math.max(.2,n.duration))return w={},this.altAudio&&(w.type="video"),this.hls.trigger(f.a.BUFFER_EOS,w),void(this.state=r.ENDED);this._fetchPayloadOrEos(c,s,o)}},t.prototype._fetchPayloadOrEos=function(n,t,i){var c=this.fragPrevious,l=this.level,f=i.fragments,e=f.length,h;if(0!==e){var s=f[0].start,a=f[e-1].start+f[e-1].duration,o=t.end,r=void 0;if(i.initSegment&&!i.initSegment.data)r=i.initSegment;else if(i.live){if(h=this.config.initialLiveManifestSize,e<h)return void u.b.warn("Can not start playback of a level, reason: not enough fragments "+e+" < "+h);if(null===(r=this._ensureFragmentAtLivePoint(i,o,s,a,c,f,e)))return}else o<s&&(r=f[0]);r||(r=this._findFragment(s,c,e,f,o,a,i));r&&(r.encrypted?(u.b.log("Loading key for "+r.sn+" of ["+i.startSN+" ,"+i.endSN+"],level "+l),this._loadKey(r)):(u.b.log("Loading "+r.sn+" of ["+i.startSN+" ,"+i.endSN+"],level "+l+", currentTime:"+n.toFixed(3)+",bufferEnd:"+o.toFixed(3)),this._loadFragment(r)))}},t.prototype._ensureFragmentAtLivePoint=function(n,t,i,r,f,e,o){var l=this.hls.config,h=this.media,s=void 0,p=void 0!==l.liveMaxLatencyDuration?l.liveMaxLatencyDuration:l.liveMaxLatencyDurationCount*n.targetduration,c,a,v;return(t<Math.max(i-l.maxFragLookUpTolerance,r-p)&&(c=this.liveSyncPosition=this.computeLivePosition(i,n),u.b.log("buffer end: "+t.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+c.toFixed(3)),t=c,h&&h.readyState&&h.duration>c&&(h.currentTime=c),this.nextLoadPosition=c),n.PTSKnown&&t>r&&h&&h.readyState)?null:(this.startFragRequested&&!n.PTSKnown&&(f&&(n.hasProgramDateTime?(u.b.log("live playlist, switching playlist, load frag with same PDT: "+f.programDateTime),s=Object(y.a)(e,f.endProgramDateTime,l.maxFragLookUpTolerance)):(a=f.sn+1,a>=n.startSN&&a<=n.endSN&&(v=e[a-n.startSN],f.cc===v.cc&&(s=v,u.b.log("live playlist, switching playlist, load frag with next SN: "+s.sn))),s||(s=k.a.search(e,function(n){return f.cc-n.cc}))&&u.b.log("live playlist, switching playlist, load frag with same CC: "+s.sn))),s||(s=e[Math.min(o-1,Math.round(o/2))],u.b.log("live playlist, switching playlist, unknown, load middle frag : "+s.sn))),s)},t.prototype._findFragment=function(n,t,i,r,f,e,o){var l=this.hls.config,s=void 0,p,v;if(f<e?(p=f>e-l.maxFragLookUpTolerance?0:l.maxFragLookUpTolerance,s=Object(y.b)(t,r,f,p)):s=r[i-1],s){var c=s.sn-o.startSN,w=t&&s.level===t.level,a=r[c-1],h=r[c+1];t&&s.sn===t.sn&&(w&&!s.backtracked?s.sn<o.endSN?(v=t.deltaPTS,v&&v>l.maxBufferHole&&t.dropped&&c?(s=a,u.b.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this")):(s=h,u.b.log("SN just loaded, load next one: "+s.sn,s))):s=null:s.backtracked&&(h&&h.backtracked?(u.b.warn("Already backtracked from fragment "+h.sn+", will not backtrack to fragment "+s.sn+". Loading fragment "+h.sn),s=h):(u.b.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),s.dropped=0,a?(s=a,s.backtracked=!0):c&&(s=null))))}return s},t.prototype._loadKey=function(n){this.state=r.KEY_LOADING;this.hls.trigger(f.a.KEY_LOADING,{frag:n})},t.prototype._loadFragment=function(n){var t=this.fragmentTracker.getState(n);this.fragCurrent=n;this.startFragRequested=!0;Object(s.a)(n.sn)&&!n.bitrateTest&&(this.nextLoadPosition=n.start+n.duration);n.backtracked||t===h.a.NOT_LOADED||t===h.a.PARTIAL?(n.autoLevel=this.hls.autoLevelEnabled,n.bitrateTest=this.bitrateTest,this.hls.trigger(f.a.FRAG_LOADING,{frag:n}),this.demuxer||(this.demuxer=new l.a(this.hls,"main")),this.state=r.FRAG_LOADING):t===h.a.APPENDING&&this._reduceMaxBufferLength(n.duration)&&this.fragmentTracker.removeFragment(n)},t.prototype.getBufferedFrag=function(n){return this.fragmentTracker.getBufferedFrag(n,d.a.LevelType.MAIN)},t.prototype.followingBufferedFrag=function(n){return n?this.getBufferedFrag(n.endPTS+.5):null},t.prototype._checkFragmentChanged=function(){var r=void 0,n=void 0,t=this.media,i,u;t&&t.readyState&&!1===t.seeking&&(n=t.currentTime,n>this.lastCurrentTime&&(this.lastCurrentTime=n),e.a.isBuffered(t,n)?r=this.getBufferedFrag(n):e.a.isBuffered(t,n+.1)&&(r=this.getBufferedFrag(n+.1)),r)&&(i=r,i!==this.fragPlaying&&(this.hls.trigger(f.a.FRAG_CHANGED,{frag:i}),u=i.level,this.fragPlaying&&this.fragPlaying.level===u||this.hls.trigger(f.a.LEVEL_SWITCHED,{level:u}),this.fragPlaying=i))},t.prototype.immediateLevelSwitch=function(){var n,t,i;(u.b.log("immediateLevelSwitch"),this.immediateSwitch)||(this.immediateSwitch=!0,n=this.media,t=void 0,n?(t=n.paused,n.pause()):t=!0,this.previouslyPaused=t);i=this.fragCurrent;i&&i.loader&&i.loader.abort();this.fragCurrent=null;this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},t.prototype.immediateLevelSwitchEnd=function(){var n=this.media;n&&n.buffered.length&&(this.immediateSwitch=!1,e.a.isBuffered(n,n.currentTime)&&(n.currentTime-=.0001),this.previouslyPaused||n.play())},t.prototype.nextLevelSwitch=function(){var n=this.media,r;if(n&&n.readyState){var u=void 0,t=void 0,i=void 0;if(t=this.getBufferedFrag(n.currentTime),t&&t.startPTS>1&&this.flushMainBuffer(0,t.startPTS-1),n.paused)u=0;else{var e=this.hls.nextLoadLevel,o=this.levels[e],f=this.fragLastKbps;u=f&&this.fragCurrent?this.fragCurrent.duration*o.bitrate/(1e3*f)+1:0}(i=this.getBufferedFrag(n.currentTime+u))&&(i=this.followingBufferedFrag(i))&&(r=this.fragCurrent,r&&r.loader&&r.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(i.maxStartPTS,Number.POSITIVE_INFINITY))}},t.prototype.flushMainBuffer=function(n,t){this.state=r.BUFFER_FLUSHING;var i={startOffset:n,endOffset:t};this.altAudio&&(i.type="video");this.hls.trigger(f.a.BUFFER_FLUSHING,i)},t.prototype.onMediaAttached=function(n){var t=this.media=this.mediaBuffer=n.media,i;this.onvseeking=this.onMediaSeeking.bind(this);this.onvseeked=this.onMediaSeeked.bind(this);this.onvended=this.onMediaEnded.bind(this);t.addEventListener("seeking",this.onvseeking);t.addEventListener("seeked",this.onvseeked);t.addEventListener("ended",this.onvended);i=this.config;this.levels&&i.autoStartLoad&&this.hls.startLoad(i.startPosition);this.gapController=new tt.a(i,t,this.fragmentTracker,this.hls)},t.prototype.onMediaDetaching=function(){var n=this.media,t;n&&n.ended&&(u.b.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);t=this.levels;t&&t.forEach(function(n){n.details&&n.details.fragments.forEach(function(n){n.backtracked=void 0})});n&&(n.removeEventListener("seeking",this.onvseeking),n.removeEventListener("seeked",this.onvseeked),n.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null);this.media=this.mediaBuffer=null;this.loadedmetadata=!1;this.stopLoad()},t.prototype.onMediaSeeking=function(){var i=this.media,n=i?i.currentTime:void 0,c=this.config,o,f,t;if(Object(s.a)(n)&&u.b.log("media seeking to "+n.toFixed(3)),o=this.mediaBuffer?this.mediaBuffer:i,f=e.a.bufferInfo(o,n,this.config.maxBufferHole),this.state===r.FRAG_LOADING){if(t=this.fragCurrent,0===f.len&&t){var h=c.maxFragLookUpTolerance,l=t.start-h,a=t.start+t.duration+h;n<l||n>a?(t.loader&&(u.b.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),t.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=r.IDLE):u.b.log("seeking outside of buffer but within currently loaded fragment range")}}else this.state===r.ENDED&&(0===f.len&&(this.fragPrevious=0),this.state=r.IDLE);i&&(this.lastCurrentTime=n);this.loadedmetadata||(this.nextLoadPosition=this.startPosition=n);this.tick()},t.prototype.onMediaSeeked=function(){var n=this.media,t=n?n.currentTime:void 0;Object(s.a)(t)&&u.b.log("media seeked to "+t.toFixed(3));this.tick()},t.prototype.onMediaEnded=function(){u.b.log("media ended");this.startPosition=this.lastCurrentTime=0},t.prototype.onManifestLoading=function(){u.b.log("trigger BUFFER_RESET");this.hls.trigger(f.a.BUFFER_RESET);this.fragmentTracker.removeAllFragments();this.stalled=!1;this.startPosition=this.lastCurrentTime=0},t.prototype.onManifestParsed=function(n){var r=!1,f=!1,t=void 0,i;n.levels.forEach(function(n){(t=n.audioCodec)&&(-1!==t.indexOf("mp4a.40.2")&&(r=!0),-1!==t.indexOf("mp4a.40.5")&&(f=!0))});this.audioCodecSwitch=r&&f;this.audioCodecSwitch&&u.b.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC");this.levels=n.levels;this.startFragRequested=!1;i=this.config;(i.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(i.startPosition)},t.prototype.onLevelLoaded=function(n){var t=n.details,o=n.level,c=this.levels[this.levelLastLoaded],l=this.levels[o],y=t.totalduration,e=0,h,i;(u.b.log("level "+o+" loaded ["+t.startSN+","+t.endSN+"],duration:"+y),t.live)?(h=l.details,h&&t.fragments.length>0?(a.b(h,t),e=t.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(e,h),t.PTSKnown&&Object(s.a)(e)?u.b.log("live playlist sliding:"+e.toFixed(3)):(u.b.log("live playlist - outdated PTS, unknown sliding"),Object(v.a)(this.fragPrevious,c,t))):(u.b.log("live playlist - first load, unknown sliding"),t.PTSKnown=!1,Object(v.a)(this.fragPrevious,c,t))):t.PTSKnown=!1;(l.details=t,this.levelLastLoaded=o,this.hls.trigger(f.a.LEVEL_UPDATED,{details:t,level:o}),!1===this.startFragRequested)&&((-1===this.startPosition||-1===this.lastCurrentTime)&&(i=t.startTimeOffset,Object(s.a)(i)?(i<0&&(u.b.log("negative start time offset "+i+", count from end of last fragment"),i=e+y+i),u.b.log("start time offset found in playlist, adjust startPosition to "+i),this.startPosition=i):t.live?(this.startPosition=this.computeLivePosition(e,t),u.b.log("configure startPosition to "+this.startPosition)):this.startPosition=0,this.lastCurrentTime=this.startPosition),this.nextLoadPosition=this.startPosition);this.state===r.WAITING_LEVEL&&(this.state=r.IDLE);this.tick()},t.prototype.onKeyLoaded=function(){this.state===r.KEY_LOADING&&(this.state=r.IDLE,this.tick())},t.prototype.onFragLoaded=function(n){var t=this.fragCurrent,s=this.hls,a=this.levels,c=this.media,e=n.frag;if(this.state===r.FRAG_LOADING&&t&&"main"===e.type&&e.level===t.level&&e.sn===t.sn){var o=n.stats,h=a[t.level],i=h.details;if(this.bitrateTest=!1,this.stats=o,u.b.log("Loaded "+t.sn+" of ["+i.startSN+" ,"+i.endSN+"],level "+t.level),e.bitrateTest&&s.nextLoadLevel)this.state=r.IDLE,this.startFragRequested=!1,o.tparsed=o.tbuffered=window.performance.now(),s.trigger(f.a.FRAG_BUFFERED,{stats:o,frag:t,id:"main"}),this.tick();else if("initSegment"===e.sn)this.state=r.IDLE,o.tparsed=o.tbuffered=window.performance.now(),i.initSegment.data=n.payload,s.trigger(f.a.FRAG_BUFFERED,{stats:o,frag:t,id:"main"}),this.tick();else{u.b.log("Parsing "+t.sn+" of ["+i.startSN+" ,"+i.endSN+"],level "+t.level+", cc "+t.cc);this.state=r.PARSING;this.pendingBuffering=!0;this.appended=!1;e.bitrateTest&&(e.bitrateTest=!1,this.fragmentTracker.onFragLoaded({frag:e}));var v=!(c&&c.seeking)&&(i.PTSKnown||!i.live),y=i.initSegment?i.initSegment.data:[],p=this._getAudioCodec(h),w=this.demuxer=this.demuxer||new l.a(this.hls,"main");w.push(n.payload,y,p,h.videoCodec,t,i.totalduration,v)}}this.fragLoadError=0},t.prototype.onFragParsingInitSegment=function(n){var s=this.fragCurrent,l=n.frag,i,h,c;if(s&&"main"===n.id&&l.sn===s.sn&&l.level===s.level&&this.state===r.PARSING){var e=n.tracks,o=void 0,t=void 0;(e.audio&&this.altAudio&&delete e.audio,t=e.audio)&&(i=this.levels[this.level].audioCodec,h=navigator.userAgent.toLowerCase(),i&&this.audioCodecSwap&&(u.b.log("swapping playlist audio codec"),i=-1!==i.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==t.metadata.channelCount&&-1===h.indexOf("firefox")&&(i="mp4a.40.5"),-1!==h.indexOf("android")&&"audio/mpeg"!==t.container&&(i="mp4a.40.2",u.b.log("Android: force audio codec to "+i)),t.levelCodec=i,t.id=n.id);t=e.video;t&&(t.levelCodec=this.levels[this.level].videoCodec,t.id=n.id);this.hls.trigger(f.a.BUFFER_CODECS,e);for(o in e)t=e[o],u.b.log("main track:"+o+",container:"+t.container+",codecs[level/parsed]=["+t.levelCodec+"/"+t.codec+"]"),c=t.initSegment,c&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(f.a.BUFFER_APPENDING,{type:o,data:c,parent:"main",content:"initSegment"}));this.tick()}},t.prototype.onFragParsingData=function(n){var o=this,i=this.fragCurrent,v=n.frag,e,t,h,y,l;if(i&&"main"===n.id&&v.sn===i.sn&&v.level===i.level&&("audio"!==n.type||!this.altAudio)&&this.state===r.PARSING){if(e=this.levels[this.level],t=i,Object(s.a)(n.endPTS)||(n.endPTS=n.startPTS+i.duration,n.endDTS=n.startDTS+i.duration),!0===n.hasAudio&&t.addElementaryStream(c.a.ElementaryStreamTypes.AUDIO),!0===n.hasVideo&&t.addElementaryStream(c.a.ElementaryStreamTypes.VIDEO),u.b.log("Parsed "+n.type+",PTS:["+n.startPTS.toFixed(3)+","+n.endPTS.toFixed(3)+"],DTS:["+n.startDTS.toFixed(3)+"/"+n.endDTS.toFixed(3)+"],nb:"+n.nb+",dropped:"+(n.dropped||0)),"video"===n.type)if(t.dropped=n.dropped,t.dropped)if(t.backtracked)u.b.warn("Already backtracked on this fragment, appending with the gap",t.sn);else{if(h=e.details,!h||t.sn!==h.startSN)return u.b.warn("missing video frame(s), backtracking fragment",t.sn),this.fragmentTracker.removeFragment(t),t.backtracked=!0,this.nextLoadPosition=n.startPTS,this.state=r.IDLE,this.fragPrevious=t,void this.tick();u.b.warn("missing video frame(s) on first frag, appending with gap",t.sn)}else t.backtracked=!1;y=a.c(e.details,t,n.startPTS,n.endPTS,n.startDTS,n.endDTS);l=this.hls;l.trigger(f.a.LEVEL_PTS_UPDATED,{details:e.details,level:this.level,drift:y,type:n.type,start:n.startPTS,end:n.endPTS});[n.data1,n.data2].forEach(function(t){t&&t.length&&o.state===r.PARSING&&(o.appended=!0,o.pendingBuffering=!0,l.trigger(f.a.BUFFER_APPENDING,{type:n.type,data:t,parent:"main",content:"data"}))});this.tick()}},t.prototype.onFragParsed=function(n){var t=this.fragCurrent,i=n.frag;t&&"main"===n.id&&i.sn===t.sn&&i.level===t.level&&this.state===r.PARSING&&(this.stats.tparsed=window.performance.now(),this.state=r.PARSED,this._checkAppendedParsed())},t.prototype.onAudioTrackSwitching=function(n){var e=!!n.url,o=n.id,t,i;e||(this.mediaBuffer!==this.media&&(u.b.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media,t=this.fragCurrent,t.loader&&(u.b.log("switching to main audio track, cancel main fragment load"),t.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=r.IDLE),i=this.hls,i.trigger(f.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),i.trigger(f.a.AUDIO_TRACK_SWITCHED,{id:o}),this.altAudio=!1)},t.prototype.onAudioTrackSwitched=function(n){var r=n.id,i=!!this.hls.audioTracks[r].url,t;i&&(t=this.videoBuffer,t&&this.mediaBuffer!==t&&(u.b.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=t));this.altAudio=i;this.tick()},t.prototype.onBufferCreated=function(n){var i=n.tracks,r=void 0,e=void 0,o=!1,t,f;for(t in i)f=i[t],"main"===f.id?(e=t,r=f,"video"===t&&(this.videoBuffer=i[t].buffer)):o=!0;o&&r?(u.b.log("alternate track found, use "+e+".buffered to schedule main fragment loading"),this.mediaBuffer=r.buffer):this.mediaBuffer=this.media},t.prototype.onBufferAppended=function(n){if("main"===n.parent){var t=this.state;t!==r.PARSING&&t!==r.PARSED||(this.pendingBuffering=n.pending>0,this._checkAppendedParsed())}},t.prototype._checkAppendedParsed=function(){var t,i,n;this.state!==r.PARSED||this.appended&&this.pendingBuffering||(t=this.fragCurrent,t&&(i=this.mediaBuffer?this.mediaBuffer:this.media,u.b.log("main buffered : "+g.a.toString(i.buffered)),this.fragPrevious=t,n=this.stats,n.tbuffered=window.performance.now(),this.fragLastKbps=Math.round(8*n.total/(n.tbuffered-n.tfirst)),this.hls.trigger(f.a.FRAG_BUFFERED,{stats:n,frag:t,id:"main"}),this.state=r.IDLE),this.tick())},t.prototype.onError=function(n){var i=n.frag||this.fragCurrent,f,t;if(!i||"main"===i.type){f=!!this.media&&e.a.isBuffered(this.media,this.media.currentTime)&&e.a.isBuffered(this.media,this.media.currentTime+.5);switch(n.details){case o.a.FRAG_LOAD_ERROR:case o.a.FRAG_LOAD_TIMEOUT:case o.a.KEY_LOAD_ERROR:case o.a.KEY_LOAD_TIMEOUT:n.fatal||(this.fragLoadError+1<=this.config.fragLoadingMaxRetry?(t=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout),u.b.warn("mediaController: frag loading failed, retry in "+t+" ms"),this.retryDate=window.performance.now()+t,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=r.FRAG_LOADING_WAITING_RETRY):(u.b.error("mediaController: "+n.details+" reaches max retry, redispatch as fatal ..."),n.fatal=!0,this.state=r.ERROR));break;case o.a.LEVEL_LOAD_ERROR:case o.a.LEVEL_LOAD_TIMEOUT:this.state!==r.ERROR&&(n.fatal?(this.state=r.ERROR,u.b.warn("streamController: "+n.details+",switch to "+this.state+" state ...")):n.levelRetry||this.state!==r.WAITING_LEVEL||(this.state=r.IDLE));break;case o.a.BUFFER_FULL_ERROR:"main"!==n.parent||this.state!==r.PARSING&&this.state!==r.PARSED||(f?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=r.IDLE):(u.b.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}},t.prototype._reduceMaxBufferLength=function(n){var t=this.config;return t.maxMaxBufferLength>=n&&(t.maxMaxBufferLength/=2,u.b.warn("main:reduce max buffer length to "+t.maxMaxBufferLength+"s"),!0)},t.prototype._checkBuffer=function(){var n=this.media,i,t;n&&0!==n.readyState&&(i=this.mediaBuffer?this.mediaBuffer:n,t=i.buffered,!this.loadedmetadata&&t.length?(this.loadedmetadata=!0,this._seekToStartPos()):this.immediateSwitch?this.immediateLevelSwitchEnd():this.gapController.poll(this.lastCurrentTime,t))},t.prototype.onFragLoadEmergencyAborted=function(){this.state=r.IDLE;this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition);this.tick()},t.prototype.onBufferFlushed=function(){var n=this.mediaBuffer?this.mediaBuffer:this.media;n&&this.fragmentTracker.detectEvictedFragments(c.a.ElementaryStreamTypes.VIDEO,n.buffered);this.state=r.IDLE;this.fragPrevious=null},t.prototype.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},t.prototype.computeLivePosition=function(n,t){var i=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*t.targetduration;return n+Math.max(0,t.totalduration-i)},t.prototype._seekToStartPos=function(){var n=this.media,t=n.currentTime,i=n.seeking?t:this.startPosition;t!==i&&(u.b.log("target start position not buffered, seek to buffered.start(0) "+i+" from current time "+t+" "),n.currentTime=i)},t.prototype._getAudioCodec=function(n){var t=this.config.defaultAudioCodec||n.audioCodec;return this.audioCodecSwap&&(u.b.log("swapping playlist audio codec"),t&&(t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),t},it(t,[{key:"state",set:function(n){if(this.state!==n){var t=this.state;this._state=n;u.b.log("main stream:"+t+"->"+n);this.hls.trigger(f.a.STREAM_STATE_TRANSITION,{previousState:t,nextState:n})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var t=this.media,n;return t&&(n=this.getBufferedFrag(t.currentTime),n)?n.level:-1}},{key:"nextBufferedFrag",get:function(){var n=this.media;return n?this.followingBufferedFrag(this.getBufferedFrag(n.currentTime)):null}},{key:"nextLevel",get:function(){var n=this.nextBufferedFrag;return n?n.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(n){this._liveSyncPosition=n}}]),t}(nt.a);t.a=rt},function(n,t,i){function r(n){function t(r){if(i[r])return i[r].exports;var u=i[r]={i:r,l:!1,exports:{}};return n[r].call(u.exports,u,u.exports,t),u.l=!0,u.exports}var i={},r;return t.m=n,t.c=i,t.i=function(n){return n},t.d=function(n,i,r){t.o(n,i)||Object.defineProperty(n,i,{configurable:!1,enumerable:!0,get:r})},t.n=function(n){var i=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(i,"a",i),i},t.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},t.p="/",t.oe=function(n){throw console.error(n),n;},r=t(t.s=ENTRY_MODULE),r.default||r}function u(n){return(n+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function o(n,t,r){var s={},h,l,o,a,c;if(s[r]=[],h=t.toString(),l=h.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/),!l)return s;for(a=l[1],c=new RegExp("(\\\\n|\\W)"+u(a)+e,"g");o=c.exec(h);)"dll-reference"!==o[3]&&s[r].push(o[3]);for(c=new RegExp("\\("+u(a)+'\\("(dll-reference\\s('+f+'))"\\)\\)'+e,"g");o=c.exec(h);)n[o[2]]||(s[r].push(o[1]),n[o[2]]=i(o[1]).m),s[o[2]]=s[o[2]]||[],s[o[2]].push(o[4]);return s}function s(n){return Object.keys(n).reduce(function(t,i){return t||n[i].length>0},!1)}function h(n,t){for(var a,l,r={main:[t]},h={main:[]},c={main:{}};s(r);)for(a=Object.keys(r),l=0;l<a.length;l++){var i=a[l],y=r[i],e=y.pop();if(c[i]=c[i]||{},!c[i][e]&&n[i][e]){c[i][e]=!0;h[i]=h[i]||[];h[i].push(e);for(var v=o(n,n[i][e],i),f=Object.keys(v),u=0;u<f.length;u++)r[f[u]]=r[f[u]]||[],r[f[u]]=r[f[u]].concat(v[f[u]])}}return h}var f="[\\.|\\-|\\+|\\w|/|@]+",e="\\((/\\*.*?\\*/)?s?.*?("+f+").*?\\)";n.exports=function(n,t){var o;t=t||{};var u={main:i.m},f=t.all?{main:Object.keys(u)}:h(u,n),e="";if(Object.keys(f).filter(function(n){return"main"!==n}).forEach(function(n){for(var t=0;f[n][t];)t++;f[n].push(t);u[n][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })";e=e+"var "+n+" = ("+r.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+f[n].map(function(t){return JSON.stringify(t)+": "+u[n][t].toString()}).join(",")+"});\n"}),e=e+"("+r.toString().replace("ENTRY_MODULE",JSON.stringify(n))+")({"+f.main.map(function(n){return JSON.stringify(n)+": "+u.main[n].toString()}).join(",")+"})(self);",o=new window.Blob([e],{type:"text/javascript"}),t.bare)return o;var l=window.URL||window.webkitURL||window.mozURL||window.msURL,s=l.createObjectURL(o),c=new window.Worker(s);return c.objectURL=s,c}},function(n,t){"use strict";function i(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var r=function(){function n(t,r){i(this,n);this.subtle=t;this.aesIV=r}return n.prototype.decrypt=function(n,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,n)},n}();t.a=r},function(n,t){"use strict";function i(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var r=function(){function n(t,r){i(this,n);this.subtle=t;this.key=r}return n.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},n}();t.a=r},function(n,t){"use strict";function i(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function r(n){var t=n.byteLength,i=t&&new DataView(n).getUint8(t-1);return i?n.slice(0,t-i):n}var u=function(){function n(){i(this,n);this.rcon=[0,1,2,4,8,16,32,64,128,27,54];this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)];this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)];this.sBox=new Uint32Array(256);this.invSBox=new Uint32Array(256);this.key=new Uint32Array(0);this.initTable()}return n.prototype.uint8ArrayToUint32Array_=function(n){for(var r=new DataView(n),i=new Uint32Array(4),t=0;t<4;t++)i[t]=r.getUint32(4*t);return i},n.prototype.initTable=function(){for(var l=this.sBox,a=this.invSBox,e=this.subMix,v=e[0],y=e[1],p=e[2],w=e[3],o=this.invSubMix,b=o[0],k=o[1],d=o[2],g=o[3],r=new Uint32Array(256),i=0,f=0,u=0,t,u=0;u<256;u++)r[u]=u<128?u<<1:u<<1^283;for(u=0;u<256;u++){t=f^f<<1^f<<2^f<<3^f<<4;t=t>>>8^255&t^99;l[i]=t;a[t]=i;var s=r[i],h=r[s],c=r[h],n=257*r[t]^16843008*t;v[i]=n<<24|n>>>8;y[i]=n<<16|n>>>16;p[i]=n<<8|n>>>24;w[i]=n;n=16843009*c^65537*h^257*s^16843008*i;b[t]=n<<24|n>>>8;k[t]=n<<16|n>>>16;d[t]=n<<8|n>>>24;g[t]=n;i?(i=s^r[r[r[c^s]]],f^=r[r[f]]):i=f=1}},n.prototype.expandKey=function(n){for(var r,e=this.uint8ArrayToUint32Array_(n),l=!0,h=0;h<e.length&&l;)l=e[h]===this.key[h],h++;if(!l){if(this.key=e,r=this.keySize=e.length,4!==r&&6!==r&&8!==r)throw new Error("Invalid aes key size="+r);for(var o=this.ksRows=4*(r+6+1),i=void 0,f=void 0,s=this.keySchedule=new Uint32Array(o),a=this.invKeySchedule=new Uint32Array(o),u=this.sBox,y=this.rcon,c=this.invSubMix,p=c[0],w=c[1],b=c[2],k=c[3],v=void 0,t=void 0,i=0;i<o;i++)i<r?v=s[i]=e[i]:(t=v,i%r==0?(t=t<<8|t>>>24,t=u[t>>>24]<<24|u[t>>>16&255]<<16|u[t>>>8&255]<<8|u[255&t],t^=y[i/r|0]<<24):r>6&&i%r==4&&(t=u[t>>>24]<<24|u[t>>>16&255]<<16|u[t>>>8&255]<<8|u[255&t]),s[i]=v=(s[i-r]^t)>>>0);for(f=0;f<o;f++)i=o-f,t=3&f?s[i]:s[i-4],a[f]=f<4||i<=4?t:p[u[t>>>24]]^w[u[t>>>16&255]]^b[u[t>>>8&255]]^k[u[255&t]],a[f]=a[f]>>>0}},n.prototype.networkToHostOrderSwap=function(n){return n<<24|(65280&n)<<8|(16711680&n)>>8|n>>>24},n.prototype.decrypt=function(n,t,i,u){for(var vt=this.keySize+6,e=this.invKeySchedule,f=this.invSBox,p=this.invSubMix,w=p[0],b=p[1],k=p[2],d=p[3],g=this.uint8ArrayToUint32Array_(i),ht=g[0],ct=g[1],lt=g[2],at=g[3],v=new Int32Array(n),y=new Int32Array(v.length),nt=void 0,tt=void 0,it=void 0,rt=void 0,s=void 0,h=void 0,c=void 0,l=void 0,ut=void 0,ft=void 0,et=void 0,ot=void 0,o=void 0,st=void 0,a=this.networkToHostOrderSwap;t<v.length;){for(ut=a(v[t]),ft=a(v[t+1]),et=a(v[t+2]),ot=a(v[t+3]),s=ut^e[0],h=ot^e[1],c=et^e[2],l=ft^e[3],o=4,st=1;st<vt;st++)nt=w[s>>>24]^b[h>>16&255]^k[c>>8&255]^d[255&l]^e[o],tt=w[h>>>24]^b[c>>16&255]^k[l>>8&255]^d[255&s]^e[o+1],it=w[c>>>24]^b[l>>16&255]^k[s>>8&255]^d[255&h]^e[o+2],rt=w[l>>>24]^b[s>>16&255]^k[h>>8&255]^d[255&c]^e[o+3],s=nt,h=tt,c=it,l=rt,o+=4;nt=f[s>>>24]<<24^f[h>>16&255]<<16^f[c>>8&255]<<8^f[255&l]^e[o];tt=f[h>>>24]<<24^f[c>>16&255]<<16^f[l>>8&255]<<8^f[255&s]^e[o+1];it=f[c>>>24]<<24^f[l>>16&255]<<16^f[s>>8&255]<<8^f[255&h]^e[o+2];rt=f[l>>>24]<<24^f[s>>16&255]<<16^f[h>>8&255]<<8^f[255&c]^e[o+3];o+=3;y[t]=a(nt^ht);y[t+1]=a(rt^ct);y[t+2]=a(it^lt);y[t+3]=a(tt^at);ht=ut;ct=ft;lt=et;at=ot;t+=4}return u?r(y.buffer):y.buffer},n.prototype.destroy=function(){this.key=void 0;this.keySize=void 0;this.ksRows=void 0;this.sBox=void 0;this.invSBox=void 0;this.subMix=void 0;this.invSubMix=void 0;this.keySchedule=void 0;this.invKeySchedule=void 0;this.rcon=void 0},n}();t.a=u},function(n,t,i){"use strict";function e(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var o=i(3),u=i(23),f=i(0),r=i(9),s=function(){function n(t,i,r){e(this,n);this.observer=t;this.config=r;this.remuxer=i}return n.prototype.resetInitSegment=function(n,t,i,r){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:t,duration:r,inputTimeScale:9e4}},n.prototype.resetTimeStamp=function(){},n.probe=function(n){if(!n)return!1;for(var i=r.a.getID3Data(n,0)||[],t=i.length,e=n.length;t<e;t++)if(u.e(n,t))return f.b.log("ADTS sync word found !"),!0;return!1},n.prototype.append=function(n,t,i,e){for(var a,l=this._audioTrack,h=r.a.getID3Data(n,0)||[],v=r.a.getTimeStamp(h),y=Object(o.a)(v)?90*v:9e4*t,p=0,c=y,w=n.length,s=h.length,b=[{pts:c,dts:c,data:h}];s<w-1;)if(u.d(n,s)&&s+5<w){if(u.c(l,this.observer,n,s,l.manifestCodec),a=u.a(l,n,s,y,p),!a){f.b.log("Unable to parse AAC frame");break}s+=a.length;c=a.sample.pts;p++}else r.a.isHeader(n,s)?(h=r.a.getID3Data(n,s),b.push({pts:c,dts:c,data:h}),s+=h.length):s++;this.remuxer.remux(l,{samples:[]},{samples:b,inputTimeScale:9e4},{samples:[]},t,i,e)},n.prototype.destroy=function(){},n}();t.a=s},function(n,t,i){"use strict";function h(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var u=i(23),o=i(24),s=i(1),e=i(42),c=i(43),r=i(0),f=i(2),l={video:1,audio:2,id3:3,text:4},a=function(){function n(t,i,r,u){h(this,n);this.observer=t;this.config=r;this.typeSupported=u;this.remuxer=i;this.sampleAes=null}return n.prototype.setDecryptData=function(n){this.sampleAes=null!=n&&null!=n.key&&"SAMPLE-AES"===n.method?new c.a(this.observer,this.config,n,this.discardEPB):null},n.probe=function(t){var i=n._syncOffset(t);return!(i<0)&&(i&&r.b.warn("MPEG2-TS detected but first sync word found @ offset "+i+", junk ahead ?"),!0)},n._syncOffset=function(n){for(var i=Math.min(1e3,n.length-564),t=0;t<i;){if(71===n[t]&&71===n[t+188]&&71===n[t+376])return t;t++}return-1},n.createTrack=function(n,t){return{container:"video"===n||"audio"===n?"video/mp2t":void 0,type:n,id:l[n],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0,dropped:"video"===n?0:void 0,isAAC:"audio"===n||void 0,duration:"audio"===n?t:void 0}},n.prototype.resetInitSegment=function(t,i,r,u){this.pmtParsed=!1;this._pmtId=-1;this._avcTrack=n.createTrack("video",u);this._audioTrack=n.createTrack("audio",u);this._id3Track=n.createTrack("id3",u);this._txtTrack=n.createTrack("text",u);this.aacOverFlow=null;this.aacLastPTS=null;this.avcSample=null;this.audioCodec=i;this.videoCodec=r;this._duration=u},n.prototype.resetTimeStamp=function(){},n.prototype.append=function(t,i,u,e){var h=void 0,it=t.length,b=void 0,ft=void 0,c=void 0,o=void 0,rt=!1,d;this.contiguous=u;var et=this.pmtParsed,p=this._avcTrack,a=this._audioTrack,w=this._id3Track,g=p.pid,nt=a.pid,tt=w.pid,ot=this._pmtId,v=p.pesData,l=a.pesData,y=w.pesData,at=this._parsePAT,vt=this._parsePMT,k=this._parsePES,st=this._parseAVCPES.bind(this),ht=this._parseAACPES.bind(this),ct=this._parseMPEGPES.bind(this),lt=this._parseID3PES.bind(this),ut=n._syncOffset(t);for(it-=(it+ut)%188,h=ut;h<it;h+=188)if(71===t[h]){if(b=!!(64&t[h+1]),ft=((31&t[h+1])<<8)+t[h+2],(48&t[h+3])>>4>1){if((c=h+5+t[h+4])===h+188)continue}else c=h+4;switch(ft){case g:b&&(v&&(o=k(v))&&void 0!==o.pts&&st(o,!1),v={data:[],size:0});v&&(v.data.push(t.subarray(c,h+188)),v.size+=h+188-c);break;case nt:b&&(l&&(o=k(l))&&void 0!==o.pts&&(a.isAAC?ht(o):ct(o)),l={data:[],size:0});l&&(l.data.push(t.subarray(c,h+188)),l.size+=h+188-c);break;case tt:b&&(y&&(o=k(y))&&void 0!==o.pts&&lt(o),y={data:[],size:0});y&&(y.data.push(t.subarray(c,h+188)),y.size+=h+188-c);break;case 0:b&&(c+=t[c]+1);ot=this._pmtId=at(t,c);break;case ot:b&&(c+=t[c]+1);d=vt(t,c,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);g=d.avc;g>0&&(p.pid=g);nt=d.audio;nt>0&&(a.pid=nt,a.isAAC=d.isAAC);tt=d.id3;tt>0&&(w.pid=tt);rt&&!et&&(r.b.log("reparse from beginning"),rt=!1,h=ut-188);et=this.pmtParsed=!0;break;case 17:case 8191:break;default:rt=!0}}else this.observer.trigger(s.a.ERROR,{type:f.b.MEDIA_ERROR,details:f.a.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});v&&(o=k(v))&&void 0!==o.pts?(st(o,!0),p.pesData=null):p.pesData=v;l&&(o=k(l))&&void 0!==o.pts?(a.isAAC?ht(o):ct(o),a.pesData=null):(l&&l.size&&r.b.log("last AAC PES packet truncated,might overlap between fragments"),a.pesData=l);y&&(o=k(y))&&void 0!==o.pts?(lt(o),w.pesData=null):w.pesData=y;null==this.sampleAes?this.remuxer.remux(a,p,w,this._txtTrack,i,u,e):this.decryptAndRemux(a,p,w,this._txtTrack,i,u,e)},n.prototype.decryptAndRemux=function(n,t,i,r,u,f,e){if(n.samples&&n.isAAC){var o=this;this.sampleAes.decryptAacSamples(n.samples,0,function(){o.decryptAndRemuxAvc(n,t,i,r,u,f,e)})}else this.decryptAndRemuxAvc(n,t,i,r,u,f,e)},n.prototype.decryptAndRemuxAvc=function(n,t,i,r,u,f,e){if(t.samples){var o=this;this.sampleAes.decryptAvcSamples(t.samples,0,0,function(){o.remuxer.remux(n,t,i,r,u,f,e)})}else this.remuxer.remux(n,t,i,r,u,f,e)},n.prototype.destroy=function(){this._initPTS=this._initDTS=void 0;this._duration=0},n.prototype._parsePAT=function(n,t){return(31&n[t+10])<<8|n[t+11]},n.prototype._parsePMT=function(n,t,i,u){var o=void 0,s=void 0,h=void 0,e=void 0,f={audio:-1,avc:-1,id3:-1,isAAC:!0};for(o=(15&n[t+1])<<8|n[t+2],s=t+3+o-4,h=(15&n[t+10])<<8|n[t+11],t+=12+h;t<s;){switch(e=(31&n[t+1])<<8|n[t+2],n[t]){case 207:if(!u){r.b.log("unkown stream type:"+n[t]);break}case 15:-1===f.audio&&(f.audio=e);break;case 21:-1===f.id3&&(f.id3=e);break;case 219:if(!u){r.b.log("unkown stream type:"+n[t]);break}case 27:-1===f.avc&&(f.avc=e);break;case 3:case 4:i?-1===f.audio&&(f.audio=e,f.isAAC=!1):r.b.log("MPEG audio found, not supported in this browser for now");break;case 36:r.b.warn("HEVC stream type found, not supported for now");break;default:r.b.log("unkown stream type:"+n[t])}t+=5+((15&n[t+3])<<8|n[t+4])}return f},n.prototype._parsePES=function(n){var y=0,t=void 0,l=void 0,o=void 0,a=void 0,v=void 0,u=void 0,f=void 0,e=void 0,i=n.data,h,c,p,s;if(!n||0===n.size)return null;for(;i[0].length<19&&i.length>1;)h=new Uint8Array(i[0].length+i[1].length),h.set(i[0]),h.set(i[1],i[0].length),i[0]=h,i.splice(1,1);if(t=i[0],1===(t[0]<<16)+(t[1]<<8)+t[2]){if((o=(t[4]<<8)+t[5])&&o>n.size-6)return null;for(l=t[7],192&l&&(u=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2,u>4294967295&&(u-=8589934592),64&l?(f=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2,f>4294967295&&(f-=8589934592),u-f>54e5&&(r.b.warn(Math.round((u-f)/9e4)+"s delta between PTS and DTS, align them"),u=f)):f=u),a=t[8],e=a+9,n.size-=e,v=new Uint8Array(n.size),c=0,p=i.length;c<p;c++){if(t=i[c],s=t.byteLength,e){if(e>s){e-=s;continue}t=t.subarray(e);s-=e;e=0}v.set(t,y);y+=s}return o&&(o-=a+3),{data:v,pts:u,dts:f,len:o}}return null},n.prototype.pushAccesUnit=function(n,t){if(n.units.length&&n.frame){var i=t.samples,u=i.length;!this.config.forceKeyFrameOnDiscontinuity||!0===n.key||t.sps&&(u||this.contiguous)?(n.id=u,i.push(n)):t.dropped++}n.debug.length&&r.b.log(n.pts+"/"+n.dts+":"+n.debug)},n.prototype._parseAVCPES=function(n,t){var s=this,u=this._avcTrack,l=this._parseAVCNALu(n.data),r=void 0,i=this.avcSample,o=void 0,a=!1,f=void 0,c=this.pushAccesUnit.bind(this),h=function(n,t,i,r){return{key:n,pts:t,dts:i,units:[],debug:r}};n.data=null;i&&l.length&&!u.audFound&&(c(i,u),i=this.avcSample=h(!1,n.pts,n.dts,""));l.forEach(function(t){var k,v,b,it,g,y;switch(t.type){case 1:o=!0;i||(i=s.avcSample=h(!0,n.pts,n.dts,""));i.frame=!0;k=t.data;a&&k.length>4&&(v=new e.a(k).readSliceType(),2!==v&&4!==v&&7!==v&&9!==v||(i.key=!0));break;case 5:o=!0;i||(i=s.avcSample=h(!0,n.pts,n.dts,""));i.key=!0;i.frame=!0;break;case 6:o=!0;r=new e.a(s.discardEPB(t.data));r.readUByte();for(var d=0,p=0,nt=!1,l=0;!nt&&r.bytesAvailable>1;){d=0;do l=r.readUByte(),d+=l;while(255===l);p=0;do l=r.readUByte(),p+=l;while(255===l);if(4===d&&0!==r.bytesAvailable){if(nt=!0,181===r.readUByte()&&49===r.readUShort()&&1195456820===r.readUInt()&&3===r.readUByte()){var tt=r.readUByte(),rt=r.readUByte(),ut=31&tt,w=[tt,rt];for(f=0;f<ut;f++)w.push(r.readUByte()),w.push(r.readUByte()),w.push(r.readUByte());s._insertSampleInOrder(s._txtTrack.samples,{type:3,pts:n.pts,bytes:w})}}else if(p<r.bytesAvailable)for(f=0;f<p;f++)r.readUByte()}break;case 7:if(o=!0,a=!0,!u.sps){for(r=new e.a(t.data),b=r.readSPS(),u.width=b.width,u.height=b.height,u.pixelRatio=b.pixelRatio,u.sps=[t.data],u.duration=s._duration,it=t.data.subarray(1,4),g="avc1.",f=0;f<3;f++)y=it[f].toString(16),y.length<2&&(y="0"+y),g+=y;u.codec=g}break;case 8:o=!0;u.pps||(u.pps=[t.data]);break;case 9:o=!1;u.audFound=!0;i&&c(i,u);i=s.avcSample=h(!1,n.pts,n.dts,"");break;case 12:o=!1;break;default:o=!1;i&&(i.debug+="unknown NAL "+t.type+" ")}i&&o&&i.units.push(t)});t&&i&&(c(i,u),this.avcSample=null)},n.prototype._insertSampleInOrder=function(n,t){var r=n.length,i;if(r>0){if(t.pts>=n[r-1].pts)n.push(t);else for(i=r-1;i>=0;i--)if(t.pts<n[i].pts){n.splice(i,0,t);break}}else n.push(t)},n.prototype._getLastNalUnit=function(){var n=this.avcSample,r=void 0,u,t,i;return n&&0!==n.units.length||(u=this._avcTrack,t=u.samples,n=t[t.length-1]),n&&(i=n.units,r=i[i.length-1]),r},n.prototype._parseAVCNALu=function(n){var r=0,a=n.byteLength,e=void 0,v=void 0,p=this._avcTrack,t=p.naluState||0,y=t,o=[],s=void 0,w=void 0,u=-1,h=void 0,i,c,f,l;for(-1===t&&(u=0,h=31&n[0],t=0,r=1);r<a;)(e=n[r++],t)?1!==t?e?1===e?(u>=0?(s={data:n.subarray(u,r-t-1),type:h},o.push(s)):(i=this._getLastNalUnit(),i&&(y&&r<=4-y&&i.state&&(i.data=i.data.subarray(0,i.data.byteLength-y)),(v=r-t-1)>0)&&(c=new Uint8Array(i.data.byteLength+v),c.set(i.data,0),c.set(n.subarray(0,v),i.data.byteLength),i.data=c)),r<a?(w=31&n[r],u=r,h=w,t=0):t=-1):t=0:t=3:t=e?0:2:t=e?0:1;return(u>=0&&t>=0&&(s={data:n.subarray(u,a),type:h,state:t},o.push(s)),0===o.length)&&(f=this._getLastNalUnit(),f&&(l=new Uint8Array(f.data.byteLength+n.byteLength),l.set(f.data,0),l.set(n,f.data.byteLength),f.data=l)),p.naluState=t,o},n.prototype.discardEPB=function(n){for(var r,e=n.byteLength,i=[],t=1,u=void 0,f=void 0;t<e-2;)0===n[t]&&0===n[t+1]&&3===n[t+2]?(i.push(t+2),t+=2):t++;if(0===i.length)return n;for(u=e-i.length,f=new Uint8Array(u),r=0,t=0;t<u;r++,t++)r===i[0]&&(r++,i.shift()),f[t]=n[r];return f},n.prototype._parseAACPES=function(n){var p=this._audioTrack,i=n.data,l=n.pts,e=this.aacOverFlow,b=this.aacLastPTS,k=void 0,w=void 0,t=void 0,d=void 0,o=void 0,a,h,c,v,y;for(e&&(a=new Uint8Array(e.byteLength+i.byteLength),a.set(e,0),a.set(i,e.byteLength),i=a),t=0,o=i.length;t<o-1&&!u.d(i,t);t++);if(!t||(h=void 0,c=void 0,t<o-1?(h="AAC PES did not start with ADTS header,offset:"+t,c=!1):(h="no ADTS header found in AAC PES",c=!0),r.b.warn("parsing error:"+h),this.observer.trigger(s.a.ERROR,{type:f.b.MEDIA_ERROR,details:f.a.FRAG_PARSING_ERROR,fatal:c,reason:h}),!c)){for((u.c(p,this.observer,i,t,this.audioCodec),w=0,k=u.b(p.samplerate),e&&b)&&(v=b+k,Math.abs(v-l)>1&&(r.b.log("AAC: align PTS for overlapping frames by "+Math.round((v-l)/90)),l=v));t<o;)if(u.d(i,t)&&t+5<o){if(y=u.a(p,i,t,l,w),!y)break;t+=y.length;d=y.sample.pts;w++}else t++;e=t<o?i.subarray(t,o):null;this.aacOverFlow=e;this.aacLastPTS=d}},n.prototype._parseMPEGPES=function(n){for(var r,i=n.data,f=i.length,u=0,t=0,e=n.pts;t<f;)if(o.a.isHeader(i,t)){if(r=o.a.appendFrame(this._audioTrack,i,t,e,u),!r)break;t+=r.length;u++}else t++},n.prototype._parseID3PES=function(n){this._id3Track.samples.push(n)},n}();t.a=a},function(n,t,i){"use strict";function r(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var u=i(0),f=function(){function n(t){r(this,n);this.data=t;this.bytesAvailable=t.byteLength;this.word=0;this.bitsAvailable=0}return n.prototype.loadWord=function(){var t=this.data,i=this.bytesAvailable,r=t.byteLength-i,u=new Uint8Array(4),n=Math.min(4,i);if(0===n)throw new Error("no bytes available");u.set(t.subarray(r,r+n));this.word=new DataView(u.buffer).getUint32(0);this.bitsAvailable=8*n;this.bytesAvailable-=n},n.prototype.skipBits=function(n){var t=void 0;this.bitsAvailable>n?(this.word<<=n,this.bitsAvailable-=n):(n-=this.bitsAvailable,t=n>>3,n-=t>>3,this.bytesAvailable-=t,this.loadWord(),this.word<<=n,this.bitsAvailable-=n)},n.prototype.readBits=function(n){var t=Math.min(this.bitsAvailable,n),i=this.word>>>32-t;return n>32&&u.b.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0?this.word<<=t:this.bytesAvailable>0&&this.loadWord(),t=n-t,t>0&&this.bitsAvailable?i<<t|this.readBits(t):i},n.prototype.skipLZ=function(){for(var n=void 0,n=0;n<this.bitsAvailable;++n)if(0!=(this.word&2147483648>>>n))return this.word<<=n,this.bitsAvailable-=n,n;return this.loadWord(),n+this.skipLZ()},n.prototype.skipUEG=function(){this.skipBits(1+this.skipLZ())},n.prototype.skipEG=function(){this.skipBits(1+this.skipLZ())},n.prototype.readUEG=function(){var n=this.skipLZ();return this.readBits(n+1)-1},n.prototype.readEG=function(){var n=this.readUEG();return 1&n?1+n>>>1:-1*(n>>>1)},n.prototype.readBoolean=function(){return 1===this.readBits(1)},n.prototype.readUByte=function(){return this.readBits(8)},n.prototype.readUShort=function(){return this.readBits(16)},n.prototype.readUInt=function(){return this.readBits(32)},n.prototype.skipScalingList=function(n){for(var i=8,t=8,r=void 0,u=void 0,r=0;r<n;r++)0!==t&&(u=this.readEG(),t=(i+u+256)%256),i=0===t?i:t},n.prototype.readSPS=function(){var a=0,v=0,y=0,p=0,t=void 0,w=void 0,b=void 0,k=void 0,s=void 0,d=void 0,u=void 0,r=this.readUByte.bind(this),g=this.readBits.bind(this),i=this.readUEG.bind(this),e=this.readBoolean.bind(this),f=this.skipBits.bind(this),h=this.skipEG.bind(this),o=this.skipUEG.bind(this),nt=this.skipScalingList.bind(this),c,l,n;if((r(),t=r(),g(5),f(3),r(),o(),100===t||110===t||122===t||244===t||44===t||83===t||86===t||118===t||128===t)&&(c=i(),3===c&&f(1),o(),o(),f(1),e()))for(d=3!==c?8:12,u=0;u<d;u++)e()&&nt(u<6?16:64);if(o(),l=i(),0===l)i();else if(1===l)for(f(1),h(),h(),w=i(),u=0;u<w;u++)h();if(o(),f(1),b=i(),k=i(),s=g(1),0===s&&f(1),f(1),e()&&(a=i(),v=i(),y=i(),p=i()),n=[1,1],e()&&e())switch(r()){case 1:n=[1,1];break;case 2:n=[12,11];break;case 3:n=[10,11];break;case 4:n=[16,11];break;case 5:n=[40,33];break;case 6:n=[24,11];break;case 7:n=[20,11];break;case 8:n=[32,11];break;case 9:n=[80,33];break;case 10:n=[18,11];break;case 11:n=[15,11];break;case 12:n=[64,33];break;case 13:n=[160,99];break;case 14:n=[4,3];break;case 15:n=[3,2];break;case 16:n=[2,1];break;case 255:n=[r()<<8|r(),r()<<8|r()]}return{width:Math.ceil(16*(b+1)-2*a-2*v),height:(2-s)*(k+1)*16-(s?2:4)*(y+p),pixelRatio:n}},n.prototype.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},n}();t.a=f},function(n,t,i){"use strict";function r(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var u=i(14),f=function(){function n(t,i,f,e){r(this,n);this.decryptdata=f;this.discardEPB=e;this.decrypter=new u.a(t,i,{removePKCS7Padding:!1})}return n.prototype.decryptBuffer=function(n,t){this.decrypter.decrypt(n,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,t)},n.prototype.decryptAacSample=function(n,t,i,r){var u=n[t].unit,f=u.subarray(16,u.length-u.length%16),e=f.buffer.slice(f.byteOffset,f.byteOffset+f.length),o=this;this.decryptBuffer(e,function(f){f=new Uint8Array(f);u.set(f,16);r||o.decryptAacSamples(n,t+1,i)})},n.prototype.decryptAacSamples=function(n,t,i){for(;;t++){if(t>=n.length)return void i();if(!(n[t].unit.length<32)){var r=this.decrypter.isSync();if(this.decryptAacSample(n,t,i,r),!r)return}}},n.prototype.getAvcEncryptedData=function(n){for(var u=16*Math.floor((n.length-48)/160)+16,i=new Int8Array(u),r=0,t=32;t<=n.length-16;t+=160,r+=16)i.set(n.subarray(t,t+16),r);return i},n.prototype.getAvcDecryptedUnit=function(n,t){t=new Uint8Array(t);for(var i=0,r=32;r<=n.length-16;r+=160,i+=16)n.set(t.subarray(i,i+16),r);return n},n.prototype.decryptAvcSample=function(n,t,i,r,u,f){var e=this.discardEPB(u.data),s=this.getAvcEncryptedData(e),o=this;this.decryptBuffer(s.buffer,function(s){u.data=o.getAvcDecryptedUnit(e,s);f||o.decryptAvcSamples(n,t,i+1,r)})},n.prototype.decryptAvcSamples=function(n,t,i,r){for(var f,u,e;;t++,i=0){if(t>=n.length)return void r();for(f=n[t].units;!(i>=f.length);i++)if(u=f[i],!(u.length<=48||1!==u.type&&5!==u.type)&&(e=this.decrypter.isSync(),this.decryptAvcSample(n,t,i,r,u,e),!e))return}},n}();t.a=f},function(n,t,i){"use strict";function f(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var r=i(9),e=i(0),u=i(24),o=function(){function n(t,i,r){f(this,n);this.observer=t;this.config=r;this.remuxer=i}return n.prototype.resetInitSegment=function(n,t,i,r){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:t,duration:r,inputTimeScale:9e4}},n.prototype.resetTimeStamp=function(){},n.probe=function(n){var t=void 0,f=void 0,i=r.a.getID3Data(n,0);if(i&&void 0!==r.a.getTimeStamp(i))for(t=i.length,f=Math.min(n.length-1,t+100);t<f;t++)if(u.a.probe(n,t))return e.b.log("MPEG Audio sync word found !"),!0;return!1},n.prototype.append=function(n,t,i,f){for(var s,o=r.a.getID3Data(n,0),l=r.a.getTimeStamp(o),h=l?90*l:9e4*t,e=o.length,p=n.length,a=0,c=0,v=this._audioTrack,y=[{pts:h,dts:h,data:o}];e<p;)if(u.a.isHeader(n,e)){if(s=u.a.appendFrame(v,n,e,h,a),!s)break;e+=s.length;c=s.sample.pts;a++}else r.a.isHeader(n,e)?(o=r.a.getID3Data(n,e),y.push({pts:c,dts:c,data:o}),e+=o.length):e++;this.remuxer.remux(v,{samples:[]},{samples:y,inputTimeScale:9e4},{samples:[]},t,i,f)},n.prototype.destroy=function(){},n}();t.a=o},function(n,t,i){"use strict";function s(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var o=i(46),f=i(47),u=i(1),e=i(2),r=i(0),h=function(){function n(t,i,r,u){s(this,n);this.observer=t;this.config=i;this.typeSupported=r;var f=navigator.userAgent;this.isSafari=u&&u.indexOf("Apple")>-1&&f&&!f.match("CriOS");this.ISGenerated=!1}return n.prototype.destroy=function(){},n.prototype.resetTimeStamp=function(n){this._initPTS=this._initDTS=n},n.prototype.resetInitSegment=function(){this.ISGenerated=!1},n.prototype.remux=function(n,t,i,f,e,o,s){var v,h,y,p;if(this.ISGenerated||this.generateIS(n,t,e),this.ISGenerated){var w=n.samples.length,c=t.samples.length,l=e,a=e;w&&c&&(v=(n.samples[0].dts-t.samples[0].dts)/t.inputTimeScale,l+=Math.max(0,v),a+=Math.max(0,-v));w?(n.timescale||(r.b.warn("regenerate InitSegment as audio detected"),this.generateIS(n,t,e)),h=this.remuxAudio(n,l,o,s),c&&(y=void 0,h&&(y=h.endPTS-h.startPTS),t.timescale||(r.b.warn("regenerate InitSegment as video detected"),this.generateIS(n,t,e)),this.remuxVideo(t,a,o,y,s))):c&&(p=this.remuxVideo(t,a,o,0,s),p&&n.codec&&this.remuxEmptyAudio(n,l,o,p))}i.samples.length&&this.remuxID3(i,e);f.samples.length&&this.remuxText(f,e);this.observer.trigger(u.a.FRAG_PARSED)},n.prototype.generateIS=function(n,t,i){var y=this.observer,p=n.samples,a=t.samples,v=this.typeSupported,w="audio/mp4",h={},b={tracks:h},c=void 0===this._initPTS,o=void 0,s=void 0,l;(c&&(o=s=1/0),n.config&&p.length&&(n.timescale=n.samplerate,r.b.log("audio sampling rate : "+n.samplerate),n.isAAC||(v.mpeg?(w="audio/mpeg",n.codec=""):v.mp3&&(n.codec="mp3")),h.audio={container:w,codec:n.codec,initSegment:!n.isAAC&&v.mpeg?new Uint8Array:f.a.initSegment([n]),metadata:{channelCount:n.channelCount}},c&&(o=s=p[0].pts-n.inputTimeScale*i)),t.sps&&t.pps&&a.length)&&(l=t.inputTimeScale,t.timescale=l,h.video={container:"video/mp4",codec:t.codec,initSegment:f.a.initSegment([t]),metadata:{width:t.width,height:t.height}},c&&(o=Math.min(o,a[0].pts-l*i),s=Math.min(s,a[0].dts-l*i),this.observer.trigger(u.a.INIT_PTS_FOUND,{initPTS:o})));Object.keys(h).length?(y.trigger(u.a.FRAG_PARSING_INIT_SEGMENT,b),this.ISGenerated=!0,c&&(this._initPTS=o,this._initDTS=s)):y.trigger(u.a.ERROR,{type:e.b.MEDIA_ERROR,details:e.a.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},n.prototype.remuxVideo=function(n,t,i,o,s){var rt=8,v=n.timescale,c=void 0,g=void 0,ni=void 0,b=void 0,l=void 0,ti=void 0,ut=void 0,h=n.samples,nt=[],ft=h.length,ii=this._PTSNormalize,ct=this._initDTS,y=this.nextAvcDts,et=this.isSafari,ot,st,d,w,tt,vt,p,bt,it,ci,dt,gt;if(0!==ft){if(et&&(i|=h.length&&y&&(s&&Math.abs(t-y/v)<.1||Math.abs(h[0].pts-y-ct)<v/5)),i||(y=t*v),h.forEach(function(n){n.pts=ii(n.pts-ct,y);n.dts=ii(n.dts-ct,y)}),h.sort(function(n,t){var i=n.dts-t.dts,r=n.pts-t.pts;return i||r||n.id-t.id}),ot=h.reduce(function(n,t){return Math.max(Math.min(n,t.pts-t.dts),-18e3)},0),ot<0)for(r.b.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(ot/90)+" ms to overcome this issue"),st=0;st<h.length;st++)h[st].dts+=ot;d=h[0];l=Math.max(d.dts,0);b=Math.max(d.pts,0);w=Math.round((l-y)/90);i&&w&&(w>1?r.b.log("AVC:"+w+" ms hole between fragments detected,filling it"):w<-1&&r.b.log("AVC:"+-w+" ms overlapping between fragments detected"),l=y,h[0].dts=l,b=Math.max(b-w,y),h[0].pts=b,r.b.log("Video/PTS/DTS adjusted: "+Math.round(b/90)+"/"+Math.round(l/90)+",delta:"+w+" ms"));l;d=h[h.length-1];ut=Math.max(d.dts,0);ti=Math.max(d.pts,0,ut);et&&(c=Math.round((ut-l)/(h.length-1)));for(var ri=0,ui=0,ht=0;ht<ft;ht++){for(var k=h[ht],fi=k.units,ei=fi.length,lt=0,at=0;at<ei;at++)lt+=fi[at].data.length;ui+=lt;ri+=ei;k.length=lt;k.dts=et?l+ht*c:Math.max(k.dts,l);k.pts=Math.max(k.pts,k.dts)}tt=ui+4*ri+8;try{g=new Uint8Array(tt)}catch(n){return void this.observer.trigger(u.a.ERROR,{type:e.b.MUX_ERROR,details:e.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:tt,reason:"fail allocating video mdat "+tt})}for(vt=new DataView(g.buffer),vt.setUint32(0,tt),g.set(f.a.types.mdat,4),p=0;p<ft;p++){for(var a=h[p],oi=a.units,si=0,yt=void 0,pt=0,li=oi.length;pt<li;pt++){var hi=oi[pt],ai=hi.data,wt=hi.data.byteLength;vt.setUint32(rt,wt);rt+=4;g.set(ai,rt);rt+=wt;si+=4+wt}if(et)yt=Math.max(0,c*Math.round((a.pts-a.dts)/c));else{if(p<ft-1)c=h[p+1].dts-a.dts;else if(bt=this.config,it=a.dts-h[p>0?p-1:p].dts,bt.stretchShortVideoTrack){var vi=bt.maxBufferHole,yi=Math.floor(vi*v),kt=(o?b+o*v:this.nextAudioPts)-a.pts;kt>yi?(c=kt-it,c<0&&(c=it),r.b.log("It is approximately "+kt/90+" ms to the next segment; using duration "+c/90+" ms for the last video frame.")):c=it}else c=it;yt=Math.round(a.pts-a.dts)}nt.push({size:si,duration:c,cts:yt,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:a.key?2:1,isNonSync:a.key?0:1}})}return this.nextAvcDts=ut+c,ci=n.dropped,(n.len=0,n.nbNalu=0,n.dropped=0,nt.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1)&&(dt=nt[0].flags,dt.dependsOn=2,dt.isNonSync=0),n.samples=nt,ni=f.a.moof(n.sequenceNumber++,l,n),n.samples=[],gt={data1:ni,data2:g,startPTS:b/v,endPTS:(ti+c)/v,startDTS:l/v,endDTS:this.nextAvcDts/v,type:"video",hasAudio:!1,hasVideo:!0,nb:nt.length,dropped:ci},this.observer.trigger(u.a.FRAG_PARSING_DATA,gt),gt}},n.prototype.remuxAudio=function(n,t,i,s){var c=n.inputTimeScale,oi=n.timescale,ot=c/oi,si=n.isAAC?1024:1152,y=si*ot,hi=this._PTSNormalize,dt=this._initDTS,st=!n.isAAC&&this.typeSupported.mpeg,tt=void 0,g=void 0,h=void 0,nt=void 0,gt=void 0,at=void 0,ht=void 0,l=n.samples,it=[],a=this.nextAudioPts,b,p,ti,vt,yt,pt,wt,ct,ii,d,ut,ft,bt,kt,lt,et;if(i|=l.length&&a&&(s&&Math.abs(t-a/c)<.1||Math.abs(l[0].pts-a-dt)<20*y),l.forEach(function(n){n.pts=n.dts=hi(n.pts-dt,t*c)}),l=l.filter(function(n){return n.pts>=0}),0!==l.length){if(i||(a=s?t*c:l[0].pts),n.isAAC)for(var ni=this.config.maxAudioFramesDrift,w=0,v=a;w<l.length;)if(p=l[w],ti=p.pts,b=ti-v,vt=Math.abs(1e3*b/c),b<=-ni*y)r.b.warn("Dropping 1 audio frame @ "+(v/c).toFixed(3)+"s due to "+Math.round(vt)+" ms overlap."),l.splice(w,1),n.len-=p.unit.length;else if(b>=ni*y&&vt<1e4&&v){for(yt=Math.round(b/y),r.b.warn("Injecting "+yt+" audio frame @ "+(v/c).toFixed(3)+"s due to "+Math.round(1e3*b/c)+" ms gap."),pt=0;pt<yt;pt++)wt=Math.max(v,0),h=o.a.getSilentFrame(n.manifestCodec||n.codec,n.channelCount),h||(r.b.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),h=p.unit.subarray()),l.splice(w,0,{unit:h,pts:wt,dts:wt}),n.len+=h.length,v+=y,w++;p.pts=p.dts=v;v+=y;w++}else Math.abs(b),p.pts=p.dts=v,v+=y,w++;for(ct=0,ii=l.length;ct<ii;ct++){var ri=l[ct],rt=ri.unit,k=ri.pts;if(void 0!==ht)g.duration=Math.round((k-ht)/ot);else{if(d=Math.round(1e3*(k-a)/c),ut=0,i&&n.isAAC&&d){if(d>0&&d<1e4)ut=Math.round((k-a)/y),r.b.log(d+" ms hole between AAC samples detected,filling it"),ut>0&&(h=o.a.getSilentFrame(n.manifestCodec||n.codec,n.channelCount),h||(h=rt.subarray()),n.len+=ut*h.length);else if(d<-12){r.b.log("drop overlapping AAC sample, expected/parsed/delta:"+(a/c).toFixed(3)+"s/"+(k/c).toFixed(3)+"s/"+-d+"ms");n.len-=rt.byteLength;continue}k=a}if(at=k,!(n.len>0))return;ft=st?n.len:n.len+8;tt=st?0:8;try{nt=new Uint8Array(ft)}catch(n){return void this.observer.trigger(u.a.ERROR,{type:e.b.MUX_ERROR,details:e.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:ft,reason:"fail allocating audio mdat "+ft})}for(st||(new DataView(nt.buffer).setUint32(0,ft),nt.set(f.a.types.mdat,4)),bt=0;bt<ut;bt++)h=o.a.getSilentFrame(n.manifestCodec||n.codec,n.channelCount),h||(r.b.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),h=rt.subarray()),nt.set(h,tt),tt+=h.byteLength,g={size:h.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},it.push(g)}nt.set(rt,tt);kt=rt.byteLength;tt+=kt;g={size:kt,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}};it.push(g);ht=k}if(lt=0,et=it.length,et>=2&&(lt=it[et-2].duration,g.duration=lt),et){this.nextAudioPts=a=ht+ot*lt;n.len=0;n.samples=it;gt=st?new Uint8Array:f.a.moof(n.sequenceNumber++,at/ot,n);n.samples=[];var ui=at/c,fi=a/c,ei={data1:gt,data2:nt,startPTS:ui,endPTS:fi,startDTS:ui,endDTS:fi,type:"audio",hasAudio:!0,hasVideo:!1,nb:et};return this.observer.trigger(u.a.FRAG_PARSING_DATA,ei),ei}return null}},n.prototype.remuxEmptyAudio=function(n,t,i,u){var f=n.inputTimeScale,y=n.samplerate?n.samplerate:f,p=f/y,l=this.nextAudioPts,a=(void 0!==l?l:u.startDTS*f)+this._initDTS,w=u.endDTS*f+this._initDTS,v=1024*p,b=Math.ceil((w-a)/v),s=o.a.getSilentFrame(n.manifestCodec||n.codec,n.channelCount),h,e,c;if(r.b.warn("remux empty Audio"),!s)return void r.b.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!");for(h=[],e=0;e<b;e++)c=a+e*v,h.push({unit:s,pts:c,dts:c}),n.len+=s.length;n.samples=h;this.remuxAudio(n,t,i)},n.prototype.remuxID3=function(n,t){var f=n.samples.length,i=void 0,e=n.inputTimeScale,o=this._initPTS,s=this._initDTS,r;if(f){for(r=0;r<f;r++)i=n.samples[r],i.pts=(i.pts-o)/e,i.dts=(i.dts-s)/e;this.observer.trigger(u.a.FRAG_PARSING_METADATA,{samples:n.samples})}n.samples=[];t=t},n.prototype.remuxText=function(n,t){var i;n.samples.sort(function(n,t){return n.pts-t.pts});var f=n.samples.length,r=void 0,e=n.inputTimeScale,o=this._initPTS;if(f){for(i=0;i<f;i++)r=n.samples[i],r.pts=(r.pts-o)/e;this.observer.trigger(u.a.FRAG_PARSING_USERDATA,{samples:n.samples})}n.samples=[];t=t},n.prototype._PTSNormalize=function(n,t){var i=void 0;if(void 0===t)return n;for(i=t<n?-8589934592:8589934592;Math.abs(n-t)>4294967296;)n+=i;return n},n}();t.a=h},function(n,t){"use strict";function i(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var r=function(){function n(){i(this,n)}return n.getSilentFrame=function(n,t){switch(n){case"mp4a.40.2":if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},n}();t.a=r},function(n,t){"use strict";function r(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var i=Math.pow(2,32)-1,u=function(){function n(){r(this,n)}return n.init=function(){var t,i,r,u,f;n.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};t=void 0;for(t in n.types)n.types.hasOwnProperty(t)&&(n.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);i=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]);r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);n.HDLR_TYPES={video:i,audio:r};u=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]);f=new Uint8Array([0,0,0,0,0,0,0,0]);n.STTS=n.STSC=n.STCO=f;n.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]);n.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]);n.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]);n.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var e=new Uint8Array([105,115,111,109]),o=new Uint8Array([97,118,99,49]),s=new Uint8Array([0,0,0,1]);n.FTYP=n.box(n.types.ftyp,e,s,e,o);n.DINF=n.box(n.types.dinf,n.box(n.types.dref,u))},n.box=function(n){for(var u=Array.prototype.slice.call(arguments,1),t=8,i=u.length,f=i,r=void 0;i--;)t+=u[i].byteLength;for(r=new Uint8Array(t),r[0]=t>>24&255,r[1]=t>>16&255,r[2]=t>>8&255,r[3]=255&t,r.set(n,4),i=0,t=8;i<f;i++)r.set(u[i],t),t+=u[i].byteLength;return r},n.hdlr=function(t){return n.box(n.types.hdlr,n.HDLR_TYPES[t])},n.mdat=function(t){return n.box(n.types.mdat,t)},n.mdhd=function(t,r){r*=t;var u=Math.floor(r/(i+1)),f=Math.floor(r%(i+1));return n.box(n.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,u>>24,u>>16&255,u>>8&255,255&u,f>>24,f>>16&255,f>>8&255,255&f,85,196,0,0]))},n.mdia=function(t){return n.box(n.types.mdia,n.mdhd(t.timescale,t.duration),n.hdlr(t.type),n.minf(t))},n.mfhd=function(t){return n.box(n.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))},n.minf=function(t){return"audio"===t.type?n.box(n.types.minf,n.box(n.types.smhd,n.SMHD),n.DINF,n.stbl(t)):n.box(n.types.minf,n.box(n.types.vmhd,n.VMHD),n.DINF,n.stbl(t))},n.moof=function(t,i,r){return n.box(n.types.moof,n.mfhd(t),n.traf(r,i))},n.moov=function(t){for(var i=t.length,r=[];i--;)r[i]=n.trak(t[i]);return n.box.apply(null,[n.types.moov,n.mvhd(t[0].timescale,t[0].duration)].concat(r).concat(n.mvex(t)))},n.mvex=function(t){for(var i=t.length,r=[];i--;)r[i]=n.trex(t[i]);return n.box.apply(null,[n.types.mvex].concat(r))},n.mvhd=function(t,r){r*=t;var u=Math.floor(r/(i+1)),f=Math.floor(r%(i+1)),e=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,u>>24,u>>16&255,u>>8&255,255&u,f>>24,f>>16&255,f>>8&255,255&f,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return n.box(n.types.mvhd,e)},n.sdtp=function(t){for(var u=t.samples||[],f=new Uint8Array(4+u.length),r=void 0,i=void 0,i=0;i<u.length;i++)r=u[i].flags,f[i+4]=r.dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return n.box(n.types.sdtp,f)},n.stbl=function(t){return n.box(n.types.stbl,n.stsd(t),n.box(n.types.stts,n.STTS),n.box(n.types.stsc,n.STSC),n.box(n.types.stsz,n.STSZ),n.box(n.types.stco,n.STCO))},n.avc1=function(t){for(var i=[],e=[],r=void 0,u=void 0,f=void 0,r=0;r<t.sps.length;r++)u=t.sps[r],f=u.byteLength,i.push(f>>>8&255),i.push(255&f),i=i.concat(Array.prototype.slice.call(u));for(r=0;r<t.pps.length;r++)u=t.pps[r],f=u.byteLength,e.push(f>>>8&255),e.push(255&f),e=e.concat(Array.prototype.slice.call(u));var l=n.box(n.types.avcC,new Uint8Array([1,i[3],i[4],i[5],255,224|t.sps.length].concat(i).concat([t.pps.length]).concat(e))),h=t.width,c=t.height,o=t.pixelRatio[0],s=t.pixelRatio[1];return n.box(n.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,h>>8&255,255&h,c>>8&255,255&c,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),l,n.box(n.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),n.box(n.types.pasp,new Uint8Array([o>>24,o>>16&255,o>>8&255,255&o,s>>24,s>>16&255,s>>8&255,255&s])))},n.esds=function(n){var t=n.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(n.config).concat([6,1,2]))},n.mp4a=function(t){var i=t.samplerate;return n.box(n.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,i>>8&255,255&i,0,0]),n.box(n.types.esds,n.esds(t)))},n.mp3=function(t){var i=t.samplerate;return n.box(n.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,i>>8&255,255&i,0,0]))},n.stsd=function(t){return"audio"===t.type?t.isAAC||"mp3"!==t.codec?n.box(n.types.stsd,n.STSD,n.mp4a(t)):n.box(n.types.stsd,n.STSD,n.mp3(t)):n.box(n.types.stsd,n.STSD,n.avc1(t))},n.tkhd=function(t){var r=t.id,e=t.duration*t.timescale,o=t.width,s=t.height,u=Math.floor(e/(i+1)),f=Math.floor(e%(i+1));return n.box(n.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,r>>24&255,r>>16&255,r>>8&255,255&r,0,0,0,0,u>>24,u>>16&255,u>>8&255,255&u,f>>24,f>>16&255,f>>8&255,255&f,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,o>>8&255,255&o,0,0,s>>8&255,255&s,0,0]))},n.traf=function(t,r){var o=n.sdtp(t),u=t.id,f=Math.floor(r/(i+1)),e=Math.floor(r%(i+1));return n.box(n.types.traf,n.box(n.types.tfhd,new Uint8Array([0,0,0,0,u>>24,u>>16&255,u>>8&255,255&u])),n.box(n.types.tfdt,new Uint8Array([1,0,0,0,f>>24,f>>16&255,f>>8&255,255&f,e>>24,e>>16&255,e>>8&255,255&e])),n.trun(t,o.length+16+20+8+16+8+8),o)},n.trak=function(t){return t.duration=t.duration||4294967295,n.box(n.types.trak,n.tkhd(t),n.mdia(t))},n.trex=function(t){var i=t.id;return n.box(n.types.trex,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},n.trun=function(t,i){var l=t.samples||[],u=l.length,a=12+16*u,c=new Uint8Array(a),f=void 0,e=void 0,o=void 0,s=void 0,r=void 0,h=void 0;for(i+=8+a,c.set([0,0,15,1,u>>>24&255,u>>>16&255,u>>>8&255,255&u,i>>>24&255,i>>>16&255,i>>>8&255,255&i],0),f=0;f<u;f++)e=l[f],o=e.duration,s=e.size,r=e.flags,h=e.cts,c.set([o>>>24&255,o>>>16&255,o>>>8&255,255&o,s>>>24&255,s>>>16&255,s>>>8&255,255&s,r.isLeading<<2|r.dependsOn,r.isDependedOn<<6|r.hasRedundancy<<4|r.paddingValue<<1|r.isNonSync,61440&r.degradPrio,15&r.degradPrio,h>>>24&255,h>>>16&255,h>>>8&255,255&h],12+16*f);return n.box(n.types.trun,c)},n.initSegment=function(t){n.types||n.init();var r=n.moov(t),i=void 0;return i=new Uint8Array(n.FTYP.byteLength+r.byteLength),i.set(n.FTYP),i.set(r,n.FTYP.byteLength),i},n}();t.a=u},function(n,t,i){"use strict";function u(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var r=i(1),f=function(){function n(t){u(this,n);this.observer=t}return n.prototype.destroy=function(){},n.prototype.resetTimeStamp=function(){},n.prototype.resetInitSegment=function(){},n.prototype.remux=function(n,t,i,u,f,e,o,s){var c=this.observer,h="";n&&(h+="audio");t&&(h+="video");c.trigger(r.a.FRAG_PARSING_DATA,{data1:s,startPTS:f,startDTS:f,type:h,hasAudio:!!n,hasVideo:!!t,nb:1,dropped:0});c.trigger(r.a.FRAG_PARSED)},n}();t.a=f},function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=i(22),r=i(1),f=i(0),e=i(13),o=i.n(e),s=function(n){var t=new o.a,i;t.trigger=function(n){for(var r=arguments.length,u=Array(r>1?r-1:0),i=1;i<r;i++)u[i-1]=arguments[i];t.emit.apply(t,[n,n].concat(u))};t.off=function(n){for(var r=arguments.length,u=Array(r>1?r-1:0),i=1;i<r;i++)u[i-1]=arguments[i];t.removeListener.apply(t,[n].concat(u))};i=function(t,i){n.postMessage({event:t,data:i})};n.addEventListener("message",function(r){var e=r.data,o;switch(e.cmd){case"init":o=JSON.parse(e.config);n.demuxer=new u.a(t,e.typeSupported,o,e.vendor);try{Object(f.a)(!0===o.debug)}catch(n){console.warn("demuxerWorker: unable to enable logs")}i("init",null);break;case"demux":n.demuxer.push(e.data,e.decryptdata,e.initSegment,e.audioCodec,e.videoCodec,e.timeOffset,e.discontinuity,e.trackSwitch,e.contiguous,e.duration,e.accurateTimeOffset,e.defaultInitPTS)}});t.on(r.a.FRAG_DECRYPTED,i);t.on(r.a.FRAG_PARSING_INIT_SEGMENT,i);t.on(r.a.FRAG_PARSED,i);t.on(r.a.ERROR,i);t.on(r.a.FRAG_PARSING_METADATA,i);t.on(r.a.FRAG_PARSING_USERDATA,i);t.on(r.a.INIT_PTS_FOUND,i);t.on(r.a.FRAG_PARSING_DATA,function(t,i){var r=[],u={event:t,data:i};i.data1&&(u.data1=i.data1.buffer,r.push(i.data1.buffer),delete i.data1);i.data2&&(u.data2=i.data2.buffer,r.push(i.data2.buffer),delete i.data2);n.postMessage(u,r)})};t.default=s},function(n,t,i){"use strict";function u(n,t,i){var r,u;if(!Array.isArray(n)||!n.length||!Object(o.a)(t)||t<n[0].programDateTime||t>=n[n.length-1].endProgramDateTime)return null;for(i=i||0,r=0;r<n.length;++r)if(u=n[r],e(t,i,u))return u;return null}function f(n,t){var u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=n?t[n.sn-t[0].sn+1]:null;return i&&!r(u,f,i)?i:s.a.search(t,r.bind(null,u,f))}function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments[2],i=Math.min(r,n.duration+(n.deltaPTS?n.deltaPTS:0));return n.start+n.duration-i<=t?1:n.start-i>t&&n.start?-1:0}function e(n,t,i){var r=1e3*Math.min(t,i.duration+(i.deltaPTS?i.deltaPTS:0));return i.endProgramDateTime-r>n}t.a=u;t.b=f;var o=i(3),s=i(7)},function(n,t,i){"use strict";function o(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var e=i(8),r=i(2),f=i(1),u=i(0),s=function(){function n(t,i,r,u){o(this,n);this.config=t;this.media=i;this.fragmentTracker=r;this.hls=u;this.stallReported=!1}return n.prototype.poll=function(n){var s=this.config,t=this.media,i=t.currentTime,r=window.performance.now(),f,o;if(i!==n)return this.stallReported&&(u.b.warn("playback not stuck anymore @"+i+", after "+Math.round(r-this.stalled)+"ms"),this.stallReported=!1),this.stalled=null,void(this.nudgeRetry=0);if(!(t.ended||!t.buffered.length||t.readyState>2||t.seeking&&e.a.isBuffered(t,i))){if(f=r-this.stalled,o=e.a.bufferInfo(t,i,s.maxBufferHole),!this.stalled)return void(this.stalled=r);f>=1e3&&this._reportStall(o.len);this._tryFixBufferStall(o,f)}},n.prototype._tryFixBufferStall=function(n,t){var r=this.config,u=this.fragmentTracker,f=this.media,e=f.currentTime,i=u.getPartialFragment(e);i&&this._trySkipBufferHole(i);n.len>.5&&t>1e3*r.highBufferWatchdogPeriod&&(this.stalled=null,this._tryNudgeBuffer())},n.prototype._reportStall=function(n){var t=this.hls,i=this.media;this.stallReported||(this.stallReported=!0,u.b.warn("Playback stalling at @"+i.currentTime+" due to low buffer"),t.trigger(f.a.ERROR,{type:r.b.MEDIA_ERROR,details:r.a.BUFFER_STALLED_ERROR,fatal:!1,buffer:n}))},n.prototype._trySkipBufferHole=function(n){for(var o,h=this.hls,t=this.media,i=t.currentTime,s=0,e=0;e<t.buffered.length;e++){if(o=t.buffered.start(e),i>=s&&i<o)return t.currentTime=Math.max(o,t.currentTime+.1),u.b.warn("skipping hole, adjusting currentTime from "+i+" to "+t.currentTime),this.stalled=null,void h.trigger(f.a.ERROR,{type:r.b.MEDIA_ERROR,details:r.a.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+i+" to "+t.currentTime,frag:n});s=t.buffered.end(e)}},n.prototype._tryNudgeBuffer=function(){var n=this.config,o=this.hls,s=this.media,t=s.currentTime,i=(this.nudgeRetry||0)+1,e;(this.nudgeRetry=i,i<n.nudgeMaxRetry)?(e=t+i*n.nudgeOffset,u.b.log("adjust currentTime from "+t+" to "+e),s.currentTime=e,o.trigger(f.a.ERROR,{type:r.b.MEDIA_ERROR,details:r.a.BUFFER_NUDGE_ON_STALL,fatal:!1})):(u.b.error("still stuck in high buffer @"+t+" after "+n.nudgeMaxRetry+", raise fatal error"),o.trigger(f.a.ERROR,{type:r.b.MEDIA_ERROR,details:r.a.BUFFER_STALLED_ERROR,fatal:!0}))},n}();t.a=s},function(n,t,i){"use strict";function s(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function h(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t}function c(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var u=i(1),l=i(4),f=i(0),r=i(2),e=i(20),o=i(16),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},v=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),y=window,p=y.performance,w=function(n){function t(i){s(this,t);var r=h(this,n.call(this,i,u.a.MANIFEST_LOADED,u.a.LEVEL_LOADED,u.a.AUDIO_TRACK_SWITCHED,u.a.FRAG_LOADED,u.a.ERROR));return r.canload=!1,r.currentLevelIndex=null,r.manualLevelIndex=-1,r.timer=null,r}return c(t,n),t.prototype.onHandlerDestroying=function(){this.clearTimer();this.manualLevelIndex=-1},t.prototype.clearTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},t.prototype.startLoad=function(){var n=this._levels;this.canload=!0;this.levelRetryCount=0;n&&n.forEach(function(n){n.loadError=0;var t=n.details;t&&t.live&&(n.details=void 0)});null!==this.timer&&this.loadLevel()},t.prototype.stopLoad=function(){this.canload=!1},t.prototype.onManifestLoaded=function(n){var t=[],a=void 0,v={},i=null,s=!1,c=!1,y=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),l=[],h;if(n.levels.forEach(function(n){n.loadError=0;n.fragmentError=!1;s=s||!!n.videoCodec;c=c||!!n.audioCodec||!(!n.attrs||!n.attrs.AUDIO);y&&n.audioCodec&&-1!==n.audioCodec.indexOf("mp4a.40.34")&&(n.audioCodec=void 0);i=v[n.bitrate];i?i.url.push(n.url):(n.url=[n.url],n.urlId=0,v[n.bitrate]=n,t.push(n));n.attrs&&n.attrs.AUDIO&&Object(o.a)(i||n,"audio",n.attrs.AUDIO);n.attrs&&n.attrs.SUBTITLES&&Object(o.a)(i||n,"text",n.attrs.SUBTITLES)}),s&&c&&(t=t.filter(function(n){return!!n.videoCodec})),t=t.filter(function(n){var t=n.audioCodec,i=n.videoCodec;return(!t||Object(e.a)(t))&&(!i||Object(e.a)(i))}),n.audioTracks&&(l=n.audioTracks.filter(function(n){return!n.audioCodec||Object(e.a)(n.audioCodec,"audio")}),l.forEach(function(n,t){n.id=t})),t.length>0){for(a=t[0].bitrate,t.sort(function(n,t){return n.bitrate-t.bitrate}),this._levels=t,h=0;h<t.length;h++)if(t[h].bitrate===a){this._firstLevel=h;f.b.log("manifest loaded,"+t.length+" level(s) found, first bitrate:"+a);break}this.hls.trigger(u.a.MANIFEST_PARSED,{levels:t,audioTracks:l,firstLevel:this._firstLevel,stats:n.stats,audio:c,video:s,altAudio:l.length>0&&s})}else this.hls.trigger(u.a.ERROR,{type:r.b.MEDIA_ERROR,details:r.a.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},t.prototype.setLevelInternal=function(n){var i=this._levels,e=this.hls,o,t,s,h;n>=0&&n<i.length?((this.clearTimer(),this.currentLevelIndex!==n)&&(f.b.log("switching to level "+n),this.currentLevelIndex=n,o=i[n],o.level=n,e.trigger(u.a.LEVEL_SWITCHING,o)),t=i[n],s=t.details,(!s||s.live)&&(h=t.urlId,e.trigger(u.a.LEVEL_LOADING,{url:t.url[h],level:n,id:h}))):e.trigger(u.a.ERROR,{type:r.b.OTHER_ERROR,details:r.a.LEVEL_SWITCH_ERROR,level:n,fatal:!1,reason:"invalid level idx"})},t.prototype.onError=function(n){if(n.fatal)return void(n.type===r.b.NETWORK_ERROR&&this.clearTimer());var i=!1,u=!1,t=void 0;switch(n.details){case r.a.FRAG_LOAD_ERROR:case r.a.FRAG_LOAD_TIMEOUT:case r.a.KEY_LOAD_ERROR:case r.a.KEY_LOAD_TIMEOUT:t=n.frag.level;u=!0;break;case r.a.LEVEL_LOAD_ERROR:case r.a.LEVEL_LOAD_TIMEOUT:t=n.context.level;i=!0;break;case r.a.REMUX_ALLOC_ERROR:t=n.level;i=!0}void 0!==t&&this.recoverLevel(n,t,i,u)},t.prototype.recoverLevel=function(n,t,i,r){var l=this,s=this.hls.config,e=n.details,u=this._levels[t],o=void 0,h=void 0,c=void 0;if(u.loadError++,u.fragmentError=r,i){if(!(this.levelRetryCount+1<=s.levelLoadingMaxRetry))return f.b.error("level controller, cannot recover from "+e+" error"),this.currentLevelIndex=null,this.clearTimer(),void(n.fatal=!0);h=Math.min(Math.pow(2,this.levelRetryCount)*s.levelLoadingRetryDelay,s.levelLoadingMaxRetryTimeout);this.timer=setTimeout(function(){return l.loadLevel()},h);n.levelRetry=!0;this.levelRetryCount++;f.b.warn("level controller, "+e+", retry in "+h+" ms, current retry count is "+this.levelRetryCount)}(i||r)&&(o=u.url.length,o>1&&u.loadError<o?(u.urlId=(u.urlId+1)%o,u.details=void 0,f.b.warn("level controller, "+e+" for level "+t+": switching to redundant URL-id "+u.urlId)):-1===this.manualLevelIndex?(c=0===t?this._levels.length-1:t-1,f.b.warn("level controller, "+e+": switch to "+c),this.hls.nextAutoLevel=this.currentLevelIndex=c):r&&(f.b.warn("level controller, "+e+": reload a fragment"),this.currentLevelIndex=null))},t.prototype.onFragLoaded=function(n){var i=n.frag,t;void 0!==i&&"main"===i.type&&(t=this._levels[i.level],void 0!==t&&(t.fragmentError=!1,t.loadError=0,this.levelRetryCount=0))},t.prototype.onLevelLoaded=function(n){var s=this,u=n.level,r,t;if(u===this.currentLevelIndex)if(r=this._levels[u],r.fragmentError||(r.loadError=0,this.levelRetryCount=0),t=n.details,t.live){var e=1e3*(t.averagetargetduration?t.averagetargetduration:t.targetduration),i=e,o=r.details;o&&t.endSN===o.endSN&&(i/=2,f.b.log("same live playlist, reload twice faster"));i-=p.now()-n.stats.trequest;i=Math.max(e/2,Math.round(i));f.b.log("live playlist, reload in "+Math.round(i)+" ms");this.timer=setTimeout(function(){return s.loadLevel()},i)}else this.clearTimer()},t.prototype.onAudioTrackSwitched=function(n){var r=this.hls.audioTracks[n.id].groupId,t=this.hls.levels[this.currentLevelIndex],i;t&&t.audioGroupIds&&(i=t.audioGroupIds.findIndex(function(n){return n===r}),i!==t.urlId&&(t.urlId=i,this.startLoad()))},t.prototype.loadLevel=function(){var n;if((f.b.debug("call to loadLevel"),null!==this.currentLevelIndex&&this.canload)&&(n=this._levels[this.currentLevelIndex],"object"===(void 0===n?"undefined":a(n))&&n.url.length>0)){var i=this.currentLevelIndex,t=n.urlId,r=n.url[t];f.b.log("Attempt loading level index "+i+" with URL-id "+t);this.hls.trigger(u.a.LEVEL_LOADING,{url:r,level:i,id:t})}},v(t,[{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(n){var t=this._levels;t&&(n=Math.min(n,t.length-1),this.currentLevelIndex===n&&t[n].details||this.setLevelInternal(n))}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(n){this.manualLevelIndex=n;void 0===this._startLevel&&(this._startLevel=n);-1!==n&&(this.level=n)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(n){this._firstLevel=n}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var n=this.hls.config.startLevel;return void 0!==n?n:this._firstLevel}return this._startLevel},set:function(n){this._startLevel=n}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(n){this.level=n;-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=n)}}]),t}(l.a);t.a=w},function(n,t,i){"use strict";function o(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function s(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t}function h(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var r=i(1),u=i(4),f=i(9),e=i(27),c=function(n){function t(i){o(this,t);var u=s(this,n.call(this,i,r.a.MEDIA_ATTACHED,r.a.MEDIA_DETACHING,r.a.FRAG_PARSING_METADATA));return u.id3Track=void 0,u.media=void 0,u}return h(t,n),t.prototype.destroy=function(){u.a.prototype.destroy.call(this)},t.prototype.onMediaAttached=function(n){this.media=n.media;this.media},t.prototype.onMediaDetaching=function(){Object(e.a)(this.id3Track);this.id3Track=void 0;this.media=void 0},t.prototype.getID3Track=function(n){for(var t,i=0;i<n.length;i++)if(t=n[i],"metadata"===t.kind&&"id3"===t.label)return Object(e.b)(t,this.media),t;return this.media.addTextTrack("metadata","id3")},t.prototype.onFragParsingMetadata=function(n){var l=n.frag,i=n.samples,c,t,r,o,u,e,s,h;for(this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden"),c=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,t=0;t<i.length;t++)if(r=f.a.getID3Frames(i[t].data),r)for(o=i[t].pts,u=t<i.length-1?i[t+1].pts:l.endPTS,o===u&&(u+=.0001),e=0;e<r.length;e++)s=r[e],f.a.isTimeStampFrame(s)||(h=new c(o,u,""),h.value=s,this.id3Track.addCue(h))},t}(u.a);t.a=c},function(n,t,i){"use strict";function r(){var t=Object(u.a)(),n=window.SourceBuffer||window.WebKitSourceBuffer,i=t&&"function"==typeof t.isTypeSupported&&t.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),r=!n||n.prototype&&"function"==typeof n.prototype.appendBuffer&&"function"==typeof n.prototype.remove;return!!i&&!!r}t.a=r;var u=i(15)},function(n,t,i){"use strict";i.d(t,"a",function(){return r});var u=i(56),f=i(59),e=i(60),o=i(61),s=i(62),h=i(63),c=i(64),l=i(65),a=i(67),v=i(71),y=i(72),p=i(73),w=i(74),r={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:s.a,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:u.a,bufferController:f.a,capLevelController:e.a,fpsController:o.a,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,requestMediaKeySystemAccessFunc:w.a};r.subtitleStreamController=y.a;r.subtitleTrackController=v.a;r.timelineController=a.a;r.cueHandler=l;r.enableCEA708Captions=!0;r.enableWebVTT=!0;r.captionsTextTrack1Label="English";r.captionsTextTrack1LanguageCode="en";r.captionsTextTrack2Label="Spanish";r.captionsTextTrack2LanguageCode="es";r.audioStreamController=c.a;r.audioTrackController=h.a;r.emeController=p.a},function(n,t,i){"use strict";function h(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function c(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t}function l(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var f=i(3),u=i(1),e=i(4),o=i(8),s=i(2),r=i(0),a=i(57),v=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),y=window,p=y.performance,w=function(n){function t(i){h(this,t);var r=c(this,n.call(this,i,u.a.FRAG_LOADING,u.a.FRAG_LOADED,u.a.FRAG_BUFFERED,u.a.ERROR));return r.lastLoadedFragLevel=0,r._nextAutoLevel=-1,r.hls=i,r.timer=null,r._bwEstimator=null,r.onCheck=r._abandonRulesCheck.bind(r),r}return l(t,n),t.prototype.destroy=function(){this.clearTimer();e.a.prototype.destroy.call(this)},t.prototype.onFragLoading=function(n){var i=n.frag;if("main"===i.type&&(this.timer||(this.fragCurrent=i,this.timer=setInterval(this.onCheck,100)),!this._bwEstimator)){var r=this.hls,t=r.config,e=i.level,o=r.levels[e].details.live,u=void 0,f=void 0;o?(u=t.abrEwmaFastLive,f=t.abrEwmaSlowLive):(u=t.abrEwmaFastVoD,f=t.abrEwmaSlowVoD);this._bwEstimator=new a.a(r,f,u,t.abrEwmaDefaultEstimate)}},t.prototype._abandonRulesCheck=function(){var e=this.hls,f=e.media,n=this.fragCurrent,s,b,t,c,l,y,i,g;if(n){if(s=n.loader,b=e.minAutoLevel,!s||s.stats&&s.stats.aborted)return r.b.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);if(t=s.stats,f&&t&&(!f.paused&&0!==f.playbackRate||!f.readyState)&&n.autoLevel&&n.level&&(c=p.now()-t.trequest,l=Math.abs(f.playbackRate),c>500*n.duration/l)){var h=e.levels,k=Math.max(1,t.bw?t.bw/8:1e3*t.loaded/c),a=h[n.level],nt=a.realBitrate?Math.max(a.realBitrate,a.bitrate):a.bitrate,tt=t.total?t.total:Math.max(t.loaded,Math.round(n.duration*nt/8)),d=f.currentTime,w=(tt-t.loaded)/k,v=(o.a.bufferInfo(f,d,e.config.maxBufferHole).end-d)/l;if(v<2*n.duration/l&&w>v){for(y=void 0,i=void 0,i=n.level-1;i>b;i--)if(g=h[i].realBitrate?Math.max(h[i].realBitrate,h[i].bitrate):h[i].bitrate,(y=n.duration*g/(6.4*k))<v)break;y<w&&(r.b.warn("loading too slow, abort fragment loading and switch to level "+i+":fragLoadedDelay["+i+"]<fragLoadedDelay["+(n.level-1)+"];bufferStarvationDelay:"+y.toFixed(1)+"<"+w.toFixed(1)+":"+v.toFixed(1)),e.nextLoadLevel=i,this._bwEstimator.sample(c,t.loaded),s.abort(),this.clearTimer(),e.trigger(u.a.FRAG_LOAD_EMERGENCY_ABORTED,{frag:n,stats:t}))}}}},t.prototype.onFragLoaded=function(n){var i=n.frag,r;if("main"===i.type&&Object(f.a)(i.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=i.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var t=this.hls.levels[i.level],u=(t.loaded?t.loaded.bytes:0)+n.stats.loaded,e=(t.loaded?t.loaded.duration:0)+n.frag.duration;t.loaded={bytes:u,duration:e};t.realBitrate=Math.round(8*u/e)}n.frag.bitrateTest&&(r=n.stats,r.tparsed=r.tbuffered=r.tload,this.onFragBuffered(n))}},t.prototype.onFragBuffered=function(n){var t=n.stats,i=n.frag,u;!0!==t.aborted&&"main"===i.type&&Object(f.a)(i.sn)&&(!i.bitrateTest||t.tload===t.tbuffered)&&(u=t.tparsed-t.trequest,r.b.log("latency/loading/parsing/append/kbps:"+Math.round(t.tfirst-t.trequest)+"/"+Math.round(t.tload-t.tfirst)+"/"+Math.round(t.tparsed-t.tload)+"/"+Math.round(t.tbuffered-t.tparsed)+"/"+Math.round(8*t.loaded/(t.tbuffered-t.trequest))),this._bwEstimator.sample(u,t.loaded),t.bwEstimate=this._bwEstimator.getEstimate(),this.bitrateTestDelay=i.bitrateTest?u/1e3:0)},t.prototype.onError=function(n){switch(n.details){case s.a.FRAG_LOAD_ERROR:case s.a.FRAG_LOAD_TIMEOUT:this.clearTimer()}},t.prototype.clearTimer=function(){clearInterval(this.timer);this.timer=null},t.prototype._findBestLevel=function(n,t,i,u,f,e,o,s,h){for(var p,v,y,c=f;c>=u;c--)if(p=h[c],p){var l=p.details,w=l?l.totalduration/l.fragments.length:t,b=!!l&&l.live,a=void 0;if(a=c<=n?o*i:s*i,v=h[c].realBitrate?Math.max(h[c].realBitrate,h[c].bitrate):h[c].bitrate,y=v*w/a,r.b.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+c+"/"+Math.round(a)+"/"+v+"/"+w+"/"+e+"/"+y),a>v&&(!y||b&&!this.bitrateTestDelay||y<e))return c}return-1},v(t,[{key:"nextAutoLevel",get:function(){var n=this._nextAutoLevel,i=this._bwEstimator,t;return(-1===n||i&&i.canEstimate())?(t=this._nextABRAutoLevel,-1!==n&&(t=Math.min(n,t)),t):n},set:function(n){this._nextAutoLevel=n}},{key:"_nextABRAutoLevel",get:function(){var u=this.hls,c=u.maxAutoLevel,l=u.levels,n=u.config,a=u.minAutoLevel,t=u.media,v=this.lastLoadedFragLevel,i=this.fragCurrent?this.fragCurrent.duration:0,y=t?t.currentTime:0,k=t&&0!==t.playbackRate?Math.abs(t.playbackRate):1,p=this._bwEstimator?this._bwEstimator.getEstimate():n.abrEwmaDefaultEstimate,s=(o.a.bufferInfo(t,y,n.maxBufferHole).end-y)/k,f=this._findBestLevel(v,i,p,a,c,s,n.abrBandWidthFactor,n.abrBandWidthUpFactor,l),e;if(f>=0)return f;r.b.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var h=i?Math.min(i,n.maxStarvationDelay):n.maxStarvationDelay,w=n.abrBandWidthFactor,b=n.abrBandWidthUpFactor;return 0===s&&(e=this.bitrateTestDelay,e&&(h=(i?Math.min(i,n.maxLoadingDelay):n.maxLoadingDelay)-e,r.b.trace("bitrate test took "+Math.round(1e3*e)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*h)+" ms"),w=b=1)),f=this._findBestLevel(v,i,p,a,c,s+h,w,b,l),Math.max(f,0)}}]),t}(e.a);t.a=w},function(n,t,i){"use strict";function u(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var r=i(58),f=function(){function n(t,i,f,e){u(this,n);this.hls=t;this.defaultEstimate_=e;this.minWeight_=.001;this.minDelayMs_=50;this.slow_=new r.a(i);this.fast_=new r.a(f)}return n.prototype.sample=function(n,t){n=Math.max(n,this.minDelayMs_);var i=8e3*t/n,r=n/1e3;this.fast_.sample(r,i);this.slow_.sample(r,i)},n.prototype.canEstimate=function(){var n=this.fast_;return n&&n.getTotalWeight()>=this.minWeight_},n.prototype.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},n.prototype.destroy=function(){},n}();t.a=f},function(n,t){"use strict";function i(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var r=function(){function n(t){i(this,n);this.alpha_=t?Math.exp(Math.log(.5)/t):0;this.estimate_=0;this.totalWeight_=0}return n.prototype.sample=function(n,t){var i=Math.pow(this.alpha_,n);this.estimate_=t*(1-i)+i*this.estimate_;this.totalWeight_+=n},n.prototype.getTotalWeight=function(){return this.totalWeight_},n.prototype.getEstimate=function(){if(this.alpha_){var n=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/n}return this.estimate_},n}();t.a=r},function(n,t,i){"use strict";function o(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function s(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t}function h(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var c=i(3),u=i(1),e=i(4),r=i(0),f=i(2),l=i(15),a=Object(l.a)(),v=function(n){function t(i){o(this,t);var r=s(this,n.call(this,i,u.a.MEDIA_ATTACHING,u.a.MEDIA_DETACHING,u.a.MANIFEST_PARSED,u.a.BUFFER_RESET,u.a.BUFFER_APPENDING,u.a.BUFFER_CODECS,u.a.BUFFER_EOS,u.a.BUFFER_FLUSHING,u.a.LEVEL_PTS_UPDATED,u.a.LEVEL_UPDATED));return r._msDuration=null,r._levelDuration=null,r._live=null,r._objectUrl=null,r.onsbue=r.onSBUpdateEnd.bind(r),r.onsbe=r.onSBUpdateError.bind(r),r.pendingTracks={},r.tracks={},r}return h(t,n),t.prototype.destroy=function(){e.a.prototype.destroy.call(this)},t.prototype.onLevelPtsUpdated=function(n){var f=n.type,u=this.tracks.audio,t,i;if("audio"===f&&u&&"audio/mpeg"===u.container&&(t=this.sourceBuffer.audio,Math.abs(t.timestampOffset-n.start)>.1)){i=t.updating;try{t.abort()}catch(n){i=!0;r.b.warn("can not abort audio buffer: "+n)}i?this.audioTimestampOffset=n.start:(r.b.warn("change mpeg audio timestamp offset from "+t.timestampOffset+" to "+n.start),t.timestampOffset=n.start)}},t.prototype.onManifestParsed=function(n){var i=n.audio,u=n.video||n.levels.length&&n.altAudio,t=0;n.altAudio&&(i||u)&&(t=(i?1:0)+(u?1:0),r.b.log(t+" sourceBuffer(s) expected"));this.sourceBufferNb=t},t.prototype.onMediaAttaching=function(n){var i=this.media=n.media,t;i&&(t=this.mediaSource=new a,this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),t.addEventListener("sourceopen",this.onmso),t.addEventListener("sourceended",this.onmse),t.addEventListener("sourceclose",this.onmsc),i.src=window.URL.createObjectURL(t),this._objectUrl=i.src)},t.prototype.onMediaDetaching=function(){r.b.log("media source detaching");var n=this.mediaSource;if(n){if("open"===n.readyState)try{n.endOfStream()}catch(n){r.b.warn("onMediaDetaching:"+n.message+" while calling endOfStream")}n.removeEventListener("sourceopen",this.onmso);n.removeEventListener("sourceended",this.onmse);n.removeEventListener("sourceclose",this.onmsc);this.media&&(window.URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):r.b.warn("media.src was changed by a third party - skip cleanup"));this.mediaSource=null;this.media=null;this._objectUrl=null;this.pendingTracks={};this.tracks={};this.sourceBuffer={};this.flushRange=[];this.segments=[];this.appended=0}this.onmso=this.onmse=this.onmsc=null;this.hls.trigger(u.a.MEDIA_DETACHED)},t.prototype.onMediaSourceOpen=function(){r.b.log("media source opened");this.hls.trigger(u.a.MEDIA_ATTACHED,{media:this.media});var n=this.mediaSource;n&&n.removeEventListener("sourceopen",this.onmso);this.checkPendingTracks()},t.prototype.checkPendingTracks=function(){var n=this.pendingTracks,t=Object.keys(n).length;t&&(this.sourceBufferNb<=t||0===this.sourceBufferNb)&&(this.createSourceBuffers(n),this.pendingTracks={},this.doAppending())},t.prototype.onMediaSourceClose=function(){r.b.log("media source closed")},t.prototype.onMediaSourceEnded=function(){r.b.log("media source ended")},t.prototype.onSBUpdateEnd=function(){var n,t;this.audioTimestampOffset&&(n=this.sourceBuffer.audio,r.b.warn("change mpeg audio timestamp offset from "+n.timestampOffset+" to "+this.audioTimestampOffset),n.timestampOffset=this.audioTimestampOffset,delete this.audioTimestampOffset);this._needsFlush&&this.doFlush();this._needsEos&&this.checkEos();this.appending=!1;var i=this.parent,o=this.segments.reduce(function(n,t){return t.parent===i?n+1:n},0),f={},e=this.sourceBuffer;for(t in e)f[t]=e[t].buffered;this.hls.trigger(u.a.BUFFER_APPENDED,{parent:i,pending:o,timeRanges:f});this._needsFlush||this.doAppending();this.updateMediaElementDuration()},t.prototype.onSBUpdateError=function(n){r.b.error("sourceBuffer error:",n);this.hls.trigger(u.a.ERROR,{type:f.b.MEDIA_ERROR,details:f.a.BUFFER_APPENDING_ERROR,fatal:!1})},t.prototype.onBufferReset=function(){var t=this.sourceBuffer,i,n;for(i in t){n=t[i];try{this.mediaSource.removeSourceBuffer(n);n.removeEventListener("updateend",this.onsbue);n.removeEventListener("error",this.onsbe)}catch(t){}}this.sourceBuffer={};this.flushRange=[];this.segments=[];this.appended=0},t.prototype.onBufferCodecs=function(n){var t,i;if(0===Object.keys(this.sourceBuffer).length){for(t in n)this.pendingTracks[t]=n[t];i=this.mediaSource;i&&"open"===i.readyState&&this.checkPendingTracks()}},t.prototype.createSourceBuffers=function(n){var s=this.sourceBuffer,c=this.mediaSource,t,e;for(t in n)if(!s[t]){var i=n[t],h=i.levelCodec||i.codec,o=i.container+";codecs="+h;r.b.log("creating sourceBuffer("+o+")");try{e=s[t]=c.addSourceBuffer(o);e.addEventListener("updateend",this.onsbue);e.addEventListener("error",this.onsbe);this.tracks[t]={codec:h,container:i.container};i.buffer=e}catch(n){r.b.error("error while trying to add sourceBuffer:"+n.message);this.hls.trigger(u.a.ERROR,{type:f.b.MEDIA_ERROR,details:f.a.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:n,mimeType:o})}}this.hls.trigger(u.a.BUFFER_CREATED,{tracks:n})},t.prototype.onBufferAppending=function(n){this._needsFlush||(this.segments?this.segments.push(n):this.segments=[n],this.doAppending())},t.prototype.onBufferAppendFail=function(n){r.b.error("sourceBuffer error:",n.event);this.hls.trigger(u.a.ERROR,{type:f.b.MEDIA_ERROR,details:f.a.BUFFER_APPENDING_ERROR,fatal:!1})},t.prototype.onBufferEos=function(n){var i=this.sourceBuffer,u=n.type;for(var t in i)u&&t!==u||i[t].ended||(i[t].ended=!0,r.b.log(t+" sourceBuffer now EOS"));this.checkEos()},t.prototype.checkEos=function(){var i=this.sourceBuffer,n=this.mediaSource,u,t;if(!n||"open"!==n.readyState)return void(this._needsEos=!1);for(u in i){if(t=i[u],!t.ended)return;if(t.updating)return void(this._needsEos=!0)}r.b.log("all media data available, signal endOfStream() to MediaSource and stop loading fragment");try{n.endOfStream()}catch(i){r.b.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1},t.prototype.onBufferFlushing=function(n){this.flushRange.push({start:n.startOffset,end:n.endOffset,type:n.type});this.flushBufferCounter=0;this.doFlush()},t.prototype.onLevelUpdated=function(n){var t=n.details;t.fragments.length>0&&(this._levelDuration=t.totalduration+t.fragments[0].start,this._live=t.live,this.updateMediaElementDuration())},t.prototype.updateMediaElementDuration=function(){var i=this.hls.config,n=void 0,t;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(t in this.sourceBuffer)if(!0===this.sourceBuffer[t].updating)return;n=this.media.duration;null===this._msDuration&&(this._msDuration=this.mediaSource.duration);!0===this._live&&!0===i.liveDurationInfinity?(r.b.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>n||!Object(c.a)(n))&&(r.b.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},t.prototype.doFlush=function(){for(var n,t,i,f;this.flushRange.length;){if(n=this.flushRange[0],!this.flushBuffer(n.start,n.end,n.type))return void(this._needsFlush=!0);this.flushRange.shift();this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;t=0;i=this.sourceBuffer;try{for(f in i)t+=i[f].buffered.length}catch(n){r.b.error("error while accessing sourceBuffer.buffered")}this.appended=t;this.hls.trigger(u.a.BUFFER_FLUSHED)}},t.prototype.doAppending=function(){var e=this.hls,s=this.sourceBuffer,i=this.segments,t,h,o,n;if(Object.keys(s).length){if(this.media.error)return this.segments=[],void r.b.error("trying to append although a media error occured, flush segment and abort");if(this.appending)return;if(i&&i.length){t=i.shift();try{h=t.type;o=s[h];o?o.updating?i.unshift(t):(o.ended=!1,this.parent=t.parent,o.appendBuffer(t.data),this.appendError=0,this.appended++,this.appending=!0):this.onSBUpdateEnd()}catch(s){r.b.error("error while trying to append buffer:"+s.message);i.unshift(t);n={type:f.b.MEDIA_ERROR,parent:t.parent};22!==s.code?(this.appendError?this.appendError++:this.appendError=1,n.details=f.a.BUFFER_APPEND_ERROR,this.appendError>e.config.appendErrorMaxRetry?(r.b.log("fail "+e.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),i=[],n.fatal=!0,e.trigger(u.a.ERROR,n)):(n.fatal=!1,e.trigger(u.a.ERROR,n))):(this.segments=[],n.details=f.a.BUFFER_FULL_ERROR,n.fatal=!1,e.trigger(u.a.ERROR,n))}}}},t.prototype.flushBuffer=function(n,t,i){var u=void 0,f=void 0,c=void 0,s=void 0,e=void 0,o=void 0,l=this.sourceBuffer,h;if(Object.keys(l).length){if(r.b.log("flushBuffer,pos/start/end: "+this.media.currentTime.toFixed(3)+"/"+n+"/"+t),this.flushBufferCounter<this.appended){for(h in l)if(!i||h===i){if(u=l[h],u.ended=!1,u.updating)return r.b.warn("cannot flush, sb updating in progress"),!1;try{for(f=0;f<u.buffered.length;f++)if(c=u.buffered.start(f),s=u.buffered.end(f),-1!==navigator.userAgent.toLowerCase().indexOf("firefox")&&t===Number.POSITIVE_INFINITY?(e=n,o=t):(e=Math.max(c,n),o=Math.min(s,t)),Math.min(o,s)-e>.5)return this.flushBufferCounter++,r.b.log("flush "+h+" ["+e+","+o+"], of ["+c+","+s+"], pos:"+this.media.currentTime),u.remove(e,o),!1}catch(n){r.b.warn("exception while accessing sourcebuffer, it might have been removed from MediaSource")}}}else r.b.warn("abort flushing too many retries");r.b.log("buffer flushed")}return!0},t}(e.a);t.a=v},function(n,t,i){"use strict";function u(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function f(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t}function e(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var r=i(1),o=i(4),s=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),h=function(n){function t(i){u(this,t);var e=f(this,n.call(this,i,r.a.FPS_DROP_LEVEL_CAPPING,r.a.MEDIA_ATTACHING,r.a.MANIFEST_PARSED,r.a.BUFFER_CODECS,r.a.MEDIA_DETACHING));return e.autoLevelCapping=Number.POSITIVE_INFINITY,e.firstLevel=null,e.levels=[],e.media=null,e.restrictedLevels=[],e.timer=null,e}return e(t,n),t.prototype.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=null,this._stopCapping())},t.prototype.onFpsDropLevelCapping=function(n){t.isLevelAllowed(n.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(n.droppedLevel)},t.prototype.onMediaAttaching=function(n){this.media=n.media instanceof window.HTMLVideoElement?n.media:null},t.prototype.onManifestParsed=function(n){var t=this.hls;this.restrictedLevels=[];this.levels=n.levels;this.firstLevel=n.firstLevel;t.config.capLevelToPlayerSize&&(n.video||n.levels.length&&n.altAudio)&&this._startCapping()},t.prototype.onBufferCodecs=function(n){this.hls.config.capLevelToPlayerSize&&n.video&&this._startCapping()},t.prototype.onLevelsUpdated=function(n){this.levels=n.levels},t.prototype.onMediaDetaching=function(){this._stopCapping()},t.prototype.detectPlayerSize=function(){var t,n;this.media&&(t=this.levels?this.levels.length:0,t&&(n=this.hls,n.autoLevelCapping=this.getMaxLevel(t-1),n.autoLevelCapping>this.autoLevelCapping&&n.streamController.nextLevelSwitch(),this.autoLevelCapping=n.autoLevelCapping))},t.prototype.getMaxLevel=function(n){var r=this,i;return this.levels?(i=this.levels.filter(function(i,u){return t.isLevelAllowed(u,r.restrictedLevels)&&u<=n}),t.getMaxLevelByMediaSize(i,this.mediaWidth,this.mediaHeight)):-1},t.prototype._startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},t.prototype._stopCapping=function(){this.restrictedLevels=[];this.firstLevel=null;this.autoLevelCapping=Number.POSITIVE_INFINITY;this.timer&&(this.timer=clearInterval(this.timer),this.timer=null)},t.isLevelAllowed=function(n){return-1===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).indexOf(n)},t.getMaxLevelByMediaSize=function(n,t,i){var f,r,u;if(!n||n&&!n.length)return-1;for(f=n.length-1,r=0;r<n.length;r+=1)if(u=n[r],(u.width>=t||u.height>=i)&&function(n,t){return!t||n.width!==t.width||n.height!==t.height}(u,n[r+1])){f=r;break}return f},s(t,[{key:"mediaWidth",get:function(){var i=void 0,n=this.media;return n&&(i=n.width||n.clientWidth||n.offsetWidth,i*=t.contentScaleFactor),i}},{key:"mediaHeight",get:function(){var i=void 0,n=this.media;return n&&(i=n.height||n.clientHeight||n.offsetHeight,i*=t.contentScaleFactor),i}}],[{key:"contentScaleFactor",get:function(){return window.__devicePixelRatio||1}}]),t}(o.a);t.a=h},function(n,t,i){"use strict";function u(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function f(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t}function e(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var r=i(1),o=i(4),s=i(0),h=window,c=h.performance,l=function(n){function t(i){return u(this,t),f(this,n.call(this,i,r.a.MEDIA_ATTACHING))}return e(t,n),t.prototype.destroy=function(){this.timer&&clearInterval(this.timer);this.isVideoPlaybackQualityAvailable=!1},t.prototype.onMediaAttaching=function(n){var t=this.hls.config;t.capLevelOnFPSDrop&&("function"==typeof(this.video=n.media instanceof window.HTMLVideoElement?n.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),t.fpsDroppedMonitoringPeriod))},t.prototype.checkFPS=function(n,t,i){var o=c.now(),f;if(t){if(this.lastTime){var l=o-this.lastTime,e=i-this.lastDroppedFrames,h=t-this.lastDecodedFrames,a=1e3*e/l,u=this.hls;(u.trigger(r.a.FPS_DROP,{currentDropped:e,currentDecoded:h,totalDroppedFrames:i}),a>0&&e>u.config.fpsDroppedMonitoringThreshold*h)&&(f=u.currentLevel,s.b.warn("drop FPS ratio greater than max allowed value for currentLevel: "+f),f>0&&(-1===u.autoLevelCapping||u.autoLevelCapping>=f)&&(f-=1,u.trigger(r.a.FPS_DROP_LEVEL_CAPPING,{level:f,droppedLevel:u.currentLevel}),u.autoLevelCapping=f,u.streamController.nextLevelSwitch()))}this.lastTime=o;this.lastDroppedFrames=i;this.lastDecodedFrames=t}},t.prototype.checkFPSInterval=function(){var n=this.video,t;n&&(this.isVideoPlaybackQualityAvailable?(t=n.getVideoPlaybackQuality(),this.checkFPS(n,t.totalVideoFrames,t.droppedVideoFrames)):this.checkFPS(n,n.webkitDecodedFrameCount,n.webkitDroppedFrameCount))},t}(o.a);t.a=l},function(n,t,i){"use strict";function e(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var r=i(0),f=window,u=f.performance,o=f.XMLHttpRequest,s=function(){function n(t){e(this,n);t&&t.xhrSetup&&(this.xhrSetup=t.xhrSetup)}return n.prototype.destroy=function(){this.abort();this.loader=null},n.prototype.abort=function(){var n=this.loader;n&&4!==n.readyState&&(this.stats.aborted=!0,n.abort());window.clearTimeout(this.requestTimeout);this.requestTimeout=null;window.clearTimeout(this.retryTimeout);this.retryTimeout=null},n.prototype.load=function(n,t,i){this.context=n;this.config=t;this.callbacks=i;this.stats={trequest:u.now(),retry:0};this.retryDelay=t.retryDelay;this.loadInternal()},n.prototype.loadInternal=function(){var n=void 0,t=this.context,i,r;n=this.loader=new o;i=this.stats;i.tfirst=0;i.loaded=0;r=this.xhrSetup;try{if(r)try{r(n,t.url)}catch(i){n.open("GET",t.url,!0);r(n,t.url)}n.readyState||n.open("GET",t.url,!0)}catch(i){return void this.callbacks.onError({code:n.status,text:i.message},t,n)}t.rangeEnd&&n.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1));n.onreadystatechange=this.readystatechange.bind(this);n.onprogress=this.loadprogress.bind(this);n.responseType=t.responseType;this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout);n.send()},n.prototype.readystatechange=function(n){var i=n.currentTarget,c=i.readyState,t=this.stats,o=this.context,h=this.config,f,e,s,l;if(!t.aborted&&c>=2)if(window.clearTimeout(this.requestTimeout),0===t.tfirst&&(t.tfirst=Math.max(u.now(),t.trequest)),4===c)if(f=i.status,f>=200&&f<300){t.tload=Math.max(t.tfirst,u.now());e=void 0;s=void 0;"arraybuffer"===o.responseType?(e=i.response,s=e.byteLength):(e=i.responseText,s=e.length);t.loaded=t.total=s;l={url:i.responseURL,data:e};this.callbacks.onSuccess(l,t,o,i)}else t.retry>=h.maxRetry||f>=400&&f<499?(r.b.error(f+" while loading "+o.url),this.callbacks.onError({code:f,text:i.statusText},o,i)):(r.b.warn(f+" while loading "+o.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,h.maxRetryDelay),t.retry++);else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),h.timeout)},n.prototype.loadtimeout=function(){r.b.warn("timeout while loading "+this.context.url);this.callbacks.onTimeout(this.stats,this.context,null)},n.prototype.loadprogress=function(n){var r=n.currentTarget,t=this.stats,i;t.loaded=n.loaded;n.lengthComputable&&(t.total=n.total);i=this.callbacks.onProgress;i&&i(t,this.context,null,r)},n}();t.a=s},function(n,t,i){"use strict";function e(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function o(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t}function s(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var u=i(1),h=i(10),r=i(0),f=i(2),c=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),l=function(n){function t(i){e(this,t);var r=o(this,n.call(this,i,u.a.MANIFEST_LOADING,u.a.MANIFEST_PARSED,u.a.AUDIO_TRACK_LOADED,u.a.AUDIO_TRACK_SWITCHED,u.a.LEVEL_LOADED,u.a.ERROR));return r._trackId=-1,r._selectDefaultTrack=!0,r.tracks=[],r.trackIdBlacklist=Object.create(null),r.audioGroupId=null,r}return s(t,n),t.prototype.onManifestLoading=function(){this.tracks=[];this._trackId=-1;this._selectDefaultTrack=!0},t.prototype.onManifestParsed=function(n){var t=this.tracks=n.audioTracks||[];this.hls.trigger(u.a.AUDIO_TRACKS_UPDATED,{audioTracks:t})},t.prototype.onAudioTrackLoaded=function(n){if(n.id>=this.tracks.length)return void r.b.warn("Invalid audio track id:",n.id);if(r.b.log("audioTrack "+n.id+" loaded"),this.tracks[n.id].details=n.details,n.details.live&&!this.hasInterval()){var t=1e3*n.details.targetduration;this.setInterval(t)}!n.details.live&&this.hasInterval()&&this.clearInterval()},t.prototype.onAudioTrackSwitched=function(n){var t=this.tracks[n.id].groupId;t&&this.audioGroupId!==t&&(this.audioGroupId=t)},t.prototype.onLevelLoaded=function(n){var t=this.hls.levels[n.level],i;t.audioGroupIds&&(i=t.audioGroupIds[t.urlId],this.audioGroupId!==i&&(this.audioGroupId=i,this._selectInitialAudioTrack()))},t.prototype.onError=function(n){n.type===f.b.NETWORK_ERROR&&(n.fatal&&this.clearInterval(),n.details===f.a.AUDIO_TRACK_LOAD_ERROR&&(r.b.warn("Network failure on audio-track id:",n.context.id),this._handleLoadError()))},t.prototype._setAudioTrack=function(n){var t;if(this._trackId===n&&this.tracks[this._trackId].details)return void r.b.debug("Same id as current audio-track passed, and track details available -> no-op");if(n<0||n>=this.tracks.length)return void r.b.warn("Invalid id passed to audio-track controller");t=this.tracks[n];r.b.log("Now switching to audio-track index "+n);this.clearInterval();this._trackId=n;var i=t.url,f=t.type,e=t.id;this.hls.trigger(u.a.AUDIO_TRACK_SWITCHING,{id:e,type:f,url:i});this._loadTrackDetailsIfNeeded(t)},t.prototype.doTick=function(){this._updateTrack(this._trackId)},t.prototype._selectInitialAudioTrack=function(){var e=this,i=this.tracks,o,n,s,t,h;i.length&&(o=this.tracks[this._trackId],n=null,(o&&(n=o.name),this._selectDefaultTrack)&&(s=i.filter(function(n){return n.default}),s.length?i=s:r.b.warn("No default audio tracks defined")),t=!1,h=function(){i.forEach(function(i){t||e.audioGroupId&&i.groupId!==e.audioGroupId||n&&n!==i.name||(e._setAudioTrack(i.id),t=!0)})},h(),t||(n=null,h()),t||(r.b.error("No track found for running audio group-ID: "+this.audioGroupId),this.hls.trigger(u.a.ERROR,{type:f.b.MEDIA_ERROR,details:f.a.AUDIO_TRACK_LOAD_ERROR,fatal:!0})))},t.prototype._needsTrackLoading=function(n){var t=n.details;return!t||!!t.live||void 0},t.prototype._loadTrackDetailsIfNeeded=function(n){if(this._needsTrackLoading(n)){var i=n.url,t=n.id;r.b.log("loading audio-track playlist for id: "+t);this.hls.trigger(u.a.AUDIO_TRACK_LOADING,{url:i,id:t})}},t.prototype._updateTrack=function(n){if(!(n<0||n>=this.tracks.length)){this.clearInterval();this._trackId=n;r.b.log("trying to update audio-track "+n);var t=this.tracks[n];this._loadTrackDetailsIfNeeded(t)}},t.prototype._handleLoadError=function(){var n,t,o;this.trackIdBlacklist[this._trackId]=!0;var i=this._trackId,u=this.tracks[i],f=u.name,e=u.language,s=u.groupId;for(r.b.warn("Loading failed on audio track id: "+i+", group-id: "+s+', name/language: "'+f+'" / "'+e+'"'),n=i,t=0;t<this.tracks.length;t++)if(!this.trackIdBlacklist[t]&&(o=this.tracks[t],o.name===f)){n=t;break}if(n===i)return void r.b.warn('No fallback audio-track found for name/language: "'+f+'" / "'+e+'"');r.b.log("Attempting audio-track fallback id:",n,"group-id:",this.tracks[n].groupId);this._setAudioTrack(n)},c(t,[{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this._trackId},set:function(n){this._setAudioTrack(n);this._selectDefaultTrack=!1}}]),t}(h.a);t.a=l},function(n,t,i){"use strict";function l(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function a(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t}function v(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var h=i(3),y=i(7),s=i(8),p=i(21),f=i(1),c=i(16),w=i(25),e=i(2),u=i(0),b=i(26),k=i(10),d=i(12),g=i(11),nt=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),tt=window,o=tt.performance,r={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS"},it=function(n){function t(i,u){l(this,t);var e=a(this,n.call(this,i,f.a.MEDIA_ATTACHED,f.a.MEDIA_DETACHING,f.a.AUDIO_TRACKS_UPDATED,f.a.AUDIO_TRACK_SWITCHING,f.a.AUDIO_TRACK_LOADED,f.a.KEY_LOADED,f.a.FRAG_LOADED,f.a.FRAG_PARSING_INIT_SEGMENT,f.a.FRAG_PARSING_DATA,f.a.FRAG_PARSED,f.a.ERROR,f.a.BUFFER_RESET,f.a.BUFFER_CREATED,f.a.BUFFER_APPENDED,f.a.BUFFER_FLUSHED,f.a.INIT_PTS_FOUND));return e.fragmentTracker=u,e.config=i.config,e.audioCodecSwap=!1,e._state=r.STOPPED,e.initPTS=[],e.waitingFragment=null,e.videoTrackCC=null,e}return v(t,n),t.prototype.onHandlerDestroying=function(){this.stopLoad();n.prototype.onHandlerDestroying.call(this)},t.prototype.onHandlerDestroyed=function(){this.state=r.STOPPED;this.fragmentTracker=null;n.prototype.onHandlerDestroyed.call(this)},t.prototype.onInitPtsFound=function(n){var f=n.id,t=n.frag.cc,i=n.initPTS;"main"===f&&(this.initPTS[t]=i,this.videoTrackCC=t,u.b.log("InitPTS for cc: "+t+" found from video track: "+i),this.state===r.WAITING_INIT_PTS&&this.tick())},t.prototype.startLoad=function(n){if(this.tracks){var t=this.lastCurrentTime;this.stopLoad();this.setInterval(100);this.fragLoadError=0;t>0&&-1===n?(u.b.log("audio:override startPosition with lastCurrentTime @"+t.toFixed(3)),this.state=r.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:n,this.state=r.STARTING);this.nextLoadPosition=this.startPosition=this.lastCurrentTime;this.tick()}else this.startPosition=n,this.state=r.STOPPED},t.prototype.stopLoad=function(){var n=this.fragCurrent;n&&(n.loader&&n.loader.abort(),this.fragmentTracker.removeFragment(n),this.fragCurrent=null);this.fragPrevious=null;this.demuxer&&(this.demuxer.destroy(),this.demuxer=null);this.state=r.STOPPED},t.prototype.doTick=function(){var l=void 0,v=void 0,t=void 0,ut=this.hls,p=ut.config,g,et,yt,ht,pt,rt,ct,lt;switch(this.state){case r.STARTING:this.state=r.WAITING_TRACK;this.loadedmetadata=!1;break;case r.IDLE:if(g=this.tracks,!g)break;if(!this.media&&(this.startFragRequested||!p.startFragPrefetch))break;if(this.loadedmetadata)l=this.media.currentTime;else if(void 0===(l=this.nextLoadPosition))break;var nt=this.mediaBuffer?this.mediaBuffer:this.media,wt=this.videoBuffer?this.videoBuffer:this.media,a=s.a.bufferInfo(nt,l,p.maxBufferHole),bt=s.a.bufferInfo(wt,l,p.maxBufferHole),kt=a.len,e=a.end,c=this.fragPrevious,dt=Math.min(p.maxBufferLength,p.maxMaxBufferLength),gt=Math.max(dt,bt.len),tt=this.audioSwitch,it=this.trackId;if((kt<gt||tt)&&it<g.length){if(void 0===(t=g[it].details)){this.state=r.WAITING_TRACK;break}if(!tt&&!t.live&&c&&c.sn===t.endSN&&!a.nextStart&&(!this.media.seeking||this.media.duration-e<c.duration/2)){this.hls.trigger(f.a.BUFFER_EOS,{type:"audio"});this.state=r.ENDED;break}var i=t.fragments,ft=i.length,w=i[0].start,at=i[ft-1].start+i[ft-1].duration,n=void 0;if(tt)if(t.live&&!t.PTSKnown)u.b.log("switching audiotrack, live stream, unknown PTS,load first fragment"),e=0;else if(e=l,t.PTSKnown&&l<w){if(!(a.end>w||a.nextStart))return;u.b.log("alt audio track ahead of main track, seek to start of alt audio track");this.media.currentTime=w+.05}if(t.initSegment&&!t.initSegment.data)n=t.initSegment;else if(e<=w){if(n=i[0],null!==this.videoTrackCC&&n.cc!==this.videoTrackCC&&(n=Object(b.b)(i,this.videoTrackCC)),t.live&&n.loadIdx&&n.loadIdx===this.fragLoadIdx)return et=a.nextStart?a.nextStart:w,u.b.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(et+.05)),void(this.media.currentTime=et+.05)}else{var k=void 0,ot=p.maxFragLookUpTolerance,st=c?i[c.sn-i[0].sn+1]:void 0,vt=function(n){var t=Math.min(ot,n.duration);return n.start+n.duration-t<=e?1:n.start-t>e&&n.start?-1:0};e<at?(e>at-ot&&(ot=0),k=st&&!vt(st)?st:y.a.search(i,vt)):k=i[ft-1];k&&(n=k,w=k.start,c&&n.level===c.level&&n.sn===c.sn&&(n.sn<t.endSN?(n=i[n.sn+1-t.startSN],u.b.log("SN just loaded, load next one: "+n.sn)):n=null))}n&&(n.encrypted?(u.b.log("Loading key for "+n.sn+" of ["+t.startSN+" ,"+t.endSN+"],track "+it),this.state=r.KEY_LOADING,ut.trigger(f.a.KEY_LOADING,{frag:n})):(u.b.log("Loading "+n.sn+", cc: "+n.cc+" of ["+t.startSN+" ,"+t.endSN+"],track "+it+", currentTime:"+l+",bufferEnd:"+e.toFixed(3)),(tt||this.fragmentTracker.getState(n)===d.a.NOT_LOADED)&&(this.fragCurrent=n,this.startFragRequested=!0,Object(h.a)(n.sn)&&(this.nextLoadPosition=n.start+n.duration),ut.trigger(f.a.FRAG_LOADING,{frag:n}),this.state=r.FRAG_LOADING)))}break;case r.WAITING_TRACK:v=this.tracks[this.trackId];v&&v.details&&(this.state=r.IDLE);break;case r.FRAG_LOADING_WAITING_RETRY:yt=o.now();ht=this.retryDate;nt=this.media;pt=nt&&nt.seeking;(!ht||yt>=ht||pt)&&(u.b.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=r.IDLE);break;case r.WAITING_INIT_PTS:if(rt=this.videoTrackCC,void 0===this.initPTS[rt])break;ct=this.waitingFragment;ct?(lt=ct.frag.cc,rt!==lt?(v=this.tracks[this.trackId],v.details&&v.details.live&&(u.b.warn("Waiting fragment CC ("+lt+") does not match video track CC ("+rt+")"),this.waitingFragment=null,this.state=r.IDLE)):(this.state=r.FRAG_LOADING,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null)):this.state=r.IDLE}},t.prototype.onMediaAttached=function(n){var i=this.media=this.mediaBuffer=n.media,t;this.onvseeking=this.onMediaSeeking.bind(this);this.onvended=this.onMediaEnded.bind(this);i.addEventListener("seeking",this.onvseeking);i.addEventListener("ended",this.onvended);t=this.config;this.tracks&&t.autoStartLoad&&this.startLoad(t.startPosition)},t.prototype.onMediaDetaching=function(){var n=this.media;n&&n.ended&&(u.b.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);n&&(n.removeEventListener("seeking",this.onvseeking),n.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null);this.media=this.mediaBuffer=this.videoBuffer=null;this.loadedmetadata=!1;this.stopLoad()},t.prototype.onMediaSeeking=function(){this.state===r.ENDED&&(this.state=r.IDLE);this.media&&(this.lastCurrentTime=this.media.currentTime);this.tick()},t.prototype.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},t.prototype.onAudioTracksUpdated=function(n){u.b.log("audio tracks updated");this.tracks=n.audioTracks},t.prototype.onAudioTrackSwitching=function(n){var t=!!n.url;this.trackId=n.id;this.fragCurrent=null;this.state=r.PAUSED;this.waitingFragment=null;t?this.setInterval(100):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null);t&&(this.audioSwitch=!0,this.state=r.IDLE);this.tick()},t.prototype.onAudioTrackLoaded=function(n){var t=n.details,e=n.id,o=this.tracks[e],l=t.totalduration,s=0,f,i;(u.b.log("track "+e+" loaded ["+t.startSN+","+t.endSN+"],duration:"+l),t.live)?(f=o.details,f&&t.fragments.length>0?(c.b(f,t),s=t.fragments[0].start,t.PTSKnown?u.b.log("live audio playlist sliding:"+s.toFixed(3)):u.b.log("live audio playlist - outdated PTS, unknown sliding")):(t.PTSKnown=!1,u.b.log("live audio playlist - first load, unknown sliding"))):t.PTSKnown=!1;(o.details=t,this.startFragRequested)||(-1===this.startPosition&&(i=t.startTimeOffset,Object(h.a)(i)?(u.b.log("start time offset found in playlist, adjust startPosition to "+i),this.startPosition=i):this.startPosition=0),this.nextLoadPosition=this.startPosition);this.state===r.WAITING_TRACK&&(this.state=r.IDLE);this.tick()},t.prototype.onKeyLoaded=function(){this.state===r.KEY_LOADING&&(this.state=r.IDLE,this.tick())},t.prototype.onFragLoaded=function(n){var i=this.fragCurrent,e=n.frag,c,y;if(this.state===r.FRAG_LOADING&&i&&"audio"===e.type&&e.level===i.level&&e.sn===i.sn){var l=this.tracks[this.trackId],t=l.details,w=t.totalduration,a=i.level,s=i.sn,v=i.cc,b=this.config.defaultAudioCodec||l.audioCodec||"mp4a.40.2",h=this.stats=n.stats;"initSegment"===s?(this.state=r.IDLE,h.tparsed=h.tbuffered=o.now(),t.initSegment.data=n.payload,this.hls.trigger(f.a.FRAG_BUFFERED,{stats:h,frag:i,id:"audio"}),this.tick()):(this.state=r.PARSING,this.appended=!1,this.demuxer||(this.demuxer=new p.a(this.hls,"audio")),c=this.initPTS[v],y=t.initSegment?t.initSegment.data:[],t.initSegment||void 0!==c?(this.pendingBuffering=!0,u.b.log("Demuxing "+s+" of ["+t.startSN+" ,"+t.endSN+"],track "+a),this.demuxer.push(n.payload,y,b,null,i,w,!1,c)):(u.b.log("unknown video PTS for continuity counter "+v+", waiting for video PTS before demuxing audio frag "+s+" of ["+t.startSN+" ,"+t.endSN+"],track "+a),this.waitingFragment=n,this.state=r.WAITING_INIT_PTS))}this.fragLoadError=0},t.prototype.onFragParsingInitSegment=function(n){var e=this.fragCurrent,h=n.frag,i,t,o,s;e&&"audio"===n.id&&h.sn===e.sn&&h.level===e.level&&this.state===r.PARSING&&(i=n.tracks,t=void 0,(i.video&&delete i.video,t=i.audio)&&(t.levelCodec=t.codec,t.id=n.id,this.hls.trigger(f.a.BUFFER_CODECS,i),u.b.log("audio track:audio,container:"+t.container+",codecs[level/parsed]=["+t.levelCodec+"/"+t.codec+"]"),o=t.initSegment,o&&(s={type:"audio",data:o,parent:"audio",content:"initSegment"},this.audioSwitch?this.pendingData=[s]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(f.a.BUFFER_APPENDING,s))),this.tick()))},t.prototype.onFragParsingData=function(n){var s=this,t=this.fragCurrent,y=n.frag,v,i;if(t&&"audio"===n.id&&"audio"===n.type&&y.sn===t.sn&&y.level===t.level&&this.state===r.PARSING){var l=this.trackId,w=this.tracks[l],o=this.hls;Object(h.a)(n.endPTS)||(n.endPTS=n.startPTS+t.duration,n.endDTS=n.startDTS+t.duration);t.addElementaryStream(g.a.ElementaryStreamTypes.AUDIO);u.b.log("parsed "+n.type+",PTS:["+n.startPTS.toFixed(3)+","+n.endPTS.toFixed(3)+"],DTS:["+n.startDTS.toFixed(3)+"/"+n.endDTS.toFixed(3)+"],nb:"+n.nb);c.c(w.details,t,n.startPTS,n.endPTS);var b=this.audioSwitch,a=this.media,p=!1;if(b&&a&&(a.readyState?(v=a.currentTime,u.b.log("switching audio track : currentTime:"+v),v>=n.startPTS&&(u.b.log("switching audio track : flushing all audio"),this.state=r.BUFFER_FLUSHING,o.trigger(f.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),p=!0,this.audioSwitch=!1,o.trigger(f.a.AUDIO_TRACK_SWITCHED,{id:l}))):(this.audioSwitch=!1,o.trigger(f.a.AUDIO_TRACK_SWITCHED,{id:l}))),i=this.pendingData,!i)return u.b.warn("Apparently attempt to enqueue media payload without codec initialization data upfront"),void o.trigger(f.a.ERROR,{type:e.b.MEDIA_ERROR,details:null,fatal:!0});this.audioSwitch||([n.data1,n.data2].forEach(function(t){t&&t.length&&i.push({type:n.type,data:t,parent:"audio",content:"data"})}),!p&&i.length&&(i.forEach(function(n){s.state===r.PARSING&&(s.pendingBuffering=!0,s.hls.trigger(f.a.BUFFER_APPENDING,n))}),this.pendingData=[],this.appended=!0));this.tick()}},t.prototype.onFragParsed=function(n){var t=this.fragCurrent,i=n.frag;t&&"audio"===n.id&&i.sn===t.sn&&i.level===t.level&&this.state===r.PARSING&&(this.stats.tparsed=o.now(),this.state=r.PARSED,this._checkAppendedParsed())},t.prototype.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null;this.loadedmetadata=!1},t.prototype.onBufferCreated=function(n){var t=n.tracks.audio;t&&(this.mediaBuffer=t.buffer,this.loadedmetadata=!0);n.tracks.video&&(this.videoBuffer=n.tracks.video.buffer)},t.prototype.onBufferAppended=function(n){if("audio"===n.parent){var t=this.state;t!==r.PARSING&&t!==r.PARSED||(this.pendingBuffering=n.pending>0,this._checkAppendedParsed())}},t.prototype._checkAppendedParsed=function(){var e;if(!(this.state!==r.PARSED||this.appended&&this.pendingBuffering)){var n=this.fragCurrent,t=this.stats,i=this.hls;n&&(this.fragPrevious=n,t.tbuffered=o.now(),i.trigger(f.a.FRAG_BUFFERED,{stats:t,frag:n,id:"audio"}),e=this.mediaBuffer?this.mediaBuffer:this.media,u.b.log("audio buffered : "+w.a.toString(e.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,i.trigger(f.a.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=r.IDLE);this.tick()}},t.prototype.onError=function(n){var y=n.frag,l,t,h,a,c,v,i;if(!y||"audio"===y.type)switch(n.details){case e.a.FRAG_LOAD_ERROR:case e.a.FRAG_LOAD_TIMEOUT:if(l=n.frag,l&&"audio"!==l.type)break;n.fatal||(t=this.fragLoadError,t?t++:t=1,h=this.config,t<=h.fragLoadingMaxRetry?(this.fragLoadError=t,a=Math.min(Math.pow(2,t-1)*h.fragLoadingRetryDelay,h.fragLoadingMaxRetryTimeout),u.b.warn("AudioStreamController: frag loading failed, retry in "+a+" ms"),this.retryDate=o.now()+a,this.state=r.FRAG_LOADING_WAITING_RETRY):(u.b.error("AudioStreamController: "+n.details+" reaches max retry, redispatch as fatal ..."),n.fatal=!0,this.state=r.ERROR));break;case e.a.AUDIO_TRACK_LOAD_ERROR:case e.a.AUDIO_TRACK_LOAD_TIMEOUT:case e.a.KEY_LOAD_ERROR:case e.a.KEY_LOAD_TIMEOUT:this.state!==r.ERROR&&(this.state=n.fatal?r.ERROR:r.IDLE,u.b.warn("AudioStreamController: "+n.details+" while loading frag, now switching to "+this.state+" state ..."));break;case e.a.BUFFER_FULL_ERROR:"audio"===n.parent&&(this.state===r.PARSING||this.state===r.PARSED)&&(c=this.mediaBuffer,v=this.media.currentTime,c&&s.a.isBuffered(c,v)&&s.a.isBuffered(c,v+.5)?(i=this.config,i.maxMaxBufferLength>=i.maxBufferLength&&(i.maxMaxBufferLength/=2,u.b.warn("AudioStreamController: reduce max buffer length to "+i.maxMaxBufferLength+"s")),this.state=r.IDLE):(u.b.warn("AudioStreamController: buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=r.BUFFER_FLUSHING,this.hls.trigger(f.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"})))}},t.prototype.onBufferFlushed=function(){var t=this,n=this.pendingData;n&&n.length?(u.b.log("AudioStreamController: appending pending audio data after buffer flushed"),n.forEach(function(n){t.hls.trigger(f.a.BUFFER_APPENDING,n)}),this.appended=!0,this.pendingData=[],this.state=r.PARSED):(this.state=r.IDLE,this.fragPrevious=null,this.tick())},nt(t,[{key:"state",set:function(n){if(this.state!==n){var t=this.state;this._state=n;u.b.log("audio stream:"+t+"->"+n)}},get:function(){return this._state}}]),t}(k.a);t.a=it},function(n,t,i){"use strict";function r(n,t,i,r){for(var h,e=void 0,s=void 0,c=void 0,o=void 0,l=void 0,a=window.VTTCue||window.TextTrackCue,f=0;f<r.rows.length;f++)if(e=r.rows[f],c=!0,o=0,l="",!e.isEmpty()){for(h=0;h<e.chars.length;h++)e.chars[h].uchar.match(/\s/)&&c?o++:(l+=e.chars[h].uchar,c=!1);e.cueStartTime=t;t===i&&(i+=.0001);s=new a(t,i,Object(u.b)(l.trim()));o>=16?o--:o++;s.line=navigator.userAgent.match(/Firefox\//)?f+1:f>7?f-2:f+1;s.align="left";s.position=Math.max(0,Math.min(100,o/32*100+(navigator.userAgent.match(/Firefox\//)?50:0)));n.addCue(s)}}Object.defineProperty(t,"__esModule",{value:!0});t.newCue=r;var u=i(28)},function(n,t){"use strict";t.a=function(){function r(n){return"string"==typeof n&&!!f[n.toLowerCase()]&&n.toLowerCase()}function t(n){return"string"==typeof n&&!!e[n.toLowerCase()]&&n.toLowerCase()}function n(n){for(var i,r,t=1;t<arguments.length;t++){i=arguments[t];for(r in i)n[r]=i[r]}return n}function i(i,f,e){var o=this,h=function(){if("undefined"!=typeof navigator)return/MSIE\s8\.0/.test(navigator.userAgent)}(),s={};h?o=document.createElement("custom"):s.enumerable=!0;o.hasBeenReset=!1;var c="",l=!1,a=i,v=f,y=e,p=null,w="",b=!0,k="auto",d="start",g=50,nt="middle",tt=50,it="middle";if(Object.defineProperty(o,"id",n({},s,{get:function(){return c},set:function(n){c=""+n}})),Object.defineProperty(o,"pauseOnExit",n({},s,{get:function(){return l},set:function(n){l=!!n}})),Object.defineProperty(o,"startTime",n({},s,{get:function(){return a},set:function(n){if("number"!=typeof n)throw new TypeError("Start time must be set to a number.");a=n;this.hasBeenReset=!0}})),Object.defineProperty(o,"endTime",n({},s,{get:function(){return v},set:function(n){if("number"!=typeof n)throw new TypeError("End time must be set to a number.");v=n;this.hasBeenReset=!0}})),Object.defineProperty(o,"text",n({},s,{get:function(){return y},set:function(n){y=""+n;this.hasBeenReset=!0}})),Object.defineProperty(o,"region",n({},s,{get:function(){return p},set:function(n){p=n;this.hasBeenReset=!0}})),Object.defineProperty(o,"vertical",n({},s,{get:function(){return w},set:function(n){var t=r(n);if(!1===t)throw new SyntaxError("An invalid or illegal string was specified.");w=t;this.hasBeenReset=!0}})),Object.defineProperty(o,"snapToLines",n({},s,{get:function(){return b},set:function(n){b=!!n;this.hasBeenReset=!0}})),Object.defineProperty(o,"line",n({},s,{get:function(){return k},set:function(n){if("number"!=typeof n&&n!==u)throw new SyntaxError("An invalid number or illegal string was specified.");k=n;this.hasBeenReset=!0}})),Object.defineProperty(o,"lineAlign",n({},s,{get:function(){return d},set:function(n){var i=t(n);if(!i)throw new SyntaxError("An invalid or illegal string was specified.");d=i;this.hasBeenReset=!0}})),Object.defineProperty(o,"position",n({},s,{get:function(){return g},set:function(n){if(n<0||n>100)throw new Error("Position must be between 0 and 100.");g=n;this.hasBeenReset=!0}})),Object.defineProperty(o,"positionAlign",n({},s,{get:function(){return nt},set:function(n){var i=t(n);if(!i)throw new SyntaxError("An invalid or illegal string was specified.");nt=i;this.hasBeenReset=!0}})),Object.defineProperty(o,"size",n({},s,{get:function(){return tt},set:function(n){if(n<0||n>100)throw new Error("Size must be between 0 and 100.");tt=n;this.hasBeenReset=!0}})),Object.defineProperty(o,"align",n({},s,{get:function(){return it},set:function(n){var i=t(n);if(!i)throw new SyntaxError("An invalid or illegal string was specified.");it=i;this.hasBeenReset=!0}})),o.displayState=void 0,h)return o}if("undefined"!=typeof window&&window.VTTCue)return window.VTTCue;var u="auto",f={"":!0,lr:!0,rl:!0},e={start:!0,middle:!0,end:!0,left:!0,right:!0};return i.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},i}()},function(n,t,i){"use strict";function o(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function s(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t}function h(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}function c(n,t){return n&&n.label===t.name&&!(n.textTrack1||n.textTrack2)}function l(n,t,i,r){return Math.min(t,r)-Math.max(n,i)}var r=i(1),f=i(4),a=i(68),e=i(69),v=i(70),y=i(0),u=i(27),p=function(n){function t(i){var u,f,h;return o(this,t),u=s(this,n.call(this,i,r.a.MEDIA_ATTACHING,r.a.MEDIA_DETACHING,r.a.FRAG_PARSING_USERDATA,r.a.FRAG_DECRYPTED,r.a.MANIFEST_LOADING,r.a.MANIFEST_LOADED,r.a.FRAG_LOADED,r.a.LEVEL_SWITCHING,r.a.INIT_PTS_FOUND)),(u.hls=i,u.config=i.config,u.enabled=!0,u.Cues=i.config.cueHandler,u.textTracks=[],u.tracks=[],u.unparsedVttFrags=[],u.initPTS=void 0,u.cueRanges=[],u.captionsTracks={},u.captionsProperties={textTrack1:{label:u.config.captionsTextTrack1Label,languageCode:u.config.captionsTextTrack1LanguageCode},textTrack2:{label:u.config.captionsTextTrack2Label,languageCode:u.config.captionsTextTrack2LanguageCode}},u.config.enableCEA708Captions)&&(f=new e.a(u,"textTrack1"),h=new e.a(u,"textTrack2"),u.cea608Parser=new a.a(0,f,h)),u}return h(t,n),t.prototype.addCues=function(n,t,i,r){for(var u,e,f=this.cueRanges,o=!1,s=f.length;s--;)if(u=f[s],e=l(u[0],u[1],t,i),e>=0&&(u[0]=Math.min(u[0],t),u[1]=Math.max(u[1],i),o=!0,e/(i-t)>.5))return;o||f.push([t,i]);this.Cues.newCue(this.captionsTracks[n],t,i,r)},t.prototype.onInitPtsFound=function(n){var t=this;void 0===this.initPTS&&(this.initPTS=n.initPTS);this.unparsedVttFrags.length&&(this.unparsedVttFrags.forEach(function(n){t.onFragLoaded(n)}),this.unparsedVttFrags=[])},t.prototype.getExistingTrack=function(n){var i=this.media,t,r;if(i)for(t=0;t<i.textTracks.length;t++)if(r=i.textTracks[t],r[n])return r;return null},t.prototype.createCaptionsTrack=function(n){var f=this.captionsProperties[n],e=f.label,o=f.languageCode,t=this.captionsTracks,r,i;t[n]||(r=this.getExistingTrack(n),r?(t[n]=r,Object(u.a)(t[n]),Object(u.b)(t[n],this.media)):(i=this.createTextTrack("captions",e,o),i&&(i[n]=!0,t[n]=i)))},t.prototype.createTextTrack=function(n,t,i){var r=this.media;if(r)return r.addTextTrack(n,t,i)},t.prototype.destroy=function(){f.a.prototype.destroy.call(this)},t.prototype.onMediaAttaching=function(n){this.media=n.media;this._cleanTracks()},t.prototype.onMediaDetaching=function(){var n=this.captionsTracks;Object.keys(n).forEach(function(t){Object(u.a)(n[t]);delete n[t]})},t.prototype.onManifestLoading=function(){this.lastSn=-1;this.prevCC=-1;this.vttCCs={ccOffset:0,presentationOffset:0};this._cleanTracks()},t.prototype._cleanTracks=function(){var i=this.media,n,t;if(i&&(n=i.textTracks,n))for(t=0;t<n.length;t++)Object(u.a)(n[t])},t.prototype.onManifestLoaded=function(n){var t=this,i;(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=void 0,this.cueRanges=[],this.config.enableWebVTT)&&(this.tracks=n.subtitles||[],i=this.media?this.media.textTracks:[],this.tracks.forEach(function(n,r){var u=void 0,f;r<i.length&&(f=i[r],c(f,n)&&(u=f));u||(u=t.createTextTrack("subtitles",n.name,n.lang));u.mode=n.default?t.hls.subtitleDisplay?"showing":"hidden":"disabled";t.textTracks.push(u)}))},t.prototype.onLevelSwitching=function(){this.enabled="NONE"!==this.hls.currentLevel.closedCaptions},t.prototype.onFragLoaded=function(n){var t=n.frag,e=n.payload,u,f,i;if("main"===t.type)u=t.sn,u!==this.lastSn+1&&(f=this.cea608Parser,f&&f.reset()),this.lastSn=u;else if("subtitle"===t.type)if(e.byteLength){if(void 0===this.initPTS)return void this.unparsedVttFrags.push(n);i=t.decryptdata;null!=i&&null!=i.key&&"AES-128"===i.method||this._parseVTTs(t,e)}else this.hls.trigger(r.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})},t.prototype._parseVTTs=function(n,t){var u=this.vttCCs,f,i;u[n.cc]||(u[n.cc]={start:n.start,prevCC:this.prevCC,"new":!0},this.prevCC=n.cc);f=this.textTracks;i=this.hls;v.a.parse(t,this.initPTS,u,n.cc,function(t){var u=f[n.trackId];if("disabled"===u.mode)return void i.trigger(r.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n});t.forEach(function(n){if(!u.cues.getCueById(n.id))try{u.addCue(n)}catch(i){var t=new window.TextTrackCue(n.startTime,n.endTime,n.text);t.id=n.id;u.addCue(t)}});i.trigger(r.a.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:n})},function(t){y.b.log("Failed to parse VTT cue: "+t);i.trigger(r.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n})})},t.prototype.onFragDecrypted=function(n){var i=n.payload,t=n.frag;if("subtitle"===t.type){if(void 0===this.initPTS)return void this.unparsedVttFrags.push(n);this._parseVTTs(t,i)}},t.prototype.onFragParsingUserdata=function(n){var t,i;if(this.enabled&&this.config.enableCEA708Captions)for(t=0;t<n.samples.length;t++)i=this.extractCea608Data(n.samples[t].bytes),this.cea608Parser.addData(n.samples[t].pts,i)},t.prototype.extractCea608Data=function(n){for(var h=31&n[0],t=2,i=void 0,r=void 0,u=void 0,e=void 0,o=void 0,f=[],s=0;s<h;s++)i=n[t++],r=127&n[t++],u=127&n[t++],e=0!=(4&i),o=3&i,0===r&&0===u||e&&0===o&&(f.push(r),f.push(u));return f},t}(f.a);t.a=p},function(n,t){"use strict";function e(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var s={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},h=function(n){var t=n;return s.hasOwnProperty(n)&&(t=s[n]),String.fromCharCode(t)},r=15,u=100,a={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},v={17:2,18:4,21:6,22:8,23:10,19:13,20:15},y={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},p={25:2,26:4,29:6,30:8,31:10,27:13,28:15},w=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],i={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(n){this.time=n},log:function(n){this.verboseFilter[n];this.verboseLevel}},f=function(n){for(var i=[],t=0;t<n.length;t++)i.push(n[t].toString(16));return i},c=function(){function n(t,i,r,u,f){e(this,n);this.foreground=t||"white";this.underline=i||!1;this.italics=r||!1;this.background=u||"black";this.flash=f||!1}return n.prototype.reset=function(){this.foreground="white";this.underline=!1;this.italics=!1;this.background="black";this.flash=!1},n.prototype.setStyles=function(n){for(var i,r=["foreground","underline","italics","background","flash"],t=0;t<r.length;t++)i=r[t],n.hasOwnProperty(i)&&(this[i]=n[i])},n.prototype.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},n.prototype.equals=function(n){return this.foreground===n.foreground&&this.underline===n.underline&&this.italics===n.italics&&this.background===n.background&&this.flash===n.flash},n.prototype.copy=function(n){this.foreground=n.foreground;this.underline=n.underline;this.italics=n.italics;this.background=n.background;this.flash=n.flash},n.prototype.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},n}(),b=function(){function n(t,i,r,u,f,o){e(this,n);this.uchar=t||" ";this.penState=new c(i,r,u,f,o)}return n.prototype.reset=function(){this.uchar=" ";this.penState.reset()},n.prototype.setChar=function(n,t){this.uchar=n;this.penState.copy(t)},n.prototype.setPenState=function(n){this.penState.copy(n)},n.prototype.equals=function(n){return this.uchar===n.uchar&&this.penState.equals(n.penState)},n.prototype.copy=function(n){this.uchar=n.uchar;this.penState.copy(n.penState)},n.prototype.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},n}(),k=function(){function n(){e(this,n);this.chars=[];for(var t=0;t<u;t++)this.chars.push(new b);this.pos=0;this.currPenState=new c}return n.prototype.equals=function(n){for(var i=!0,t=0;t<u;t++)if(!this.chars[t].equals(n.chars[t])){i=!1;break}return i},n.prototype.copy=function(n){for(var t=0;t<u;t++)this.chars[t].copy(n.chars[t])},n.prototype.isEmpty=function(){for(var t=!0,n=0;n<u;n++)if(!this.chars[n].isEmpty()){t=!1;break}return t},n.prototype.setCursor=function(n){this.pos!==n&&(this.pos=n);this.pos<0?(i.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>u&&(i.log("ERROR","Too large cursor position "+this.pos),this.pos=u)},n.prototype.moveCursor=function(n){var i=this.pos+n,t;if(n>1)for(t=this.pos+1;t<i+1;t++)this.chars[t].setPenState(this.currPenState);this.setCursor(i)},n.prototype.backSpace=function(){this.moveCursor(-1);this.chars[this.pos].setChar(" ",this.currPenState)},n.prototype.insertChar=function(n){n>=144&&this.backSpace();var t=h(n);if(this.pos>=u)return void i.log("ERROR","Cannot insert "+n.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!");this.chars[this.pos].setChar(t,this.currPenState);this.moveCursor(1)},n.prototype.clearFromPos=function(n){for(var t=void 0,t=n;t<u;t++)this.chars[t].reset()},n.prototype.clear=function(){this.clearFromPos(0);this.pos=0;this.currPenState.reset()},n.prototype.clearToEndOfRow=function(){this.clearFromPos(this.pos)},n.prototype.getTextString=function(){for(var t,i=[],r=!0,n=0;n<u;n++)t=this.chars[n].uchar," "!==t&&(r=!1),i.push(t);return r?"":i.join("")},n.prototype.setPenStyles=function(n){this.currPenState.setStyles(n);this.chars[this.pos].setPenState(this.currPenState)},n}(),o=function(){function n(){e(this,n);this.rows=[];for(var t=0;t<r;t++)this.rows.push(new k);this.currRow=r-1;this.nrRollUpRows=null;this.reset()}return n.prototype.reset=function(){for(var n=0;n<r;n++)this.rows[n].clear();this.currRow=r-1},n.prototype.equals=function(n){for(var i=!0,t=0;t<r;t++)if(!this.rows[t].equals(n.rows[t])){i=!1;break}return i},n.prototype.copy=function(n){for(var t=0;t<r;t++)this.rows[t].copy(n.rows[t])},n.prototype.isEmpty=function(){for(var t=!0,n=0;n<r;n++)if(!this.rows[n].isEmpty()){t=!1;break}return t},n.prototype.backSpace=function(){this.rows[this.currRow].backSpace()},n.prototype.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},n.prototype.insertChar=function(n){this.rows[this.currRow].insertChar(n)},n.prototype.setPen=function(n){this.rows[this.currRow].setPenStyles(n)},n.prototype.moveCursor=function(n){this.rows[this.currRow].moveCursor(n)},n.prototype.setCursor=function(n){i.log("INFO","setCursor: "+n);this.rows[this.currRow].setCursor(n)},n.prototype.setPAC=function(n){var t,f,o,e,s,u,h,c,l,a;if(i.log("INFO","pacData = "+JSON.stringify(n)),t=n.row-1,this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(f=0;f<r;f++)this.rows[f].clear();if(o=this.currRow+1-this.nrRollUpRows,e=this.lastOutputScreen,e&&(s=e.rows[o].cueStartTime,s&&s<i.time))for(u=0;u<this.nrRollUpRows;u++)this.rows[t-this.nrRollUpRows+u+1].copy(e.rows[o+u])}this.currRow=t;h=this.rows[this.currRow];null!==n.indent&&(c=n.indent,l=Math.max(c-1,0),h.setCursor(n.indent),n.color=h.chars[l].penState.foreground);a={foreground:n.color,underline:n.underline,italics:n.italics,background:"black",flash:!1};this.setPen(a)},n.prototype.setBkgData=function(n){i.log("INFO","bkgData = "+JSON.stringify(n));this.backSpace();this.setPen(n);this.insertChar(32)},n.prototype.setRollUpRows=function(n){this.nrRollUpRows=n},n.prototype.rollUp=function(){if(null===this.nrRollUpRows)return void i.log("DEBUG","roll_up but nrRollUpRows not set yet");i.log("TEXT",this.getDisplayText());var t=this.currRow+1-this.nrRollUpRows,n=this.rows.splice(t,1)[0];n.clear();this.rows.splice(this.currRow,0,n);i.log("INFO","Rolling up")},n.prototype.getDisplayText=function(n){var u;n=n||!1;for(var t=[],f="",e=-1,i=0;i<r;i++)u=this.rows[i].getTextString(),u&&(e=i+1,n?t.push("Row "+e+": '"+u+"'"):t.push(u.trim()));return t.length>0&&(f=n?"["+t.join(" | ")+"]":t.join("\n")),f},n.prototype.getTextAndFormat=function(){return this.rows},n}(),l=function(){function n(t,i){e(this,n);this.chNr=t;this.outputFilter=i;this.mode=null;this.verbose=0;this.displayedMemory=new o;this.nonDisplayedMemory=new o;this.lastOutputScreen=new o;this.currRollUpRow=this.displayedMemory.rows[r-1];this.writeScreen=this.displayedMemory;this.mode=null;this.cueStartTime=null}return n.prototype.reset=function(){this.mode=null;this.displayedMemory.reset();this.nonDisplayedMemory.reset();this.lastOutputScreen.reset();this.currRollUpRow=this.displayedMemory.rows[r-1];this.writeScreen=this.displayedMemory;this.mode=null;this.cueStartTime=null;this.lastCueEndTime=null},n.prototype.getHandler=function(){return this.outputFilter},n.prototype.setHandler=function(n){this.outputFilter=n},n.prototype.setPAC=function(n){this.writeScreen.setPAC(n)},n.prototype.setBkgData=function(n){this.writeScreen.setBkgData(n)},n.prototype.setMode=function(n){n!==this.mode&&(this.mode=n,i.log("INFO","MODE="+n),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=n)},n.prototype.insertChars=function(n){for(var r,t=0;t<n.length;t++)this.writeScreen.insertChar(n[t]);r=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";i.log("INFO",r+": "+this.writeScreen.getDisplayText(!0));"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(i.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},n.prototype.ccRCL=function(){i.log("INFO","RCL - Resume Caption Loading");this.setMode("MODE_POP-ON")},n.prototype.ccBS=function(){i.log("INFO","BS - BackSpace");"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},n.prototype.ccAOF=function(){},n.prototype.ccAON=function(){},n.prototype.ccDER=function(){i.log("INFO","DER- Delete to End of Row");this.writeScreen.clearToEndOfRow();this.outputDataUpdate()},n.prototype.ccRU=function(n){i.log("INFO","RU("+n+") - Roll Up");this.writeScreen=this.displayedMemory;this.setMode("MODE_ROLL-UP");this.writeScreen.setRollUpRows(n)},n.prototype.ccFON=function(){i.log("INFO","FON - Flash On");this.writeScreen.setPen({flash:!0})},n.prototype.ccRDC=function(){i.log("INFO","RDC - Resume Direct Captioning");this.setMode("MODE_PAINT-ON")},n.prototype.ccTR=function(){i.log("INFO","TR");this.setMode("MODE_TEXT")},n.prototype.ccRTD=function(){i.log("INFO","RTD");this.setMode("MODE_TEXT")},n.prototype.ccEDM=function(){i.log("INFO","EDM - Erase Displayed Memory");this.displayedMemory.reset();this.outputDataUpdate(!0)},n.prototype.ccCR=function(){i.log("CR - Carriage Return");this.writeScreen.rollUp();this.outputDataUpdate(!0)},n.prototype.ccENM=function(){i.log("INFO","ENM - Erase Non-displayed Memory");this.nonDisplayedMemory.reset()},n.prototype.ccEOC=function(){if(i.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var n=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory;this.nonDisplayedMemory=n;this.writeScreen=this.nonDisplayedMemory;i.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},n.prototype.ccTO=function(n){i.log("INFO","TO("+n+") - Tab Offset");this.writeScreen.moveCursor(n)},n.prototype.ccMIDROW=function(n){var t={flash:!1},r,u;(t.underline=n%2==1,t.italics=n>=46,t.italics)?t.foreground="white":(r=Math.floor(n/2)-16,u=["white","green","blue","cyan","red","yellow","magenta"],t.foreground=u[r]);i.log("INFO","MIDROW: "+JSON.stringify(t));this.writeScreen.setPen(t)},n.prototype.outputDataUpdate=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=i.time;null!==n&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&(this.outputFilter.newCue(this.cueStartTime,n,this.lastOutputScreen),!0===t&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue()),this.cueStartTime=this.displayedMemory.isEmpty()?null:n):this.cueStartTime=n,this.lastOutputScreen.copy(this.displayedMemory))},n.prototype.cueSplitAtTime=function(n){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,n,this.displayedMemory),this.cueStartTime=n))},n}(),d=function(){function n(t,i,r){e(this,n);this.field=t||1;this.outputs=[i,r];this.channels=[new l(1,i),new l(2,r)];this.currChNr=-1;this.lastCmdA=null;this.lastCmdB=null;this.bufferedData=[];this.startTime=null;this.lastTime=null;this.dataCounters={padding:0,char:0,cmd:0,other:0}}return n.prototype.getHandler=function(n){return this.channels[n].getHandler()},n.prototype.setHandler=function(n,t){this.channels[n].setHandler(t)},n.prototype.addData=function(n,t){var r=void 0,u=void 0,e=void 0,s=!1,o,h;for(this.lastTime=n,i.setTime(n),o=0;o<t.length;o+=2)(u=127&t[o],e=127&t[o+1],0!==u||0!==e)?((i.log("DATA","["+f([t[o],t[o+1]])+"] -> ("+f([u,e])+")"),r=this.parseCmd(u,e),r||(r=this.parseMidrow(u,e)),r||(r=this.parsePAC(u,e)),r||(r=this.parseBackgroundAttributes(u,e)),!r&&(s=this.parseChars(u,e)))&&(this.currChNr&&this.currChNr>=0?(h=this.channels[this.currChNr-1],h.insertChars(s)):i.log("WARNING","No channel found yet. TEXT-MODE?")),r?this.dataCounters.cmd+=2:s?this.dataCounters.char+=2:(this.dataCounters.other+=2,i.log("WARNING","Couldn't parse cleaned data "+f([u,e])+" orig: "+f([t[o],t[o+1]])))):this.dataCounters.padding+=2},n.prototype.parseCmd=function(n,t){var u=null,e=(20===n||28===n)&&t>=32&&t<=47,o=(23===n||31===n)&&t>=33&&t<=35,r;return!e&&!o?!1:n===this.lastCmdA&&t===this.lastCmdB?(this.lastCmdA=null,this.lastCmdB=null,i.log("DEBUG","Repeated command ("+f([n,t])+") is dropped"),!0):(u=20===n||23===n?1:2,r=this.channels[u-1],20===n||28===n?32===t?r.ccRCL():33===t?r.ccBS():34===t?r.ccAOF():35===t?r.ccAON():36===t?r.ccDER():37===t?r.ccRU(2):38===t?r.ccRU(3):39===t?r.ccRU(4):40===t?r.ccFON():41===t?r.ccRDC():42===t?r.ccTR():43===t?r.ccRTD():44===t?r.ccEDM():45===t?r.ccCR():46===t?r.ccENM():47===t&&r.ccEOC():r.ccTO(t-32),this.lastCmdA=n,this.lastCmdB=t,this.currChNr=u,!0)},n.prototype.parseMidrow=function(n,t){var r=null;return(17===n||25===n)&&t>=32&&t<=47?(r=17===n?1:2)!==this.currChNr?(i.log("ERROR","Mismatch channel in midrow parsing"),!1):(this.channels[r-1].ccMIDROW(t),i.log("DEBUG","MIDROW ("+f([n,t])+")"),!0):!1},n.prototype.parsePAC=function(n,t){var i=null,r=null,f=(n>=17&&n<=23||n>=25&&n<=31)&&t>=64&&t<=127,e=(16===n||24===n)&&t>=64&&t<=95,u;return!f&&!e?!1:n===this.lastCmdA&&t===this.lastCmdB?(this.lastCmdA=null,this.lastCmdB=null,!0):(i=n<=23?1:2,r=t>=64&&t<=95?1===i?a[n]:y[n]:1===i?v[n]:p[n],u=this.interpretPAC(r,t),this.channels[i-1].setPAC(u),this.lastCmdA=n,this.lastCmdB=t,this.currChNr=i,!0)},n.prototype.interpretPAC=function(n,t){var i=t,r={color:null,italics:!1,indent:null,underline:!1,row:n};return i=t>95?t-96:t-64,r.underline=1==(1&i),i<=13?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(i/2)]:i<=15?(r.italics=!0,r.color="white"):r.indent=4*Math.floor((i-16)/2),r},n.prototype.parseChars=function(n,t){var o=null,u=null,r=null,e,s;return(n>=25?(o=2,r=n-8):(o=1,r=n),r>=17&&r<=19)?(e=t,e=17===r?t+80:18===r?t+112:t+144,i.log("INFO","Special char '"+h(e)+"' in channel "+o),u=[e]):n>=32&&n<=127&&(u=0===t?[n]:[n,t]),u&&(s=f(u),i.log("DEBUG","Char codes =  "+s.join(",")),this.lastCmdA=null,this.lastCmdB=null),u},n.prototype.parseBackgroundAttributes=function(n,t){var i=void 0,r=void 0,u=void 0,f=void 0,e=(16===n||24===n)&&t>=32&&t<=47,o=(23===n||31===n)&&t>=45&&t<=47;return!(!e&&!o)&&(i={},16===n||24===n?(r=Math.floor((t-32)/2),i.background=w[r],t%2==1&&(i.background=i.background+"_semi")):45===t?i.background="transparent":(i.foreground="black",47===t&&(i.underline=!0)),u=n<24?1:2,f=this.channels[u-1],f.setBkgData(i),this.lastCmdA=null,this.lastCmdB=null,!0)},n.prototype.reset=function(){for(var n=0;n<this.channels.length;n++)this.channels[n]&&this.channels[n].reset();this.lastCmdA=null;this.lastCmdB=null},n.prototype.cueSplitAtTime=function(n){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(n)},n}();t.a=d},function(n,t){"use strict";function i(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var r=function(){function n(t,r){i(this,n);this.timelineController=t;this.trackName=r;this.startTime=null;this.endTime=null;this.screen=null}return n.prototype.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen),this.startTime=null)},n.prototype.newCue=function(n,t,i){(null===this.startTime||this.startTime>n)&&(this.startTime=n);this.endTime=t;this.screen=i;this.timelineController.createCaptionsTrack(this.trackName)},n}();t.a=r},function(n,t,i){"use strict";var r=i(3),e=i(28),o=i(9),u=function(n,t,i){return n.substr(i||0,t.length)===t},s=function(n){var t=parseInt(n.substr(-3)),i=parseInt(n.substr(-6,2)),u=parseInt(n.substr(-9,2)),f=n.length>9?parseInt(n.substr(0,n.indexOf(":"))):0;return Object(r.a)(t)&&Object(r.a)(i)&&Object(r.a)(u)&&Object(r.a)(f)?(t+=1e3*i,t+=6e4*u,t+=36e5*f):-1},f=function(n){for(var t=5381,i=n.length;i;)t=33*t^n.charCodeAt(--i);return(t>>>0).toString()},h=function(n,t,i){var r=n[t],u=n[r.prevCC];if(!u||!u.new&&r.new)return n.ccOffset=n.presentationOffset=r.start,void(r.new=!1);for(;u&&u.new;)n.ccOffset+=r.start-u.start,r.new=!1,r=u,u=n[r.prevCC];n.presentationOffset=i},c={parse:function(n,t,i,r,c,l){var g=Object(o.b)(new Uint8Array(n)).trim().replace(/\r\n|\n\r|\n|\r/g,"\n").split("\n"),k="00:00.000",w=0,a=0,p=0,d=[],v=void 0,b=!0,y=new e.a;y.oncue=function(n){var u=i[r],t=i.ccOffset;u&&u.new&&(void 0!==a?t=i.ccOffset=u.start:h(i,r,p));p&&(t=p+i.ccOffset-i.presentationOffset);n.startTime+=t-a;n.endTime+=t-a;n.id=f(n.startTime.toString())+f(n.endTime.toString())+f(n.text);n.text=decodeURIComponent(encodeURIComponent(n.text));n.endTime>0&&d.push(n)};y.onparsingerror=function(n){v=n};y.onflush=function(){if(v&&l)return void l(v);c(d)};g.forEach(function(n){if(b){if(u(n,"X-TIMESTAMP-MAP=")){b=!1;n.substr(16).split(",").forEach(function(n){u(n,"LOCAL:")?k=n.substr(6):u(n,"MPEGTS:")&&(w=parseInt(n.substr(7)))});try{t=t<0?t+8589934592:t;w-=t;a=s(k)/1e3;p=w/9e4;-1===a&&(v=new Error("Malformed X-TIMESTAMP-MAP: "+n))}catch(t){v=new Error("Malformed X-TIMESTAMP-MAP: "+n)}return}""===n&&(b=!1)}y.parse(n+"\n")});y.flush()}};t.a=c},function(n,t,i){"use strict";function o(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function s(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t}function h(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}function f(n){for(var i=[],t=0;t<n.length;t++)"subtitles"===n[t].kind&&i.push(n[t]);return i}var r=i(1),e=i(4),u=i(0),c=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),l=function(n){function t(i){o(this,t);var u=s(this,n.call(this,i,r.a.MEDIA_ATTACHED,r.a.MEDIA_DETACHING,r.a.MANIFEST_LOADING,r.a.MANIFEST_LOADED,r.a.SUBTITLE_TRACK_LOADED));return u.tracks=[],u.trackId=-1,u.media=null,u.subtitleDisplay=!0,u}return h(t,n),t.prototype._onTextTracksChanged=function(){if(this.media){for(var t=-1,i=f(this.media.textTracks),n=0;n<i.length;n++)if("hidden"===i[n].mode)t=n;else if("showing"===i[n].mode){t=n;break}this.subtitleTrack=t}},t.prototype.destroy=function(){e.a.prototype.destroy.call(this)},t.prototype.onMediaAttached=function(n){var t=this;this.media=n.media;this.media&&(this.queuedDefaultTrack&&(this.subtitleTrack=this.queuedDefaultTrack,delete this.queuedDefaultTrack),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval(function(){t.trackChangeListener()},500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},t.prototype.onMediaDetaching=function(){this.media&&(this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),this.media=null)},t.prototype.onManifestLoading=function(){this.tracks=[];this.trackId=-1},t.prototype.onManifestLoaded=function(n){var t=this,i=n.subtitles||[];this.tracks=i;this.trackId=-1;this.hls.trigger(r.a.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:i});i.forEach(function(n){n.default&&(t.media?t.subtitleTrack=n.id:t.queuedDefaultTrack=n.id)})},t.prototype.onTick=function(){var n=this.trackId,t=this.tracks[n],i;t&&(i=t.details,i&&!i.live||(u.b.log("(re)loading playlist for subtitle track "+n),this.hls.trigger(r.a.SUBTITLE_TRACK_LOADING,{url:t.url,id:n})))},t.prototype.onSubtitleTrackLoaded=function(n){var t=this;n.id<this.tracks.length&&(u.b.log("subtitle track "+n.id+" loaded"),this.tracks[n.id].details=n.details,n.details.live&&!this.timer&&(this.timer=setInterval(function(){t.onTick()},1e3*n.details.targetduration,this)),!n.details.live&&this.timer&&this._stopTimer())},t.prototype.setSubtitleTrackInternal=function(n){var f=this.hls,e=this.tracks,t,i;"number"!=typeof n||n<-1||n>=e.length||(this._stopTimer(),this.trackId=n,u.b.log("switching to subtitle track "+n),f.trigger(r.a.SUBTITLE_TRACK_SWITCH,{id:n}),-1===n)||(t=e[n],i=t.details,i&&!i.live||(u.b.log("(re)loading playlist for subtitle track "+n),f.trigger(r.a.SUBTITLE_TRACK_LOADING,{url:t.url,id:n})))},t.prototype._stopTimer=function(){this.timer&&(clearInterval(this.timer),this.timer=null)},t.prototype._toggleTrackModes=function(n){var u=this.media,e=this.subtitleDisplay,o=this.trackId,t,i,r;u&&(t=f(u.textTracks),-1===n?[].slice.call(t).forEach(function(n){n.mode="disabled"}):(i=t[o],i&&(i.mode="disabled")),r=t[n],r&&(r.mode=e?"showing":"hidden"))},c(t,[{key:"subtitleTracks",get:function(){return this.tracks}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(n){this.trackId!==n&&(this._toggleTrackModes(n),this.setSubtitleTrackInternal(n))}}]),t}(e.a);t.a=l},function(n,t,i){"use strict";function o(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function s(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t}function h(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var r=i(1),f=i(0),c=i(14),l=i(10),a=window,e=a.performance,u={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING"},v=function(n){function t(i){o(this,t);var f=s(this,n.call(this,i,r.a.MEDIA_ATTACHED,r.a.ERROR,r.a.KEY_LOADED,r.a.FRAG_LOADED,r.a.SUBTITLE_TRACKS_UPDATED,r.a.SUBTITLE_TRACK_SWITCH,r.a.SUBTITLE_TRACK_LOADED,r.a.SUBTITLE_FRAG_PROCESSED));return f.config=i.config,f.vttFragSNsProcessed={},f.vttFragQueues=void 0,f.currentlyProcessing=null,f.state=u.STOPPED,f.currentTrackId=-1,f.decrypter=new c.a(i.observer,i.config),f}return h(t,n),t.prototype.onHandlerDestroyed=function(){this.state=u.STOPPED},t.prototype.clearVttFragQueues=function(){var n=this;this.vttFragQueues={};this.tracks.forEach(function(t){n.vttFragQueues[t.id]=[]})},t.prototype.nextFrag=function(){if(null===this.currentlyProcessing&&this.currentTrackId>-1&&this.vttFragQueues[this.currentTrackId].length){var n=this.currentlyProcessing=this.vttFragQueues[this.currentTrackId].shift();this.fragCurrent=n;this.hls.trigger(r.a.FRAG_LOADING,{frag:n});this.state=u.FRAG_LOADING}},t.prototype.onSubtitleFragProcessed=function(n){n.success&&this.vttFragSNsProcessed[n.frag.trackId].push(n.frag.sn);this.currentlyProcessing=null;this.state=u.IDLE;this.nextFrag()},t.prototype.onMediaAttached=function(){this.state=u.IDLE},t.prototype.onError=function(n){var t=n.frag;t&&"subtitle"!==t.type||this.currentlyProcessing&&(this.currentlyProcessing=null,this.nextFrag())},t.prototype.doTick=function(){var t=this,e;switch(this.state){case u.IDLE:var i=this.tracks,n=this.currentTrackId,s=this.vttFragSNsProcessed[n],o=this.vttFragQueues[n],h=this.currentlyProcessing?this.currentlyProcessing.sn:-1,c=function(n){return s.indexOf(n.sn)>-1},l=function(n){return o.some(function(t){return t.sn===n.sn})};if(!i)break;if(n<i.length&&(e=i[n].details),void 0===e)break;e.fragments.forEach(function(i){c(i)||i.sn===h||l(i)||(i.encrypted?(f.b.log("Loading key for "+i.sn),t.state=u.KEY_LOADING,t.hls.trigger(r.a.KEY_LOADING,{frag:i})):(i.trackId=n,o.push(i),t.nextFrag()))})}},t.prototype.onSubtitleTracksUpdated=function(n){var t=this;f.b.log("subtitle tracks updated");this.tracks=n.subtitleTracks;this.clearVttFragQueues();this.vttFragSNsProcessed={};this.tracks.forEach(function(n){t.vttFragSNsProcessed[n.id]=[]})},t.prototype.onSubtitleTrackSwitch=function(n){if(this.currentTrackId=n.id,this.tracks&&-1!==this.currentTrackId){var t=this.tracks[this.currentTrackId];t&&t.details&&this.tick()}},t.prototype.onSubtitleTrackLoaded=function(){this.tick()},t.prototype.onKeyLoaded=function(){this.state===u.KEY_LOADING&&(this.state=u.IDLE,this.tick())},t.prototype.onFragLoaded=function(n){var f=this.fragCurrent,t=n.frag.decryptdata,o=n.frag,s=this.hls,i;if(this.state===u.FRAG_LOADING&&f&&"subtitle"===n.frag.type&&f.sn===n.frag.sn&&n.payload.byteLength>0&&null!=t&&null!=t.key&&"AES-128"===t.method){i=void 0;try{i=e.now()}catch(n){i=Date.now()}this.decrypter.decrypt(n.payload,t.key.buffer,t.iv.buffer,function(n){var t=void 0;try{t=e.now()}catch(n){t=Date.now()}s.trigger(r.a.FRAG_DECRYPTED,{frag:o,payload:n,stats:{tstart:i,tdecrypt:t}})})}},t}(l.a);t.a=v},function(n,t,i){"use strict";function o(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function s(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t}function h(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var c=i(4),f=i(1),u=i(2),r=i(0),l=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),a=window,v=a.XMLHttpRequest,e={WIDEVINE:"com.widevine.alpha",PLAYREADY:"com.microsoft.playready"},y=function(n,t){var i={videoCapabilities:[]};return t.forEach(function(n){i.videoCapabilities.push({contentType:'video/mp4; codecs="'+n+'"'})}),[i]},p=function(n,t,i){switch(n){case e.WIDEVINE:return y(0,i);default:throw Error("Unknown key-system: "+n);}},w=function(n){function t(i){o(this,t);var r=s(this,n.call(this,i,f.a.MEDIA_ATTACHED,f.a.MANIFEST_PARSED));return r._widevineLicenseUrl=i.config.widevineLicenseUrl,r._licenseXhrSetup=i.config.licenseXhrSetup,r._emeEnabled=i.config.emeEnabled,r._requestMediaKeySystemAccess=i.config.requestMediaKeySystemAccessFunc,r._mediaKeysList=[],r._media=null,r._hasSetMediaKeys=!1,r._isMediaEncrypted=!1,r._requestLicenseFailureCount=0,r}return h(t,n),t.prototype.getLicenseServerUrl=function(n){var t=void 0;switch(n){case e.WIDEVINE:t=this._widevineLicenseUrl;break;default:t=null}return t||(r.b.error('No license server URL configured for key-system "'+n+'"'),this.hls.trigger(f.a.ERROR,{type:u.b.KEY_SYSTEM_ERROR,details:u.a.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})),t},t.prototype._attemptKeySystemAccess=function(n,t,i){var f=this,u=p(n,0,i);if(!u)return void r.b.warn("Can not create config for key-system (maybe because platform is not supported):",n);r.b.log("Requesting encrypted media key-system access");this.requestMediaKeySystemAccess(n,u).then(function(t){f._onMediaKeySystemAccessObtained(n,t)}).catch(function(t){r.b.error('Failed to obtain key-system "'+n+'" access:',t)})},t.prototype._onMediaKeySystemAccessObtained=function(n,t){var u=this,i;r.b.log('Access for key-system "'+n+'" obtained');i={mediaKeys:null,mediaKeysSession:null,mediaKeysSessionInitialized:!1,mediaKeySystemAccess:t,mediaKeySystemDomain:n};this._mediaKeysList.push(i);t.createMediaKeys().then(function(t){i.mediaKeys=t;r.b.log('Media-keys created for key-system "'+n+'"');u._onMediaKeysCreated()}).catch(function(n){r.b.error("Failed to create media-keys:",n)})},t.prototype._onMediaKeysCreated=function(){var n=this;this._mediaKeysList.forEach(function(t){t.mediaKeysSession||(t.mediaKeysSession=t.mediaKeys.createSession(),n._onNewMediaKeySession(t.mediaKeysSession))})},t.prototype._onNewMediaKeySession=function(n){var t=this;r.b.log("New key-system session "+n.sessionId);n.addEventListener("message",function(i){t._onKeySessionMessage(n,i.message)},!1)},t.prototype._onKeySessionMessage=function(n,t){r.b.log("Got EME message event, creating license request");this._requestLicense(t,function(t){r.b.log("Received license data, updating key-session");n.update(t)})},t.prototype._onMediaEncrypted=function(n,t){r.b.log('Media is encrypted using "'+n+'" init data type');this._isMediaEncrypted=!0;this._mediaEncryptionInitDataType=n;this._mediaEncryptionInitData=t;this._attemptSetMediaKeys();this._generateRequestWithPreferredKeySession()},t.prototype._attemptSetMediaKeys=function(){if(!this._hasSetMediaKeys){var n=this._mediaKeysList[0];if(!n||!n.mediaKeys)return r.b.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(f.a.ERROR,{type:u.b.KEY_SYSTEM_ERROR,details:u.a.KEY_SYSTEM_NO_KEYS,fatal:!0});r.b.log("Setting keys for encrypted media");this._media.setMediaKeys(n.mediaKeys);this._hasSetMediaKeys=!0}},t.prototype._generateRequestWithPreferredKeySession=function(){var o=this,n=this._mediaKeysList[0],t,i,e;if(!n)return r.b.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(f.a.ERROR,{type:u.b.KEY_SYSTEM_ERROR,details:u.a.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(n.mediaKeysSessionInitialized)return void r.b.warn("Key-Session already initialized but requested again");t=n.mediaKeysSession;t||(r.b.error("Fatal: Media is encrypted but no key-session existing"),this.hls.trigger(f.a.ERROR,{type:u.b.KEY_SYSTEM_ERROR,details:u.a.KEY_SYSTEM_NO_SESSION,fatal:!0}));i=this._mediaEncryptionInitDataType;e=this._mediaEncryptionInitData;r.b.log('Generating key-session request for "'+i+'" init data type');n.mediaKeysSessionInitialized=!0;t.generateRequest(i,e).then(function(){r.b.debug("Key-session generation succeeded")}).catch(function(n){r.b.error("Error generating key-session request:",n);o.hls.trigger(f.a.ERROR,{type:u.b.KEY_SYSTEM_ERROR,details:u.a.KEY_SYSTEM_NO_SESSION,fatal:!1})})},t.prototype._createLicenseXhr=function(n,t,i){var e=new v,o=this._licenseXhrSetup;try{if(o)try{o(e,n)}catch(t){e.open("POST",n,!0);o(e,n)}e.readyState||e.open("POST",n,!0)}catch(n){return r.b.error("Error setting up key-system license XHR",n),void this.hls.trigger(f.a.ERROR,{type:u.b.KEY_SYSTEM_ERROR,details:u.a.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}return e.responseType="arraybuffer",e.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,e,n,t,i),e},t.prototype._onLicenseRequestReadyStageChange=function(n,t,i,e){switch(n.readyState){case 4:if(200===n.status)this._requestLicenseFailureCount=0,r.b.log("License request succeeded"),e(n.response);else{if(r.b.error("License Request XHR failed ("+t+"). Status: "+n.status+" ("+n.statusText+")"),++this._requestLicenseFailureCount<=3){var o=4-this._requestLicenseFailureCount;return r.b.warn("Retrying license request, "+o+" attempts left"),void this._requestLicense(i,e)}this.hls.trigger(f.a.ERROR,{type:u.b.KEY_SYSTEM_ERROR,details:u.a.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}}},t.prototype._generateLicenseRequestChallenge=function(n,t){var i=void 0;return n.mediaKeySystemDomain===e.PLAYREADY?r.b.error("PlayReady is not supported (yet)"):n.mediaKeySystemDomain===e.WIDEVINE?i=t:r.b.error("Unsupported key-system:",n.mediaKeySystemDomain),i},t.prototype._requestLicense=function(n,t){var i,e,o;if(r.b.log("Requesting content license for key-system"),i=this._mediaKeysList[0],!i)return r.b.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(f.a.ERROR,{type:u.b.KEY_SYSTEM_ERROR,details:u.a.KEY_SYSTEM_NO_ACCESS,fatal:!0});e=this.getLicenseServerUrl(i.mediaKeySystemDomain);o=this._createLicenseXhr(e,n,t);r.b.log("Sending license request to URL: "+e);o.send(this._generateLicenseRequestChallenge(i,n))},t.prototype.onMediaAttached=function(n){var i=this,t;this._emeEnabled&&(t=n.media,this._media=t,t.addEventListener("encrypted",function(n){i._onMediaEncrypted(n.initDataType,n.initData)}))},t.prototype.onManifestParsed=function(n){if(this._emeEnabled){var t=n.levels.map(function(n){return n.audioCodec}),i=n.levels.map(function(n){return n.videoCodec});this._attemptKeySystemAccess(e.WIDEVINE,t,i)}},l(t,[{key:"requestMediaKeySystemAccess",get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}]),t}(c.a);t.a=w},function(n,t,i){"use strict";i.d(t,"a",function(){return r});var r=function(){return"undefined"!=typeof window&&window.navigator&&window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess.bind(window.navigator):null}()},function(){
/*! http://mths.be/endswith v0.2.0 by @mathias */
String.prototype.endsWith||function(){"use strict";var n=function(){try{var n={},t=Object.defineProperty,i=t(n,n,n)&&t}catch(n){}return i}(),i={}.toString,t=function(n){var f,r,c,e,u;if(null==this)throw TypeError();if(f=String(this),n&&"[object RegExp]"==i.call(n))throw TypeError();var o=f.length,s=String(n),h=s.length,t=o;if(arguments.length>1&&(r=arguments[1],void 0!==r&&(t=r?Number(r):0)!=t&&(t=0)),c=Math.min(Math.max(t,0),o),e=c-h,e<0)return!1;for(u=-1;++u<h;)if(f.charCodeAt(e+u)!=s.charCodeAt(u))return!1;return!0};n?n(String.prototype,"endsWith",{value:t,configurable:!0,writable:!0}):String.prototype.endsWith=t}()}]).default});ni=this.Hls}catch(hi){}Array.prototype.findIndexOfNth||Object.defineProperty(Array.prototype,"findIndexOfNth",{value:function(n,t){var i,r;if(t<1)throw"N must be greater than 0";for(i=0;i<this.length;){if(r=this[i],n.call(window,r,i,this)&&(t--,t===0))return i;i++}return-1}});Array.prototype.forEach||(Array.prototype.forEach=function(n){var r,t,i,u,f;if(this==null)throw new TypeError("this is null or not defined");if(i=Object(this),u=i.length>>>0,typeof n!="function")throw new TypeError(n+" is not a function");for(arguments.length>1&&(r=arguments[1]),t=0;t<u;)t in i&&(f=i[t],n.call(r,f,t,i)),t++});Array.prototype.filter||(Array.prototype.filter=function(n){"use strict";var i,f,r,e,t,u;if(this===void 0||this===null)throw new TypeError;if(i=Object(this),f=i.length>>>0,typeof n!="function")throw new TypeError;for(r=[],e=arguments.length>=2?arguments[1]:void 0,t=0;t<f;t++)t in i&&(u=i[t],n.call(e,u,t,i)&&r.push(u));return r});Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(n){var i,u,f,t,r;if(this==null)throw new TypeError('"this" is null or not defined');if(i=Object(this),u=i.length>>>0,typeof n!="function")throw new TypeError("predicate must be a function");for(f=arguments[1],t=0;t<u;){if(r=i[t],n.call(f,r,t,i))return r;t++}return undefined}});Array.prototype.map||(Array.prototype.map=function(n){var f,r,t,i,u,e,o;if(this==null)throw new TypeError("this is null or not defined");if(i=Object(this),u=i.length>>>0,typeof n!="function")throw new TypeError(n+" is not a function");for(arguments.length>1&&(f=arguments[1]),r=new Array(u),t=0;t<u;)t in i&&(e=i[t],o=n.call(f,e,t,i),r[t]=o),t++;return r});Array.prototype.findIndex||(Array.prototype.findIndex=function(n){var t;if(this==null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof n!="function")throw new TypeError("predicate must be a function");var i=Object(this),u=i.length>>>0,f=arguments[1],r;for(t=0;t<u;t++)if(r=i[t],n.call(f,r,t,i))return t;return-1});Array.prototype.reduce||(Array.prototype.reduce=function(n){"use strict";if(this==null)throw new TypeError("Array.prototype.reduce called on null or undefined");if(typeof n!="function")throw new TypeError(n+" is not a function");var i=Object(this),u=i.length>>>0,t=0,r;if(arguments.length>=2)r=arguments[1];else{while(t<u&&!(t in i))t++;if(t>=u)throw new TypeError("Reduce of empty array with no initial value");r=i[t++]}for(;t<u;t++)t in i&&(r=n(r,i[t],t,i));return r});Function.prototype.bind||(Function.prototype.bind=function(n){if(typeof this!="function")throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var r=Array.prototype.slice.call(arguments,1),u=this,t=function(){},i=function(){return u.apply(this instanceof t?this:n,r.concat(Array.prototype.slice.call(arguments)))};return this.prototype&&(t.prototype=this.prototype),i.prototype=new t,i});Array.from||(Array.from=function(){var t=Object.prototype.toString,n=function(n){return typeof n=="function"||t.call(n)==="[object Function]"},i=function(n){var t=Number(n);return isNaN(t)?0:t===0||!isFinite(t)?t:(t>0?1:-1)*Math.floor(Math.abs(t))},r=Math.pow(2,53)-1,u=function(n){var t=i(n);return Math.min(Math.max(t,0),r)};return function(t){var h=this,c=Object(t),i,o;if(t==null)throw new TypeError("Array.from requires an array-like object - not null or undefined");if(i=arguments.length>1?arguments[1]:void undefined,typeof i!="undefined"){if(!n(i))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(o=arguments[2])}for(var f=u(c.length),s=n(h)?Object(new h(f)):new Array(f),r=0,e;r<f;)e=c[r],s[r]=i?typeof o=="undefined"?i(e,r):i.call(o,e,r):e,r+=1;return s.length=f,s}}());o=function(){function n(){}return n.VideoAudioMode={audio:0,audioOnMouseOver:1,muted:2},n.OnClickVideoAdUnitMode={ReadMore:0,Scroll:1},n.ViewProgress={firstQuartile:1,midpoint:2,thirdQuartile:3,complete:4},n.MediaSourceType={Url:1,Image:2,Script:3,Html:4,Video:5,VideoTag:6,OnClickIFrame:7,HeaderBidding:8},n.MediaSourceTypesFlags={None:0,Url:1,Image:2,Script:4,Html:8,Video:16,VideoTag:32,OnClickIFrame:64,HeaderBidding:128},n.TrackingEventType={adFill:1,adView:2,infinityVolume:3,partnerVolume:4,headerBiddingVolume:5,videoAdPlayError:6},n.AdFillCheckStatus={skipped:1,failed:2,success:3},n.chromePopApproach={notification:0,notificationEx:1,tabUnder:2,tabOver:3,doublePop:4,hidden:5,mixed:6},n.RelativePlacementType={Inside:0,Before:1,After:2},n.CssTransitionTimingFunction={Linear:0,Ease:1,EaseIn:2,EaseOut:3,EaseInOut:4},n.VideoButtonDisplayMode={always:0,onHover:1,never:2},n.RelativeAlignment={Left:0,Right:1,Over:2},n}();u=function(){function n(){this._handlers=[];this._triggered=!1}return n.prototype.addHandler=function(n,t){this._handlers.push({handler:n,callContext:t})},n.prototype.removeHandler=function(n){if(n===undefined){this.removeAllHandlers();return}var t=this._handlers.findIndex(function(t){return t.handler===n});t!==-1&&this._handlers.splice(t,1)},n.prototype.getTriggered=function(){return this._triggered},n.prototype.removeAllHandlers=function(){this._handlers=[]},n.prototype.trigger=function(n){for(var i,t=0;t<this._handlers.length;t++)i=this._handlers[t].callContext||this,this._handlers[t].handler.call(i,n);this._triggered=!0},n.prototype.triggerOnce=function(n){this._triggered||this.trigger(n)},n}();c.prototype={setOneTime:function(n){this._isOneTime=n},setThrottle:function(n){this._callInterval=n},setTimeout:function(n,t){if(this._timeout!=null)throw"Timeout cannot be changed";this._timeoutCallback=n;var i=this;this._timeout=setTimeout(function(){i._timeout=null;i._timeoutCallback&&i._disabled===!1&&(i._canceledByTimeout=!0,i._timeoutCallback.apply(i._context),i._timeoutCallback=null)},t)},setDisabled:function(n){this._disabled=n},getValue:function(){return this._value}};a=function(n,t){this._name=n;this._enableSendToServer=t.enableSendToServer?!0:!1;this._level=t.level||"Info"};a.prototype={getName:function(){return this._name},getLevel:function(){return this._level},info:function(n){this._level==="Info"&&this._writeLog(this._name+" [INFO]: "+n)},dump:function(n,t){function i(n,t){return t&&typeof t=="string"&&t.length>100?t.substr(0,100)+"...":t}if(this._level==="Info"){this.info(n);var r=this;this._groupOutput(function(){r._writeLog(JSON.stringify(t,i,4))})}},error:function(n){(this._level==="Info"||this._level==="Error")&&this._writeError(this._name+" [ERROR]: "+n)},_groupOutput:function(n){console.group?(console.group(),n(),console.groupEnd()):n()},_writeError:function(n){console.error?console.error(n):(console.log(n),console.trace&&console.trace());this._enableSendToServer&&this._sendToServer(n)},_writeLog:function(n){console.log(n);this._enableSendToServer&&this._sendToServer(n)},_sendToServer:function(n){var t=new XMLHttpRequest;t.open("POST","//infinity.pub.com/log.aspx?msg="+encodeURIComponent(n));t.send("")}};b=function(){this._actions=[];this._onActionFailedEvent=new u;this._disposed=!1;this._activePromiseReject=null};b.prototype={addAction:function(n){this._actions.push(n)},onActionFailed:function(n){this._onActionFailedEvent.addHandler(n)},run:function(){function t(t){return function(i){return n._disposed?e.resolve():(n._onActionFailedEvent.trigger(i),n._actions[t]())}}if(this._disposed)return e.reject("Aborted");if(this._actions.length===0)return e.reject();var n=this;return new e(function(i,r){var u,f,e;for(n._activePromiseReject=r,u=null,f=0;f<n._actions.length;f++)u==null?u=n._actions[f]():(e=t(f),u=u.catch(e));u.then(function(t){n._activePromiseReject=null;n._disposed||i(t)},function(t){n._activePromiseReject=null;n._disposed||(n._onActionFailedEvent.trigger(t),r())})})},dispose:function(){this._disposed=!0;this._activePromiseReject&&(this._activePromiseReject("Aborted"),this._activePromiseReject=null);this._onActionFailedEvent.removeAllHandlers()}};ti=function(n){this._source=n};ti.prototype={toSchemaless:function(){if(this._source[0]==="/")return this._source;var n=this._source.indexOf("/");return n===0||n===-1?this._source:this._source.substring(n)}};rt=function(){function t(t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])}var n=this;Array.from(arguments).forEach(t)};ii=function(n){this._element=n;this.raw=this._element};ii.prototype={setAnimation:function(n){this._element.style["-webkit-transition"]=n;this._element.style["-moz-transition"]=n;this._element.style["-o-transition"]=n;this._element.style.transition=n},_getTransitionEndEventName:function(){var n={transition:"transitionend","-webkit-transition":"webkitTransitionEnd","-moz-transition":"transitionend","-o-transition":"otransitionend"},i=document.createElement("iframe");for(var t in n)if(typeof i.style[t]!="undefined")return n[t];return null},onceAnimationEnd:function(n,t,i){var r=this._getTransitionEndEventName(),u,f;if(r==null)setTimeout(i,t);else{u=this;f=function(t){t.propertyName===n&&t.target==u._element&&(i(),u.off(r,f))};this.on(r,f)}},setLeftPx:function(n){this._element.style.left=n+"px"},setTopPx:function(n){this._element.style.top=n+"px"},setWidthPx:function(n){this._element.style.width=n+"px"},getLeftPx:function(){return typeof this._element.style.left=="undefined"||this._element.style.left==null?null:this._element.style.left.replace("px","")},getTopPx:function(){return typeof this._element.style.top=="undefined"||this._element.style.top==null?null:this._element.style.top.replace("px","")},getWidthPx:function(){return typeof this._element.style.width=="undefined"||this._element.style.width==null?null:this._element.style.width.replace("px","")},getHeightPx:function(){return typeof this._element.style.height=="undefined"||this._element.style.height==null?null:this._element.style.height.replace("px","")},setHeightPx:function(n){this._element.style.height=n+"px"},hide:function(){this._element.style.display="none"},on:function(n,t,i){if(this._element.addEventListener)this._element.addEventListener(n,t,i);else if(this._element.attachEvent)this._element.attachEvent("on"+n,t);else throw"Cannot add event. Browser is not supported";},off:function(n,t){if(this._element.removeEventListener)this._element.removeEventListener(n,t);else if(this._element.detachEvent)this._element.detachEvent("on"+n,t);else throw"Cannot remove event. Browser is not supported";}};ri=function(n){this._document=n};ri.prototype={insertStyle:function(n){var t=this._document.createElement("style"),i;t.type="text/css";t.innerHTML=n;i=this._document.querySelector("head");i.appendChild(t)}};oi=function(){function n(n){for(var i=[],t=1;t<arguments.length;t++)i[t-1]=arguments[t];this._value=n;this._fallbackValues=[];i!=null&&(this._fallbackValues=i)}return n.prototype.addFallback=function(n){this._fallbackValues.push(n)},n.prototype.resolve=function(){return this._value==null?this._fallbackValues.find(function(n){return n!=null}):this._value},n}();y=function(n){this._device=n.getDevice();this._os=n.getOS();this._browser=n.getBrowser();this._os=n.getOS()};y.prototype={getScreenWidth:function(){return window.screen.width},getScreenHeight:function(){return window.screen.height},getViewPort:function(){return new ut(this)},getBoundingClientRect:function(n){var t,i;return this.__getBoundingClientRect||(t=parseInt(this._browser.major),this._os.name==="Android"&&(this._browser.name==="Chrome"||this._browser.name==="Chromium")&&t>=44&&t!==48?(i=this,this.__getBoundingClientRect=function(n){return i._getBoundingClientRectVisualViewport(n)}):this.__getBoundingClientRect=function(n){return n.getBoundingClientRect()}),this.__getBoundingClientRect(n)},_getBoundingClientRectVisualViewport:function(n){var r=window.top.pageYOffset,u=window.top.pageXOffset;window.visualViewport&&(r=window.visualViewport.pageTop,u=window.visualViewport.pageLeft);var o=window.top.document,t=o.documentElement.getBoundingClientRect(),f=t.top<0?t.top*-1:0,e=t.left<0?t.left*-1:0,i=n.getBoundingClientRect(),s=f+i.top,h=f+i.bottom,c=s-r,l=h-r,a=e+i.left,v=e+i.right,y=a-u,p=v-u;return Object.freeze({top:c,left:y,bottom:l,right:p})},getVideoForcedToPlayFullscreen:function(){var n=this._device.model==="iPhone";return n&&this.getOSVersion()<10},getIsDesktop:function(){return typeof this._device.type=="undefined"||this._device.type==="tablet"&&this._browser.name==="IE"&&/Tablet PC/.test(navigator.userAgent)},getIsMobileOrTabletSafari:function(){return!this.getIsDesktop()&&(this._browser.name==="Mobile Safari"||this._browser.name==="Safari")},getIsiOS:function(){return!this.getIsDesktop()&&this._os.name==="iOS"},getOSVersion:function(){return parseInt(this._os.version.split(".")[0])},getBrowserVersion:function(){return parseInt(this._browser.major)},getIsIE:function(){return this._browser.name==="IE"},getIsEdge:function(){return this._browser.name==="Edge"}};ut=function(n){this._clientInfo=n};ut.prototype={getOverflow:function(n){function r(n){return n<0?0:n}function u(n,t){return n>t?t:n}var t=n.bottom-n.top,i=n.right-n.left,o=this.getSize(),s=u(r(n.top*-1),t),h=u(r(n.bottom-o.height),t),c=u(r(n.left*-1),i),l=u(r(n.right-o.width),i),f=s+h,e=c+l,a=f*i+e*t-f*e;return{offTop:s,offBottom:h,offLeft:c,offRight:l,offVertical:f,offHorizontal:e,totalHeight:t,totalWidth:i,totalAreaOff:a,totalArea:t*i}},getSize:function(){if(!this._clientInfo.getIsDesktop())return{width:window.visualViewport?window.visualViewport.width:window.top.innerWidth,height:window.visualViewport?window.visualViewport.height:window.top.innerHeight};var n=window.top.document;return n.compatMode==="BackCompat"?{width:n.body.clientWidth,height:n.body.clientHeight}:{width:n.documentElement.clientWidth,height:n.documentElement.clientHeight}}};ft=function(n,t,i){this._adContainer=n;this._video=null;this._clientInfo=t;this._log=i;this._mediaFile=null;this._onPlayStartedEvent=new u;this._onPlayEndedEvent=new u;this._skippedEvent=new u;this._onVolumeChangedEvent=new u;this._pauseEvent=new u;this._resumeEvent=new u;this._enterFullscreenEvent=new u;this._exitFullscreenEvent=new u;this._clickEvent=new u;this._waitingForDataChangedEvent=new u;this._isFullscreen=null;this._hls=null;this.Hls=ni;this._playStarted=!1;this._videoReadyState={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4}};ft.prototype={canPlay:function(n){var t=document.createElement("video");return n.deliveryType==="streaming"&&n.mimeType==="application/vnd.apple.mpegurl"?this.Hls&&this.Hls.isSupported()?"probably":t.canPlayType?t.canPlayType(n.mimeType):"":t.canPlayType?t.canPlayType(n.mimeType):""},getMediaFile:function(){return this._mediaFile},loadMediaFile:function(n){if(this._log.info("Loading media file: "+this._mediaFileToString(n)),this._video=this._createVideo(n),n.deliveryType==="streaming"&&n.mimeType==="application/vnd.apple.mpegurl"){this._adContainer.insert(this._video);var t=this;return this._loadStreamingPlaylist(t._video,n).then(function(){return t._loadVideoSrc(n)},function(n){return t._adContainer.remove(t._video),t._mediaFile=null,e.reject(n)})}return this._video.src=n.fileURL,this._adContainer.insert(this._video),this._loadVideoSrc(n)},_mediaFileToString:function(n){return JSON.stringify({delivery:n.deliveryType,width:n.width,height:n.height})},_loadVideoSrc:function(n){var t=this;return new e(function(i,r){function u(n){t._log.info("Play attempt to preload video was rejected. Reason:"+n);t._adContainer.remove(t._video);t._mediaFile=null;r(n)}function f(){if(t._video.error){u(t._video.error);return}if(t._video.readyState<t._videoReadyState.HAVE_METADATA){t._log.info("Play attempt to preload video was accepted. Waiting for metadata to load");var r="loadedmetadata",f=function(){t._video.removeEventListener(r,f);t._video.removeEventListener("error",e);t._log.info("Video preloaded and paused");t._video.pause();t._mediaFile=n;i()},e=function(){t._video.removeEventListener(r,f);t._video.removeEventListener("error",e);u(t._video.error)};t._video.addEventListener(r,f);t._video.addEventListener("error",e)}else t._log.info("Video preloaded and paused"),t._video.pause(),t._mediaFile=n,i()}t._log.info("Initiating play to pre-load video");t._video.playEx().then(f).catch(u)})},_capDevicePixelRatio:function(){var n=window.devicePixelRatio||1,t,i;n>1?(t=this._adContainer.getHeight(),i=this._clientInfo.getIsDesktop()?720:360,window.__devicePixelRatio=t>=i?1:Math.min(n,Math.floor(i/t*100)/100)):window.__devicePixelRatio=n;this._log.info("HLS will use device to pixel ratio of: "+window.__devicePixelRatio+". Real ratio was: "+n)},_loadStreamingPlaylist:function(n,t){var i=this;return new e(function(r,u){if(i.Hls.isSupported()){i._capDevicePixelRatio();var f=new i.Hls({capLevelToPlayerSize:!0,maxBufferLength:3,maxMaxBufferLength:3,maxBufferSize:3145728,startLevel:-1});f.attachMedia(n);f.once(i.Hls.Events.MEDIA_ATTACHED,function(){f.loadSource(t.fileURL);f.once(i.Hls.Events.MANIFEST_PARSED,function(){f.off(i.Hls.Events.ERROR,e);r()})});function e(n,t){t.fatal&&(i._log.info("Fatal HLS error. Type: "+t.type+" Details: "+t.details),f.destroy(),u())}f.once(i.Hls.Events.ERROR,e);i._hls=f}else n.canPlayType("application/vnd.apple.mpegurl")?(n.src=t.fileURL,r()):u()})},enterFullscreen:function(){var n=this._video;if(!n)return!1;if(this._isFullscreen)return!0;if(screenfull.enabled){try{screenfull.request(n)}catch(t){return!1}return!0}if(this._clientInfo.getIsiOS()&&this._video.webkitSupportsFullscreen)try{if(n.webkitRequestFullscreen)return n.webkitRequestFullscreen(),!0;if(n.webkitEnterFullscreen)return n.webkitEnterFullscreen(),!0}catch(t){return!1}return!1},_setupEvents:function(){var n=this;this._activatePauseResumeNotification();this._activateFullscreenNotification();this._video.addEventListener("waiting",function(){n._waitingForDataChangedEvent.trigger()});this._video.addEventListener("ended",function(){n._waitingForDataChangedEvent.trigger()});this._video.addEventListener("pause",function(){n._waitingForDataChangedEvent.trigger()});this._video.addEventListener("canplay",function(){n._waitingForDataChangedEvent.trigger()});this._video.addEventListener("canplaythrough",function(){n._waitingForDataChangedEvent.trigger()});this._video.addEventListener("ended",function(){n._onPlayEndedEvent.trigger()});this._video.addEventListener("volumechange",function(){n._onVolumeChangedEvent.trigger()})},getCurrentTime:function(){return this._mediaFile===null||this._video===null?0:this._video.currentTime},getDuration:function(){return this._mediaFile===null||this._video===null?0:this._video.duration},getVolume:function(){return this._mediaFile===null||this._video===null?null:this._video.muted?0:this._video.volume},getPaused:function(){return this._mediaFile===null||this._video===null?null:this._video.paused},getWaitingForData:function(){return this._video?!this._video.paused&&!this._video.ended&&this._video.readyState<=this._videoReadyState.HAVE_CURRENT_DATA:!1},onWaitingForDataChanged:function(n){this._waitingForDataChangedEvent.addHandler(n)},setVolume:function(n){function r(n){t._log.error("Failed to resume video after video being paused due to volume change. Reason: "+n)}var i,t;return this._mediaFile===null||this._video===null?null:n===0?(this._video.muted=!0,!0):(i=this._video.paused,this._video.muted=!1,this._video.volume=n,t=this,i===!1&&this._video.paused)?(t._log.info("Browser blocked video after it was unmuted. Muted video and attempting to resume"),this._video.muted=!0,this._clientInfo.getIsiOS()?setTimeout(function(){t._video.playEx().catch(r)},10):this._video.playEx().catch(r),!1):!0},skip:function(){return this._skippedEvent.trigger(),this.dispose(),e.resolve()},play:function(){var n=this,t=!1,i=0;return new e(function r(u,f){function o(){t||(t=!0,n._log.info("Video triggered playing event. Resolving play promise"),n._video.removeEventListener("playing",o),n._video.removeEventListener("error",e),n._playStarted||(n._playStarted=!0,n._onPlayStartedEvent.triggerOnce(),n._setupEvents(n._video)),u())}function e(s){if(!t){if(t=!0,n._video.removeEventListener("playing",o),n._video.removeEventListener("error",e),!n._video.muted&&i<5){n._log.info("Video triggered error event. Previous play attempt was on unmuted video. Attempting to play muted");n._video.muted=!0;i++;t=!1;r(u,f);return}n._log.info("Video triggered error event on muted video. Rejecting play promise");f(s)}}if(n._mediaFile==null){f("No MediaFile Loaded");return}if(n._playStarted&&!n._video.paused){u();return}n._video.addEventListener("playing",o);n._video.addEventListener("error",e);n._log.info(n._playStarted?"Resuming video":"Starting video");n._clientInfo.getIsiOS()?n._startPlayOnIOS(e):n._clientInfo.getIsIE()&&n._clientInfo.getBrowserVersion()<=10?setTimeout(function(){n._video.playEx().catch(e)},10):n._video.playEx().catch(e)})},_startPlayOnIOS:function(n){var t=this;setTimeout(function(){t._video.currentTime=t._video.currentTime===0?.01:t._video.currentTime;t._video.playEx().then(function(){t._clientInfo.getOSVersion()<10&&setTimeout(function(){t._video.paused&&n("NotAllowedError: Play attempt blocked")},50)}).catch(n)},10)},pause:function(){return this._mediaFile==null||this._video===null?e.reject("No MediaFile Loaded"):(this._video.pause(),e.resolve())},dispose:function(){(this._hls!=null&&(this._hls.destroy(),this._hls=null),this._mediaFile!==null&&this._video!==null)&&(this._adContainer.remove(this._video),this._mediaFile=null,this._onPlayStartedEvent.removeAllHandlers(),this._onPlayEndedEvent.removeAllHandlers(),this._onVolumeChangedEvent.removeAllHandlers(),this._clickEvent.removeAllHandlers(),this._pauseEvent.removeAllHandlers(),this._resumeEvent.removeAllHandlers(),this._enterFullscreenEvent.removeAllHandlers(),this._exitFullscreenEvent.removeAllHandlers(),this._waitingForDataChangedEvent.removeAllHandlers(),this._skippedEvent.removeAllHandlers())},onPlayStarted:function(n){this._onPlayStartedEvent.addHandler(n)},onPlayEnded:function(n){this._onPlayEndedEvent.addHandler(n)},onClick:function(n){this._clickEvent.addHandler(n)},onVolumeChanged:function(n){this._onVolumeChangedEvent.addHandler(n)},onPause:function(n){this._pauseEvent.addHandler(n)},offPause:function(n){this._pauseEvent.removeHandler(n)},onResume:function(n){this._resumeEvent.addHandler(n)},offResume:function(n){this._resumeEvent.removeHandler(n)},onSkipped:function(n){this._skippedEvent.addHandler(n)},onEnterFullscreen:function(n){this._enterFullscreenEvent.addHandler(n)},onExitFullscreen:function(n){this._exitFullscreenEvent.addHandler(n)},_activateFullscreenNotification:function(){var n=this;if(screenfull.enabled){this._isFullscreen=this._checkIsFullscreen();screenfull.onchange(function(){var t=n._checkIsFullscreen();t!==n._isFullscreen&&(n._isFullscreen=t,t?n._enterFullscreenEvent.trigger():n._exitFullscreenEvent.trigger())})}else this._clientInfo.getIsiOS()&&this._video.webkitSupportsFullscreen&&(this._isFullscreen=this._video.webkitDisplayingFullscreen,this._video.addEventListener("webkitbeginfullscreen",function(){n._isFullscreen=!0;n._enterFullscreenEvent.trigger()}),this._video.addEventListener("webkitendfullscreen",function(){n._isFullscreen=!1;n._exitFullscreenEvent.trigger()}))},_checkIsFullscreen:function(){return screenfull.enabled?screenfull.element?screenfull.element===this._video||screenfull.element.contains(this._video):!1:undefined},_activatePauseResumeNotification:function(){var n=this;this._video.addEventListener("play",function(){n._resumeEvent.trigger()});this._video.addEventListener("pause",function(){n._video.ended||n._pauseEvent.trigger()})},_createVideo:function(n){var t=document.createElement("video"),i,r;return t.controls=!1,t.muted=!0,t.setAttribute("muted",""),t.setAttribute("preload","auto"),t.setAttribute("playsinline",""),t.setAttribute("webkit-playsinline",""),t.style="object-fit: "+(n.scalable===!1?"none":n.maintainAspectRatio===!1?"fill":"contain"),t.style.backgroundColor="black",t.style.width="100%",t.style.height="100%",i=["loadstart","progress","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","play","pause","ratechange","volumechange",],i.forEach(function(n){t.addEventListener(n,function(){})}),r=this,t.addEventListener("click",function(){r._clickEvent.trigger({playerHandles:!0})}),t.playEx=function(){return new e(function(n,i){try{var r=t.play();r!==undefined?r.then(n,i):n()}catch(u){i(u)}})},t}};k=function(n,t,i){this._adContainer=n;this._clientInfo=t;this._onPlayStartedEvent=new u;this._onPlayEndedEvent=new u;this._onMuteChangedEvent=new u;this._enterFullscreenEvent=new u;this._exitFullscreenEvent=new u;this._onVolumeChangedEvent=new u;this._skippedEvent=new u;this._clickEvent=new u;this._pauseEvent=new u;this._resumeEvent=new u;this._events=[this._onPlayStartedEvent,this._onPlayEndedEvent,this._onMuteChangedEvent,this._enterFullscreenEvent,this._exitFullscreenEvent,this._onVolumeChangedEvent,this._skippedEvent,this._clickEvent,this._pauseEvent,this._resumeEvent];this._pendingVolumeUpdate=null;this._loadVPAIDScriptTimeout=15e3;this._videoSlot=null;this._wrapper=null;this._slot=null;this._adLoadTimeout=3e4;this._adStartTimeout=5e3;this._adPauseResumeTimeout=1e3;this._adSkipTimeout=500;this._playResumingPromise=null;this._playStartingPromise=null;this._testVpaidAd=null;this._mediaFile=null;this._log=i};k.prototype={canPlay:function(n){return(n.mimeType.toLowerCase()==="application/x-javascript"||n.mimeType.toLowerCase()==="application/javascript")&&n.apiFramework==="VPAID"?"probably":""},getMediaFile:function(){return this._mediaFile},loadMediaFile:function(n){var t=this;return new e(function(i,r){var u=function(n){t._removeVPaidElements();t._mediaFile=null;t._deactivateStopOnStartBehavior();t._vpaidAd=null;r(n)};t._loadVPAIDAd(n.fileURL).then(function(r){t._vpaidAd=r;var f=t._checkVPAIDInterface(r)||t._checkVersion(r);if(f){u(f);return}t._applyAsyncExtensions(r);t._enableVPAIDEventsLogging(r);t._enableVPAIDCallsLogging(r);t._activateStopOnStartBehavior();r.__async.initAd(t._adContainer.getWidth(),t._adContainer.getHeight(),"normal",1e4,{AdParameters:n.creative.adParameters},{slot:t._slot,videoSlot:t._videoSlot,videoSlotCanAutoPlay:!1}).then(function(){t._mediaFile=n;t.setVolume(0);i()},u)},u)})},_activateStopOnStartBehavior:function(){this._stopOnStartBehaviorCallback=new c(this,this._onPrematureStart);this._vpaidAd.subscribe(this._stopOnStartBehaviorCallback.getValue(),"AdStarted")},_onPrematureStart:function(){this._log.info("Premature start detected. VPAID already counted ad impression");this._prematureStartDetected=!0;this._pausePlay()},_deactivateStopOnStartBehavior:function(){this._stopOnStartBehaviorCallback&&(this._stopOnStartBehaviorCallback.setDisabled(!0),this._vpaidAd.unsubscribe(this._stopOnStartBehaviorCallback.getValue(),"AdStarted"),this._stopOnStartBehaviorCallback=null)},_enableVPAIDEventsLogging:function(n){for(var i=["AdLoaded","AdStarted","AdStopped","AdSkipped","AdLinearChange","AdSizeChange","AdExpandedChange","AdSkippableStateChange","AdRemainingTimeChange","AdDurationChange","AdVolumeChange","AdImpression","AdVideoStart","AdVideoFirstQuartile","AdVideoMidpoint","AdVideoThirdQuartile","AdVideoComplete","AdClickThru","AdInteraction","AdUserAcceptInvitation","AdUserMinimize","AdUserClose","AdPaused","AdPlaying","AdLog","AdError"],r=this,t=0;t<i.length;t++)n.subscribe(function(n){return function(){var t=arguments.length>0?" Args: "+JSON.stringify(arguments):"";r._log.info("Recieved "+n+" event from VPAID."+t)}}(i[t]),i[t])},_enableVPAIDCallsLogging:function(n){for(var i=["initAd","startAd","stopAd","skipAd","resizeAd","pauseAd","resumeAd","setAdVolume"],r=this,t=0;t<i.length;t++)(function(t){var i=n[t];i&&(n[t]=function(){var u=arguments.length>0?" Args: "+JSON.stringify(arguments):"";return r._log.info("Calling "+t+u),i.apply(n,arguments)})})(i[t])},setLoadTimeout:function(n){this._adLoadTimeout=n},setStartTimeout:function(n){this._adStartTimeout=n},_checkVPAIDInterface:function(n){var t=["handshakeVersion","initAd","startAd","stopAd","skipAd","resizeAd","pauseAd","resumeAd","expandAd","collapseAd","subscribe","unsubscribe"].find(function(t){return typeof n[t]!="function"});return t?"VPAID object is missing function named "+t:null},_checkVersion:function(n){var t=n.handshakeVersion("2.0"),i;return typeof t!="string"||(i=t.split(".")).length===0||isNaN(parseInt(i[0]))||parseInt(i[0])>2?"Unsupported VPAID API version. Version is: "+t:null},_createVideoSlot:function(){var n=document.createElement("video");return n.controls=!1,n.muted=!0,n.setAttribute("muted",""),n.setAttribute("preload","auto"),n.setAttribute("playsinline",""),n.setAttribute("webkit-playsinline",""),n.style.objectFit="contain",n.style.backgroundColor="transparent",n.style.margin="auto",n.style.width="100%",n.style.height="100%",n},_createVideoSlotWrapper:function(){var n=document.createElement("div");return n.style.position="absolute",n.style.top=0,n.style.left=0,n.style.bottom=0,n.style.right=0,n.style.margin="auto",n.style.width="100%",n.style.height="100%",n},_createFrame:function(){var n=document.createElement("iframe");return n.style.width="100%",n.style.height="100%",n.style.border=0,n.style.position="relative",n.style.overflow="hidden",n.style.padding=0,n.style.margin=0,n.style.float="none",n},_createWrapper:function(){var n=document.createElement("div");return n.style.position="relative",n.style.backgroundColor="black",n.style.padding=0,n.style.margin=0,n.style.float="none",n.style.width="100%",n.style.height="100%",n},_loadVPAIDAd:function(n){var i=!1,t=this;return new e(function(r,u){var e,f,o,s;try{t._wrapper=t._createWrapper();t._videoSlot=t._createVideoSlot();e=t._createVideoSlotWrapper();e.appendChild(t._videoSlot);t._wrapper.appendChild(e);f=t._createFrame();t._wrapper.appendChild(f);t._adContainer.insert(t._wrapper);o=setTimeout(function(){i=!0;u("Timeout loading VPAID script")},t._loadVPAIDScriptTimeout);f.onload=function(){var e,s;if(!i)if(clearTimeout(o),f.contentWindow.getVPAIDAd){e=null;try{e=f.contentWindow.getVPAIDAd();t._slot=f.contentWindow.document.getElementById("inf-vpaid-slot")}catch(n){s=n&&n.message?n.message:JSON.stringify(n);u("Error calling getVPAIDAd. Details: "+s)}if(t._testVpaidAd){r(t._testVpaidAd);return}r(e)}else u("Unable to locate getVPAIDAd function in VPAID frame")};s="<head><\/head><body style='margin:0;padding:0'><script src='"+n+"' type='text/javascript'><\/script><div id='inf-vpaid-slot' style='height: 100%'><\/div><\/body>";f.contentWindow.document.open();f.contentWindow.document.write(s);f.contentWindow.document.close()}catch(h){u(h)}})},enterFullscreen:function(){if(!this._vpaidAd)return!1;if(this._isDisplayingFullscreen())return!0;if(screenfull.enabled){try{screenfull.request(this._wrapper);this._vpaidAd.resizeAd(this._wrapper.offsetWidth,this._wrapper.offsetHeight,"fullscreen")}catch(n){return!1}return!0}if(this._clientInfo.getIsiOS()&&this._videoSlot.webkitSupportsFullscreen)try{if(this._videoSlot.webkitRequestFullscreen)return this._videoSlot.webkitRequestFullscreen(),this._vpaidAd.resizeAd(this._wrapper.offsetWidth,this._wrapper.offsetHeight,"fullscreen"),!0;if(this._videoSlot.webkitEnterFullscreen)return this._videoSlot.webkitEnterFullscreen(),this._vpaidAd.resizeAd(this._wrapper.offsetWidth,this._wrapper.offsetHeight,"fullscreen"),!0}catch(n){return!1}return!1},_activateFullscreenNotification:function(){var n,t;if(!this._fullscreenNotificationActivated)if(this._fullscreenNotificationActivated=!0,n=this,screenfull.enabled){t=this._isDisplayingFullscreen();screenfull.onchange(function(){var i=n._isDisplayingFullscreen();i!==t&&(t=i,i?n._enterFullscreenEvent.trigger():n._exitFullscreenEvent.trigger())})}else this._clientInfo.getIsiOS()&&(this._videoSlot.addEventListener("webkitbeginfullscreen",function(){n._enterFullscreenEvent.trigger()},!1),this._videoSlot.addEventListener("webkitendfullscreen",function(){n._exitFullscreenEvent.trigger()},!1))},_isDisplayingFullscreen:function(){return screenfull.enabled?screenfull.element?screenfull.element===this._wrapper||screenfull.element.contains(this._wrapper):!1:this._clientInfo.getIsiOS()&&this._videoSlot.webkitSupportsFullscreen?this._videoSlot.webkitDisplayingFullscreen:undefined},getCurrentTime:function(){var n,t;return this._vpaidAd?(n=this.getDuration(),n===NaN)?0:(t=this._vpaidAd.getAdRemainingTime(),t<0||t>n)?0:n-t:0},getDuration:function(){return this._vpaidAd&&this._vpaidAd.getAdDuration?this._vpaidAd.getAdDuration():NaN},getVolume:function(){if(!this._vpaidAd)return null;var n=this._vpaidAd.getAdVolume();return n===-1?0:n},setVolume:function(n){return this._vpaidAd?(this._pendingVolumeUpdate&&this._pendingVolumeUpdate.stop(),this._adPlaying&&n>0?(this._pendingVolumeUpdate=new et(this._vpaidAd,this._videoSlot,n,this._log),this._pendingVolumeUpdate.run()):(this._vpaidAd.setAdVolume(n),!0)):null},skip:function(){if(!this._vpaidAd)return this._skippedEvent.trigger(),this.dispose(),e.resolve();var n=this;return new e(function(t){function i(){n._skippedEvent.trigger();n.dispose();t()}n._vpaidAd.__async.skipAd().then(t,i)})},onVolumeChanged:function(n){this._onVolumeChangedEvent.addHandler(n)},getPaused:function(){return this._vpaidAd?this._adStarted&&!this._adPlaying:null},getWaitingForData:function(){return!1},onWaitingForDataChanged:function(){},play:function(){return this._vpaidAd?this._adStarted?this._adPlaying?e.resolve():this._resumePlay():this._startPlay():e.reject("No MediaFile Loaded")},pause:function(){return this._vpaidAd==null?e.reject("No MediaFile Loaded"):!this._adStarted||!this._adPlaying?e.resolve():(this._pendingVolumeUpdate&&this._pendingVolumeUpdate.stop(),this._pausePlay())},_startPlay:function(){var n=this;return new e(function(t,i){function u(){n._playStartingPromise=null;n._fixVideoSizeAdjustments();n._vpaidAd=n._fixVPAIDDuration(n._vpaidAd);n._setupPlayRelatedEvents(n._vpaidAd);n._adStarted=!0;n._adPlaying=!0;n._onPlayStartedEvent.triggerOnce();t()}function r(t){n._playStartingPromise=null;i(t)}if(n._playStartingPromise){n._playStartingPromise.then(t,i);return}var f=n._isDisplayingFullscreen();f&&n._vpaidAd.resizeAd(this._wrapper.offsetWidth,this._wrapper.offsetHeight,"fullscreen");n._adContainer.onResize(function(t){n._vpaidAd.resizeAd(t.width,t.height,n._isDisplayingFullscreen()?"fullscreen":"normal")});n._deactivateStopOnStartBehavior();n._activateFullscreenNotification();n._setupEvents(n._vpaidAd);n._playStartingPromise=n._prematureStartDetected?n._pausePlay().then(function(){n._vpaidAd.__async.resumeAd().then(u,r)},r):n._vpaidAd.__async.startAd().then(u,r)})},_fixVideoSizeAdjustments:function(){(this._videoSlot.style.width!=="100%"||this._videoSlot.style.height!=="100%")&&(this._log.info("Video slot dimensions were modified by VPAID. Reverting them back to percentage values"),this._videoSlot.style.width="100%",this._videoSlot.style.height="100%");(this._slot.style.width!=="100%"||this._slot.style.height!=="100%")&&(this._log.info("Slot dimensions were modified by VPAID. Reverting them back to percentage values"),this._slot.style.width="100%",this._slot.style.height="100%")},setTestVpaidAd:function(n){this._testVpaidAd=n},_setupEvents:function(n){if(!this._eventsSet){this._eventsSet=!0;var t=this;n.subscribe(function(){t._onVolumeChangedEvent.trigger(t.getVolume())},"AdVolumeChange");n.subscribe(function(n){t._clickEvent.trigger(n&&n.data?n.data:{playerHandles:!1})},"AdClickThru");n.subscribe(function(){t._skippedEvent.trigger();t.dispose()},"AdSkipped")}},_pausePlay:function(){var n=this;return new e(function(t,i){if(n._playPausingPromise){n._playPausingPromise.then(t,i);return}n._playPausingPromise=n._vpaidAd.__async.pauseAd().then(function(){n._playPausingPromise=null;t()},function(){n._playPausingPromise=null;i()})})},_resumePlay:function(){var n=this;return new e(function(t,i){if(n._playResumingPromise){n._playResumingPromise.then(t,i);return}n._playResumingPromise=n._vpaidAd.__async.resumeAd().then(function(){n._playResumingPromise=null;t()},function(){n._playResumingPromise=null;i()})})},_setupPlayRelatedEvents:function(n){var t=this;n.subscribe(function(){t._adPlaying=!1;t._onPlayEndedEvent.triggerOnce()},"AdVideoComplete");n.subscribe(function(){t._adPlaying=!1;t._onPlayEndedEvent.triggerOnce()},"AdError");n.subscribe(function(){t._adPlaying=!1;t._pauseEvent.trigger()},"AdPaused");n.subscribe(function(){t._adPlaying=!0;t._resumeEvent.trigger()},"AdPlaying")},_fixVPAIDDuration:function(n){this._log.info("Updated AdDuration to match RemainingTime. AdDuration changed from "+(n.getAdDuration?n.getAdDuration():"unknown")+" to "+n.getAdRemainingTime()+" seconds");var t=n.getAdRemainingTime();return n.getAdDuration=function(){return t},n},_applyAsyncExtensions:function(n){function i(t,i,r){return new e(function(u,f){function s(){try{e.setDisabled(!0);o.setDisabled(!0);n.unsubscribe(e.getValue(),i);n.unsubscribe(o.getValue(),"AdError")}catch(t){}}function h(n){s();f(n)}function l(){s();f("Timeout waiting for "+i+" event")}var e=new c(this,function(){s();u()}),o;e.setTimeout(l,r);o=new c(this,h);n.subscribe(e.getValue(),i);n.subscribe(o.getValue(),"AdError");t()})}var t=this;n.__async={initAd:function(){var r=arguments;return i(function(){n.initAd.apply(n,r)},"AdLoaded",t._adLoadTimeout)},startAd:function(){var r=arguments,u=t._clientInfo.getIsiOS()&&t._clientInfo.getOSVersion()<10?36e5:t._adStartTimeout;return i(function(){n.startAd.apply(n,r)},"AdImpression",u)},resumeAd:function(){var r=arguments;return i(function(){n.resumeAd.apply(n,r)},"AdPlaying",t._adPauseResumeTimeout)},pauseAd:function(){var r=arguments;return i(function(){n.pauseAd.apply(n,r)},"AdPaused",t._adPauseResumeTimeout)},skipAd:function(){var r=arguments;return i(function(){n.skipAd.apply(n,r)},"AdSkipped",t._adSkipTimeout)},stopAd:function(){var r=arguments;return i(function(){n.stopAd.apply(n,r)},"AdStopped",t._adSkipTimeout)}}},_removeVPaidElements:function(){this._wrapper!=null&&(this._adContainer.remove(this._wrapper),this._wrapper=null)},dispose:function(){if(this._vpaidAd){try{this._pendingVolumeUpdate&&this._pendingVolumeUpdate.stop();this._adContainer.offResize();this._wrapper.style.display="none";this._events.forEach(function(n){n.removeAllHandlers()});var n=this;this._vpaidAd.__async.stopAd().then(function(){n._removeVPaidElements()},function(){n._removeVPaidElements()})}catch(t){}this._vpaidAd=null}},onPlayStarted:function(n){this._onPlayStartedEvent.addHandler(n)},onPlayEnded:function(n){this._onPlayEndedEvent.addHandler(n)},onClick:function(n){this._clickEvent.addHandler(n)},onPause:function(n){this._pauseEvent.addHandler(n)},offPause:function(n){this._pauseEvent.removeHandler(n)},onResume:function(n){this._resumeEvent.addHandler(n)},offResume:function(n){this._resumeEvent.removeHandler(n)},onSkipped:function(n){this._skippedEvent.addHandler(n)},onEnterFullscreen:function(n){this._enterFullscreenEvent.addHandler(n)},onExitFullscreen:function(n){this._exitFullscreenEvent.addHandler(n)}};et=function(n,t,i,r){this._vpaidAd=n;this._videoSlot=t;this._isActive=!0;this._activeWaitHandle=null;this._newValue=i;this._log=r};et.prototype={run:function(){var t,n;return this.stop(),this._isActive=!0,this._videoSlot.src&&this._videoSlot.src.length>0&&!this._videoSlot.paused?(this._vpaidAd.setAdVolume(this._newValue),t=!1,this._videoSlot.paused&&(this._log.info("VPAID ad video slot was paused after volume change. Muted video slot and attempting to resume"),this._vpaidAd.setAdVolume(0),this._vpaidAd.pauseAd(),this._vpaidAd.resumeAd(),t=!0),this._isActive=!1,!t):(this._vpaidAd.setAdVolume(this._newValue),n=this,this._activeWaitHandle=setTimeout(function(){if(n._isActive){var t=n._vpaidAd.getAdRemainingTime();n._activeWaitHandle=setTimeout(function(){n._isActive&&(n._isActive=!1,n._activeWaitHandle=null,t===n._vpaidAd.getAdRemainingTime()&&(n._log.info("VPAID ad stopped updating remaining time after volume change. Muted VPAID and attempting to resume"),n._vpaidAd.setAdVolume(0),n._vpaidAd.pauseAd(),n._vpaidAd.resumeAd()))},50)}},50),null)},stop:function(){this._isActive=!1;this._activeWaitHandle!=null&&clearTimeout(this._activeWaitHandle)}};d=function(n,t,i,r){this._element=n;this._width=t;this._height=i;this._clientInfo=r;this._resizeEvent=new u};d.prototype={getWidth:function(){return this._width},getHeight:function(){return this._height},getClientRect:function(){return this._clientInfo.getBoundingClientRect(this._element)},removeFromDOM:function(){this._element.parentNode&&this._element.parentNode.removeChild(this._element)},getDocument:function(){return this._element.ownerDocument||document},hasClass:function(n){return(" "+this._element.className+" ").indexOf(" "+n+" ")>=0},addClass:function(n){this.hasClass(n)||(this._element.className=this._element.className+" "+n)},onMouseEnter:function(n){this._element.addEventListener("mouseenter",n)},offMouseEnter:function(n){this._element.removeEventListener("mouseenter",n)},onMouseLeave:function(n){this._element.addEventListener("mouseleave",n)},offMouseLeave:function(n){this._element.removeEventListener("mouseleave",n)},setOffscreen:function(n){n?(this._element.style.position="absolute",this._element.style.left="-5000px"):(this._element.style.removeProperty("position"),this._element.style.removeProperty("left"))},insert:function(n){this._element.appendChild(n)},syncSize:function(){var n=this._element.offsetWidth,t=this._element.offsetHeight;(this._width!==n||this._height!==t)&&(this._width=n,this._height=t,this._resizeEvent.trigger({width:n,height:t}))},onResize:function(n){this._resizeEvent.addHandler(n)},offResize:function(n){if(!n){this._resizeEvent.removeAllHandlers();return}this._resizeEvent.removeHandler(n)},remove:function(n){this._element.removeChild(n)}};ot=function(n,t){this._adContainer=n;this._players=t};ot.prototype={apply:function(n){if(n.length<2)return n;var t=this;return n.sort(function(n,i){var r=t._compareMediaFilesByDeliveryType(n,i);return r!==0?r:(r=t._compareMediaFilesByPlayability(n,i),r!==0)?r:t._compareMediaFilesByAdContainerFit(n,i)})},_compareMediaFilesByDeliveryType:function(n,t){return n.deliveryType===t.deliveryType?0:n.deliveryType==="streaming"?-1:1},_compareMediaFilesByPlayability:function(n,t){var r=this._players.map(function(t){return t.canPlay(n)}).sort(this._comparePlayability),i=this._players.map(function(n){return n.canPlay(t)}).sort(this._comparePlayability);return r.length===0?i.length===0?0:1:i.length===0?-1:this._comparePlayability(r[0],i[0])},_compareMediaFilesByAdContainerFit:function(n,t){var i=Math.abs(n.width-this._adContainer.getWidth())+Math.abs(n.height-this._adContainer.getHeight()),r=Math.abs(t.width-this._adContainer.getWidth())+Math.abs(t.height-this._adContainer.getHeight());return i<r?-1:i>r?1:0},_comparePlayability:function(n,t){var i=n==="probably"?2:n==="maybe"?1:0,r=t==="probably"?2:t==="maybe"?1:0;return r-i}};p=function(n){function i(n){return"g367CB268B1094004A3689751E7AC568F-"+n}var t,r;this._clickEvent=new u;n.hasClass(i("inf-videoButtons-container"))||n.addClass(i("inf-videoButtons-container"));w(n.getDocument());t=document.createElement("div");t.className=i("inf-playerButton")+" "+i("inf-playButton");r=document.createElement("div");r.className=i("inf-playButton-icon");t.appendChild(r);n.insert(t);this._clickCallback=new c(this,this._onClick).getValue();t.addEventListener("click",this._clickCallback,!0);t.addEventListener("touchend",this._clickCallback,!0);this._buttonElement=t;this._adContainer=n};p.existsIn=function(n){function t(n){return".g367CB268B1094004A3689751E7AC568F-"+n}return n.querySelectorAll(t("inf-playButton")+" "+t("inf-playButton-icon")).length>0};p.prototype={onClick:function(n){this._clickEvent.addHandler(n)},_onClick:function(n){return n.stopPropagation(),n.stopImmediatePropagation(),n.preventDefault(),this._clickEvent.trigger(),!1},dispose:function(){this._clickEvent.removeAllHandlers();this._buttonElement.removeEventListener("click",this._clickCallback);this._adContainer.remove(this._buttonElement)}};st=function(n,t){function u(n){return"g367CB268B1094004A3689751E7AC568F-"+n}var i,r;if(t.hasClass(u("inf-videoButtons-container"))||t.addClass(u("inf-videoButtons-container")),w(t.getDocument()),i=document.createElement("div"),i.setAttribute("style","left: 0; right: 0; top: 0; margin-left: auto; margin-right: auto; position: absolute;"),i.style.zIndex=100,i.style.width=t.getWidth()+"px",i.style.height=t.getHeight()+"px",i.style.backgroundRepeat="no-repeat",i.style.backgroundPosition="center",i.style.backgroundImage="url('data:image/gif;base64,R0lGODlhIAAgAKUAAAQCBISChERCRMTCxCQiJGRiZKyqrOTi5BQSFFRSVDQyNHRydJSSlNTW1AwKDIyKjExKTMzKzCwqLGxqbBwaHFxaXDw6PHx6fLy+vPz+/JyanAQGBISGhERGRMTGxCQmJGRmZLSytOTm5BQWFFRWVDQ2NHR2dJSWlNza3AwODIyOjExOTMzOzCwuLGxubBweHFxeXDw+PHx+fAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQJCQAzACwAAAAAIAAgAAAG/sCZcEgkphiqVHHJbAotoZDCSRUqGDAiNFQiBjCW6rCi0bSGpWhXGIuwTGLh66QJAJ5q4cbAihDiQmQnHXhcQjAsLAuAQikqGgxKaYYIAywYSk4fECNEHWUVMwoqKmcyfQlEEhwCRBcyMhAOQgAyJyRFAAseBnczCBwiIg1ECQEBMiYldwSdTAQSMxsFDcIiKkUfLscyEy9iChjWA61LABYmARfOVB8HIigTvk0pK4RxHA8IjIDzRQ4vAgqkwE/ACggHD6ZIAGJCw4Yr+LHIQLFiBBIgQBTQCCIVowgVLQIk8ILkC4KMDK5YeXAfv5dENrSIFqdFiw1UAGyCIEtMjAqeEAj4G0JBAM8VMVxSSWH0YAx2Qlok7PDn1ywmKZQAINBhJYQzQ4DepBUDAk0im2IM2SDh4D0hI1pcFULg4BkEMZ6KOli1UQuoSzZ07YCTAsJODgbjZNQCYVXDK5zV/cqoHgQBvkYcdAbAIIRMYqRyInqYNOU4hsHC3UxEQQfA/CDDhhkzhoXFYoIAACH5BAkJADEALAAAAAAgACAAhQQCBISChERCRMTCxCQiJGRiZKSmpOTm5BQSFFRWVDQyNHRydLS2tMzOzAwKDJSSlExKTCwqLKyurPz6/BwaHHx6fMzKzGxubFxeXDw6PLy+vJyanAQGBERGRMTGxCQmJGRmZKyqrOzu7BQWFFxaXHR2dLy6vNTW1AwODJSWlExOTCwuLLSytPz+/BweHHx+fDw+PAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+wJhwSCSiKhVHcclsChWb1MpJFUZKKiJ0Mx0uDIrqUBV4fYaKFBfNYIHEwtErcAE8N+sYZ8OSuOBCEHNhMVBSQgksboBCDhUvSTEreFMIBiwGSk4uGQhaZVkRL2YxF4odRB8lGUQFICAZHEIAFy+oRAAgIQ92MUcWDRpEMK8gGBF2FJ5MLmccJBoNwBVFBCTFCSNiKyHSDSGsSwAKrgXLVAQeDQMkvU0OMOFiJRUojPdMHCP7/OdwMAI6BBQgAAUMFRAQIoRxz8SBhxBNCEhIUYU8OA4hPmSgj8IIj8ruZRAIgaAAf/hmAeKwIgIgNSiLAPgAoaYmKhEmtBCxQNaJEgoTE8KIuSTDiRZIT0AoskJhBwJCENwsgsIeLRFIW2wgUhPCCp8AYEBwWYQmwzgbdIogMmLFVAIIK8GAoU0BQqhDVqRY6oRDBxUdZFFIqM3B38D3ViTEO1iFthhwvTJCgVBArxEIHwMQgNAenKYQHsdoLHqwZDiDu8TJrKWD6JSkU1LhEM+nmCAAIfkECQkANQAsAAAAACAAIACFBAIEhIKEREJExMLEJCIk5OLknJ6cZGJkFBIUNDI09PL0lJKUVFZUdHZ01NLUrK6sDAoMjIqMTEpMLCos7OrsbGpsHBocPDo8/Pr8pKaknJqc3NrcBAYEhIaEREZEzM7MJCYk5ObkpKKkZGZkFBYUNDY09Pb0lJaUXFpcfH581NbUtLK0DA4MjI6MTE5MLC4s7O7sbG5sHB4cPD48/P78AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABv7AmnBIJEJGI0hxyWwKJ4EUyEkVElAz4iQVmA4PrVd1OEPKhlDpMKHRMMZCxKjCADy5Xk5Ac7LAhRdIE3ddQhInbn9CECgjBxw1W4UsCxotSk4WEyxEL0hZIBUjBDUoBhpZQwQjCUQeLhIvkDUAKAclRQAMJyl2NSwVDysZRAkSsB6kNQicTBakAC4ZK9QxRSQCsC4zCGMgJ9QrJ7hLACCvEphUBMIZLrNNHAmDcHPNivhFHCT8/d2KJWYIHAhhhrZjElL9EfGhoUMRAhBqu4Avg8MPAxyI2GeBREcL//6UuCCA5IUL9/IN8TWGwwt6YzpECMnEnISb6pyAKBBiw5QIeEQsRDzGbUyCASGSDhBQ5IW2ZHFyEgGBi8MBFUlDRCByM9YsADMkwBQCoIUJB74QROCpggiJFzkJwBKDQCCJGgZo0KigpQNTJxxeeYBk4dhdCwpoUKA55sUxZYVd3K3RQO8CRSxgCfBFAtZkCBtoYBhLxamEyTUio3Zh+U9hMUM6nyYiAoYElUNU4wY84wJQKkEAACH5BAkJAC4ALAAAAAAgACAAhQQCBISChERCRMTCxCQiJGRmZOTi5BQSFKyurDQyNFRSVNTW1HR2dJSSlAwKDExKTMzKzCwqLBwaHDw6PGxubPz+/Ly+vFxaXHx+fJyanAQGBIyOjERGRMTGxCQmJGxqbOTm5BQWFLSytDQ2NNza3Hx6fJSWlAwODExOTMzOzCwuLBweHDw+PFxeXAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJdwSCQ6FChNcclsCleFz8pJFUo4KiKhUJgOFSVCdahCPULDbXcYwWAeY+HJLAA8P2sXgBLAoOMuKg8oYi5QHxJCLH1wgC4aDw8cSmpTDiUYJUpOEhEnWigoES4SCgqJKH0JRCsXWUMcZiqbACwPo0QAHBgfdi4nFyYZG0QJg5KFBw5NIYkAAhsZ0i1FIQJmKCwHYwQY0iYBr0UAHrEPy1USwhuTVBoJuGMKLZ+O9ksaIfr7244qIwADOmCB7RgLew1EKFy4QcAxbBMQLmSYT0KzZv0A/QsIEN29j49UxKvCoERGJuQinRuzAgIECxc2FZHgcJC2MSoQQEiRAkF9RCJlBnFI5rGIhywALlhwmaIEEZWzhNS6NQ6DAQu+TpRwaYFICBVFCchywYHnwQ0gQFAb4oHBQScaYrVTUKECnBAkQCw4iXNQIbp2hVBIG8DRnAd1hABupAGCAQMeNJr542IxLMKAJDwQV7luIyENSAgAqdgzaWYpINQbEwQAIfkECQkANQAsAAAAACAAIACFBAIEhIKEREJExMLEJCIkZGJkpKak5ObkFBIUNDI0dHJ0VFZUtLa0lJaUzM7M9Pb0DAoMTEpMLCosbGpsrK6sHBocPDo8fHp8zMrM7O7sXF5cvL68nJ6cBAYEjIqMREZExMbEJCYkZGZkrKqsFBYUNDY0dHZ0XFpcvLq8nJqc1NbU/P78DA4MTE5MLC4sbG5stLK0HB4cPD48fH589PL0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABv7AmnBIJHZkMkBxyWwKK5EWyUl9flxEqJQo0MSqQ1crMhWSxuUaQSSygIWssUBZO29rgMWkgHgLXVEET1FlCSIFbn41HRERHx01WlMQGhMakE4VEixEBC0tEnVIUwKHoUNQIUQfYy6YADIRp0QWBQt0EBEzMyZECVGOgjUIEE0sUwAlJgEzAS1FJAJjLTJ9VTEvzAEvwkUAIawRxVUkFwEmFnRNHQmzVY3jivJFHST299Z+Ei78/RAy04DJkHchhcGDFwQAm5bIz4yDBhtcqFeBRMUK+d6E6OdvnschHVy4ozJhAicn3xqJAxODAgwDLTAVqaAwSjUwIRrA2NmgRI0RMVE+CLOgikkMLABaGNgJ4wURla6EAFDxwIM3BSBG0GExwaUBIiRcxKvxYsWKBjUEoEDhZoYDDAuIxJjg0wmJDCto9Ilw4MCHYQMcoDjpp4FZBUI+9P1bQ8PbXn5cmFWBia9fIRAoYMDQrUoKsxGGWGacdjNkMC1opHi6mEiADQ09Whbw0QmCtYSrBAEAIfkECQkANgAsAAAAACAAIACFBAIEhIKEREJExMLEJCIkZGJknJ6c5ObkFBIUNDI0VFZUdHJ0lJKU1NLUrKqs9Pb0DAoMTEpMLCosbGpsHBocPDo83NrcjIqMpKak7O7sXF5cfH58nJqctLK0/P78BAYEREZEzM7MJCYkZGZkpKKkFBYUNDY0XFpcdHZ0lJaU1NbUrK6s/Pr8DA4MTE5MLC4sbG5sHB4cPD483N7cjI6M9PL0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABv5Am3BIJH5kMkBxyWwKKRFXyUl9gl5EqJSYAE2rwpcr8rWVxmWtBCxsjQVKs2trAwgikRY7HCU8o18EY1h7Nh94IB82WlMQIC6JVBQSekOCLmslSFMJeH5DCDIxRI8RL4p1MhFrRRIRMkMQFQUjGlxRESCfCBBNLXoALxojxLBEJQJjLjIIYCUKIxMjCp9FACKlvVUIxAUvcU0fCaxgFRWohelFHyXt7s2FBCLz9BAyyrjGexMbAf4BG0bcweeiQjp+APsFGMGOQgmHFODtkUdPBAFtS8Cpc0KBA409J05UCocig4cH1ZyUSOEx0hIXFjzIbGACjIgAHHIGIDSEhJFMDxkmKEqQkkgMEXUE0MjJwdaQGh5YMID3YcCMDdYKrGAQp8UJlh+HuEhBzkaBAwcu2DCBgUQCGzA6dIhgVAFPJghUHLDQTECIEAYRYOiAASObC2gLCPELWIiCDitGFJKAdgAqxgbrcIA8ik0AtAKG+B2gr4JcyWwiWAi7+G9mIQsw1NwoRIZr2k4QkCAxskoQACH5BAkJADIALAAAAAAgACAAhQQCBISChERCRMTCxCQiJGRiZOTi5KyurBQSFNTS1DQyNFRSVHR2dJSSlAwKDExKTMzKzCwqLGxqbBwaHNza3Dw6PIyOjPz+/Ly+vFxaXHx+fJyanAQGBISGhERGRMTGxCQmJGRmZOTm5LSytBQWFNTW1DQ2NFRWVHx6fJSWlAwODExOTMzOzCwuLGxubBweHNze3Dw+PAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJlwSCRyYjFAcclsCiePFclJfXpaRKiUqPBMq8LW6vGVkcZlbQQsVI0FSvNqKwMIHg8VOxwlPKNfBGNYezIceB4cMlpTDh4riVQTEXpDgitrJEhTCnh+QyotZTKPDy2KdTEPa0URDzFDHBFjHlxRDx6fCA5NKnoABHiDRSQCYysxCGAIMccxE0wAIKW8VSpRuXFNHAqsYBGnheJMCLfHAuITL+vsHAkX8PEf4gshEvb2C+/x8POF9SEKBAyxoNycg+gKqSPwguELVEu0jXNCwkKAPVGqbZNAQQSMT1QQoNCAwoTEIR4+iFiJQQGYFy40BNDgAkSRBitFJCigpMWJiybq6lRgEGDmCiIwRBgIoKzOgQEuigA4kUJDHAcPZDIg4qGDNxkZILBAIUOBhQZYCmzYAGsIFJtOVGCAgEGZiREjTMhQ0WCDBY1sUIjNIKTCiAN6Sa09UQiE2ANxDOcVwiHAhhTQAkOAUGHI3clhFu+JMUADEcmJhRSwQGiijLuIXcdtYKESmCAAIfkECQkANwAsAAAAACAAIACFBAIEhIKEREJExMLEJCIkZGJkpKKk5ObkFBIUNDI0dHJ0VFJUlJKU1NLUtLK09Pb0DAoMTEpMzMrMLCosbGpsrKqsHBocPDo8fHp8nJqc7O7sXF5c/P78BAYEjI6MREZExMbEJCYkZGZkpKakFBYUNDY0dHZ0VFZUlJaU3NrcvL68/Pr8DA4MTE5MzM7MLC4sbG5srK6sHB4cPD48fH58nJ6c9PL0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABv7Am3BIJHZmM0BxyWwKLZEWyUl9fl5EqJSY+Eyrwlcr8r2RxmXtBCxkjQVKc2t7AwgiERY7HCU8o18EY1h7Nx14Hx03WlMQHy2JVC0Ma0OCLWskSFMJeH5DLC9lNzYcKwwIQgAzEZVEExEzQx0TYx9EBhy6GhRKCBBNLHoABHiDRS0puhwNJWAIM2MtMxZMHRilD65OLFEfBHFNJDUeexMvwGzhhUUIAh/v7xfsJPX2JB0qB/v8Duys0qJc0Mdvn79C0aIonOEOXoQ78wohsECCIsV1RDCya4KAhoI9My6ka9JhwwAJIKpVYSFCRIEJGm/MiCHBhYQRhKhYONFSxJoJGUUC2HSh4oSSCSqXVKwzoYAICiJkDRlgU4GeOihiFCgC4AONXkI6XHC6gcgME5+EtHDggMKNCTQwhLixgAYNZ0MQXADKbYSDEXoSZMiABQKGACZGsqHAtoWQBCgIC7lAI8CtPQRiOECh6IZgyYZgBKAxigpjB3g9o6jhKsToCHtKjIDBZXBOuibmbhzyIgOK27uXsIirmEoQACH5BAkJADUALAAAAAAgACAAhQQCBISChDw+PMTGxCQiJFxaXKSmpOTm5BQSFJSSlExOTDQyNGxqbNTW1Ly+vPT29AwKDIyKjERGRCwqLGRiZKyurBwaHJyanNze3Ozu7FRWVDw6PHRydAQGBISGhERCRMzOzCQmJFxeXKyqrBQWFJSWlFRSVDQ2NGxubNza3Pz+/AwODIyOjExKTCwuLGRmZLSytBweHJyenOTi5PTy9AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+wJpwSCR2BAJAcclsCi0tBclJFSpoFyJJ0ZoOFxJvtVZSqVpDqDQdnYyFLnOjI9x2hYBPq7V6Cy9mHE9RXgRcLn5CCBkqGVMkhDUQEgoSdE4SHiFEHGYlNSQfG1MLewREKy5iNRgHMx4IeA0PEUsTLQJDHRNcEkQJB8ENFEobm0wQsQAElFGIRBIDwQcOz1QIAgpcH6tDEAwprqdVK3stBEpOJAkBfhMul2PpiUsrSPcCJ/QIJP3+HSNACBwog54eLgg3GBA4YGCWRAKiSFSwYcUGUaI26EuEwAIJCx1JzKNHUhGKF+7gUelgwgCMChbGQJCIjsmJCzByJjh2LVuUFAHdOLyEYcBSDQLdhvCrsayZAms1RlSA8aIP0wAlTCzZQEFDug4uovgacoJBDCIfSlwoUCMEgxenBLx44WbIiglJUSW4wKLPhAABNkGg8EJEvDcFSsgY+zfAOBcvGGxIFENtgHQhAI8DoOEFhVhvRFy4YO0vB54E5k5+s4CFCCKNedb4QOFsSSGZA992AqEwBD9BAAAh+QQJCQAyACwAAAAAIAAgAIUEAgSEgoREQkTEwsQkIiRkYmSsqqzk5uQUEhRUUlQ0MjSUkpTU1tR0cnQMCgyMioxMSkzMyswsKiwcGhxcWlw8Ojx8enxsbmy8vrycmpzc3twEBgSEhoRERkTExsQkJiRkZmS0srT8/vwUFhRUVlQ0NjSUlpTc2tx0dnQMDgyMjoxMTkzMzswsLiwcHhxcXlw8Pjx8fnwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAG/kCZcEgkjlgRRHHJbAoTIhHESRV2Tg8iVEpUdEbV4eNwEAy3U+FoBWmFhRLyYPOMpgECduotHB9AdVwyHxArEnxCCAwHDEpoMhsQEB10TjAoBEQFZFkdLCxmLWyZQyktYEMDSA17kAMaMUsSEDBDGy2FHUQBEUgYCQAyCqRLKUoABB1sK25EMCG9EQaHVSkwK2wCqEUbLxgsAy5hCIUQBMFOCDENfC0tlWHoiMUKJfb2zXwII/z9GwshAgrMguhaOTYwAAoMSJCPwWW0UtS7VyLfm30TRkxAMEHevI9CUrwg0e4dlQ0dFmQwsc2Jg3LnmLQIkKFmDGLpYEhaAaOlgowCNTOogBHMhRImKfYgU8bG4gITGUg4EALgggVdRWbVEnIrF5EWLyYQKREjwAoZExIkECtqBc4UEnwWcYAiAIqpLkCAEOegwyR4b1YEiFFBCAG94gY1RTSi7AV0eUGQwiOpVRjBN4ccljxkTRs+ElCc1Yy4yxeQQyLjRD1XLWAqQQAAIfkECQkAOQAsAAAAACAAIACFBAIEhIKEREJExMLEJCIkZGJkpKKk5ObkFBIUNDI0dHJ0tLK0VFJU9Pb01NLUlJKUDAoMTEpMzMrMLCosbGpsrKqs7O7sHBocPDo8fHp8vLq8XFpc/P78nJqcBAYEjI6MREZExMbEJCYkZGZkpKak7OrsFBYUNDY0dHZ0tLa0VFZU/Pr83NrcDA4MTE5MzM7MLC4sbG5srK6s9PL0HB4cPD48fH58vL68nJ6cAAAAAAAAAAAAAAAAAAAAAAAAAAAABv7AnHBIJCI0qVZxyWwKI4eDwEkV1gYZIvQAIhoskeow85JghtDSVOjicB5ioUjyqnie0bWHxVlN4kIoZRt4XIFucIA5CDcvNwg5IAdqORczHCWQTicjNEQbdFkCSGc4bhRELTAmRBULCyNKOQAyAzFFAB8rLwBCHhMuEV1DCgsyCyQRvTCeTBMnswQgwS4wRScdrzIPImIINS7BAqxLHgwkKTIXYi0R7gS9TggxBYAwMHeK+ksQ9/4w3RSZGEjQhAcbHRIqzKKoRgRqDzEgVJgQhT5wDzPW6PcPoD4TF0CKjLevZI4WwQBNwEfFA4YMNmxoogIhIzwmImIEsBGAwoa6Kt+o1SA3hMHOAChO9DIha0kLJR6kUbM2JmaEfABUFDhTZEKEGkM8wHg4TE4EojlgjBgB9tvQtMEIpJqAll+BEQXuXHjIqqawfIAwrP1Tia8QAsGoxkGwdkM8E8HIARAQrGmVGmt/FnZBdG8ExVUIbFgjBPJZImPr6tvL2aQTDzUwAK4SBAAh+QQJCQAyACwAAAAAIAAgAIUEAgSEgoREQkTExsQkIiRkYmSkoqTk5uQUEhQ0MjRUVlSUkpR0cnS0srTU1tQMCgxMSkwsKixsamysqqz8+vwcGhw8OjyMjoxcXlycmpzk4uQEBgSEhoRERkTMzswkJiRkZmSkpqTs7uwUFhQ0NjRcWlyUlpR8fny8vrzc2twMDgxMTkwsLixsbmysrqz8/vwcHhw8PjwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAG/kCZcEgkIgwGVXHJbApjHo/FSRWSJhKiIDodLhyC6lDSaJCGW+mwczgExEKYq2HaCNPdzeCg+cCFZA0rdx4DMYBtb38yKiENIUp4MhUpBylKTiwlFUQrZVkkBhMJMhdtBUQRJhBECxkmJQ9CGyYuqEQAJxooAEIIJhQvIkQFGa8XAr0fnEwELDIbLSIv1BlFLBzGGScwYhYO1C8prEsbHQsmJsxUEcEiDHZOKgUKf64ji3+9TA8f/v8E8iEYQbDgBgknAigMcAJEvhgrIESMGEMCwxMJG+YTAEGixxj9PkTwF6HbooEVRlRAUGFfvpdDHsToIiYCi3hNALAoAKIAkiYqKjwScEkERgkQSBXgq4IgRscVMZaiQdozQi8EspioQCADAIEOKyI+G8KzgIV4AJxGWPIBwqFZESJ2KBqD6xACYmU0jSojQcSAQ1SwkMrE3IoOdipIxPcALOJ8LCQCVrxiKV4IY+GoiJhMyIiISwEIiPizCgvQQyhLVYz5j+LMMj5DIJygA+GXqmFS2TATZ5UgADs=')",i.style.display="none",this._adContainer=t,this._vastTagAd=n,this._element=i,this._adContainer.insert(i),n.getLoaded())this._setupToShowOnLackOfData();else{this._show();r=this;n.onLoadFinished(function(){r._hide();r._setupToShowOnLackOfData()})}};st.prototype={_setupToShowOnLackOfData:function(){var n=this;this._vastTagAd.onWaitingForDataChanged(function(){n._vastTagAd.getWaitingForData()?n._show():n._hide()})},_hide:function(){this._element.style.display="none"},_show:function(){this._element.style.display=""},dispose:function(){this._adContainer.remove(this._element)}};ht=function(n,t,i){var r,u;this._skipButton=new ct(t,i);this._vastTagAd=n;this._disposed=!1;r=new c(this,this._onSkipButtonActivated);this._skipButton.onActivated(r.getValue());u=new c(this,this._onSkip);this._skipButton.onSkip(u.getValue());this._playStartedCallback=new c(this,this._onPlayStarted);n.onPlayStarted(this._playStartedCallback.getValue());this._timeChangedCallback=new c(this,this._onTimeChanged);n.onTimeChanged(this._timeChangedCallback.getValue());this._onTimeChanged()};ht.prototype={_onPlayStarted:function(){this._disposed||this._skipButton.show()},_onTimeChanged:function(){this._disposed||this._skipButton.updateTime(this._vastTagAd.getCurrentTime())},_onSkipButtonActivated:function(){this._timeChangedCallback&&(this._vastTagAd.offTimeChanged(this._timeChangedCallback.getValue()),this._timeChangedCallback=null)},_onSkip:function(){this._vastTagAd.skip()},dispose:function(){this._timeChangedCallback&&(this._vastTagAd.offTimeChanged(this._timeChangedCallback.getValue()),this._timeChangedCallback=null);this._vastTagAd.offPlayStarted(this._playStartedCallback.getValue());this._skipButton.dispose();this._disposed=!0}};ct=function(n,t){function i(n){return"g367CB268B1094004A3689751E7AC568F-"+n}function r(n){t[n]&&(f._buttonElement.style[n]=t[n])}n.hasClass(i("inf-videoButtons-container"))||n.addClass(i("inf-videoButtons-container"));w(n.getDocument());this._waitingClassName=i("inf-playerButton")+" "+i("inf-skipButton");this._activeClassName=this._waitingClassName+" "+i("inf-skipButton-active");var f=this;this._buttonElement=document.createElement("div");this._buttonElement.innerText=t.skipOffset===0?"Skip >>":"Skip in "+t.skipOffset;this._buttonElement.className=this._waitingClassName;this._buttonElement.style.display="none";r("top");r("left");r("bottom");r("right");this._buttonElement.style.cursor="default";n.insert(this._buttonElement);this._adContainer=n;this._disposed=!1;this._options=t;this._activated=!1;this._activatedEvent=new u;this._skipEvent=new u};ct.prototype={_activate:function(){function t(){n._disposed||n._skipEvent.trigger()}this._activated=!0;this._buttonElement.innerText="Skip >>";this._buttonElement.style.cursor="pointer";this._buttonElement.className=this._activeClassName;var n=this;this._buttonElement.addEventListener("click",t);this._buttonElement.addEventListener("touchstart",t);this._activatedEvent.trigger()},onSkip:function(n){this._skipEvent.addHandler(n)},onActivated:function(n){this._activatedEvent.addHandler(n)},show:function(){this._buttonElement.style.display=""},updateTime:function(n){this._activated||this._onTimeChanged(n)},_onTimeChanged:function(n){var t,i;if(n>0&&this.show(),t=Math.round(this._options.skipOffset-n),t<=0){this._activate();return}i="Skip in "+t;this._buttonElement.innerText!==i&&(this._buttonElement.innerText=i)},dispose:function(){this._activatedEvent.removeAllHandlers();this._skipEvent.removeAllHandlers();this._adContainer.remove(this._buttonElement);this._disposed=!0}};lt=function(n,t,i,r){function f(n){return"g367CB268B1094004A3689751E7AC568F-"+n}var u,e;if(t.hasClass(f("inf-videoButtons-container"))||t.addClass(f("inf-videoButtons-container")),w(t.getDocument()),u=document.createElement("div"),u.className=f("inf-playerButton")+" "+f("inf-closeButton")+(i.showOnHover?" "+f("inf-hover"):""),e=document.createElement("div"),e.className=f("inf-closeButton-icon"),u.appendChild(e),t.insert(u),u.addEventListener("click",function(){n.skip()}),u.addEventListener("touchstart",function(){n.skip()}),i.showOnHover&&(r.getIsIE()||r.getIsEdge())){this._mouseEnterCallback=function(){u.style.display="block"};this._mouseLeaveCallback=function(){u.style.display="none"};t.onMouseEnter(this._mouseEnterCallback);t.onMouseLeave(this._mouseLeaveCallback)}this._buttonElement=u;this._adContainer=t};lt.prototype={_onMouseEnter:function(){},_onMouseLeave:function(){},dispose:function(){this._mouseEnterCallback&&(this._adContainer.offMouseEnter(this._mouseEnterCallback),this._adContainer.offMouseLeave(this._mouseLeaveCallback));this._adContainer.remove(this._buttonElement)}};at=function(n,t,i,r){function f(n){return"g367CB268B1094004A3689751E7AC568F-"+n}function s(){var t=n.getVolume();n.getVolume()===null||n.getVolume()===0?h():(o=t,c())}function h(){e.className=f("inf-volumeButton-icon-off")}function c(){e.className=f("inf-volumeButton-icon-on")}function l(){var t=n.getVolume();t!==null&&(t===0?n.setVolume(o):n.setVolume(0))}var u,e,o;if(t.hasClass(f("inf-videoButtons-container"))||t.addClass(f("inf-videoButtons-container")),w(t.getDocument()),u=document.createElement("div"),u.className=f("inf-playerButton")+" "+f("inf-volumeButton")+(i.showOnHover?" "+f("inf-hover"):""),e=document.createElement("div"),u.appendChild(e),t.insert(u),i.showOnHover&&(r.getIsIE()||r.getIsEdge())){this._mouseEnterCallback=function(){u.style.display="block"};this._mouseLeaveCallback=function(){u.style.display="none"};t.onMouseEnter(this._mouseEnterCallback);t.onMouseLeave(this._mouseLeaveCallback)}o=1;s();n.onVolumeChanged(s);u.addEventListener("click",l);this._buttonElement=u;this._adContainer=t};at.prototype={dispose:function(){this._adContainer.remove(this._buttonElement)}};vt=function(n){this._changeEvent=new u;this._frequencyMultiple=n;this._intervalHandle=null;this._lastReportedValue=null;this._paused=!1;this._notifiedAfterPause=!1};vt.prototype={activate:function(n){var t,i;if(isNaN(n.getDuration()))throw"Media element source is not loaded. Duration is unknown";if(!(n.getCurrentTime()>=n.getDuration())){t=this;this._paused=n.getPaused()===!0;n.onPause(function(){t._paused=!0;t._notifiedAfterPause=!1});n.onResume(function(){t._paused=!1});i=n.getDuration()*1e3/this._frequencyMultiple;this._intervalHandle!=null&&clearInterval(this._intervalHandle);this._lastReportedValue=null;this._intervalHandle=setInterval(function(){if(t._paused){if(t._notifiedAfterPause)return;t._notifiedAfterPause=!0}(n.getCurrentTime()>=n.getDuration()&&t._intervalHandle!=null&&(clearInterval(t._intervalHandle),t._intervalHandle=null),t._lastReportedValue!==n.getCurrentTime())&&(t._lastReportedValue=n.getCurrentTime(),t._changeEvent.trigger(t._lastReportedValue))},i<1?1:i)}},dispose:function(){this._intervalHandle!=null&&(clearInterval(this._intervalHandle),this._changeEvent.removeAllHandlers())},setNotificationFrequency:function(n){this._frequencyMultiple=n},onChange:function(n){this._changeEvent.addHandler(n)}};g=function(n,t,i){this._tag=n;this._adContainer=t;this._volumeButton=null;this._started=!1;this._volumeButtonMode=o.VideoButtonDisplayMode.never;this._audioMode=o.VideoAudioMode.muted;this._closeButton=null;this._closeButtonMode=o.VideoButtonDisplayMode.never;this._player=null;this._log=i;this._failedToStartUnmuted=null;this._clientInfo=new y(new UAParser);this._disposed=!1;this._skipped=!1;this._playEnded=!1;this._loadError=null;this._loadingIndicator=null;this._disposeActions=[];this._loaded=!1;this._vpaidPlayer=new k(t,this._clientInfo,new a(i.getName()+" > VPAIDPlayer",{level:i.getLevel()}));this._players=[new ft(t,this._clientInfo,new a(i.getName()+" > PlainVideoPlayer",{level:i.getLevel()})),this._vpaidPlayer];this._mediaFileSelectionOrder=new ot(t,this._players);this._timeUpdateTracker=new vt(10);this._playEndedEvent=new u;this._playStartedEvent=new u;this._pauseEvent=new u;this._resumeEvent=new u;this._firstQuartileEvent=new u;this._midpointEvent=new u;this._thirdQuartileEvent=new u;this._enterFullscreenEvent=new u;this._exitFullscreenEvent=new u;this._clickThroughEvent=new u;this._clickEvent=new u;this._timeChangedEvent=new u;this._volumeChangedEvent=new u;this._skippedEvent=new u;this._loadFinishedEvent=new u;this._waitingForDataChangedEvent=new u;this._showPlayButtonOnPause=!0;this._activeWaterfalls=[];this._isMuted=null;this._vastErrorCode={noSupportedMedia:403,errorDisplayingMedia:405,vpaidError:901}};g.prototype={load:function(){this._loadingIndicator=new st(this,this._adContainer);var n=this;return new e(function(t,i){var r=function(t){n._loaded=!0;n._loadError=t||"Unknown Error";n._loadFinishedEvent.trigger();i(n._loadError)};if(n._tag==null||n._tag.length===0){r("Url is empty");return}if(n._disposed){r("Aborted");return}n._log.info("Start loading vast tag");n._downloadTag(function(i,u){if(n._log.info("Vast tag load finished"),i==null){r(u.message);return}if(!i.ads||i.ads.length===0){r("No Ads were found in a tag");return}if(n._disposed){r("Aborted");return}n._linkObjects(i);var f=new b;n._activeWaterfalls.push(f);i.ads.map(function(t){return function(){return n._loadAd(t)}}).forEach(function(n){f.addAction(n)});f.onActionFailed(function(t){n._log.info("Failed to find MediaFile in Ad. Details: "+t)});n._log.info("Attempting to find ad in vast tag");f.run().then(function(i){n._log.info("Successfully found ad in vast tag");var r=n._setupVastTagCreativeTracking(i);n._setupEvents(i,r);n._setupPlayButton(i);n._player=i;n._loaded=!0;n.setVolumeButtonMode(n._volumeButtonMode);n.setCloseButtonMode(n._closeButtonMode);n.setSkipButton(n._skipButtonOptions);n._loadFinishedEvent.trigger();t()},function(n){var t=n==="Aborted"?n:n?"Failed to find playable MediaFile. Reason: "+JSON.stringify(n):"Failed to find playable MediaFile.";r(t)})})})},setPlayer:function(n){this._vpaidPlayer=null;this._players=[n]},_downloadTag:function(n){if(this._tag&&this._tag.indexOf("<?xml ")===0){var t;try{window.DOMParser?t=(new DOMParser).parseFromString(this._tag,"text/xml"):(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(data))}catch(i){this._log.error("Failed to parse xml content");n(null,{message:"Invalid XML Document. Details: "+i});return}DMVAST.client.get("",{response:t},n)}else DMVAST.client.get(this._tag,n)},dispose:function(){this._disposed||(this._disposed=!0,this._players.forEach(function(n){n.dispose()}),this._activeWaterfalls.forEach(function(n){n.dispose()}),this._disposeActions.forEach(function(n){n()}),this._disposeActions=[],this._volumeButton&&this._volumeButton.dispose(),this._closeButton&&this._closeButton.dispose(),this._skipButton&&this._skipButton.dispose(),this._loadingIndicator&&this._loadingIndicator.dispose(),this._timeUpdateTracker&&this._timeUpdateTracker.dispose(),this._player=null)},awaitAdLoaded:function(n,t){if(this.getLoaded())this.getLoadError()!=null?t(this.getLoadError()):n();else{var i=this;this.onLoadFinished(function(){i.getLoadError()!=null?t(i.getLoadError()):n()})}},getLoaded:function(){return this._loaded},getPlayEnded:function(){return this._playEnded},getClientRect:function(){return this._adContainer.getClientRect()},getWaitingForData:function(){return this._player?this._player.getWaitingForData():!1},setVPAIDAdLoadTimeout:function(n){this._vpaidPlayer.setLoadTimeout(n)},setVPAIDAdStartTimeout:function(n){this._vpaidPlayer.setStartTimeout(n)},onWaitingForDataChanged:function(n){return this._waitingForDataChangedEvent.addHandler(n)},offWaitingForDataChanged:function(n){return this._waitingForDataChangedEvent.removeHandler(n)},getLoadError:function(){return this._loadError},getDisposed:function(){return this._disposed},hide:function(){this._adContainer.setOffscreen(!0)},show:function(){this._adContainer.setOffscreen(!1)},skip:function(){if(!this._loaded)throw"Cannot skip ad that is not loaded";return this._skipped||this._disposed?e.resolve():(this._skipped=!0,this._player.skip())},setShowPlayButtonOnPause:function(n){this._showPlayButtonOnPause=n;this._player&&this._setupPlayButton(this._player)},setSkipButton:function(n){(this._skipButtonOptions=n,this._player!=null)&&(this._skipButton&&(this._skipButton.dispose(),this._skipButton=null),this._skipButtonOptions!=null&&(this._skipButton=new ht(this,this._adContainer,this._skipButtonOptions)))},setCloseButtonMode:function(n){(this._closeButtonMode=n,this._player!=null)&&(this._closeButton&&(this._closeButton.dispose(),this._closeButton=null),n!==o.VideoButtonDisplayMode.never&&(this._closeButton=new lt(this,this._adContainer,{showOnHover:n===o.VideoButtonDisplayMode.onHover},this._clientInfo)))},setVolumeButtonMode:function(n){(this._volumeButtonMode=n,this._player!=null)&&(this._volumeButton&&(this._volumeButton.dispose(),this._volumeButton=null),n!==o.VideoButtonDisplayMode.never&&(this._volumeButton=new at(this,this._adContainer,{showOnHover:n===o.VideoButtonDisplayMode.onHover},this._clientInfo)))},setAudioMode:function(n){this._audioMode=n},getVolume:function(){return this._player?this._player.getVolume():null},getFailedToStartUnmuted:function(){return this._player?this._failedToStartUnmuted:null},getCurrentTime:function(){return this._player?this._player.getCurrentTime():null},getDuration:function(){return this._player?this._player.getDuration():null},setVolume:function(n){if(n<0||n>1)throw"Invalid volume value. Must be between 0 and 1";return this._player?this._player.getVolume()===n?!0:this._player.setVolume(n):null},getAdContainer:function(){return this._adContainer},enterFullscreen:function(){return this._player?this._player.enterFullscreen():!1},onEnterFullscreen:function(n){this._enterFullscreenEvent.addHandler(n)},offEnterFullscreen:function(n){this._enterFullscreenEvent.removeHandler(n)},onExitFullscreen:function(n){this._exitFullscreenEvent.addHandler(n)},offExitFullscreen:function(n){this._exitFullscreenEvent.removeHandler(n)},onVolumeChanged:function(n){this._volumeChangedEvent.addHandler(n)},onClickThrough:function(n){this._clickThroughEvent.addHandler(n)},onClick:function(n){this._clickEvent.addHandler(n)},_setupVastTagCreativeTracking:function(n){var r=n.getMediaFile(),u=r.creative.ad,f=r.creative,t=new DMVAST.tracker(u,f),i;this._vastTracker=t;i=this;n.onPlayStarted(function(){var r=n.getDuration(),i;t.setDuration(r);t.load();i=n.getCurrentTime();t.setProgress(i===0?1e-6:i)});this._isMuted=n.getVolume()===0;t.setMuted(this._isMuted);n.onVolumeChanged(function(){var r=n.getVolume()===0;i._isMuted!==r&&(i._isMuted=r,t.setMuted(r))});n.onPause(function(){t.setPaused(!0)});n.onResume(function(){t.setPaused(!1)});n.onClick(function(n){if(n.playerHandles)t.on("clickthrough",function r(u){t.removeListener("clickthrough",r);try{window.open(n.url||u)}catch(f){}setTimeout(function(){i._clickThroughEvent.trigger()},0)});else setTimeout(function(){i._clickThroughEvent.trigger()},0);t.click()});n.onPlayStarted(function(){var u=Object.getOwnPropertyNames(t.trackingEvents).find(function(n){return n.indexOf("progress-")===0})!==undefined,r;r=u?100:Math.max(10,Math.ceil(n.getDuration()));i._timeUpdateTracker.setNotificationFrequency(r);i._timeUpdateTracker.onChange(function(n){t.setProgress(n)});i._timeUpdateTracker.activate(n)});n.onPlayEnded(function(){t.complete()});n.onEnterFullscreen(function(){t.setFullscreen(!0);t.setExpand(!0);i._enterFullscreenEvent.trigger()});n.onExitFullscreen(function(){t.setFullscreen(!1);t.setExpand(!1);i._exitFullscreenEvent.trigger()});return t},_setupPlayButton:function(n){if(!this._showPlayButtonOnPause){this._hidePlayButton();this._showPlayButtonCallback&&(n.offPause(this._showPlayButtonCallback),this._showPlayButtonCallback=null);this._hidePlayButtonCallback&&(n.offResume(this._hidePlayButtonCallback),this._hidePlayButtonCallback=null);return}this._showPlayButtonCallback=new c(this,this._showPlayButton).getValue();this._hidePlayButtonCallback=new c(this,this._hidePlayButton).getValue();n.onPause(this._showPlayButtonCallback);n.onResume(this._hidePlayButtonCallback)},_showPlayButton:function(){this._playButton&&this._playButton.dispose();var n=this;this._playButton=new p(this._adContainer);this._playButton.onClick(function(){n.play()})},_hidePlayButton:function(){this._playButton&&(this._playButton.dispose(),this._playButton=null)},_setupEvents:function(n,t){function r(n){return function(){setTimeout(n,0)}}var i=this;n.onPlayEnded(function(){i._log.info("Ad completed");i._playEnded=!0;setTimeout(function(){i._playEndedEvent.trigger()},1)});n.onPause(function(){i._log.info("Ad paused");i._pauseEvent.trigger()});n.onResume(function(){i._log.info("Ad resumed");i._resumeEvent.trigger()});this._timeUpdateTracker.onChange(function(){i._timeChangedEvent.trigger()});n.onClick(function(){i._clickEvent.trigger()});n.onVolumeChanged(function(){i._log.info("Ad volume changed");i._volumeChangedEvent.trigger()});n.onWaitingForDataChanged(function(){i._waitingForDataChangedEvent.trigger()});n.onSkipped(function(){i._log.info("Ad skipped");i._skipped=!0;i._vastTracker.skip();i._skippedEvent.trigger();i.dispose()});t.on("firstQuartile",r(function(){i._firstQuartileEvent.trigger()}));t.on("midpoint",r(function(){i._midpointEvent.trigger()}));t.on("thirdQuartile",r(function(){i._thirdQuartileEvent.trigger()}))},_applyAudioMode:function(){function t(){n.setVolume(1)}function i(){n.setVolume(0)}if(this._audioMode===o.VideoAudioMode.muted)return this.setVolume(0);var n=this;if(this._audioMode===o.VideoAudioMode.audioOnMouseOver){this._adContainer.onMouseEnter(t);this._adContainer.onMouseLeave(i);return this._disposeActions.push(function(){n._adContainer.offMouseEnter(t);n._adContainer.offMouseLeave(i)}),!0}return this.setVolume(1)},_linkObjects:function(n){n.ads.forEach(function(n){n.creatives&&n.creatives.forEach(function(t){t.ad=n;t.mediaFiles&&t.mediaFiles.forEach(function(n){n.creative=t})})})},getMediaFile:function(){return this._player==null?null:this._player.getMediaFile()},onPlayEnded:function(n){this._playEndedEvent.addHandler(n)},onPlayStarted:function(n){this._playStartedEvent.addHandler(n)},offPlayStarted:function(n){this._playStartedEvent.removeHandler(n)},onPause:function(n){this._pauseEvent.addHandler(n)},onResume:function(n){this._resumeEvent.addHandler(n)},onFirstQuartile:function(n){this._firstQuartileEvent.addHandler(n)},onMidpoint:function(n){this._midpointEvent.addHandler(n)},onThirdQuartile:function(n){this._thirdQuartileEvent.addHandler(n)},onSkipped:function(n){this._skippedEvent.addHandler(n)},onLoadFinished:function(n){this._loadFinishedEvent.addHandler(n)},offLoadFinished:function(n){this._loadFinishedEvent.removeHandler(n)},onTimeChanged:function(n){this._timeChangedEvent.addHandler(n)},offTimeChanged:function(n){this._timeChangedEvent.removeHandler(n)},_loadAd:function(n){var t=this;return new e(function(i,r){var u,o,e,s,h,f;if(!n.creatives||n.creatives.length===0){r("Ad contains no creatives");return}if(u=n.creatives.filter(function(n){return n.mediaFiles&&n.mediaFiles.length>0}),u.length===0){r("Ad contains no creatives with media files");return}if(o=u.reduce(function(n,t){return n.concat(t.mediaFiles)},[]),e=t._filterNonPlayableMediaFiles(o),e.length===0){s=new DMVAST.tracker(n,u[0]);s.errorWithCode(t._vastErrorCode.noSupportedMedia);r("No supported media files are found");return}h=t._mediaFileSelectionOrder.apply(e);f=new b;t._activeWaterfalls.push(f);h.forEach(function(n){f.addAction(function(){return t._loadMediaFile(n)})});f.run().then(function(n){i(n)}).catch(function(){r("All ad media files failed to load")})})},_loadMediaFile:function(n){var t=this;return new e(function(i,r){var u=t._players.find(function(t){return t.canPlay(n)==="probably"})||t._players.find(function(t){return t.canPlay(n)==="maybe"});if(u===undefined||u==null){r("Unexpected. No player can play specified media file");return}u.loadMediaFile(n).then(function(){i(u)}).catch(function(i){var f=new DMVAST.tracker(n.creative.ad,n.creative),e=u instanceof k?t._vastErrorCode.vpaidError:t._vastErrorCode.errorDisplayingMedia;f.errorWithCode(e);r(i)})})},_filterNonPlayableMediaFiles:function(n){var t=this;return n.filter(function(n){return t._players.find(function(t){return t.canPlay(n)!==""})!==undefined})},play:function(){var n=this;return new e(function(t,i){if(!n.getLoaded()){i("There is no media file loaded to play");return}n._log.info("Attempting to "+(n._started?"resume":"start")+" ad");n._player.play().then(function(){if(!n._started){n._started=!0;var i=n._applyAudioMode();n._audioMode===o.VideoAudioMode.audio&&(i===!1&&n._log.info("Attempt to play unmuted was blocked. Video was muted"),n._failedToStartUnmuted=i===!1);n._log.info("Ad started successfully");n._playStartedEvent.triggerOnce()}t()}).catch(function(r){if(typeof r=="string"&&r.indexOf("NotAllowedError")===0){n._log.info("Since muted video play attempt was blocked awaiting for user to manually start the ad.");n._awaitManualStart().then(t,i);return}n._log.error("Failed to start/resume ad. Reason: "+r);i(r)})})},_awaitManualStart:function(){var n=this;return new e(function(t,i){var r=new p(n._adContainer);r.onClick(function(){r.dispose();n.play().then(t,i)})})},pause:function(){return this._player==null?e.reject("There is no media file loaded"):this._player.pause()}};typeof g367CB268B1094004A3689751E7AC568F=="undefined"&&(g367CB268B1094004A3689751E7AC568F={});g367CB268B1094004A3689751E7AC568F.AuctionParticipant=function(n,t,i,r,u){if(this.rank=i.Rank,this.adItem=i,this.type=i.MediaSourceType==o.MediaSourceType.VideoTag?"tag":i.MediaSourceType==o.MediaSourceType.Video?"video":null,this.clickUrl=t,this.type==null)throw"Unsupported type";this._adContainer=r;this._vastTagAd=new g(n,r,u);this._vastTagAd.hide();this._loadStarted=!1};g367CB268B1094004A3689751E7AC568F.AuctionParticipant.prototype={load:function(){return this._loadStarted=!0,this._vastTagAd.load()},dispose:function(){this._vastTagAd.dispose();this._adContainer.removeFromDOM()},getLoadedVastTagAd:function(){return this.getHasFill()===!0&&!this.getDisposed()?this._vastTagAd:null},getHasFill:function(){return this._vastTagAd.getLoadError()!=null?!1:this._vastTagAd.getLoaded()?!0:null},getDisposed:function(){return this._vastTagAd.getDisposed()},getLoading:function(){return this._loadStarted&&!this._vastTagAd.getLoaded()&&!this._vastTagAd.getDisposed()},getLoadStats:function(){return{loaded:this._vastTagAd.getLoadError()!=="Aborted",success:!0,empty:this._vastTagAd.getLoadError()!=null}}};g367CB268B1094004A3689751E7AC568F.VastTagAuction=function(n,t,i){this._currentWinner=null;this._currentWinnerPlayer=null;this._secondBestTag=null;this._state="Initial";this._processedTags=0;this._options=t;this._onFinishedCallback=null;this._ocvFrame=null;this._reporting=i;this._auctionTracked=!1;this._auctionCompleteEvent=new u;this._participantLoadedEvent=new u;this._timeout=null;this._timeoutHandle=null;this._log=new a("VastTagAuction",{enableSendToServer:!1});var r=function(n,t){return t.rank-n.rank};this._participants=n.slice(0).sort(r)},function(){g367CB268B1094004A3689751E7AC568F.VastTagAuction.prototype={currentWinner:function(){return this._currentWinner},currentSecondBid:function(){return this._secondBestTag},setTimeout:function(n){if(this._state!=="Initial")throw"Attempt to set timeout on auction that was already started";this._timeout=n},stop:function(){if(this._deactivateTimeoutCounter(),this._state!="Finished"){if(this._state=="Initial"){this._state="Finished";return}this._state="Finished";this._participants.filter(function(n){return n.getLoading()}).forEach(function(n){n.dispose()})}},dispose:function(){this.stop();this._participants.filter(function(n){return!n.getDisposed()}).forEach(function(n){n.dispose()})},onAuctionComplete:function(n){this._auctionCompleteEvent.addHandler(n)},offAuctionComplete:function(n){this._auctionCompleteEvent.removeHandler(n)},onParticipantLoaded:function(n){this._participantLoadedEvent.addHandler(n)},offParticipantLoaded:function(n){this._participantLoadedEvent.removeHandler(n)},state:function(){return this._state},_handleVastTagProcessed:function(n){this._processedTags++;this._stopLoadingNotRelevantTags();this._updateWinnerAndSecondBestBid(n);this._participantLoadedEvent.trigger(n);this._checkFinished()},_checkFinished:function(){this._participants.length===this._processedTags&&this._onAuctionComplete()},_stopLoadingNotRelevantTags:function(){var n,t;this._participants.filter(function(n){return n.getHasFill()===!1&&!n.getDisposed()}).forEach(function(n){n.dispose()});this._options.maxTags&&(n=this._participants.findIndexOfNth(function(n){return n.getHasFill()===!0},this._options.maxTags),n>=0&&n+1<this._participants.length&&this._participants.slice(n+1).filter(function(n){return!n.getDisposed()}).forEach(function(n){n.dispose()}));t=this._participants.findIndex(function(n){return n.getHasFill()===!0});t>=0&&t+1<this._participants.length&&this._participants.slice(t+1).filter(function(n){return n.getHasFill()===!0&&!n.getDisposed()}).forEach(function(n){n.dispose()})},start:function(){if(this._state=="Initial"){if(this._participants.length===0){this._state="Finished";return}this._activateTimeoutCounter();this._state="Running";var n=this;this._participants.forEach(function(t){t.load().then(function(){n._handleVastTagProcessed(t)}).catch(function(){n._handleVastTagProcessed(t)})})}},_activateTimeoutCounter:function(){if(this._timeout!=null){var n=this;this._timeoutHandle=setTimeout(function(){n.stop()},this._timeout)}},_deactivateTimeoutCounter:function(){this._timeout!=null&&this._timeoutHandle!=null&&(clearTimeout(this._timeoutHandle),this._timeoutHandle=null)},_findFirstVideoParticipant:function(){var n=this._participants.find(function(n){return n.type==="video"});return n?n:null},_wrap:function(n){var t=this;return function(){n.apply(t,arguments)}},_onAuctionComplete:function(){if(this._deactivateTimeoutCounter(),this._state==="Finished"){this._auctionCompleteEvent.trigger();return}this._trackAuctionResult();this._state="Finished";this._currentWinner==null&&(this._currentWinner=this._findFirstVideoParticipant());this._auctionCompleteEvent.trigger()},_trackAuctionResult:function(){if(!this._auctionTracked){this._auctionTracked=!0;var n=this._participants.filter(function(n){return n.type!=="video"}).map(function(n){return{adItem:n.adItem,tagLoadStats:n.getLoadStats()}});this._reporting.trackAuctionResult(n)}},_updateWinnerAndSecondBestBid:function(n){this._state!="Finished"&&n.getHasFill()===!0&&(this._currentWinner==null||this._currentWinner.rank<n.rank?(this._secondBestTag=this._currentWinner?this._currentWinner:null,this._currentWinner=n):(this._secondBestTag==null||this._secondBestTag.rank<n.rank)&&(this._secondBestTag=n))}}}();nt=function(n,t,i,r){this._origin=n;this._browser=t;this._useAdblockEndpoint=i;this._dfpImpressionUrl=r};nt.prototype={create:function(n,t){var i=n===o.TrackingEventType.infinityVolume||n===o.TrackingEventType.partnerVolume?this._dfpImpressionUrl:"";return new ui(this._origin,n,t,this._browser,this._useAdblockEndpoint,i)}};ui=function(n,t,i,r,u,f){function c(n){var t=Math.floor(89999999*Math.random()+1e7);return n.indexOf("?")==-1?n+"?_="+t:n+"&_="+t}function o(n){s(c(h(n)))}function s(n){var t=document.createElement("img"),i;t.setAttribute("width","1");t.setAttribute("height","1");t.setAttribute("position","absolute");t.setAttribute("style","display: none;");t.setAttribute("src",n);i=document.body;i&&i.insertBefore(t,i.firstChild)}function l(n){var t=new XMLHttpRequest;t.open("POST",a());t.setRequestHeader("Content-Type","application/json");t.withCredentials=!0;t.onreadystatechange=function(){t.readyState===4&&console.log("Tracking request "+(t.status===200?"succeded":"failed"))};t.send(JSON.stringify(n));f&&f.length>0&&s(f)}function h(r){var u=encodeURIComponent(JSON.stringify(r));return f+n+"/track.eng?evt="+t+"&dcid="+i+"&evtData="+u}function a(){return u?n+"/"+t+"/"+i+"/track.a2b":n+"/track.eng?evt="+t+"&dcid="+i}var e=[];this.addTrackingEvents=function(n){if(n==null)throw"Tracking events cannot be null";for(var t=0;t<n.length;t++)this.addTrackingEvent(n[t])};this.addTrackingEvent=function(n){if(n==null)throw"Tracking event cannot be null";e.push(n)};this.send=function(){var t,n;if(console.log("Sending tracking request. Total events: "+e.length),e.length!==0)if(t=(r.msie||r.name==="IE")&&parseInt(r.major)<10,t||typeof XMLHttpRequest=="undefined")for(n=0;n<e.length;n++)o(e[n]);else e.length==1&&!u&&h(e[0]).length<2048?o(e[0]):l(e)}};v=null,function(){var n=function(n,t,i,r){this.v=n;this.v2=t;this.ms=i;this.am=r},t=function(n,t,i){this.v=n;this.v2=t;this.at=i},i=function(n,t,i){this.v=n;this.s=t;this.f=i},r=function(n,t){this.v=n;this.vp=t},u=function(n){this.v=n};v=function(n,t,i){this._browser=n.getBrowser();this._dataContext=t;this._requestFactory=i};v.prototype={trackAuctionResult:function(n){if(n!=null&&n.length!==0){var i=this,r=n.map(function(n){return i._adItemToAdFillTrackingEvent(n.adItem,n.tagLoadStats)}),t=this._createTrackingResponseBuilderRequest(o.TrackingEventType.adFill);t.addTrackingEvents(r);t.send()}},trackVideoAdPlayError:function(n){if(n==null)throw"adItem should not be null";var i=new u(n.VolumeMetric),t=this._createTrackingResponseBuilderRequest(o.TrackingEventType.videoAdPlayError);t.addTrackingEvent(i);t.send()},trackViewProgress:function(n,t){if(n==null)throw"adItem should not be null";var u=new r(n.VolumeMetric,t),i=this._createTrackingResponseBuilderRequest(o.TrackingEventType.adView);i.addTrackingEvent(u);i.send()},trackAuctionWinnerVolume:function(i,r,u){var h,s,e,f,c;if(i==null||!i.VolumeMetric)throw"Winner should not be null";h=(this._browser.msie||this._browser.name==="IE")&&parseInt(this._browser.major)<10;s=r&&r.VolumeMetric&&!h?r.VolumeMetric:null;i.MediaId===0?(c=typeof i.PartnerAuctionType=="undefined"?null:i.PartnerAuctionType,e=new t(i.VolumeMetric,s,c),f=this._createTrackingResponseBuilderRequest(o.TrackingEventType.partnerVolume),f.addTrackingEvent(e),f.send()):(e=new n(i.VolumeMetric,s,i.MediaSegmentId,u),f=this._createTrackingResponseBuilderRequest(o.TrackingEventType.infinityVolume),f.addTrackingEvent(e),f.send())},_createTrackingResponseBuilderRequest:function(n){return this._requestFactory.create(n,this._dataContext)},_adItemToAdFillTrackingEvent:function(n,t){if(n==null||t==null)return null;var r=t.loaded?t.success?o.AdFillCheckStatus.success:o.AdFillCheckStatus.failed:o.AdFillCheckStatus.skipped,u=r==o.AdFillCheckStatus.success?!t.empty:null;return new i(n.VolumeMetric,r,u)}}}();yt=function(){};yt.prototype={};for(pt in v.prototype)typeof v.prototype[pt]=="function"&&(yt.prototype[pt]=function(){});fi=function(n){var t=function(n){var t=Object.keys(n).map(function(t){return{id:t,bid:n[t].hb_pb,ad:n[t].hb_adid}});return t.sort(function(n,t){return t.bid-n.bid})};this.isEnabled=!1;this.isRunning=!1;this.initialize=function(i){_this=this;_this.isEnabled=!0;n.Loader.Script.Load(i.ScriptUrl,!1,function(){window.pbjs&&(window.pbjs.que.push(function(){pbjs.addAdUnits(i.Units);pbjs.requestBids({timeout:i.Timeout,bidsBackHandler:function(){var n=t(pbjs.getAdserverTargeting());n.length&&(_this.result=n[0]);_this.isRunning=!1}})}),_this.isRunning=!0)})}};wt=function(){this._value='<?xml version="1.0" encoding="UTF-8"?><VAST version="2.0"><\/VAST>'};wt.prototype={_plainVideoVastTagXmlTemplate:'<?xml version="1.0" encoding="UTF-8"?><VAST version="2.0"><Ad><InLine><AdSystem><\/AdSystem><AdTitle><\/AdTitle><Creatives><Creative><Linear><Duration>00:00:30<\/Duration><MediaFiles>{MEDIAFILE}<\/MediaFiles><VideoClicks>{CLICK_URL}<\/VideoClicks>{PARAMS}<\/Linear><\/Creative><\/Creatives><\/InLine><\/Ad><\/VAST>',setMedia:function(n,t,i,r){var u={delivery:"progressive",height:i,width:t,type:"video/mp4",url:n};this.setMediaFiles([u],r)},_encodeCdata:function(n){return n&&n.indexOf("]\]>")>=0?n.replace("]\]>","]]]\]><![CDATA[>"):n},setMediaFiles:function(n,t,i){var f=this,e=n.map(function(n){return f._serializeMediaFile(n)}).join(""),r,u;t=this._encodeCdata(t);r=t?"<ClickThrough><![CDATA["+t+"]\]><\/ClickThrough>":"";i=this._encodeCdata(i);u=i?"<AdParameters><![CDATA["+i+"]\]><\/AdParameters>":"";this._value=this._plainVideoVastTagXmlTemplate.replace("{MEDIAFILE}",e).replace("{CLICK_URL}",r).replace("{PARAMS}",u)},_serializeMediaFile:function(n){var i="<MediaFile";for(var t in n)n.hasOwnProperty(t)&&t!=="url"&&n[t]!=null&&(i+=" "+t+'="'+n[t]+'"');return i+("><![CDATA["+this._encodeCdata(n.url)+"]\]><\/MediaFile>")},setVpaid:function(n,t,i,r){var u={height:i,width:t,type:"application/javascript",apiFramework:"VPAID",url:n};this.setMediaFiles([u],"",r)},getValue:function(){return this._value}};VastTagXmlFactory={createFromVideoAdItem:function(n,t){var i,r,u;if(n.MediaSourceType!==o.MediaSourceType.Video)throw new Error("Unexpected source type");return i=new wt,r=n.getAdUrl(),n.VideoUrls&&n.VideoUrls.length>0?(u=n.VideoUrls.map(function(n){return{delivery:n.MimeType==="video/mp4"?"progressive":"streaming",width:n.Width,height:n.Height,bitrate:n.Bitrate,minBitrate:n.MinBitrate,maxBitrate:n.MaxBitrate,type:n.MimeType,url:n.Url}}),u.push({delivery:"progressive",width:n.MediaSettings.Width,height:n.MediaSettings.Height,type:"video/mp4",url:r}),i.setMediaFiles(u,t)):i.setMedia(r,n.MediaSettings.Width,n.MediaSettings.Height,t),i}};var tt=g367CB268B1094004A3689751E7AC568F,ci=new tt.AdItemExtensions(n,new tt.UrlTransforms(tt,tt.Lotame)),si=new nt(g367CB268B1094004A3689751E7AC568F.InfinityHost,g367CB268B1094004A3689751E7AC568F.UaParser.getBrowser(),g367CB268B1094004A3689751E7AC568F.IsAdblockRequest,g367CB268B1094004A3689751E7AC568F.DFPImpressionUrl),bt={Url:1,Image:2,Script:3,Html:4,Video:5,VideoTag:6,OnClickIFrame:7,HeaderBidding:8},r=g367CB268B1094004A3689751E7AC568F.floatingbanner_jQuery,f=n.Settings,s=g367CB268B1094004A3689751E7AC568F.GetSettingAsInt,h=g367CB268B1094004A3689751E7AC568F.GetSettingAsBool,l=g367CB268B1094004A3689751E7AC568F.GetSettingAsStr,i={Loader:g367CB268B1094004A3689751E7AC568F,Environment:{Svg:t.document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),HiRes:(t.devicePixelRatio||t.screen.deviceXDPI/t.screen.logicalXDPI)>1,Debug:new RegExp("staging.*adsupply.com|localhost").test(t.location.href)||g367CB268B1094004A3689751E7AC568F.DebugEnabled,ASInstance:g367CB268B1094004A3689751E7AC568F.IsASInstance()},TopDom:{Window:t,Document:t.document,Body:t.document.body,ScrollCount:0},DefaultLogo:{svg:"//asmedia.adsupplyssl.com/_assets/logos/adsupplylogo_purplered.svg",png:"//asmedia.adsupplyssl.com/_assets/logos/adsupplylogo_65x25_purplered.png",url:"http://www.adsupply.com/"},Enums:{Trigger:{OnScrollAndPause:8,OnElementVisible:7,OnScrollBelowFold:6,OnScrollToBottom:5,OnScroll:4,Delay5Sec:3,Delay3Sec:2,Delay1Sec:1,Immediate:0},BannerPosition:{GutterRight:10,GutterLeft:9,OverElement:8,LeftCenter:7,BottomCenter:6,RightCenter:5,TopCenter:4,TopLeft:3,TopRight:2,BottomLeft:1,BottomRight:0},Theme:{Light:1,Dark:2},SpecialFx:{BeamMeUp:6,TvTime:5,ZoomIn:4,FadeIn:3,SlideIn:2,None:1},ZoneBarPosition:{Top:1,Bottom:2},CloseButtonType:{TextAndIcon:3,RoundIcon:2,SquareIcon:1,TextOnly:0}},VastTagAuction:null,InitVastTagAuction:function(t){function r(){var n=document.createElement("div");return n.className="inf-vastTagAd-container",n.style.width="100%",n.style.height="100%",i.AdMedia.Div.get(0).appendChild(n),n}i.FloatingBanner.Div.get(0).style.width="480px";i.FloatingBanner.Div.get(0).style.position="absolute";i.FloatingBanner.Div.get(0).style.left="-5000px";i.TopDom.Body.appendChild(i.FloatingBanner.Div.get(0));var u=new y(g367CB268B1094004A3689751E7AC568F.UaParser),f=t.map(function(t){var f=t.MediaSettings,e=i.Loader.CreateAdUrl(n,!1,t).replace(/__player-width__/g,f.Width).replace(/__player-height__/g,f.Height),o=new a("INF > FB z"+n.ZoneId+" > VastTagAd p"+t.PlacementId+" m"+t.MediaId,{enableSendToServer:!1});return new g367CB268B1094004A3689751E7AC568F.AuctionParticipant(e,null,t,new d(r(),f.Width,f.Height,u),o)}),e=new v(g367CB268B1094004A3689751E7AC568F.UaParser,n.DataContextId,si),o={contentHost:g367CB268B1094004A3689751E7AC568F.CDNHost,delayedStart:!0,contentCss:"asinf-admediaiframe",debug:g367CB268B1094004A3689751E7AC568F.DebugEnabled};i.VastTagAuction=new g367CB268B1094004A3689751E7AC568F.VastTagAuction(f,o,e);i.VastTagAuction.start()},Init:function(){if(i.DebugLog("Floating Banner Init"),this.InitializeClientSideAuctions(n),this.InitVideoAd(),i.PositionOverElement={GetLeft:function(){var n=this.Element.offset(),t=this.Element.width();return n.left+t/2-i.AdMedia.Width/2},GetTop:function(){var n=i.PositionOverElement.Element.offset(),t=i.PositionOverElement.Element.height();return n.top+t/2-i.AdMedia.Height/2}},i.PositionOverElement.Selector=l(f,"PositionOverElementCssSelector","",!0),i.PositionOverElement.Element=r(i.PositionOverElement.Selector,i.TopDom.Body),i.CollisionDetection={},i.CollisionDetection.Selector=l(f,"FloatingBannerDontBlock","",!0),i.CollisionDetection.Elements=r(i.CollisionDetection.Selector,i.TopDom.Body),i.CollisionDetection.Enabled=i.CollisionDetection.Elements.length?!0:!1,i.GetDimensions(),i.Loader.LoadWebFonts(i.TopDom.Document,["Lato:400,700:latin"]),i.DebugLog(n),i.DebugLog(i),i.Branding.Enabled&&i.Branding.Src&&i.Branding.Url)i.Branding.Img.on("load",function(){if(i.DebugLog("Branding Img Loaded"),i.Branding.Enabled){i.Branding.Div.show();i.Branding.Div.on("click."+i.FloatingBanner.Id,function(n){i.Loader.StopEvent(n);i.TopDom.Window.open(i.Branding.Url)})}});if(i.FloatingBanner.Trigger===i.Enums.Trigger.OnElementVisible){var t=l(f,"TriggerElement","",!0);i.FloatingBanner.TriggerElement=r(t,i.TopDom.Body).first();i.FloatingBanner.TriggerElement.length||(i.FloatingBanner.Trigger=i.Enums.Trigger.Immediate)}if(i.DebugLog("Trigger: "+i.FloatingBanner.Trigger),i.FloatingBanner.Trigger===i.Enums.Trigger.OnScrollAndPause)r(i.TopDom.Window).on("scroll."+i.FloatingBanner.Id,function(){i.TopDom.ScrollCount++;i.FloatingBanner.SinceLastScrollTimer&&i.TopDom.Window.clearTimeout(i.FloatingBanner.SinceLastScrollTimer);i.TopDom.ScrollCount>1&&(i.FloatingBanner.SinceLastScrollTimer=i.TopDom.Window.setTimeout(function(){r(i.TopDom.Window).off("scroll."+i.FloatingBanner.Id);i.PresentFloatingBanner()},3e3))});else if(i.FloatingBanner.Trigger===i.Enums.Trigger.OnElementVisible)if(i.IsElementInViewport(i.FloatingBanner.TriggerElement))i.GetDimensions(),i.PresentFloatingBanner();else r(i.TopDom.Window).on("scroll."+i.FloatingBanner.Id,function(){i.GetDimensions();i.IsElementInViewport(i.FloatingBanner.TriggerElement)&&(r(i.TopDom.Window).off("scroll."+i.FloatingBanner.Id),i.PresentFloatingBanner())});else if(i.FloatingBanner.Trigger===i.Enums.Trigger.OnScrollBelowFold)r(i.TopDom.Window).on("scroll."+i.FloatingBanner.Id,function(){i.GetDimensions();var n=Math.min(i.TopDom.WinHeight,600);i.TopDom.ScrollTop>n&&(r(i.TopDom.Window).off("scroll."+i.FloatingBanner.Id),i.PresentFloatingBanner())});else if(i.FloatingBanner.Trigger===i.Enums.Trigger.OnScrollToBottom)r(i.TopDom.Window).on("scroll."+i.FloatingBanner.Id,function(){i.GetDimensions();i.TopDom.ScrollTop+i.TopDom.WinHeight>i.TopDom.DocHeight-200&&(i.DebugLog("Triggered OnScrollToBottom. ScrollTop: "+i.TopDom.ScrollTop+" WinHeight: "+i.TopDom.WinHeight+" DocHeight-200: "+(i.TopDom.DocHeight-200)),r(i.TopDom.Window).off("scroll."+i.FloatingBanner.Id),i.PresentFloatingBanner())});else if(i.FloatingBanner.Trigger===i.Enums.Trigger.OnScroll)r(i.TopDom.Window).on("scroll."+i.FloatingBanner.Id,function(){i.TopDom.ScrollCount++;i.DebugLog("ScrollEvent #"+i.TopDom.ScrollCount);i.TopDom.ScrollCount>1&&(r(i.TopDom.Window).off("scroll."+i.FloatingBanner.Id),i.PresentFloatingBanner())});else i.FloatingBanner.Trigger===i.Enums.Trigger.Delay5Sec?setTimeout(function(){i.PresentFloatingBanner()},5e3):i.FloatingBanner.Trigger===i.Enums.Trigger.Delay3Sec?setTimeout(function(){i.PresentFloatingBanner()},3e3):i.FloatingBanner.Trigger===i.Enums.Trigger.Delay1Sec?setTimeout(function(){i.PresentFloatingBanner()},1e3):(i.DebugLog("Default Trigger Used"),i.PresentFloatingBanner())},InitializeClientSideAuctions:function(n){if(n.IsPrebidJsAuctionRequired){this.Prebid.initialize(n.PrebidJs);return}if(n.IsVideoTagAuctionRequired){var t=n.AdItems.filter(function(n){return n.MediaSourceType==bt.VideoTag});t.length&&this.InitVastTagAuction(t)}},InitVideoAd:function(){function f(){var n=document.createElement("div");return n.className="inf-vastTagAd-container",n.style.width="100%;",n.style.height="100%",i.AdMedia.Div.get(0).appendChild(n),n}function e(){if(i.Loader.IsMediaTest)return i.Loader.BuildMediaClickThroughUrl(t);var r=["rand="+Math.floor(89999999*Math.random()+1e7),"res="+i.Loader.GetScreenWidth()+"x"+i.Loader.GetScreenHeight(),"dcid="+(n.DataContextId?n.DataContextId:""),"v="+t.VolumeMetric];return i.Loader.InfinityHost+"/clicktag.engine?"+r.join("&")}function o(){var n=e();return VastTagXmlFactory.createFromVideoAdItem(t,n).getValue()}var u=n.AdItems.filter(function(n){return n.MediaSourceType==bt.Video}),t;if(u.length!==0){t=u[0];i.FloatingBanner.Div.get(0).parentNode||i.TopDom.Body.appendChild(i.FloatingBanner.Div.get(0));i.FloatingBanner.Div.get(0).style.width="480px";i.FloatingBanner.Div.get(0).style.height="320px";var s=new y(g367CB268B1094004A3689751E7AC568F.UaParser),h=f(),c=new d(h,t.MediaSettings.Width,t.MediaSettings.Height,s),l=new a("INF > FB z"+n.ZoneId+" > HostedVideo VastTagAd p"+t.PlacementId+" m"+t.MediaId,{enableSendToServer:!1}),r=new g(o(),c,l);r.hide();r.load();i.VideoAd=r}},PickAd:function(n){var t,r;if(i.Prebid.isEnabled&&i.Prebid.result!=null)return i.PickAdHeaderBidding(n);if(t=i.VastTagAuction,t&&t.currentWinner())return this.PickVastTagAuctionAd(n);if(t&&t.dispose(),r=this.PickNonClientSideAd(n),r!=null)r.onFinished(function(){i.CloseCompletedVideoAd()});return r},CloseCompletedVideoAd:function(){var n=i.PositionOverElement.Enabled?!1:!0;n?i.Minimize(function(){i.Destroy()}):i.Destroy()},PickVastTagAuctionAd:function(n){var r=i.VastTagAuction,u=r.currentSecondBid()?r.currentSecondBid().adItem:null,f,t;u==null&&(u=i.GetTopRankNonClientSideMediaSourceItem(n.AdItems));f=r.currentWinner();t=new it(f.adItem,f.getLoadedVastTagAd(),u,n,i);t.onStarted(function(){i.VideoAd&&(i.VideoAd.dispose(),i.VideoAd.getAdContainer().removeFromDOM())});t.onFinished(function(){i.CloseCompletedVideoAd()});t.onFailedToStart(function(){var t,u;if(r.dispose(),t=i.PickNonClientSideAd(n),t){u=t.getAdItem().MediaSettings;i.ResizeFloatingBanner(s(u,"Width",300),s(u,"Height",250));t.onFinished(function(){i.CloseCompletedVideoAd()});t.show()}else i.Destroy()});return t},ResizeFloatingBanner:function(n,t){i.AdMedia.Width=n;i.AdMedia.Height=t;i.AdMedia.Div.css({width:i.AdMedia.Width,height:i.AdMedia.Height});i.FloatingBanner.Div.css({width:i.AdMedia.Width,height:i.AdMedia.Height});i.LoadingScreen.Div.css({width:i.AdMedia.Width,height:i.AdMedia.Height});i.AdMedia.Iframe.css({width:i.AdMedia.Width,height:i.AdMedia.Height})},PickNonClientSideAd:function(n){var t=i.GetTopRankNonClientSideMediaSourceItem(n.AdItems);return t==null?null:t.MediaSourceType==o.MediaSourceType.Video?new it(t,i.VideoAd,null,n,i):new dt(t,n,i)},PickAdHeaderBidding:function(n){return selection=n.AdItems.find(function(n){return n.MediaSourceType==bt.HeaderBidding&&n.MediaId==i.Prebid.result.id}),new gt(selection,n,module)},PresentFloatingBanner:function(){var u,t,e,o;if(i.DebugLog("PresentFloatingBanner"),i.FloatingBanner.Presented){i.DebugLog("Unit Already Presented");return}if(i.VastTagAuction!=null&&i.VastTagAuction.state()!="Finished"){i.VastTagAuction.onAuctionComplete(function(){i.PresentFloatingBanner()});i.VastTagAuction.stop();return}if(i.Prebid.isEnabled&&i.Prebid.isRunning){setTimeout(i.PresentFloatingBanner,250);return}if(u=i.AdMedia.AdItem,!u){if(t=i.PickAd(n),t==null){i.FloatingBanner.Presented=!0;i.Destroy();i.DebugLog("No Ad Items to show");return}i.AdMedia.AdItem=t.getAdItem();i.AdMedia.Ad=t;u=t.getAdItem()}if(e=u.MediaSettings,i.AdMedia.Width=s(e,"Width",300),i.AdMedia.Height=s(e,"Height",250),i.Gutter.Enabled=i.FloatingBanner.MinWinWidth>0&&(i.FloatingBanner.GetPosition(i.AdMedia)===i.Enums.BannerPosition.GutterLeft||i.FloatingBanner.GetPosition(i.AdMedia)===i.Enums.BannerPosition.GutterRight),i.PositionOverElement.Enabled=(h(f,"PositionOverElement",!1)||i.FloatingBanner.GetPosition(i.AdMedia)===i.Enums.BannerPosition.OverElement)&&i.PositionOverElement.Element.length,i.StyleBlock=i.BuildStyleBlock(i.FloatingBanner,i.AdMedia,i.PositionOverElement),i.StyleBlock.appendTo(i.TopDom.Body),i.CollisionDetection.Enabled&&i.RunCollisionDetection()){setTimeout(function(){i.GetDimensions();i.PresentFloatingBanner()},500);return}if(i.Gutter.Enabled)r(i.TopDom.Window).on("scroll."+i.FloatingBanner.Id+"res",function(){i.FloatingBanner.Presented&&i.FloatingBanner.Div.is(":visible")&&(i.GetDimensions(),i.Gutter.Relocate(i.AdMedia))});if(o=i.FloatingBanner.MinWinWidth>0&&(i.FloatingBanner.GetPosition(i.AdMedia)===i.Enums.BannerPosition.BottomRight||i.FloatingBanner.GetPosition(i.AdMedia)===i.Enums.BannerPosition.BottomLeft||i.FloatingBanner.GetPosition(i.AdMedia)===i.Enums.BannerPosition.TopRight||i.FloatingBanner.GetPosition(i.AdMedia)===i.Enums.BannerPosition.TopLeft||i.FloatingBanner.GetPosition(i.AdMedia)===i.Enums.BannerPosition.LeftCenter||i.FloatingBanner.GetPosition(i.AdMedia)===i.Enums.BannerPosition.RightCenter||i.FloatingBanner.GetPosition(i.AdMedia)===i.Enums.BannerPosition.GutterLeft||i.FloatingBanner.GetPosition(i.AdMedia)===i.Enums.BannerPosition.GutterRight),o){if(i.Resizing.Activate(i.AdMedia),i.Resizing.HasEnaughSpace(i.AdMedia)==!1)return}else if(i.AdMedia.Width>i.TopDom.WinWidth||i.FloatingBanner.MinWinWidth>0&&i.TopDom.WinWidth<i.FloatingBanner.MinWinWidth||i.FloatingBanner.GetHeight()>i.TopDom.WinHeight){setTimeout(function(){i.GetDimensions();i.PresentFloatingBanner()},500);i.DebugLog("Media is too large");return}if(i.Loader.IsCapped("InfNumFB"+n.ZoneId,"InfNumFBExpire"+n.ZoneId,n.Settings.cap)){i.Destroy();i.DebugLog("Unit Cap");return}if(i.Loader.IncrementCap("InfNumFB"+n.ZoneId,"InfNumFBExpire"+n.ZoneId,n.Settings.capLength),i.FloatingBanner.Presented=!0,i.PositionOverElement.Enabled){i.DebugLog("PositionOverElement");r(i.TopDom.Window).on("resize."+i.FloatingBanner.Id+"positionoverelement",function(){if(!i.FloatingBanner.Presented)return!1;clearTimeout(i.PositionOverElement.ResizeTimeout);i.PositionOverElement.ResizeTimeout=setTimeout(function(){i.GetDimensions();i.FloatingBanner.Div.css({top:i.PositionOverElement.GetTop()+"px",left:i.PositionOverElement.GetLeft()+"px"})},500)})}i.FloatingBanner.Div.on("click",function(n){i.DebugLog("Stopping Click Event Bubbling");i.Loader.StopEvent(n)});i.CloseButton.Div.on("click",function(n){i.DebugLog("CloseButton Click Event");i.Loader.StopEvent(n);var t=i.PositionOverElement.Enabled?!1:h(f,"MinOnClose",!1);t?i.Minimize():i.Destroy()});i.OpenButton.Div.on("click",function(n){i.DebugLog("OpenButton Click Event");i.Loader.StopEvent(n);i.Maximize()});i.AboutAd.Div.on("click",function(n){i.DebugLog("AboutAd Click Event");i.Loader.StopEvent(n);i.TopDom.Window.open(i.AboutAd.Url,"_blank")});if(n.Settings.Tracking){i.AdMedia.Ad.track();return}i.Gutter.Enabled&&(i.GetDimensions(),i.Gutter.Relocate(i.AdMedia));setTimeout(function(){i.CloseButton.Enabled&&i.CloseButton.Div.css("visibility","visible");i.AboutAd.Enabled&&i.AboutAd.Div.css("visibility","visible");i.TrimUIElements()},i.CloseButton.Delay*1e3);i.FloatingBanner.Div.get(0).parentNode==null&&i.TopDom.Body.appendChild(i.FloatingBanner.Div.get(0));i.AdMedia.Ad.show();i.FloatingBanner.Div.get(0).style.removeProperty("position");i.FloatingBanner.Div.get(0).style.removeProperty("left");i.FloatingBanner.Div.get(0).style.removeProperty("width");i.FloatingBanner.Div.get(0).style.removeProperty("height");i.TrimUIElements();i.FloatingBanner.SpecialFx===i.Enums.SpecialFx.BeamMeUp?i.ShowBeamMeUp(i.AdMedia):i.FloatingBanner.SpecialFx===i.Enums.SpecialFx.TvTime?i.ShowTvTime():i.FloatingBanner.SpecialFx===i.Enums.SpecialFx.ZoomIn?i.ShowZoomIn():i.FloatingBanner.SpecialFx===i.Enums.SpecialFx.FadeIn?(i.FloatingBanner.Div.hide().addClass("presented"),i.FloatingBanner.Div.fadeIn(500)):i.FloatingBanner.SpecialFx===i.Enums.SpecialFx.None?i.FloatingBanner.Div.addClass("presented"):setTimeout(function(){i.FloatingBanner.Div.addClass("transitions presented")},10);setTimeout(function(){i.FloatingBanner.Div.removeClass("transitions")},2500);i.FloatingBanner.AutoClose&&setTimeout(function(){i.Destroy()},i.FloatingBanner.AutoCloseTime*1e3)},TrimUIElements:function(){i.DebugLog("TrimUIElements");i.Message.Enabled&&i.Message.Div.show();i.Branding.Enabled&&i.Branding.Div.show();i.AboutAd.Enabled&&i.AboutAd.Div.show();var u=i.Branding.Enabled?i.Branding.Div.outerWidth():0,f=i.Message.Enabled?i.Message.Div.outerWidth():0,n=i.AboutAd.Enabled?i.AboutAd.Div.outerWidth():0,t=i.CloseButton.Div.outerWidth(),r=i.ZoneBar.Div.outerWidth();i.Message.Div.hasClass("left-aligned")||i.Message.Div.hasClass("right-aligned")?r<u+t+n+f&&(i.Message.Enabled=!1,i.Message.Div.hide()):(i.Collision(i.Message.Div,i.ButtonContainer.Div)||i.Collision(i.Message.Div,i.Branding.Div))&&(i.Message.Div.addClass("left-aligned"),(i.Collision(i.Message.Div,i.ButtonContainer.Div)||i.Collision(i.Message.Div,i.Branding.Div))&&(i.Message.Enabled=!1,i.Message.Div.hide()));r<u+t+n&&(i.Branding.Enabled=!1,i.Branding.Div.hide());r<t+n&&(i.AboutAd.Enabled=!1,i.AboutAd.Div.hide())},ShowZoomIn:function(){i.DebugLog("ShowZoomIn");i.FloatingBanner.Div.hide().addClass("presented");var n=i.FloatingBanner.Div.clone().html("").appendTo(i.TopDom.Body),t=r("<div />").appendTo(n),u=i.FloatingBanner.Color===i.Enums.Theme.Light?"#fff":"#000";n.css({background:"none","-moz-box-shadow":"none","-webkit-box-shadow":"none","box-shadow":"none"});t.css({position:"absolute",left:"50%",top:"50%","background-color":u,height:"0%",width:"0%","-moz-box-shadow":"0 0 20px 0 "+u,"-webkit-box-shadow":"0 0 20px 0 "+u,"box-shadow":"0 0 20px 0 "+u});i.Branding.Enabled&&t.css({"background-image":"url("+i.Branding.Src+")","background-position":"center center","background-repeat":"no-repeat","background-size":"40%"});n.show();t.animate({left:"0%",top:"0%",height:"100%",width:"100%"},300,function(){i.FloatingBanner.Div.show();i.Branding.Enabled?setTimeout(function(){t.fadeOut(500,function(){n.remove()})},500):t.fadeOut(200,function(){n.remove()})})},ShowTvTime:function(){i.DebugLog("ShowTvTime");i.FloatingBanner.Div.hide().addClass("presented");var n=i.FloatingBanner.Div.clone().html("").appendTo(i.TopDom.Body),t=r("<div />").appendTo(n),u=r("<div />").appendTo(n);n.css({background:"rgba(0,0,0,0.3)","-moz-box-shadow":"none","-webkit-box-shadow":"none","box-shadow":"none"});t.css({position:"absolute",left:"50%",top:"50%","background-color":"#fff",height:"0%",width:"0%","-moz-box-shadow":"0 0 20px 0 #fff","-webkit-box-shadow":"0 0 20px 0 #fff","box-shadow":"0 0 20px 0 #fff"});u.css({position:"absolute",left:"45%",top:"45%",background:"#fff",height:"10%",width:"10%","-webkit-border-radius":"50%","-moz-border-radius":"50%","border-radius":"50%","-moz-box-shadow":"0 0 20px 0 #fff","-webkit-box-shadow":"0 0 20px 0 #fff","box-shadow":"0 0 20px 0 #fff"});i.Branding.Enabled&&t.css({"background-image":"url("+i.Branding.Src+")","background-position":"center center","background-repeat":"no-repeat","background-size":"40%"});n.show();u.animate({position:"absolute",left:"50%",top:"50%",height:"0%",width:"0%"},400,function(){u.remove()});t.animate({left:"0%",height:"1%",width:"100%"},300,function(){t.animate({top:"0%",height:"100%"},200,function(){i.FloatingBanner.Div.show();i.Branding.Enabled?setTimeout(function(){t.fadeOut(500,function(){n.remove()})},500):t.fadeOut(200,function(){n.remove()})})})},ShowBeamMeUp:function(n){i.DebugLog("ShowBeamMeUp");i.FloatingBanner.Div.hide().addClass("presented");var u=i.FloatingBanner.Div.clone().html("").appendTo(i.TopDom.Body),f=r("<div />").hide().appendTo(u),t=i.FloatingBanner.Color===i.Enums.Theme.Light?"#fff":"#000";u.css({background:"none",overflow:"hidden","-moz-box-shadow":"none","-webkit-box-shadow":"none","box-shadow":"none"});f.css({position:"absolute",left:"0%",top:"0%","background-color":t,height:"100%",width:"100%","-moz-box-shadow":"0 0 20px 0 "+t,"-webkit-box-shadow":"0 0 20px 0 "+t,"box-shadow":"0 0 20px 0 "+t});i.Branding.Enabled&&f.css({"background-image":"url("+i.Branding.Src+")","background-position":"center center","background-repeat":"no-repeat","background-size":"40%"});u.show();var e=i.Branding.Enabled?1500:1e3,o=i.Branding.Enabled?25:15,l=e/o,s=i.Branding.Enabled?800:200,h=0,c={};c=setInterval(function(){var f=i.FloatingBanner.GetPosition(n)===i.Enums.BannerPosition.TopCenter||i.FloatingBanner.GetPosition(n)===i.Enums.BannerPosition.BottomCenter,e=r("<div />").attr("id","line-"+h),l=Math.floor(Math.random()*500+1),s=Math.floor(Math.random()*50+1),a=Math.random();e.css({position:"absolute",left:f?"0%":"-"+s+"%",top:f?"-"+s+"%":"0%","background-color":t,height:f?s+"%":"100%",width:f?"100%":s+"%",opacity:a*2,"-moz-box-shadow":"0 0 20px 0 "+t,"-webkit-box-shadow":"0 0 20px 0 "+t,"box-shadow":"0 0 20px 0 "+t});e.appendTo(u);e.animate({left:f?"0%":"100%",top:f?"100%":"0%",opacity:"0"},l*2,function(){e.remove()});++h===o&&i.TopDom.Window.clearInterval(c)},l);setTimeout(function(){i.Branding.Enabled?f.fadeIn(s,function(){i.FloatingBanner.Div.show();setTimeout(function(){f.fadeOut(800,function(){u.remove()})},500)}):f.fadeIn(s,function(){i.FloatingBanner.Div.show();f.fadeOut(200,function(){u.remove()})})},e)},GetTopRankNonClientSideMediaSourceItem:function(n){var t,i;return n.length>0&&(t=n.filter(function(n){return!n.IsClientSideMediaSourceItem}),t.length>0)?(i=t.sort(function(n,t){return t.Rank-n.Rank}),i[0]):null},AttachAdMedia:function(t){i.DebugLog("AttachAdMedia");var u=i.Loader.CreateAdUrl(n,!1,t);if(i.AdMedia.Iframe=t.BannerDiv?r("<div />",{"class":"asinf-admediaiframe",scrolling:"no",frameBorder:0}):r("<iframe><\/iframe>",{"class":"asinf-admediaiframe",scrolling:"no",frameBorder:0}),i.AdMedia.Iframe.css({width:i.AdMedia.Width,height:i.AdMedia.Height}),t.BannerDiv)r.ajax({dataType:"html",url:u,cache:!1,success:function(n){i.AdMedia.Iframe.html(n);i.LoadingScreen.Div.hide()}});else i.AdMedia.Iframe.one("load",function(){i.AdMedia.Iframe.on("load",function(){i.LoadingScreen.Div.hide()});var n=i.Loader.Utils.getFrameDocument(i.AdMedia.Iframe);n&&n.location.replace(u)});i.AdMedia.Iframe.appendTo(i.AdMedia.Div)},RunCollisionDetection:function(){i.DebugLog("RunCollisionDetection");var n=!1,t=i.FloatingBanner.Div.clone().html("").css("visibility","hidden").addClass("presented").appendTo(i.TopDom.Body);return t.get(0).style.removeProperty("width"),t.get(0).style.removeProperty("height"),i.CollisionDetection.Elements.each(function(u){var f=r(i.CollisionDetection.Elements[u],i.TopDom.Body);return n=i.Collision(t,f),i.DebugLog("Collision Test---"),i.DebugLog(t),i.DebugLog(f),i.DebugLog(n),i.DebugLog("---"),n===!0?!1:void 0}),t.remove(),i.DebugLog("RunCollisionDetection returns: "+n),n},Collision:function(n,t){var i=!1,r=n.offset().left,u=n.offset().top,o=n.outerHeight(!1),s=n.outerWidth(!1),h=u+o,c=r+s,f=t.offset().left,e=t.offset().top,l=t.outerHeight(!1),a=t.outerWidth(!1),v=e+l,y=f+a;return h<e||u>v||c<f||r>y||(i=!0),i},BuildStyleBlock:function(n,t,u){var e,o,s;return i.DebugLog("BuildStyleBlock"),e="#"+n.Id,o="<style>",o+=e+",",o+=e+" * { font-family: Lato, Arial, Helvetica, sans-serif; font-size: 11px; border: 0; vertical-align: baseline; margin: 0; padding: 0; line-height: 1; }",o+=e+" { width: "+t.Width+"px; height: "+n.GetHeight()+"px; -webkit-box-shadow: 0 0 10px 0 rgba(0,0,0,0.4); -moz-box-shadow: 0 0 10px 0 rgba(0,0,0,0.4); box-shadow: 0 0 10px 0 rgba(0,0,0,0.4);  }",o+=n.TransBg?n.Color===i.Enums.Theme.Dark?e+" { background: rgba(0,0,0,0.85); }":e+" { background: rgba(255,255,255,0.85); }":n.Color===i.Enums.Theme.Dark?e+" { background: #000; }":e+" { background: #fff; }",o+=u.Enabled?e+" { position: absolute }":e+" { position: fixed }",s=h(f,"FullWidthBg",!1)&&(i.FloatingBanner.GetPosition(i.AdMedia)===i.Enums.BannerPosition.TopCenter||i.FloatingBanner.GetPosition(i.AdMedia)===i.Enums.BannerPosition.BottomCenter),u.Enabled?o+=e+"{ top: "+u.GetTop()+"px; left: "+u.GetLeft()+"px; }":n.GetPosition(t)===i.Enums.BannerPosition.GutterLeft?o+=e+"{ top: "+i.Gutter.Margin+"px; left: "+i.Gutter.Margin+"px; }":i.FloatingBanner.GetPosition(t)===i.Enums.BannerPosition.GutterRight?o+=e+"{ top: "+i.Gutter.Margin+"px; right: "+i.Gutter.Margin+"px; }":s?i.FloatingBanner.GetPosition(t)===i.Enums.BannerPosition.TopCenter?(o+=e+" { top: -"+(i.FloatingBanner.GetHeight()+10)+"px; left: 0; width: 100%; }",o+=e+".presented { top: 0; }"):(o+=e+" { bottom: -"+(i.FloatingBanner.GetHeight()+10)+"px; left: 0; width: 100%; }",o+=e+".presented { bottom: 0; }"):i.FloatingBanner.GetPosition(t)===i.Enums.BannerPosition.LeftCenter?(o+=e+" { top: 50%; left: -"+(i.AdMedia.Width+10)+"px; margin-top: -"+i.FloatingBanner.GetHeight()/2+"px; }",o+=e+".presented { left: 0; }"):i.FloatingBanner.GetPosition(t)===i.Enums.BannerPosition.BottomCenter?(o+=e+" { bottom: -"+(i.FloatingBanner.GetHeight()+10)+"px; left: 50%; margin-left: -"+i.AdMedia.Width/2+"px; }",o+=e+".presented { bottom: 0; }"):i.FloatingBanner.GetPosition(t)===i.Enums.BannerPosition.RightCenter?(o+=e+" { top: 50%; right: -"+(i.AdMedia.Width+10)+"px; margin-top: -"+i.FloatingBanner.GetHeight()/2+"px; }",o+=e+".presented { right: 0; }"):i.FloatingBanner.GetPosition(t)===i.Enums.BannerPosition.TopCenter?(o+=e+" { top: -"+(i.FloatingBanner.GetHeight()+10)+"px; left: 50%; margin-left: -"+i.AdMedia.Width/2+"px; }",o+=e+".presented { top: 0; }"):i.FloatingBanner.GetPosition(t)===i.Enums.BannerPosition.TopLeft?(o+=e+" { top: 0; left: -"+(i.AdMedia.Width+10)+"px; }",o+=e+".presented { left: 0; }"):i.FloatingBanner.GetPosition(t)===i.Enums.BannerPosition.TopRight?(o+=e+" { top: 0; right: -"+(i.AdMedia.Width+10)+"px; }",o+=e+".presented { right: 0; }"):i.FloatingBanner.GetPosition(t)===i.Enums.BannerPosition.BottomLeft?(o+=e+" { bottom: 0; left: -"+(i.AdMedia.Width+10)+"px; }",o+=e+".presented { left: 0; }"):(o+=e+" { bottom: 0; right: -"+(i.AdMedia.Width+10)+"px; }",o+=e+".presented { right: 0; }"),o+=e+" .as-zonebar { width: 100%; height: "+i.ZoneBar.Height+"px; font-size: "+i.ZoneBar.FontSize+"px; white-space: nowrap; text-align: center; }",i.ZoneBar.Transparent?(o+=e+" .as-zonebar { position: absolute; left: 0; }",o+=i.ZoneBar.Position===i.Enums.ZoneBarPosition.Top?e+" .as-zonebar { top: 0; }":e+" .as-zonebar { bottom: 0; }"):(o+=e+" .as-zonebar { position: relative; }",o+=i.ZoneBar.Position===i.Enums.ZoneBarPosition.Bottom?e+" .as-zonebar { -webkit-box-shadow: 0 -10px 10px -10px rgba(0,0,0,0.4); -moz-box-shadow: 0 -10px 10px -10px rgba(0,0,0,0.4); box-shadow: 0 -10px 10px -10px rgba(0,0,0,0.4); }":e+" .as-zonebar { -webkit-box-shadow: 0 10px 10px -10px rgba(0,0,0,0.4); -moz-box-shadow: 0 10px 10px -10px rgba(0,0,0,0.4); box-shadow: 0 10px 10px -10px rgba(0,0,0,0.4); }"),o+=e+" .as-buttoncontainer { position: absolute; top: 0; right: 0; white-space: nowrap; }",o+=e+" .as-aboutad { position: relative; display: block; float: left; height: "+i.ZoneBar.Height+"px; line-height: "+i.ZoneBar.Height+"px; padding-left: "+i.ZoneBar.HSpace+"px; padding-right: "+i.ZoneBar.HSpace+"px; font-weight: 700; cursor: pointer; white-space: nowrap; }",o+=e+" .as-aboutad a { cursor: pointer; text-decoration: none; }",o+=e+" .as-closebutton { float: left; display: block; position: relative; font-weight: 700; cursor: pointer; text-align: center; overflow: hidden; }",o+=e+" .as-closebutton.inactive { opacity: 0.6; cursor: not-allowed; text-indent: 0; }",i.CloseButton.Type===i.Enums.CloseButtonType.SquareIcon?(o+=e+" .as-closebutton { text-indent: -9999em; font-size: 20px; height: "+i.ZoneBar.Height+"px; width: "+i.ZoneBar.Height+"px; line-height: "+i.ZoneBar.Height+"px; }",o+=e+" .as-closeicon { position: absolute; top: 0; left: 0; vertical-align: middle; display: inline-block; display: inline-block; height: "+i.ZoneBar.Height+"px; width: "+i.ZoneBar.Height+"px; }"):i.CloseButton.Type===i.Enums.CloseButtonType.RoundIcon?(o+=e+" .as-closebutton { text-indent: -9999em; font-size: 20px; margin-right: "+i.ZoneBar.VSpace+"px; top: "+i.ZoneBar.VSpace+"px; height: "+(i.ZoneBar.Height-i.ZoneBar.VSpace*2)+"px; width: "+(i.ZoneBar.Height-i.ZoneBar.VSpace*2)+"px; line-height: "+(i.ZoneBar.Height-i.ZoneBar.VSpace*2)+"px; -webkit-border-radius: 50%; -moz-border-radius: 50%; border-radius: 50%; }",o+=e+" .as-closeicon { position: absolute; top: 0; left: 0; vertical-align: middle; height: "+(i.ZoneBar.Height-i.ZoneBar.VSpace*2)+"px; width: "+(i.ZoneBar.Height-i.ZoneBar.VSpace*2)+"px; }"):i.CloseButton.Type===i.Enums.CloseButtonType.TextAndIcon?(o+=e+" .as-closebutton { top: 0; height: "+i.ZoneBar.Height+"px; width: auto; line-height: "+i.ZoneBar.Height+"px; padding-left: "+i.ZoneBar.HSpace+"px; padding-right: 0; }",o+=e+" .as-closeicon { display: block; float: right; vertical-align: middle; height: "+i.ZoneBar.Height+"px; width: "+i.ZoneBar.Height+"px; }"):(o+=e+" .as-closebutton { top: 0; height: "+i.ZoneBar.Height+"px; width: auto; line-height: "+i.ZoneBar.Height+"px; padding-left: "+i.ZoneBar.HSpace+"px; padding-right: "+i.ZoneBar.HSpace+"px;}",o+=e+" .as-closeicon { display: none; }"),o+=e+" .as-aboutad:hover .as-tooltip { display: block; }",o+=e+" .as-tooltip { display: none; position: absolute; padding: 5px; }",o+=e+" .as-tooltip:after { /* Triangle */ position: absolute; border-left: 10px solid transparent; border-right: 10px solid transparent; content: ' '; height: 0; width: 0; }",o+=e+" .as-tooltipiframe { display: block; margin: 0; padding: 0; height: 230px; width: 280px; border: 1px solid rgba(0,0,0,0.2); -webkit-box-shadow: 0 0 10px 0 rgba(0,0,0,0.2); -moz-box-shadow: 0 0 10px 0 rgba(0,0,0,0.2); box-shadow: 0 0 10px 0 rgba(0,0,0,0.2); }",i.PositionOverElement.Enabled?(o+=e+" .as-tooltip { top: 100%; right: -15px; }",o+=e+" .as-tooltip:after { top: -4px; right: 50px; border-bottom: 10px solid #fff;}"):s?i.FloatingBanner.GetPosition(t)===i.Enums.BannerPosition.TopCenter?(o+=e+" .as-tooltip { top: 100%; right: 0; left: auto;}",o+=e+" .as-tooltip:after { top: -4px; right: 10px; left: auto; border-bottom: 10px solid #fff;}"):(o+=e+" .as-tooltip { bottom: 100%; right: 0; }",o+=e+" .as-tooltip:after { bottom: -4px; right: 10px; border-top: 10px solid #fff; }"):i.FloatingBanner.GetPosition(t)===i.Enums.BannerPosition.LeftCenter?(o+=e+" .as-tooltip { top: 100%; left: -15px; }",o+=e+" .as-tooltip:after { top: -4px; left: 50px; border-bottom: 10px solid #fff;}"):i.FloatingBanner.GetPosition(t)===i.Enums.BannerPosition.BottomCenter?(o+=e+" .as-tooltip { bottom: 100%; left: -100px; }",o+=e+" .as-tooltip:after { bottom: -4px; left: 130px; border-top: 10px solid #fff;}"):i.FloatingBanner.GetPosition(t)===i.Enums.BannerPosition.RightCenter?(o+=e+" .as-tooltip { top: 100%; right: -15px; }",o+=e+" .as-tooltip:after { top: -4px; right: 50px; border-bottom: 10px solid #fff;}"):i.FloatingBanner.GetPosition(t)===i.Enums.BannerPosition.TopCenter?(o+=e+" .as-tooltip { top: 100%; left: -100px; }",o+=e+" .as-tooltip:after { top: -4px; left: 130px; border-bottom: 10px solid #fff;}"):i.FloatingBanner.GetPosition(t)===i.Enums.BannerPosition.TopLeft?(o+=e+" .as-tooltip { top: 100%; left: -15px; }",o+=e+" .as-tooltip:after { top: -4px; left: 50px; border-bottom: 10px solid #fff;}"):i.FloatingBanner.GetPosition(t)===i.Enums.BannerPosition.TopRight?(o+=e+" .as-tooltip { top: 100%; right: 0; }",o+=e+" .as-tooltip:after { top: -4px; right: 10px; border-bottom: 10px solid #fff;}"):i.FloatingBanner.GetPosition(t)===i.Enums.BannerPosition.BottomLeft?(o+=e+" .as-tooltip { bottom: 100%; left: -15px; }",o+=e+" .as-tooltip:after { bottom: -4px; left: 50px; border-top: 10px solid #fff; }"):(o+=e+" .as-tooltip { bottom: 100%; right: 0; }",o+=e+" .as-tooltip:after { bottom: -4px; right: 10px; border-top: 10px solid #fff; }"),o+=e+" .as-openbutton { display: block; position: absolute; font-weight: 700; cursor: pointer; overflow: hidden; height: 20px; width: auto; line-height: 20px; padding: 0 8px; white-space: nowrap; -webkit-box-shadow: 0 0 2px 1px rgba(0,0,0,0.2); -moz-box-shadow: 0 0 2px 1px rgba(0,0,0,0.2); box-shadow: 0 0 2px 1px rgba(0,0,0,0.2); }",i.FloatingBanner.GetPosition(t)===i.Enums.BannerPosition.LeftCenter?(o+=e+" .as-openbutton { bottom: 100%; left: 0; }",i.OpenButton.Div.addClass("as-roundedtop as-rotate90")):i.FloatingBanner.GetPosition(t)===i.Enums.BannerPosition.BottomCenter?(i.OpenButton.Div.addClass("as-roundedtop"),o+=e+" .as-openbutton { bottom: 100%; left: 40%; }"):i.FloatingBanner.GetPosition(t)===i.Enums.BannerPosition.RightCenter?(o+=e+" .as-openbutton { bottom: 100%; left: -20px; }",i.OpenButton.Div.addClass("as-roundedbottom as-rotate90")):i.FloatingBanner.GetPosition(t)===i.Enums.BannerPosition.TopCenter?(o+=e+" .as-openbutton { top: 100%; left: 40%; }",i.OpenButton.Div.addClass("as-roundedbottom")):i.FloatingBanner.GetPosition(t)===i.Enums.BannerPosition.TopLeft?(o+=e+" .as-openbutton { top: 100%; left: 0; }",i.OpenButton.Div.addClass("as-roundedbottom")):i.FloatingBanner.GetPosition(t)===i.Enums.BannerPosition.TopRight?(o+=e+" .as-openbutton { top: 100%; right: 0; }",i.OpenButton.Div.addClass("as-roundedbottom")):i.FloatingBanner.GetPosition(t)===i.Enums.BannerPosition.BottomLeft?(o+=e+" .as-openbutton { bottom: 100%; left: 0; }",i.OpenButton.Div.addClass("as-roundedtop")):(o+=e+" .as-openbutton { bottom: 100%; right: 0; }",i.OpenButton.Div.addClass("as-roundedtop")),o+=e+" .as-branding { display: block; position: absolute; top: "+i.ZoneBar.VSpace+"px; left: "+i.ZoneBar.VSpace+"px; height: "+(i.ZoneBar.Height-i.ZoneBar.VSpace*2).toString()+"px; width: "+i.ZoneBar.LogoWidth+"px; cursor: pointer; overflow: hidden; text-align: left; }",o+=e+" .as-branding img { display: block; max-height: "+(i.ZoneBar.Height-i.ZoneBar.VSpace*2).toString()+"px; max-width: "+i.ZoneBar.LogoWidth+"px; width: auto; height: auto; }",o+=e+" .as-message { display: inline-block; font-weight: 700; height: "+i.ZoneBar.Height+"px; line-height: "+i.ZoneBar.Height+"px; padding: 0 15px; text-align: center; cursor: default; }",o+=e+" .as-message.right-aligned { float: right; text-align: right; margin-right: "+i.ZoneBar.HSpace+"px; }",o+=i.Branding.Enabled?e+" .as-message.left-aligned { float: left; text-align: left; margin-left: "+i.ZoneBar.LogoWidth+"px; }":e+" .as-message.left-aligned { float: left; text-align: left; margin-left: "+i.ZoneBar.HSpace+"px; }",o+=e+" .asinf-admedia { overflow: hidden; height:"+i.AdMedia.Height+"px; width:"+i.AdMedia.Width+"px; }",o+=e+" .asinf-admediaiframe { display: block; margin: 0 auto; padding: 0; border: none; height:"+i.AdMedia.Height+"px; width:"+i.AdMedia.Width+"px }",o+=e+" .as-loading { display: table-cell; text-align: center; vertical-align: middle; height: "+i.AdMedia.Height+"px; width: "+i.AdMedia.Width+"px }",i.FloatingBanner.Color===i.Enums.Theme.Dark?(o+=i.ZoneBar.Transparent?e+" .as-zonebar { color: #fff; }":e+" .as-zonebar { color: #fff; background-color: #222; }",o+=e+" .as-openbutton { color: #fff; background-color: #444; }",o+=e+" .as-aboutad:hover { color: #fff; background-color: #f18524; }",o+=e+" .as-openbutton:hover { color: #fff; background-color: #f18524; }",o+=e+" .as-closebutton:hover { color: #fff; background-color: #be2433; }",o+=e+" .as-closeicon { "+i.GetXIconCss("aaa","light")+" }",o+=e+" .as-closebutton:hover .as-closeicon { "+i.GetXIconCss("fff","light")+" }",i.ZoneBar.Transparent&&(o+=e+" .as-closebutton, ",o+=e+" .as-aboutad { color: #fff; background-color: #444; }")):(o+=i.ZoneBar.Transparent?e+" .as-zonebar { color: #444; }":e+" .as-zonebar { color: #444; background-color: #fff; }",o+=e+" .as-openbutton { color: #444; background-color: #fff; }",o+=e+" .as-aboutad:hover { color: #fff; background-color: #f18524; }",o+=e+" .as-openbutton:hover { color: #fff; background-color: #f18524; }",o+=e+" .as-closebutton:hover { color: #fff; background-color: #be2433; }",o+=e+" .as-closeicon { "+i.GetXIconCss("444","dark")+" }",o+=e+" .as-closebutton:hover .as-closeicon { "+i.GetXIconCss("fff","light")+" }",i.ZoneBar.Transparent&&(o+=e+" .as-closebutton, ",o+=e+" .as-aboutad { color: #444; background-color: #fff; }")),i.Gutter.Enabled||(o+=e+".transitions { transition: all 0.5s ease-in-out; -moz-transition: all 0.5s ease-in-out; -webkit-transition: all 0.5s ease-in-out; }"),o+=e+" .as-roundedtop { -webkit-border-top-left-radius: 2px; -webkit-border-top-right-radius: 2px;-moz-border-radius-topleft: 2px; -moz-border-radius-topright: 2px; -ms-border-radius-topleft: 2px; -ms-border-radius-topright: 2px; border-top-left-radius: 2px; border-top-right-radius: 2px; }",o+=e+" .as-roundedbottom { -webkit-border-bottom-left-radius: 2px; -webkit-border-bottom-right-radius: 2px;-moz-border-radius-bottomleft: 2px; -moz-border-radius-bottomright: 2px; -ms-border-radius-bottomleft: 2px; -ms-border-radius-bottomright: 2px; border-bottom-left-radius: 2px; border-bottom-right-radius: 2px; }",o+=e+" .as-rotate90 { display : none\\9; -webkit-transform-origin: 0% 100%; -moz-transform-origin: 0% 100%; -ms-transform-origin: 0% 100%; transform-origin: 0% 100%; -webkit-transform: rotate(90deg); -moz-transform: rotate(90deg); -ms-transform: rotate(90deg); transform: rotate(90deg); }",o+="body, html { -ms-overflow-style: scrollbar; }",o+=e+" { z-index: "+i.FloatingBanner.ZIndex+"; }",o+=e+" .asinf-admediaiframe { z-index: 100 }",o+=e+" .as-zonebar { z-index: 101 }",o+=e+" .as-message, ",o+=e+" .as-tooltip { z-index: 102 }",o+=e+" .as-buttoncontainer, ",o+=e+" .as-branding, ",o+=e+" .as-closebutton { z-index: 103 }",o+=e+" .as-openbutton { z-index: 104 }",o+="<\/style>",r(o)},GetXIconCss:function(n,t,r){var u,e,f;return r=typeof r=="undefined"?"center center":r,u="background-position: "+r+"; background-repeat: no-repeat; ",i.Environment.Svg?(n=typeof n=="undefined"?"000000":n,n.substr(0)!=="#"&&(n="#"+n),e=encodeURIComponent("<svg width='100%' height='100%' viewBox='0 0 10 10' preserveAspectRatio='xMinYMid' xmlns='http://www.w3.org/2000/svg'><polygon fill='"+n+"' points='0,2 2,0 5,3 8,0 10,2 7,5 10,8 8,10 5,7 2,10 0,8 3,5' /><\/svg>"),u+='background-image: url("data:image/svg+xml;charset=utf-8,'+e+'"); ',u+="background-size: 50% 50%;"):(f="//www.adsupplymedia.com/_assets/icons/x_ffffff_12x12.png",t==="dark"&&(f="//www.adsupplymedia.com/_assets/icons/x_000000_12x12.png"),u+="background-image: url("+f+"); "),u},GetDimensions:function(){var n,t,u;i.DebugLog("GetDimensions");n=i.TopDom.Window;t="inner";"innerWidth"in n||(t="client",n=i.TopDom.Document.documentElement||i.TopDom.Document.body);i.TopDom.WinHeight=n[t+"Height"];i.TopDom.WinWidth=n[t+"Width"];u=0;i.TopDom.Document.readyState==="complete"&&(u=r(i.TopDom.Document).height());i.TopDom.DocHeight=Math.max(u,i.TopDom.WinHeight,i.TopDom.Document.documentElement.clientHeight);i.TopDom.ScrollTop=r(i.TopDom.Window).scrollTop()},OnResize:function(n){if(i.GetDimensions(),i.Resizing.HasEnaughSpace(n)){i.Gutter.Enabled&&i.Gutter.Relocate(n);i.FloatingBanner.Presented||i.PresentFloatingBanner();i.FloatingBanner.Div.show();return}i.FloatingBanner.Div.hide()},Minimize:function(n){i.DebugLog("Minimize");i.CloseButton.RemoveOnClose?i.AdMedia.Iframe.detach():i.AdMedia.Div.hide();i.FloatingBanner.GetPosition(i.AdMedia)===i.Enums.BannerPosition.RightCenter||i.FloatingBanner.GetPosition(i.AdMedia)===i.Enums.BannerPosition.LeftCenter?i.FloatingBanner.Div.animate({width:0},{duration:200,complete:n}):i.FloatingBanner.Div.animate({height:0},{duration:200,complete:n});i.ZoneBar.Div.hide();i.OpenButton.Div.show()},Maximize:function(){i.DebugLog("Maximize");i.CloseButton.RemoveOnClose?i.AdMedia.Iframe.appendTo(i.AdMedia.Div):i.AdMedia.Div.show();i.OpenButton.Div.hide();i.ZoneBar.Div.show();i.FloatingBanner.GetPosition(i.AdMedia)===i.Enums.BannerPosition.RightCenter||i.FloatingBanner.GetPosition(i.AdMedia)===i.Enums.BannerPosition.LeftCenter?i.FloatingBanner.Div.animate({width:i.AdMedia.Width+"px"},200):i.FloatingBanner.Div.animate({height:i.FloatingBanner.GetHeight()+"px"},200)},IsElementInViewport:function(n){typeof r=="function"&&n instanceof r&&(n=n[0]);var t=n.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(i.TopDom.Window.innerHeight||i.TopDom.Document.documentElement.clientHeight)&&t.right<=(i.TopDom.Window.innerWidth||i.TopDom.Document.documentElement.clientWidth)},Destroy:function(){i.DebugLog("Destroy");i.FloatingBanner.Div.hide();i.CloseButton.RemoveOnClose&&i.FloatingBanner.Div.remove();i.StyleBlock&&i.StyleBlock.remove();r(i.TopDom.Window).off("scroll."+i.FloatingBanner.Id);r(i.TopDom.Window).off("scroll."+i.FloatingBanner.Id+"res");r(i.TopDom.Window).off("resize."+i.FloatingBanner.Id+"res");r(i.TopDom.Window).off("resize."+i.FloatingBanner.Id+"positionoverelement");r(i.TopDom.Window).off("resize."+i.FloatingBanner.Id+"sizedetection")},DebugLog:function(n){i.Environment.Debug&&window.console&&window.console.log&&console.log(n)}};i.Prebid=new fi(i);i.FloatingBanner={GetHeight:function(){return i.ZoneBar.Transparent?i.AdMedia.Height:i.AdMedia.Height+i.ZoneBar.Height}};i.FloatingBanner.Id="g367CB268B1094004A3689751E7AC568FFloatingBanner"+g367CB268B1094004A3689751E7AC568F.counter++;i.FloatingBanner.Div=r("<div><\/div>",{id:i.FloatingBanner.Id,"data-inf-ignore":"true"});i.FloatingBanner.Trigger=s(f,"FloatingBannerDelay",0);i.FloatingBanner.Color=s(f,"Color",1);i.FloatingBanner.isMobile=i.Loader.IsMobile.any(i.TopDom.Window)&&!i.Loader.IsTablet();i.FloatingBanner.TransBg=h(f,"TransBg",!1);i.FloatingBanner.SpecialFx=s(f,"SpecialFx",2,1,6);i.FloatingBanner.MinWinWidth=s(f,"MinWinWidth",0);i.FloatingBanner.AutoClose=h(f,"AutoClose",!1);i.FloatingBanner.AutoCloseTime=s(f,"AutoCloseTime",30);i.FloatingBanner.Presented=!1;i.FloatingBanner.ZIndex=s(f,"FloatingBannerZIndex",2147483647);i.FloatingBanner.GetPosition=function(n){var r=i.Loader.IsMobile.any(i.TopDom.Window)&&!i.Loader.IsTablet(),t;return r&&(t=n.Width+"x"+n.Height,t==="300x50"||t==="300x100"||t==="320x50"||t==="320x100"||t==="320x480")?i.Enums.BannerPosition.BottomCenter:s(f,"FloatingBannerPosition",0)};i.AdMedia={};i.AdMedia.Div=r("<div />",{"class":"asinf-admedia"});i.AdMedia.Div.appendTo(i.FloatingBanner.Div);i.LoadingScreen={};i.LoadingScreen.Enabled=h(f,"LoadingImage",!1);i.LoadingScreen.Src=l(f,"LoadingImageSrc",i.Loader.CDNHost+"/"+(i.FloatingBanner.Color===i.Enums.Theme.Light?"/img/loader_32_light.gif":"/img/loader_32_dark.gif"));i.LoadingScreen.Div=r("<div />",{"class":"as-loading"});i.LoadingScreen.Div.appendTo(i.AdMedia.Div);i.LoadingScreen.Enabled===!0&&r("<img>").appendTo(i.LoadingScreen.Div).attr("src",i.LoadingScreen.Src);i.ZoneBar={};i.ZoneBar.Div=r("<div />",{"class":"as-zonebar"});i.ZoneBar.Position=s(f,"ZoneBarPosition",1,1,2);i.ZoneBar.Transparent=h(f,"ZoneBarTransparent",!1);i.ZoneBar.Height=24;i.ZoneBar.HSpace=8;i.ZoneBar.VSpace=3;i.ZoneBar.FontSize=11;i.ZoneBar.LogoWidth=80;i.ZoneBar.getContainer=function(){return i.ZoneBar.Transparent?i.FloatingBanner.Div:i.ZoneBar.Div};i.ZoneBar.Transparent||(i.ZoneBar.Position===i.Enums.ZoneBarPosition.Bottom?i.ZoneBar.Div.appendTo(i.FloatingBanner.Div):i.ZoneBar.Div.prependTo(i.FloatingBanner.Div));i.Branding={};i.Branding.Enabled=h(f,"BrandingShow",!0);i.Branding.Url=l(f,"BrandingUrl","",!0);i.Branding.Src=l(f,"BrandingSrc","",!0);i.Branding.SrcB=l(f,"BrandingSrcB",i.Branding.Src,!0);!i.Branding.Src&&i.Branding.SrcB&&(i.Branding.Src=i.Branding.SrcB);ei=h(f,"FloatingBannerHideLogo",!1);i.Branding.Src||!i.Environment.ASInstance||ei||(i.Branding.Src=i.DefaultLogo.svg,i.Branding.SrcB=i.DefaultLogo.png,i.Branding.Url=i.DefaultLogo.url);i.Branding.SrcIsSVG=i.Branding.Src.indexOf(".svg")>-1;(!i.Environment.Svg&&i.Branding.SrcIsSVG||i.Environment.HiRes&&!i.Branding.SrcIsSVG)&&(i.Branding.Src=i.Branding.SrcB);i.Branding.Src?(i.Branding.Img=r("<img><\/img>",{src:i.Branding.Src}),i.Branding.Div=r("<div><\/div>",{"class":"as-branding"}).html(i.Branding.Img),i.Branding.Div.hide().appendTo(i.ZoneBar.Div)):i.Branding.Enabled=!1;i.ButtonContainer={};i.ButtonContainer.Div=r("<div />",{"class":"as-buttoncontainer"});i.ButtonContainer.Div.appendTo(i.ZoneBar.getContainer());i.AboutAd={};i.AboutAd.Txt=l(f,"FloatingBannerGetAdText","About this Ad");i.AboutAd.Url=l(f,"FloatingBannerGetAdHref",i.Environment.ASInstance?"http://www.adsupply.com/trythisad/":"",!0);i.AboutAd.Enabled=h(f,"FloatingBannerShowGetAdButton",!1)&&i.AboutAd.Url!=="";i.AboutAd.Div=r("<div />",{"class":"as-aboutad"}).text(i.AboutAd.Txt).attr({title:i.AboutAd.Txt});i.AboutAd.Enabled&&i.AboutAd.Div.css("visibility","hidden").appendTo(i.ButtonContainer.Div);i.Tooltip={};i.Tooltip.Div=r("<div />",{"class":"as-tooltip"});i.Tooltip.Url=l(f,"TooltipUrl","",!0);i.Tooltip.Enabled=i.Environment.ASInstance&&i.AboutAd.Enabled&&i.Tooltip.Url&&h(f,"TooltipShow",!1);i.Tooltip.Iframe=r("<iframe><\/iframe>",{"class":"as-tooltipiframe",scrolling:"no"}).attr("src",i.Tooltip.Url);i.Tooltip.Enabled&&i.AboutAd.Enabled&&(i.Tooltip.Iframe.appendTo(i.Tooltip.Div),i.Tooltip.Div.appendTo(i.AboutAd.Div));i.CloseButton={};i.CloseButton.Type=s(f,"FloatingBannerCloseStyle",1,0,3);i.CloseButton.Enabled=h(f,"FloatingBannerCloseButton",!0);kt=n.AdItems[0];i.CloseButton.RemoveOnClose=h(f,"FloatingBannerRemoveOnClose",!1)||typeof kt.AutoPlayAudio!==undefined&&kt.AutoPlayAudio===!0;i.CloseButton.Delay=s(f,"FloatingBannerCloseDelay",0);i.CloseButton.Txt="Close Ad";i.CloseButton.Div=r("<div />",{"class":"as-closebutton",title:i.CloseButton.Txt,"aria-label":i.CloseButton.Txt,role:"button"}).text(i.CloseButton.Txt);i.CloseButton.Icon=r("<span />",{"class":"as-closeicon"}).appendTo(i.CloseButton.Div);i.CloseButton.Enabled&&i.CloseButton.Div.css("visibility","hidden").appendTo(i.ButtonContainer.Div);i.OpenButton={};i.OpenButton.Txt="Show Ad";i.OpenButton.Div=r("<div />",{"class":"as-openbutton",title:i.OpenButton.Txt,"aria-label":i.OpenButton.Txt,role:"button"}).text(i.OpenButton.Txt);i.OpenButton.Div.hide().appendTo(i.FloatingBanner.Div);i.Message={};i.Message.Enabled=h(f,"MessageShow",!1);i.Message.Txt=l(f,"MessageTxt","Thank you for supporting our sponsor!").substring(0,65);i.Message.Div=r("<div />",i.TopDom.Document).addClass("as-message").text(i.Message.Txt);i.Branding.Enabled?i.CloseButton.Enabled||i.AboutAd.Enabled||i.Message.Div.addClass("right-aligned"):i.Message.Div.addClass("left-aligned");i.Message.Enabled&&i.Message.Div.appendTo(i.ZoneBar.Div);i.FloatingBanner.isMobile&&(i.DebugLog("isMobile Flag is TRUE"),i.CloseButton.Enabled=!0,i.FloatingBanner.SpecialFx=i.Enums.SpecialFx.SlideIn);i.Resizing={GetUnitWidth:function(n){var t=i.Gutter.Enabled?i.Gutter.Margin:0;return n.Width+t*2},GetUnitHeight:function(){var n=i.Gutter.Enabled?i.Gutter.Margin:0;return i.FloatingBanner.GetHeight()+n*2},GetAvailableWidth:function(){return(i.TopDom.WinWidth-i.FloatingBanner.MinWinWidth-i.Resizing.DefaultScrollWidth)/2},GetAvailableHeight:function(){return i.TopDom.WinHeight}};i.Resizing.HasEnaughSpace=function(n){return i.Resizing.GetAvailableWidth()>i.Resizing.GetUnitWidth(n)&&(i.Gutter.Enabled==!0&&i.Resizing.GetAvailableHeight()>i.Resizing.GetUnitHeight()/2+i.Gutter.TopRoom||i.Gutter.Enabled==!1&&i.Resizing.GetAvailableHeight()>i.Resizing.GetUnitHeight())};i.Resizing.Active=!1;i.Resizing.Activate=function(n){if(i.Resizing.Active==!1){r(i.TopDom.Window).on("resize."+i.FloatingBanner.Id+"res",function(){clearTimeout(i.Resizing.Timeout);i.Resizing.Timeout=setTimeout(function(){i.OnResize(n)},200)});i.Resizing.Active=!0}};i.Resizing.DefaultScrollWidth=17;i.Gutter={};i.Gutter.Margin=10;i.Gutter.TopRoom=s(f,"TopRoom",0);i.Gutter.IsScrollCalculated=!1;i.Gutter.CaculateX=function(){return i.FloatingBanner.MinWinWidth<1?i.Gutter.Margin:i.Resizing.GetAvailableWidth()-i.AdMedia.Width-i.Gutter.Margin};i.Gutter.CaculateY=function(){var n=i.TopDom.ScrollTop,u=i.Resizing.GetAvailableHeight()-i.Resizing.GetUnitHeight()>0,t,r;return u?i.TopDom.ScrollTop<i.Gutter.TopRoom?i.Gutter.Margin+i.Gutter.TopRoom-n:i.Gutter.Margin:(t=i.Gutter.TopRoom+i.Resizing.GetUnitHeight()-i.Resizing.GetAvailableHeight(),i.Gutter.IsScrollCalculated==!1&&(i.Gutter.Offset=0,i.Gutter.ScrollMin=i.Gutter.TopRoom,i.Gutter.ScrollMax=t,i.Gutter.IsScrollCalculated=!0),(n<i.Gutter.ScrollMin||n>i.Gutter.ScrollMax)&&(r=n>i.Gutter.ScrollMax?t:i.Gutter.TopRoom,i.Gutter.Offset=Math.max(n-r,0),i.Gutter.ScrollMin=i.Gutter.Offset+i.Gutter.TopRoom,i.Gutter.ScrollMax=i.Gutter.Offset+i.Gutter.TopRoom+i.Resizing.GetUnitHeight()-i.Resizing.GetAvailableHeight()),i.Gutter.Offset-n+i.Gutter.TopRoom+i.Gutter.Margin)};i.Gutter.Relocate=function(n){if(i.FloatingBanner.GetPosition(n)===i.Enums.BannerPosition.GutterRight){i.FloatingBanner.Div.css({top:i.Gutter.CaculateY(),right:i.Gutter.CaculateX()+"px"});return}if(i.FloatingBanner.GetPosition(n)===i.Enums.BannerPosition.GutterLeft){i.FloatingBanner.Div.css({top:i.Gutter.CaculateY(),left:i.Gutter.CaculateX()+"px"});return}};it=function(n,t,i,r,f){this._vastTagAd=t;this._adItem=n;this._zoneResult=r;this._module=f;this._failedToStartEvent=new u;this._finishedEvent=new u;this._startedEvent=new u;var e=new nt(f.Loader.InfinityHost,f.Loader.UaParser.getBrowser(),f.Loader.IsAdblockRequest,f.Loader.DFPImpressionUrl);this._reporting=new v(f.Loader.UaParser,r.DataContextId,e)};it.prototype={getAdItem:function(){return this._adItem},show:function(){function r(){n._module.LoadingScreen.Div.hide();n._module.AdMedia.Div.get(0).style.backgroundColor="black";t.show();n._reporting.trackAuctionWinnerVolume(n.getAdItem(),n._secondBestAdItem,t.getFailedToStartUnmuted());var i=new rt(n._zoneResult,n.getAdItem());n._module.Loader.Lotame.PlaceImpressionPixel(i);n._startedEvent.trigger()}function i(){n._adItem.MediaSourceType==o.MediaSourceType.VideoTag&&n._reporting.trackVideoAdPlayError(n.getAdItem());n._failedToStartEvent.trigger()}var t,n;this._module.AdMedia.Iframe=this._module.AdMedia.Div.find(".inf-vastTagAd-container");t=this._vastTagAd;this._setupViewTracking(t,this.getAdItem());t.setVolumeButtonMode(o.VideoButtonDisplayMode.onHover);t.setAudioMode(o.VideoAudioMode.muted);t.setCloseButtonMode(o.VideoButtonDisplayMode.never);n=this;t.onPlayEnded(function(){t.dispose();t.getAdContainer().removeFromDOM();n._finishedEvent.trigger()});t.awaitAdLoaded(function(){t.play().then(r,i)},i)},onFailedToStart:function(n){this._failedToStartEvent.addHandler(n)},onStarted:function(n){this._startedEvent.addHandler(n)},onFinished:function(n){this._finishedEvent.addHandler(n)},track:function(){this._reporting.trackAuctionWinnerVolume(this.getAdItem(),this._secondBestAdItem,null);var n=new rt(this._zoneResult,this.getAdItem());this._module.Loader.Lotame.PlaceImpressionPixel(n)},_setupViewTracking:function(n,t){var i=this;n.onFirstQuartile(function(){i._reporting.trackViewProgress(t,o.ViewProgress.firstQuartile)});n.onMidpoint(function(){i._reporting.trackViewProgress(t,o.ViewProgress.midpoint)});n.onThirdQuartile(function(){i._reporting.trackViewProgress(t,o.ViewProgress.thirdQuartile)});n.onPlayEnded(function(){i._reporting.trackViewProgress(t,o.ViewProgress.complete)})}};dt=function(n,t,i){this._adItem=n;this._zoneResult=t;this._module=i};dt.prototype={getAdItem:function(){return this._adItem},show:function(){this._module.AttachAdMedia(this._adItem)},onFinished:function(){},track:function(){var n=this._module.Loader.CreateAdUrl(this._zoneResult);r("<iframe><\/iframe>",{src:n,style:"display:none;"}).appendTo(this._module.TopDom.Body)}};gt=function(n,t,i){this._adItem=n;this._zoneResult=t;this._module=i};gt.prototype={getAdItem:function(){return this._adItem},onFinished:function(){},show:function(){this._module.AdMedia.Iframe=r("<iframe><\/iframe>",{"class":"asinf-admediaiframe",scrolling:"no",frameBorder:"0",marginheight:"0",marginwidth:"0",topmargin:"0",leftmargin:"0",allowtransparency:"true"});var n=this._module,t=this;this._module.AdMedia.Iframe.one("load",function(){var i=n.Loader.Utils.getFrameDocument(n.AdMedia.Iframe).document;i&&(n.LoadingScreen.Div.hide(),window.pbjs.renderAd(i,n.Prebid.result.ad),t.track())});this._module.AdMedia.Iframe.appendTo(this._module.AdMedia.Div)},track:function(){var t=r.extend({},zoneResult,this._adItem),n=this._module.Loader.FetchSchemalessTrackingUrl(t);n!=null&&(n=n+"&evtData={hbb:"+this._module.Prebid.result.bid+"}",this._module.Loader.AppendImgPixel(n),this._module.Loader.Lotame.PlaceImpressionPixel(t))}};r(i.TopDom.Body).length?i.Init():r(i.TopDom.Document).ready(function(){i.Init()})}