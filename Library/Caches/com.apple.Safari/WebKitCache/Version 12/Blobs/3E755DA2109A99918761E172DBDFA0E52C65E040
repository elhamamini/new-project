(window.dmpJsonp=window.dmpJsonp||[]).push([["queue_components"],{SVcd:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){var t=function(t){function n(e){i(this,n);var t=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={isStarted:!1,interaction:W,leftOnStartSliding:0,leftOnEndSliding:NaN,callbacksAfterTransition:[],callbackAfterAutoExpand:null,isHovering:!1,isFocused:!1,reason:$,variant:V,priority:X},t.collapse=t.collapse.bind(t),t.expand=t.expand.bind(t),t.collapseAfterDelay=t.collapseAfterDelay.bind(t),t.getLeftWhenExpanded=t.getLeftWhenExpanded.bind(t),t.getLeftWhenSliding=t.getLeftWhenSliding.bind(t),t.killCollapseTimout=t.killCollapseTimout.bind(t),t.setCallbackAfterAutoExpand=t.setCallbackAfterAutoExpand.bind(t),t.onMouseEnter=t.onMouseEnter.bind(t),t.onMouseLeave=t.onMouseLeave.bind(t),t.onFocus=t.onFocus.bind(t),t.onBlur=t.onBlur.bind(t),t}return a(n,t),M(n,[{key:"setCallbackAfterAutoExpand",value:function e(t){this.setState({callbackAfterAutoExpand:t})}},{key:"getWidth",value:function e(){return this.base?this.base.offsetWidth:NaN}},{key:"getLeftWhenExpanded",value:function e(){return-(this.getWidth()-this.props.collapsedOverflow)}},{key:"getLeftWhenCollapsed",value:function e(){return 0}},{key:"getLeftWhenSliding",value:function e(t){var n=0,i=this.getLeftWhenExpanded(t);return Math.max(i,Math.min(0,this.state.leftOnStartSliding+t.offsetX))}},{key:"getTransitionDuration",value:function e(t,n){return t.breakpointHorizontalM!==n.breakpointHorizontalM?"0ms":ee+"ms"}},{key:"isQueueExpandedMoreThanHalfSize",value:function e(t){return this.getLeftWhenSliding(t)-t.collapsedOverflow<=-this.base.offsetWidth/2}},{key:"hasTappedToCollapse",value:function e(t){return t.isMouseUp&&t.deltaTime<=350&&this.state.variant===F&&this.state.interaction===W&&t.currentX>=0&&t.currentX<=t.playerWidth-this.base.offsetWidth}},{key:"hasTappedToExpand",value:function e(t){return t.isMouseUp&&t.deltaTime<=350&&this.state.variant===R&&this.state.interaction===W&&t.currentX>=t.playerWidth-t.collapsedOverflow&&t.currentX<=t.playerWidth&&t.currentY<t.playerHeight-t.seekbarHeight}},{key:"onStartAutoNext",value:function e(t,n){return t.autoplayEnabled&&!t.isLastItem&&!t.upNextDisplayed&&n.upNextDisplayed}},{key:"onCancelAutoNext",value:function e(t,n){return t.autoplayEnabled&&!t.isLastItem&&this.state.variant===F&&t.upNextDisplayed&&!n.upNextDisplayed}},{key:"onAdvertisingPlaying",value:function e(t){return t.adLinearIsRunning||t.adNonLinearIsRunning}},{key:"onAlertDialogDisplayed",value:function e(t){return t.isAlertDialogDisplayed}},{key:"onControlsVisible",value:function e(t){return t.controlsPresent&&t.sequenceStepIsRunning}},{key:"onControlsHidden",value:function e(t){return!t.controlsPresent&&t.sequenceStepIsRunning}},{key:"onStartScreen",value:function e(t,n){return!!n.controlsPresent&&(t.isStartScreen&&t.showOnStartScreen&&this.state.variant===V)}},{key:"getDataOnEndSliding",value:function e(t){var n=this.state.interaction,i=void 0,o=3;return t.deltaX<0&&Math.abs(t.deltaX)>=3?(n=Q,i="slidingRightToLeft"):t.deltaX>=3?(n=C,i="slidingLeftToRight"):this.isQueueExpandedMoreThanHalfSize(t)?(n=Q,i="expandedMoreThanHalfway"):(n=C,i="expandedLessThanHalfway"),{interaction:n,reason:i,priority:U}}},{key:"getDataForDefaultBehaviour",value:function e(t){var n=this.state.interaction,i=$,o=X;return this.state.variant===F?i=$:this.onAlertDialogDisplayed(t)?(n=C,i="onAlertDialogDisplayed"):!1===t.videoHasMetadata?i=$:this.onControlsVisible(t)&&!1!==t.breakpointHorizontalS?(n=C,i="onControlsVisible"):(this.onControlsHidden(t)||!1===t.breakpointHorizontalS)&&(n=q,i="onControlsHidden"),{interaction:n,reason:i,priority:o}}},{key:"getDataBasedOnTimeline",value:function e(t,n){var i=this.state.interaction,o=[],a=$,r=z,s=0;return!1===t.breakpointHorizontalXS?a=$:this.onStartScreen(t,n)&&!1!==t.breakpointHorizontalS?(i=C,a="onStartScreen"):this.onStartAutoNext(t,n)?(i=Q,this.state.callbackAfterAutoExpand&&o.push(this.state.callbackAfterAutoExpand),a="onStartAutoNext"):this.onCancelAutoNext(t,n)?(i=C,a="onCancelAutoNext",s=ne):this.onAdvertisingPlaying(n)&&(i=q,a="onAdvertisingPlaying",r=B),{interaction:i,collapseDelay:s,callbacksAfterTransition:o,reason:a,priority:r}}},{key:"getDataOnNoInteraction",value:function e(t,n){var i=this.getDataBasedOnTimeline(t,n);return i.reason!==$?i:this.getDataForDefaultBehaviour(n)}},{key:"collapseAfterDelay",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X;this.state.priority>=t||this.state.interaction!==H&&this.state.variant!==V&&this.triggerSetState({interaction:C,reason:"collapseAfterDelay",priority:t},ne)}},{key:"collapse",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X;this.state.priority>=t||this.state.interaction!==H&&this.triggerSetState({interaction:C,reason:"collapse",priority:t})}},{key:"expand",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X;this.state.priority>=t||this.state.interaction!==H&&this.triggerSetState({interaction:Q,reason:"expand",priority:t})}},{key:"canInterruptTransition",value:function e(t){var n=t.interaction,i=t.priority,o=this.state.interaction===C||this.state.interaction===Q||this.state.interaction===q;return this.props.enableMouseInteraction?!o||i>=this.state.priority:!o||n!==H&&i>=this.state.priority}},{key:"uselessTransition",value:function e(t){var n=t.interaction,i=t.reason,o=t.priority;if(this.state.interaction===H)return!1;if(i===G||i===Z)return!1;var a=n===C&&this.state.variant===R||n===Q&&this.state.variant===F||n===q&&this.state.variant===V,r=this.state.interaction===n&&o<=this.state.priority;return r||a}},{key:"triggerSetState",value:function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.state.isStarted&&t.reason!==$&&!this.uselessTransition(t)&&this.canInterruptTransition(t)){t.interaction!==W&&this.killCollapseTimout();var o=function e(){ie.log("Setting "+t.interaction+" because "+t.reason),n.setState(t),n.props.transitionStarted(t.interaction),n.runTransitionTimeout(t)};0===i?o():P.a.start(te,i,o)}}},{key:"killCollapseTimout",value:function e(){P.a.stop(te)}},{key:"killTransitionTimeout",value:function e(){P.a.stop(Y)}},{key:"runTransitionTimeout",value:function e(t){var n=this,i=t.interaction,o=t.leftOnEndSliding;if(i===Q||i===C||i===q){this.killTransitionTimeout();var a=function e(){var t=n.state.variant,o=t;i===C?(o=R,t===F&&n.props.dialogDidHide()):i===Q?(o=F,n.props.dialogDidShow()):i===q&&(o=V),n.state.callbacksAfterTransition&&n.state.callbacksAfterTransition.forEach(function(e){e(n.props)});var a=W;n.props.transitionEnded({variant:o,interaction:a}),n.setState({interaction:a,callbacksAfterTransition:[],variant:o,priority:X,reason:$})},r=i===Q&&o===this.getLeftWhenExpanded(this.props),s=i===C&&o===this.getLeftWhenCollapsed(this.props);r||s?setTimeout(a,0):P.a.start(Y,ee,a)}}},{key:"onFocus",value:function e(){this.triggerSetState({isFocused:!0,interaction:Q,reason:J,priority:U})}},{key:"onBlur",value:function e(){this.state.variant!==V&&this.triggerSetState({isFocused:!1,interaction:C,reason:K,priority:U})}},{key:"handleTouchInteractions",value:function e(t){var n=!this.props.isSliding&&t.isSliding,i=this.props.isSliding&&!t.isSliding,o=!t.isSliding,a=this.state,r=a.interaction,s=a.leftOnStartSliding,l=a.leftOnEndSliding,u=$,c=[],p=X,d=0;if(n)r=H,s=this.state.variant===R?0:this.getLeftWhenExpanded(t),u="startSliding",p=U;else if(t.isSliding)r=H,u="isSliding",p=U;else if(i){var f=this.getDataOnEndSliding(t);r=f.interaction,u=f.reason,p=U,l=this.getLeftWhenSliding(this.props)}else if(o)if(this.hasTappedToCollapse(t))u="hasTappedToCollapse",r=C,p=U;else if(this.hasTappedToExpand(t))u="hasTappedToExpand",r=Q,p=U;else{var h=this.getDataOnNoInteraction(this.props,t);u=h.reason,r=h.interaction,p=h.priority,c=h.callbacksAfterTransition||[],d=h.collapseDelay||0,l=NaN}this.triggerSetState({interaction:r,leftOnStartSliding:s,callbacksAfterTransition:c,leftOnEndSliding:l,reason:u,priority:p},d)}},{key:"onMouseEnter",value:function e(){this.triggerSetState({isHovering:!0,interaction:Q,reason:G,priority:U})}},{key:"onMouseLeave",value:function e(){this.triggerSetState({isHovering:!1,interaction:C,reason:Z,priority:U})}},{key:"handleIdleMouse",value:function e(t){var n=this.getDataOnNoInteraction(this.props,t),i=n.interaction,o=n.callbacksAfterTransition,a=void 0===o?[]:o,r=n.collapseDelay,s=void 0===r?0:r,l=n.reason,u=n.priority;this.triggerSetState({interaction:i,callbacksAfterTransition:a,reason:l,priority:u},s)}},{key:"shouldStartExpandCollapse",value:function e(t){var n=t.isStartScreen&&t.showOnStartScreen,i=t.playbackHasPlayedOnce&&t.sequenceIsVideoSlot;return!this.state.isStarted&&(n||i)}},{key:"componentWillReceiveProps",value:function e(t){this.shouldStartExpandCollapse(t)?this.setState({isStarted:!0}):this.props.enableMouseInteraction?!1===this.state.isHovering&&this.handleIdleMouse(t):this.handleTouchInteractions(t)}},{key:"componentDidUpdate",value:function e(t){if(this.state.interaction===W){var n=this.getDataOnNoInteraction(t,this.props),i=n.interaction,o=n.callbacksAfterTransition,a=void 0===o?[]:o,r=n.collapseDelay,s=void 0===r?0:r,l=n.reason,u=n.priority;this.triggerSetState({interaction:i,callbacksAfterTransition:a,reason:l,priority:u},s)}}},{key:"componentWillUnmount",value:function e(){var t=this.state.variant;t===F&&this.props.dialogDidHide()}},{key:"render",value:function t(n){var i=this.state.variant===F||this.state.variant===R;return Object(_.h)(e,N({},n,{expand:this.expand,collapse:this.collapse,collapseAfterDelay:this.collapseAfterDelay,queueInteraction:this.state.interaction,queueVariant:this.state.variant,getLeftWhenSliding:this.getLeftWhenSliding,getLeftWhenExpanded:this.getLeftWhenExpanded,getLeftWhenCollapsed:this.getLeftWhenCollapsed,getLeftWhenHidden:function e(){return n.collapsedOverflow},getTransitionDuration:this.getTransitionDuration,setCallbackAfterAutoExpand:this.setCallbackAfterAutoExpand,onMouseEnter:i?this.onMouseEnter:null,onMouseLeave:i?this.onMouseLeave:null,onFocus:this.onFocus,onFocusLeaveOrEscape:this.onBlur}))}}]),n}(_.Component);return t}function s(e){var t=e.id,n=e.duration,i=void 0===n?300:n,o=e.to,a=e.from,r=e.apply,s=e.done,l=e.cancel,u=e.easing,c=performance.now(),p=u||re.a,d=function e(){var n=(performance.now()-c)/i;n>1&&(n=1);var l=a+(o-a)*p(n);if(r(l,n),1===n)return delete se[t],void(s&&s(l));f.last={pos:l,progress:n},f.timer=window.requestAnimationFrame(e)},f=se[t]={cancel:l,timer:window.requestAnimationFrame(d)};return t}function l(e){return Object.prototype.hasOwnProperty.call(se,e)}function u(e){if(e){var t=se[e];t&&t.timer&&(cancelAnimationFrame(t.timer),t.cancel&&t.cancel(t.last),delete se[e])}}function c(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function k(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function x(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function I(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}function j(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function T(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.r(t);var _=n("ML/J"),D=n("RvJL"),w=n("cGXy"),A=n("t20U"),P=n("eqoT"),L=n("Zrx9"),N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},M=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),C="isCollapsingQueue",Q="isExpandingQueue",q="isHidingQueue",H="isSlidingQueue",W="none",R="collapsed",F="expanded",V="hidden",X=1,z=2,U=3,B=4,$="doNothing",G="onMouseEnter",Z="onMouseLeave",J="onFocus",K="onBlur",Y="queueAnimation",ee=500,te="queueCollapse",ne=3e3,ie=L.default.get("queue"),oe=n("QMHk"),ae=n("0M72"),re=n("6t5Y"),se={},le=n("gtSq"),ue=n("Wac+"),ce=n("B/ez"),pe=n("GWRO"),de=function e(t){var n=5,i=Object(ae.c)(t).height,o=Object(ae.b)(t),a=(o-i)/2;return 5+a+i},fe=function e(t){return{height:de(t)}},he=function e(t){var n=t.height;return Object(_.h)("div",{style:{position:"absolute","pointer-events":"auto",left:0,right:0,bottom:0,height:n}})},ye=Object(pe.connect)(fe)(he),ge=n("DQBM"),ve=n("1yd+"),be=n("kPZp"),me=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Oe=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Se=function e(t,n,i){var o=1,a=1*t.offsetHeight,r={root:n,rootMargin:"0px 0px "+a+"px 0px",threshold:0},s=new IntersectionObserver(function(e){e[0].isIntersecting&&(s.unobserve(t),i())},r);return s.observe(t),function(){s.disconnect()}},ke=function(e){function t(e){p(this,t);var n=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isIntersecting:!1},n}return f(t,e),Oe(t,[{key:"componentDidMount",value:function e(){var t=this;if(Object(be.supportsIntersectionObserver)()){var n=this.props.intersectionGetRootElement(this.base),i=this.props.intersectionGetTargetElement(n);this.intersectingRemoveListener=Se(i,n,function(){t.props.intersectionCallback&&t.props.intersectionCallback(),t.setState({isIntersecting:!0})})}else this.setState({isIntersecting:!0})}},{key:"componentWillUnmount",value:function e(){this.intersectingRemoveListener&&this.intersectingRemoveListener()}},{key:"render",value:function e(t){var n=t.src,i=c(t,["src"]);return Object(_.h)("img",me({src:this.state.isIntersecting?n:void 0},i))}}]),t}(_.Component),xe=n("oaGx"),Ie=n("gaXf"),je=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Te=L.default.get("queue"),_e=Object(xe.a)({sequenceStepIsEnded:ce.g,roundedRemainingTime:ae.I,isUpNextReady:ae.z,isUpNextDisplayed:ae.y,isQueueAutoplayEnabled:ae.q,isStartScreen:ae.x,settingsControls:Ie.d,queueIsScrolling:ue.k}),De=function e(t,n){var i=t.headerHeight,o=t.isMiniQueue,a=t.isFirstItem,r=t.isLastItem,s=o?16:20,l=i>0?Math.abs(s-i):0,u=s+l,c=(o?55:85)+l,p=(o?58:88)+l,d=(o?44:69)+l;return{styleItem:Ee({},n.styleItem,{"padding-right":o?16:20,"padding-left":o?16:20,"padding-top":a?u:8,"padding-bottom":r?o?16:20:8}),styleLabel:Ee({},n.styleLabel,{left:o?22:27,top:a?c:o?46:75}),styleDuration:Ee({},n.styleDuration,{top:a?p:o?49:78}),styleImage:Ee({},n.styleImage,{height:o?59:90,width:o?149:225}),styleShadow:Ee({},n.styleShadow,{height:o?30:40,left:o?17:21,top:a?d:o?36:57,width:o?147:223})}},we=function(e){function t(e){h(this,t);var n=y(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.updateResponsiveStyles=n.updateResponsiveStyles.bind(n),n.setCurrentNextStyles=n.setCurrentNextStyles.bind(n),n.state=De(e,n.state),n}return g(t,e),je(t,[{key:"updateResponsiveStyles",value:function e(t){this.setState(Ee({},De(t,this.state),this.setTransitionStyles(t)))}},{key:"setCurrentNextStyles",value:function e(t){var n=t.isCurrentItem,i=t.isNextItem;this.setState({styleItem:Ee({},this.state.styleItem,{cursor:n?"default":""}),styleDuration:Ee({},this.state.styleDuration,{"text-shadow":n||i?"none":"0 0 3px black"}),styleShadow:Ee({},this.state.styleShadow,{opacity:n||i?1:0})})}},{key:"setTransitionStyles",value:function e(t){var n="expanded"===t.styleVariant?1:0;this.setState({styleLabel:Ee({},this.state.styleLabel,{opacity:n}),styleImage:Ee({},this.state.styleImage,{"border-color":"expanded"===t.styleVariant?"transparent":"#fff","transition-delay":0,"box-shadow":"expanded"===t.styleVariant?"none":"0 0 10px rgba(0,0,0,0.5)"}),styleTitle:{opacity:n,transition:this.state.styleTitle&&this.state.styleTitle.opacity===n?void 0:"opacity 500ms"}})}},{key:"componentDidMount",value:function e(){this.updateResponsiveStyles(this.props),this.setCurrentNextStyles(this.props)}},{key:"componentWillReceiveProps",value:function e(t){if(!t.settingsControls)return!1;!this.props.sequenceStepIsEnded&&t.sequenceStepIsEnded&&this.props.isNextItem&&this.props.isQueueAutoplayEnabled&&this.props.autoNext(this.props.item.xid,this.props.index),this.props.isMiniQueue!==t.isMiniQueue&&this.updateResponsiveStyles(t),this.props.isCurrentItem===t.isCurrentItem&&this.props.isNextItem===t.isNextItem||this.setCurrentNextStyles(t),this.props.styleVariant!==t.styleVariant&&this.setTransitionStyles(t)}},{key:"render",value:function e(t,n){var i=t.item,o=t.index,a=t.onClick,r=t.onEscape,s=t.isUpNextReady,l=t.isUpNextDisplayed,u=t.roundedRemainingTime,c=t.isQueueAutoplayEnabled,p=t.tabIndex,d=t.isCurrentItem,f=t.isNextItem,h=t.isStartScreen,y=t.queueIsScrolling,g=n.styleItem,v=n.styleLabel,b=n.styleDuration,m=n.styleImage,O=n.styleShadow,S=n.styleTitle,k=d?"np_DialogQueue-item--now":"",x=f?"np_DialogQueue-item--next":"",I=f&&s&&c?"np_DialogQueue-item--autonext":"";return Object(_.h)("button",{className:"np_DialogQueue-item "+k+" "+x+" "+I,onClick:function e(){return a(i.xid,o)},tabIndex:p,style:g,disabled:d,onKeyDown:function e(t){"Escape"===t.key&&r()}},!h&&d?Object(_.h)("p",{className:"np_DialogQueue-label np_DialogQueue-label--now",style:v},ve.a.__("neon:::Playing now")):!h&&c&&f?Object(_.h)("p",{className:"np_DialogQueue-label np_DialogQueue-label--next",style:v},ve.a.__("neon:::Playing next"),l&&!1===y?Object(_.h)("span",{role:"timer"}," ",ve.a.__("neon:::%seconds%s",{seconds:u})):""):"",Object(_.h)("p",{className:"np_DialogQueue-item-title",style:S},i.title),i.duration>0?Object(_.h)("p",{"aria-label":ve.a.__("neon:::Duration: %time%",{time:Object(ge.a)(i.duration)}),className:"np_DialogQueue-item-duration",style:b},Object(ge.c)(i.duration)):"",Object(_.h)(ke,{intersectionGetRootElement:function e(){return document.querySelector(".np_dialog-body")},intersectionGetTargetElement:function e(t){return t.querySelector("li[data-video-id="+i.xid+"]")},intersectionCallback:function e(){Te.log("load "+i.thumbnailURL+" because intersected")},src:i.thumbnailURL,alt:"",className:"np_DialogQueue-item-image",style:m}),Object(_.h)("div",{className:"np_DialogQueue-item-shadow",style:O}))}}]),t}(_.Component),Ae=Object(pe.connect)(_e)(we),Pe=function e(t){var n=Object(ae.c)(t).height,i=Object(ae.K)(t),o=(i-n)/2;return o+n},Le=function e(t){return{height:Pe(t)}},Ne=function e(t){var n=t.height;return Object(_.h)("div",{style:{position:"absolute","pointer-events":"auto",left:0,right:0,top:0,height:n}})},Me=Object(pe.connect)(Le)(Ne),Ce=n("hpht"),Qe=n("1BAb"),qe=n("zDni"),He=n("tD3l"),We=n("22dD"),Re=n("7pLO"),Fe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ve=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Xe=Object(be.supportsTouchEvents)(),ze=45,Ue=function e(t){var n=Object(ue.t)(t),i=Object(ue.c)(t),o=Object(ue.q)(t),a=Object(ue.n)(t);return{currentIndex:i,breakpointVerticalXL:Object(A.f)(t),breakpointHorizontalM:Object(A.a)(t),breakpointHorizontalXS:Object(A.c)(t),breakpointHorizontalS:Object(A.b)(t),playerWidth:Object(A.n)(t),playerHeight:Object(A.j)(t),seekbarHeight:5,upNextDisplayed:Object(ae.y)(t),autoplayEnabled:Object(ae.q)(t),isLastItem:i===n.length-1,collapsedOverflow:Object(ae.F)(t),items:n,someModalIsOpened:Object(ae.J)(t),isUpNextReady:Object(ae.z)(t),isAlertDialogDisplayed:Object(ae.h)(t),controlsPresent:Object(qe.e)(t),sequenceStepIsRunning:Object(ce.i)(t),adLinearIsRunning:Object(Ce.f)(t),adNonLinearIsRunning:Object(Qe.c)(t),playbackHasPlayedOnce:Object(Re.d)(t),sequenceIsVideoSlot:Object(ce.e)(t),isStartScreen:Object(ae.x)(t),showOnStartScreen:Object(ue.o)(t),queueIsPlaylist:o,queueHasTitle:o&&a,playlistTitle:a,videoHasMetadata:Object(He.f)(t)}},Be=function e(t){var n=function e(){return t(Object(le.G)())},i=function e(){return t(Object(le.F)())},o=function e(n,i){t(Object(le.M)(n)),t(Object(le.ab)(n,i,w.USER))},a=function e(n,i){t(Object(le.M)(n)),t(Object(le.ab)(n,i,w.PROGRAMMATIC))},r=function e(){t(Object(le.S)())};return{dialogDidShow:n,dialogDidHide:i,transitionEnded:function e(){return t(le.U.apply(void 0,arguments))},transitionStarted:function e(){return t(le.V.apply(void 0,arguments))},scrollQueueFromManualNext:o,scrollQueueFromAutoNext:a,scrollQueueEnded:function e(){t(Object(le.L)()),t(Object(le.Z)())},loadPageNext:r}},$e=function e(t,n,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a={root:n,rootMargin:"0px 0px "+o+"px 0px",threshold:0},r=new IntersectionObserver(function(e){e[0].isIntersecting&&(r.unobserve(t),i())},a);return r.observe(t),function(){r.disconnect()}},Ge=function(e){function t(e){v(this,t);var n=b(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setScrollTop=n.setScrollTop.bind(n),n.updateScrollPosition=n.updateScrollPosition.bind(n),n.skipQueue=n.skipQueue.bind(n),n.onFocusEnter=n.onFocusEnter.bind(n),n.onEscape=n.onEscape.bind(n),n.triggerManualNext=n.triggerManualNext.bind(n),n.triggerAutoNext=n.triggerAutoNext.bind(n),n.getTargetScrollPos=n.getTargetScrollPos.bind(n),n.state={style:{transform:"translateX("+e.getLeftWhenHidden()+"px)","transition-duration":"500ms","pointer-events":"none",background:"rgba(0,0,0,0)"}},n}return m(t,e),Ve(t,[{key:"setBackgroundStyle",value:function e(t){return"rgba(0,0,0,"+t+")"}},{key:"setTransformStyle",value:function e(t){return"translate3d("+Math.round(t)+"px, 0, 0)"}},{key:"computeDynamicStyles",value:function e(t){var n={};return t.queueInteraction===H?n={transform:this.setTransformStyle(t.getLeftWhenSliding(t)),"transition-duration":"0ms","pointer-events":"none",background:this.setBackgroundStyle(.7)}:t.queueInteraction===Q?n={transform:this.setTransformStyle(t.getLeftWhenExpanded(t)),"transition-duration":t.getTransitionDuration(this.props,t),"pointer-events":t.enableMouseInteraction?"auto":"none",background:this.setBackgroundStyle(.7)}:t.queueInteraction===C?n={transform:this.setTransformStyle(t.getLeftWhenCollapsed(t)),"transition-duration":t.getTransitionDuration(this.props,t),"pointer-events":"none",background:this.setBackgroundStyle(0)}:t.queueInteraction===q?n={transform:this.setTransformStyle(t.getLeftWhenHidden(t)),"transition-duration":t.getTransitionDuration(this.props,t),"pointer-events":"none",background:this.setBackgroundStyle(0)}:t.queueVariant===R?n=Fe({},this.state.style,{"pointer-events":t.enableMouseInteraction?"auto":"none",background:this.setBackgroundStyle(0),"transition-duration":t.getTransitionDuration(this.props,t)}):t.queueVariant===F&&(n=Fe({},this.state.style,{"pointer-events":"auto",background:this.setBackgroundStyle(.7),"transition-duration":t.getTransitionDuration(this.props,t),transform:this.setTransformStyle(t.getLeftWhenExpanded(t))})),n}},{key:"cancelScrollAnimation",value:function e(){}},{key:"doEndAction",value:function e(){this.props.scrollQueueEnded(),this.props.collapseAfterDelay(z)}},{key:"getTopTarget",value:function e(t,n){var i=t.queueIsPlaylist,o=t.breakpointVerticalXL,a=i||o;return a?this.refQueueItems[n]:this.refQueueItems[n+1]}},{key:"getTargetScrollPos",value:function e(t,n){var i=t.offsetTop-n,o=t.offsetTop-45;return this.props.queueHasTitle?o:i}},{key:"setScrollTop",value:function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.targetPosition,o=n.animate,a=n.doEndAction,r=n.duration,c=void 0===r?500:r;if(!o)return this.scrollZone.scrollTop=i,void(a&&this.doEndAction());s({id:"queue-scroll",from:this.scrollZone.scrollTop,to:i,duration:c,apply:function e(n){t.scrollZone.scrollTop=n},done:function e(){a&&t.doEndAction()}}),this.cancelScrollAnimation=function(){l("queue-scroll")&&(u("queue-scroll"),a&&t.props.scrollQueueEnded())}}},{key:"componentWillUnmount",value:function e(){this.cancelScrollAnimation(),this.uninstallFocusLeave()}},{key:"updateScrollPosition",value:function e(t){var n=t.index,i=t.animate,o=void 0===i||i,a=t.doEndAction,r=this.getTopTarget(this.props,n);if(r){var s=parseInt(getComputedStyle(r,null).paddingTop,10)||0;this.setScrollTop({targetPosition:this.getTargetScrollPos(r,s),animate:o,doEndAction:a})}else this.props.scrollQueueEnded()}},{key:"skipQueue",value:function e(){var t=this;this.props.collapse(U),setTimeout(function(){var e=Object(oe.a)({from:t.base,skipChildren:!0,predicate:oe.m});e&&e.focus()})}},{key:"uninstallFocusLeave",value:function e(){var t=this.untrackFocusLeave;t&&(this.untrackFocusLeave=null,t())}},{key:"onFocusEnter",value:function e(){var t=this;this.uninstallFocusLeave(),this.untrackFocusLeave=Object(We.a)(this.base,function(){t.onFocusLeave()}),this.props.onFocus()}},{key:"onFocusLeave",value:function e(){this.props.onFocusLeaveOrEscape()}},{key:"onEscape",value:function e(){this.props.onFocusLeaveOrEscape()}},{key:"triggerManualNext",value:function e(t,n){n!==this.props.currentIndex&&(this.props.scrollQueueFromManualNext(t,n),Xe&&this.props.collapseAfterDelay(z))}},{key:"triggerAutoNext",value:function e(t,n){this.props.scrollQueueFromAutoNext(t,n)}},{key:"getStyleVariant",value:function e(t,n){return t===Q?"expanded":t===C?"collapsed":n}},{key:"componentWillMount",value:function e(){this.refQueueItems=[]}},{key:"componentDidMount",value:function e(){var t=this,n=this.refQueueItems[this.refQueueItems.length-1];n&&$e(n,this.scrollZone,function(){t.props.loadPageNext()});var i=this.getTopTarget(this.props,0),o=parseInt(getComputedStyle(i,null).paddingTop,10)||0,a=this.getTargetScrollPos(i,o);this.setScrollTop({targetPosition:a,animate:!1,doEndAction:!1}),this.props.setCallbackAfterAutoExpand(function(e){t.updateScrollPosition({index:e.currentIndex,doEndAction:!1})}),this.base.addEventListener("focus",this.onFocusEnter,!0)}},{key:"componentWillReceiveProps",value:function e(t){this.setState({style:this.computeDynamicStyles(t)})}},{key:"componentDidUpdate",value:function e(t){var n=this,i=this.props,o=i.items&&i.items.length&&t.currentIndex!==i.currentIndex,a=t.items&&t.items.length<i.items.length;if(a){var r=this.refQueueItems[this.refQueueItems.length-1];r&&$e(r,this.scrollZone,function(){n.props.loadPageNext()})}o?this.updateScrollPosition({index:i.currentIndex,animate:!0,doEndAction:!0}):i.breakpointVerticalXL!==t.breakpointVerticalXL?this.updateScrollPosition({index:i.currentIndex,animate:!0,doEndAction:!1}):i.breakpointHorizontalM!==t.breakpointHorizontalM&&this.updateScrollPosition({index:i.currentIndex,animate:!0,doEndAction:!1})}},{key:"render",value:function e(t,n){var i=this,o=t.items,a=t.queueVariant,r=t.currentIndex,s=t.isAlertDialogDisplayed,l=t.isInteractionEnabled,u=t.playerWidth,c=t.enableMouseInteraction,p=t.breakpointHorizontalM,d=t.getLeftWhenHidden,f=t.queueInteraction,h=t.onMouseEnter,y=t.onMouseLeave,g=t.onRef,v=t.queueHasTitle,b=t.playlistTitle,m=n.style,O=a===V,S=c&&a!==F&&f!==Q;return Object(_.h)("div",{className:"np_Queue",style:{zIndex:s?1:void 0,left:u-d(this.props),"pointer-events":l?"auto":"none"}},Object(_.h)("div",{className:"np_dialog np_DialogQueue np_DialogQueue--"+this.getStyleVariant(f,a),role:"dialog","aria-label":ve.a.__("neon:::Playing next queue"),style:m,ref:g,onMouseEnter:c?h:null,onMouseLeave:c?y:null},v?Object(_.h)("div",{className:"np_DialogQueue-header",style:{height:45}},Object(_.h)("div",{id:"np_DialogQueue-title",className:"np_dialog-title np_DialogQueue-title"},b)):null,Object(_.h)("button",{"aria-label":ve.a.__("neon:::Skip queue"),tabIndex:O?-1:null,title:ve.a.__("neon:::Skip queue"),className:"np_button np_skip",onClick:this.skipQueue,onKeyDown:function e(t){"Escape"===t.key&&"expanded"===a&&i.onEscape()}},ve.a.__("neon:::Skip queue")),Object(_.h)("div",{className:"np_dialog-body",ref:function e(t){i.scrollZone=t}},Object(_.h)("ul",{className:"np_DialogQueue-list"},o.map(function(e,t){return Object(_.h)("li",{className:"np_DialogQueue-list-item","data-video-id":e.xid},Object(_.h)(Ae,{item:e,ref:function e(n){i.refQueueItems[t]=n?n.base:void 0},index:t,onClick:i.triggerManualNext,onEscape:i.onEscape,autoNext:i.triggerAutoNext,tabIndex:O?-1:null,isMiniQueue:!1===p,isFirstItem:0===t,isLastItem:t===o.length-1,headerHeight:v?45:0,isCurrentItem:r===t,isNextItem:r+1===t,styleVariant:i.getStyleVariant(f,a)}))}))),S?Object(_.h)(Me,null):null,S?Object(_.h)(ye,null):null))}}]),t}(_.Component),Ze=Object(pe.connect)(Ue,Be)(r(Ge)),Je='\n  query playerQueueQuery($videoId: String!, $page: Int!, $videoPerPage: Int!) {\n    player(videoXid: $videoId) {\n      queue {\n        hasAutoPlayNext\n        name\n        videos(page:$page,first:$videoPerPage) {\n          edges { node { ...fields } }\n        }\n      }\n    }\n    video(xid: $videoId) { ...fields }\n  }\n  fragment fields on Video { title xid duration thumbnailURL(size: "x120") }\n',Ke='\nquery playerQueueQuery($videoId: String!, $page: Int!, $videoPerPage: Int!) {\n  player(videoXid: $videoId) {\n    queue {\n      hasAutoPlayNext\n      name\n      videos(page:$page,first:$videoPerPage) {\n        edges { node { ...fields } }\n      }\n    }\n  }\n}\nfragment fields on Video { title xid duration thumbnailURL(size: "x120") }\n',Ye='\n  query playerPlaylistQueueQuery($playlistId: String!, $page: Int!, $videoPerPage: Int!) {\n    collection(xid: $playlistId) {\n      name\n      videos(page:$page,first:$videoPerPage) {\n        edges { node { ...fields } }\n      }\n    }\n  }\n  fragment fields on Video { title xid duration thumbnailURL(size: "x120") }\n',et=n("znKg"),tt=n.n(et),nt=n("5KHe"),it=n("vDqi"),ot=n.n(it),at=n("i/kS"),rt=n.n(at),st=n("Hp9M"),lt=n.n(st),ut=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ct=L.default.get("GraphQL"),pt=ot.a.CancelToken,dt=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=pt.source();return{cancel:i.cancel,run:function e(){return ft(i).then(function(e){return yt(i,t,n,e)})}}},ft=function e(t){var n=lt.a.get("access_token");if(n)return ct.log("Found access_token"),Promise.resolve(n);var i=lt.a.get("refresh_token");if(i)return ct.log("Refreshing access_token"),ht(t,{grant_type:"refresh_token",refresh_token:i},"access_token");var o=lt.a.get("client_token");return o?(ct.log("Found client_token"),Promise.resolve(o)):(ct.log("Fetching client_token"),ht(t,{grant_type:"client_credentials",scope:rt.a.context("api.client_scope")},"client_token"))},ht=function e(t,n,i){var o=ut({client_id:rt.a.context("api.client_id"),client_secret:rt.a.context("api.client_secret")},n);return ot()({method:"post",url:rt.a.context("api.auth_url"),headers:ut({"Content-Type":"application/x-www-form-urlencoded"},gt()),data:Object.keys(o).map(function(e){return e+"="+o[e]}).join("&"),cancelToken:t.token}).then(function(e){var t=new Date(Date.now()+1e3*e.data.expires_in);return ct.log("Got "+i+" (will expire "+t.toString()+")"),lt.a.set(i,e.data.access_token,{expires:e.data.expires_in,path:"/"}),e.data.access_token}).catch(function(e){var t="Token fetching failed ("+e.message+")";throw ct.warn(t),new Error(t)})},yt=function e(t,n,i,o){var a={query:vt(n),variables:i},r=gt();return ct.log("Querying Graph API",a,r),ot()({method:"post",url:rt.a.context("api.url"),headers:ut({"Content-Type":"application/json",Authorization:"Bearer "+o},r),data:JSON.stringify(a),cancelToken:t.token}).then(function(e){var t=e.data.errors&&e.data.errors.length>0;if(ct.log("Graph query "+(t?"errored":"responded"),e.data),t)throw new Error(e.data.errors[0].message);return e.data.data}).catch(function(e){if(!ot.a.isCancel(e))throw ct.warn("Graph query errored",e),e;var t="Graph query cancelled";throw ct.warn(t),new Error(t)})},gt=function e(){var t=rt.a.getExternalNeonInfo(),n=t.info&&t.info.app?t.info.app:{},i={"X-DM-AppInfo-Id":n.id,"X-DM-AppInfo-Type":n.type,"X-DM-AppInfo-Version":n.version,"X-DM-PlayerInfo-Version":rt.a.context("player_version"),"X-DM-PlayerInfo-Embedder":rt.a.getEmbedder(),"X-DM-VisitorInfo-Onsite":rt.a.isOnsite()?"1":"0"},o={};return Object.keys(i).forEach(function(e){"string"==typeof i[e]&&i[e].length>0&&(o[e]=i[e])}),o},vt=function e(t){return t.replace(/\n/g," ").replace(/ {2,}/g," ")},bt=dt,mt=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Ot=L.default.get("Queue"),St=10,kt=30,xt=function e(t,n,i,o){if("playlist"===n){var a=t.collection.videos.edges.map(function(e){var t=e.node;return t});return{name:t.collection.name,hasAutoPlayNext:!0,videos:a,hasNextPage:a.length===o}}var r=t.player.queue.videos.edges.map(function(e){var t=e.node;return t});return{name:t.player.queue.name,hasAutoPlayNext:t.player.queue.hasAutoPlayNext,videos:1===i?[t.video].concat(x(r)):r,hasNextPage:r.length===o}},It=function(e){function t(){return O(this,t),S(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),mt(t,[{key:"start",value:function e(t){var n=this,i=void 0,o=function e(t,o){var a=t.accessId,r=t.page;i&&i.cancel();var s=n.select(ue.p),l=void 0,u=void 0;if("playlist"===s){var c=n.select(ue.r);l=30,u=bt(Ye,{playlistId:c,page:r,videoPerPage:l})}else l=10,u=1===r?bt(Je,{videoId:a,page:1,videoPerPage:l}):bt(Ke,{videoId:a,page:r,videoPerPage:l});i=u,o(Object(le.T)()),Ot.log("queue load started",{accessId:a,page:r}),u.run().then(function(e){i=null;var t=xt(e,s,r,l),n=t.name,u=t.hasAutoPlayNext,c=t.videos,p=t.hasNextPage;o(Object(le.Q)({name:n,hasAutoPlayNext:u,videos:c,page:r,hasNextPage:p})),Ot.log("queue load ended",{accessId:a,page:r})},function(e){i=null,e&&"Graph query cancelled"===e.message?(o(Object(le.P)()),Ot.log("queue load cancelled",{accessId:a,page:r})):(o(Object(le.R)({error:e.message})),Ot.log("queue load errored",{accessId:a,page:r},e.message))})},a=function e(t){var i=t.refreshQueue;i&&n.on(tt.a.VIDEO_SELECTED,r)},r=function e(t,i){n.off(tt.a.VIDEO_SELECTED,e),o({accessId:n.select(He.b),page:1},i)},s=function e(t,i){var a=n.select(ue.f);a&&o({accessId:n.select(He.b),page:n.select(ue.m)+1},i)};this.on(nt.I,s),this.on(tt.a.LOAD_VIDEO,a),this.stop=function(){i&&i.cancel(),n.off(tt.a.LOAD_VIDEO,a),n.off(tt.a.VIDEO_SELECTED,r),n.off(nt.I,s)};var l=this.select(He.b);l&&o({accessId:l,page:1},t)}}]),t}(D.a),jt=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Et=Object(xe.a)({isQueueAttached:ae.p}),Tt=function(e){function t(){return j(this,t),E(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return T(t,e),jt(t,[{key:"componentWillMount",value:function e(){Object(D.c)(It)}},{key:"componentWillUnmount",value:function e(){Object(D.d)(It)}},{key:"render",value:function e(t){var n=t.isQueueAttached,i=I(t,["isQueueAttached"]);return n?Object(_.h)(Ze,i):null}}]),t}(_.Component),_t=Object(pe.connect)(Et)(Tt),Dt=t.default={ContainerDialogQueue:_t}}}]);